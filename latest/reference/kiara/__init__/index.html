
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the Kiara project">
      
      
        <meta name="author" content="Markus Binsteiner">
      
      
        <link rel="canonical" href="https://dharpa.org/kiara/latest/reference/kiara/__init__/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.5">
    
    
      
        <title>kiara - Kiara</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.2d9f7617.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kiara" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Kiara" class="md-header__button md-logo" aria-label="Kiara" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kiara
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              kiara
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/DHARPA-Project/kiara/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Kiara" class="md-nav__button md-logo" aria-label="Kiara" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Kiara
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/DHARPA-Project/kiara/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../install/" class="md-nav__link">
        Install
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../architecture/">Architecture</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Architecture" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Architecture
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/assumptions/" class="md-nav__link">
        Assumptions & considerations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/decisions/" class="md-nav__link">
        Decisions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/metadata/" class="md-nav__link">
        Metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../architecture/data/">Data</a>
          
            <label for="__nav_3_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Data" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/data/data_centric_approach/" class="md-nav__link">
        Data centric approach
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/data/data_formats/" class="md-nav__link">
        Data formats
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/data/dev/" class="md-nav__link">
        Dev
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/data/persistence/" class="md-nav__link">
        Data persistence
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/data/requirements/" class="md-nav__link">
        Requirements
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" type="checkbox" id="__nav_3_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../architecture/workflows/">Workflows</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Workflows" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Workflows
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5_1" type="checkbox" id="__nav_3_5_1" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../architecture/workflows/modularity/modularity/">Modularity</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Modularity" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_5_1">
          <span class="md-nav__icon md-icon"></span>
          Modularity
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/workflows/modularity/modularity_2/" class="md-nav__link">
        Modularity 2
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Value types
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Value types" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Value types
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../value_types/any/" class="md-nav__link">
        any
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../value_types/deserialize_config/" class="md-nav__link">
        deserialize_config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../value_types/load_config/" class="md-nav__link">
        load_config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../value_types/value_info/" class="md-nav__link">
        value_info
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../value_types/value_lineage/" class="md-nav__link">
        value_lineage
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Modules
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Modules" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Modules
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../modules/metadata/" class="md-nav__link">
        metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../modules/value/" class="md-nav__link">
        value
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Operation types
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Operation types" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Operation types
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation_types/all/" class="md-nav__link">
        all
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation_types/calculate_hash/" class="md-nav__link">
        calculate_hash
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation_types/create/" class="md-nav__link">
        create
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation_types/export/" class="md-nav__link">
        export
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation_types/extract_metadata/" class="md-nav__link">
        extract_metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation_types/import/" class="md-nav__link">
        import
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation_types/pretty_print/" class="md-nav__link">
        pretty_print
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation_types/sample/" class="md-nav__link">
        sample
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation_types/serialize/" class="md-nav__link">
        serialize
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../operation_types/store_value/" class="md-nav__link">
        store_value
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          API docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          API docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1" type="checkbox" id="__nav_7_1" checked>
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index md-nav__link--active">
          <a href="./">kiara</a>
          
            <label for="__nav_7_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="kiara" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_1">
          <span class="md-nav__icon md-icon"></span>
          kiara
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        config
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2" type="checkbox" id="__nav_7_1_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../data/__init__/">data</a>
          
            <label for="__nav_7_1_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="data" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_2">
          <span class="md-nav__icon md-icon"></span>
          data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2_1" type="checkbox" id="__nav_7_1_2_1" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../data/onboarding/__init__/">onboarding</a>
          
        </div>
      
      <nav class="md-nav" aria-label="onboarding" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_2_1">
          <span class="md-nav__icon md-icon"></span>
          onboarding
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data/onboarding/batch/" class="md-nav__link">
        batch
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2_2" type="checkbox" id="__nav_7_1_2_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../data/registry/__init__/">registry</a>
          
        </div>
      
      <nav class="md-nav" aria-label="registry" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_2_2">
          <span class="md-nav__icon md-icon"></span>
          registry
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data/registry/store/" class="md-nav__link">
        store
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2_3" type="checkbox" id="__nav_7_1_2_3" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../data/types/__init__/">types</a>
          
            <label for="__nav_7_1_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="types" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_2_3">
          <span class="md-nav__icon md-icon"></span>
          types
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data/types/core/" class="md-nav__link">
        core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data/types/type_mgmt/" class="md-nav__link">
        type_mgmt
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2_4" type="checkbox" id="__nav_7_1_2_4" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../data/values/__init__/">values</a>
          
        </div>
      
      <nav class="md-nav" aria-label="values" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_2_4">
          <span class="md-nav__icon md-icon"></span>
          values
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data/values/value_set/" class="md-nav__link">
        value_set
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../defaults/" class="md-nav__link">
        defaults
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_4" type="checkbox" id="__nav_7_1_4" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../doc/__init__/">doc</a>
          
            <label for="__nav_7_1_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="doc" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_4">
          <span class="md-nav__icon md-icon"></span>
          doc
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../doc/gen_info_pages/" class="md-nav__link">
        gen_info_pages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../doc/generate_api_doc/" class="md-nav__link">
        generate_api_doc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../doc/mkdocs_macros_cli/" class="md-nav__link">
        mkdocs_macros_cli
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../doc/mkdocs_macros_kiara/" class="md-nav__link">
        mkdocs_macros_kiara
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_4_5" type="checkbox" id="__nav_7_1_4_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../doc/mkdocstrings/__init__/">mkdocstrings</a>
          
            <label for="__nav_7_1_4_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="mkdocstrings" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_4_5">
          <span class="md-nav__icon md-icon"></span>
          mkdocstrings
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../doc/mkdocstrings/collector/" class="md-nav__link">
        collector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../doc/mkdocstrings/handler/" class="md-nav__link">
        handler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../doc/mkdocstrings/renderer/" class="md-nav__link">
        renderer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_5" type="checkbox" id="__nav_7_1_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../environment/__init__/">environment</a>
          
            <label for="__nav_7_1_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="environment" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_5">
          <span class="md-nav__icon md-icon"></span>
          environment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environment/operating_system/" class="md-nav__link">
        operating_system
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environment/python/" class="md-nav__link">
        python
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../events/" class="md-nav__link">
        events
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_7" type="checkbox" id="__nav_7_1_7" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../examples/__init__/">examples</a>
          
        </div>
      
      <nav class="md-nav" aria-label="examples" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_7">
          <span class="md-nav__icon md-icon"></span>
          examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/example_controller/" class="md-nav__link">
        example_controller
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/" class="md-nav__link">
        exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_9" type="checkbox" id="__nav_7_1_9" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../info/__init__/">info</a>
          
            <label for="__nav_7_1_9">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="info" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_9">
          <span class="md-nav__icon md-icon"></span>
          info
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../info/kiara/" class="md-nav__link">
        kiara
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../info/metadata/" class="md-nav__link">
        metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../info/modules/" class="md-nav__link">
        modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../info/operations/" class="md-nav__link">
        operations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../info/pipelines/" class="md-nav__link">
        pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../info/types/" class="md-nav__link">
        types
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10" type="checkbox" id="__nav_7_1_10" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../interfaces/__init__/">interfaces</a>
          
            <label for="__nav_7_1_10">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="interfaces" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_10">
          <span class="md-nav__icon md-icon"></span>
          interfaces
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1" type="checkbox" id="__nav_7_1_10_1" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../interfaces/cli/__init__/">cli</a>
          
            <label for="__nav_7_1_10_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="cli" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_10_1">
          <span class="md-nav__icon md-icon"></span>
          cli
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_1" type="checkbox" id="__nav_7_1_10_1_1" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../interfaces/cli/data/__init__/">data</a>
          
        </div>
      
      <nav class="md-nav" aria-label="data" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_1">
          <span class="md-nav__icon md-icon"></span>
          data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../interfaces/cli/data/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_2" type="checkbox" id="__nav_7_1_10_1_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../interfaces/cli/dev/__init__/">dev</a>
          
        </div>
      
      <nav class="md-nav" aria-label="dev" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_2">
          <span class="md-nav__icon md-icon"></span>
          dev
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../interfaces/cli/dev/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_3" type="checkbox" id="__nav_7_1_10_1_3" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../interfaces/cli/environment/__init__/">environment</a>
          
        </div>
      
      <nav class="md-nav" aria-label="environment" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_3">
          <span class="md-nav__icon md-icon"></span>
          environment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../interfaces/cli/environment/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../interfaces/cli/explain/" class="md-nav__link">
        explain
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_5" type="checkbox" id="__nav_7_1_10_1_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../interfaces/cli/info/__init__/">info</a>
          
        </div>
      
      <nav class="md-nav" aria-label="info" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_5">
          <span class="md-nav__icon md-icon"></span>
          info
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../interfaces/cli/info/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_6" type="checkbox" id="__nav_7_1_10_1_6" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../interfaces/cli/metadata/__init__/">metadata</a>
          
        </div>
      
      <nav class="md-nav" aria-label="metadata" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_6">
          <span class="md-nav__icon md-icon"></span>
          metadata
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../interfaces/cli/metadata/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_7" type="checkbox" id="__nav_7_1_10_1_7" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../interfaces/cli/module/__init__/">module</a>
          
        </div>
      
      <nav class="md-nav" aria-label="module" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_7">
          <span class="md-nav__icon md-icon"></span>
          module
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../interfaces/cli/module/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_8" type="checkbox" id="__nav_7_1_10_1_8" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../interfaces/cli/operation/__init__/">operation</a>
          
        </div>
      
      <nav class="md-nav" aria-label="operation" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_8">
          <span class="md-nav__icon md-icon"></span>
          operation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../interfaces/cli/operation/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_9" type="checkbox" id="__nav_7_1_10_1_9" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../interfaces/cli/pipeline/__init__/">pipeline</a>
          
        </div>
      
      <nav class="md-nav" aria-label="pipeline" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_9">
          <span class="md-nav__icon md-icon"></span>
          pipeline
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../interfaces/cli/pipeline/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../interfaces/cli/run/" class="md-nav__link">
        run
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_11" type="checkbox" id="__nav_7_1_10_1_11" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../interfaces/cli/type/__init__/">type</a>
          
        </div>
      
      <nav class="md-nav" aria-label="type" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_11">
          <span class="md-nav__icon md-icon"></span>
          type
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../interfaces/cli/type/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../interfaces/cli/utils/" class="md-nav__link">
        utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_2" type="checkbox" id="__nav_7_1_10_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../interfaces/python_api/__init__/">python_api</a>
          
        </div>
      
      <nav class="md-nav" aria-label="python_api" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_10_2">
          <span class="md-nav__icon md-icon"></span>
          python_api
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../interfaces/python_api/controller/" class="md-nav__link">
        controller
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kiara/" class="md-nav__link">
        kiara
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_12" type="checkbox" id="__nav_7_1_12" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../metadata/__init__/">metadata</a>
          
            <label for="__nav_7_1_12">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="metadata" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_12">
          <span class="md-nav__icon md-icon"></span>
          metadata
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../metadata/core_models/" class="md-nav__link">
        core_models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../metadata/data/" class="md-nav__link">
        data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../metadata/mgmt/" class="md-nav__link">
        mgmt
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../metadata/module_models/" class="md-nav__link">
        module_models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../metadata/operation_models/" class="md-nav__link">
        operation_models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../metadata/type_models/" class="md-nav__link">
        type_models
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../module/" class="md-nav__link">
        module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../module_config/" class="md-nav__link">
        module_config
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_15" type="checkbox" id="__nav_7_1_15" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../module_mgmt/__init__/">module_mgmt</a>
          
            <label for="__nav_7_1_15">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="module_mgmt" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_15">
          <span class="md-nav__icon md-icon"></span>
          module_mgmt
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../module_mgmt/merged/" class="md-nav__link">
        merged
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../module_mgmt/pipelines/" class="md-nav__link">
        pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../module_mgmt/python_classes/" class="md-nav__link">
        python_classes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_16" type="checkbox" id="__nav_7_1_16" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../modules/__init__/">modules</a>
          
            <label for="__nav_7_1_16">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="modules" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_16">
          <span class="md-nav__icon md-icon"></span>
          modules
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/metadata/" class="md-nav__link">
        metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/pipelines/__init__/" class="md-nav__link">
        pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/save_value/" class="md-nav__link">
        save_value
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/type_conversion/" class="md-nav__link">
        type_conversion
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_17" type="checkbox" id="__nav_7_1_17" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../operations/__init__/">operations</a>
          
            <label for="__nav_7_1_17">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="operations" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_17">
          <span class="md-nav__icon md-icon"></span>
          operations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operations/calculate_hash/" class="md-nav__link">
        calculate_hash
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operations/create_value/" class="md-nav__link">
        create_value
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operations/data_export/" class="md-nav__link">
        data_export
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operations/data_import/" class="md-nav__link">
        data_import
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operations/extract_metadata/" class="md-nav__link">
        extract_metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operations/merge_values/" class="md-nav__link">
        merge_values
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operations/pretty_print/" class="md-nav__link">
        pretty_print
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operations/sample/" class="md-nav__link">
        sample
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operations/serialize/" class="md-nav__link">
        serialize
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operations/store_value/" class="md-nav__link">
        store_value
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_18" type="checkbox" id="__nav_7_1_18" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../pipeline/__init__/">pipeline</a>
          
            <label for="__nav_7_1_18">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="pipeline" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_18">
          <span class="md-nav__icon md-icon"></span>
          pipeline
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline/config/" class="md-nav__link">
        config
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_18_2" type="checkbox" id="__nav_7_1_18_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../pipeline/controller/__init__/">controller</a>
          
        </div>
      
      <nav class="md-nav" aria-label="controller" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_18_2">
          <span class="md-nav__icon md-icon"></span>
          controller
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline/controller/batch/" class="md-nav__link">
        batch
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline/listeners/" class="md-nav__link">
        listeners
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline/module/" class="md-nav__link">
        module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline/pipeline/" class="md-nav__link">
        pipeline
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline/structure/" class="md-nav__link">
        structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline/utils/" class="md-nav__link">
        utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline/values/" class="md-nav__link">
        values
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_19" type="checkbox" id="__nav_7_1_19" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../processing/__init__/">processing</a>
          
            <label for="__nav_7_1_19">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="processing" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_19">
          <span class="md-nav__icon md-icon"></span>
          processing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../processing/parallel/" class="md-nav__link">
        parallel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../processing/processor/" class="md-nav__link">
        processor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../processing/synchronous/" class="md-nav__link">
        synchronous
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_20" type="checkbox" id="__nav_7_1_20" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../rendering/__init__/">rendering</a>
          
            <label for="__nav_7_1_20">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="rendering" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_20">
          <span class="md-nav__icon md-icon"></span>
          rendering
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rendering/jinja/" class="md-nav__link">
        jinja
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rendering/mgmt/" class="md-nav__link">
        mgmt
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sessions/__init__/" class="md-nav__link">
        sessions
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_22" type="checkbox" id="__nav_7_1_22" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../utils/__init__/">utils</a>
          
            <label for="__nav_7_1_22">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="utils" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_22">
          <span class="md-nav__icon md-icon"></span>
          utils
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utils/class_loading/" class="md-nav__link">
        class_loading
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utils/concurrency/" class="md-nav__link">
        concurrency
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utils/doc/" class="md-nav__link">
        doc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utils/global_metadata/" class="md-nav__link">
        global_metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utils/jupyter/" class="md-nav__link">
        jupyter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utils/modules/" class="md-nav__link">
        modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utils/output/" class="md-nav__link">
        output
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_23" type="checkbox" id="__nav_7_1_23" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../workflow/__init__/">workflow</a>
          
            <label for="__nav_7_1_23">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="workflow" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_23">
          <span class="md-nav__icon md-icon"></span>
          workflow
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflow/kiara_workflow/" class="md-nav__link">
        kiara_workflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflow/wrapped/" class="md-nav__link">
        wrapped
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2" type="checkbox" id="__nav_7_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2">
          mkdocstrings_handlers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="mkdocstrings_handlers" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          mkdocstrings_handlers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocstrings_handlers/kiara/__init__/" class="md-nav__link">
        kiara
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kiara" class="md-nav__link">
    kiara
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.__author__" class="md-nav__link">
    __author__
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.__email__" class="md-nav__link">
    __email__
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.get_version" class="md-nav__link">
    get_version()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.config" class="md-nav__link">
    config
  </a>
  
    <nav class="md-nav" aria-label="config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.config.KiaraConfig" class="md-nav__link">
    KiaraConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.config.yaml_config_settings_source" class="md-nav__link">
    yaml_config_settings_source()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.data" class="md-nav__link">
    data
  </a>
  
    <nav class="md-nav" aria-label="data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.data.onboarding" class="md-nav__link">
    onboarding
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.registry" class="md-nav__link">
    registry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.types" class="md-nav__link">
    types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.values" class="md-nav__link">
    values
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.defaults" class="md-nav__link">
    defaults
  </a>
  
    <nav class="md-nav" aria-label="defaults">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.defaults.DEFAULT_EXCLUDE_DIRS" class="md-nav__link">
    DEFAULT_EXCLUDE_DIRS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.defaults.DEFAULT_EXCLUDE_FILES" class="md-nav__link">
    DEFAULT_EXCLUDE_FILES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.defaults.DEFAULT_PIPELINE_PARENT_ID" class="md-nav__link">
    DEFAULT_PIPELINE_PARENT_ID
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.defaults.INVALID_VALUE_NAMES" class="md-nav__link">
    INVALID_VALUE_NAMES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.defaults.KIARA_MODULE_BASE_FOLDER" class="md-nav__link">
    KIARA_MODULE_BASE_FOLDER
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.defaults.KIARA_RESOURCES_FOLDER" class="md-nav__link">
    KIARA_RESOURCES_FOLDER
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.defaults.MODULE_TYPE_KEY" class="md-nav__link">
    MODULE_TYPE_KEY
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.defaults.MODULE_TYPE_NAME_KEY" class="md-nav__link">
    MODULE_TYPE_NAME_KEY
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.defaults.NO_HASH_MARKER" class="md-nav__link">
    NO_HASH_MARKER
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.defaults.NO_VALUE_ID_MARKER" class="md-nav__link">
    NO_VALUE_ID_MARKER
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.defaults.PIPELINE_PARENT_MARKER" class="md-nav__link">
    PIPELINE_PARENT_MARKER
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.defaults.STEP_ID_KEY" class="md-nav__link">
    STEP_ID_KEY
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.defaults.VALID_PIPELINE_FILE_EXTENSIONS" class="md-nav__link">
    VALID_PIPELINE_FILE_EXTENSIONS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.defaults.SpecialValue" class="md-nav__link">
    SpecialValue
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.doc" class="md-nav__link">
    doc
  </a>
  
    <nav class="md-nav" aria-label="doc">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.doc.FrklDocumentationPlugin" class="md-nav__link">
    FrklDocumentationPlugin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.doc.gen_info_pages" class="md-nav__link">
    gen_info_pages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.doc.generate_api_doc" class="md-nav__link">
    generate_api_doc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.doc.mkdocs_macros_cli" class="md-nav__link">
    mkdocs_macros_cli
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.doc.mkdocs_macros_kiara" class="md-nav__link">
    mkdocs_macros_kiara
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.doc.mkdocstrings" class="md-nav__link">
    mkdocstrings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.environment" class="md-nav__link">
    environment
  </a>
  
    <nav class="md-nav" aria-label="environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.environment.RuntimeEnvironmentConfig" class="md-nav__link">
    RuntimeEnvironmentConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.environment.operating_system" class="md-nav__link">
    operating_system
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.environment.python" class="md-nav__link">
    python
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.events" class="md-nav__link">
    events
  </a>
  
    <nav class="md-nav" aria-label="events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.events.PipelineInputEvent" class="md-nav__link">
    PipelineInputEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.events.PipelineOutputEvent" class="md-nav__link">
    PipelineOutputEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.events.StepEvent" class="md-nav__link">
    StepEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.events.StepInputEvent" class="md-nav__link">
    StepInputEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.events.StepOutputEvent" class="md-nav__link">
    StepOutputEvent
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.examples" class="md-nav__link">
    examples
  </a>
  
    <nav class="md-nav" aria-label="examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.examples.example_controller" class="md-nav__link">
    example_controller
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.info" class="md-nav__link">
    info
  </a>
  
    <nav class="md-nav" aria-label="info">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.info.kiara" class="md-nav__link">
    kiara
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.info.modules" class="md-nav__link">
    modules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.info.operations" class="md-nav__link">
    operations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.info.pipelines" class="md-nav__link">
    pipelines
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.info.types" class="md-nav__link">
    types
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.interfaces" class="md-nav__link">
    interfaces
  </a>
  
    <nav class="md-nav" aria-label="interfaces">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.interfaces.get_console" class="md-nav__link">
    get_console()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.interfaces.cli" class="md-nav__link">
    cli
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.interfaces.python_api" class="md-nav__link">
    python_api
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.kiara" class="md-nav__link">
    kiara
  </a>
  
    <nav class="md-nav" aria-label="kiara">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.kiara.Kiara" class="md-nav__link">
    Kiara
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.kiara.explain" class="md-nav__link">
    explain()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.metadata" class="md-nav__link">
    metadata
  </a>
  
    <nav class="md-nav" aria-label="metadata">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.metadata.MetadataModel" class="md-nav__link">
    MetadataModel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.metadata.ValueTypeAndDescription" class="md-nav__link">
    ValueTypeAndDescription
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.metadata.core_models" class="md-nav__link">
    core_models
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.metadata.data" class="md-nav__link">
    data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.metadata.module_models" class="md-nav__link">
    module_models
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.metadata.operation_models" class="md-nav__link">
    operation_models
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.metadata.type_models" class="md-nav__link">
    type_models
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.module" class="md-nav__link">
    module
  </a>
  
    <nav class="md-nav" aria-label="module">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.module.KiaraModule" class="md-nav__link">
    KiaraModule
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.module.StepInputs" class="md-nav__link">
    StepInputs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.module.StepOutputs" class="md-nav__link">
    StepOutputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.module_config" class="md-nav__link">
    module_config
  </a>
  
    <nav class="md-nav" aria-label="module_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.module_config.ModuleConfig" class="md-nav__link">
    ModuleConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.module_config.ModuleTypeConfigSchema" class="md-nav__link">
    ModuleTypeConfigSchema
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.module_config.parse_and_create_module_config" class="md-nav__link">
    parse_and_create_module_config()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.module_mgmt" class="md-nav__link">
    module_mgmt
  </a>
  
    <nav class="md-nav" aria-label="module_mgmt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.module_mgmt.merged" class="md-nav__link">
    merged
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.module_mgmt.pipelines" class="md-nav__link">
    pipelines
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.module_mgmt.python_classes" class="md-nav__link">
    python_classes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.modules" class="md-nav__link">
    modules
  </a>
  
    <nav class="md-nav" aria-label="modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.modules.metadata" class="md-nav__link">
    metadata
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.modules.pipelines" class="md-nav__link">
    pipelines
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.modules.type_conversion" class="md-nav__link">
    type_conversion
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.operations" class="md-nav__link">
    operations
  </a>
  
    <nav class="md-nav" aria-label="operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.operations.Operation" class="md-nav__link">
    Operation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.operations.calculate_hash" class="md-nav__link">
    calculate_hash
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.operations.create_value" class="md-nav__link">
    create_value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.operations.data_export" class="md-nav__link">
    data_export
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.operations.data_import" class="md-nav__link">
    data_import
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.operations.extract_metadata" class="md-nav__link">
    extract_metadata
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.operations.merge_values" class="md-nav__link">
    merge_values
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.operations.pretty_print" class="md-nav__link">
    pretty_print
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.operations.sample" class="md-nav__link">
    sample
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.operations.serialize" class="md-nav__link">
    serialize
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.operations.store_value" class="md-nav__link">
    store_value
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.pipeline" class="md-nav__link">
    pipeline
  </a>
  
    <nav class="md-nav" aria-label="pipeline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.PipelineValueInfo" class="md-nav__link">
    PipelineValueInfo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.PipelineValuesInfo" class="md-nav__link">
    PipelineValuesInfo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.StepStatus" class="md-nav__link">
    StepStatus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.StepValueAddress" class="md-nav__link">
    StepValueAddress
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.config" class="md-nav__link">
    config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.controller" class="md-nav__link">
    controller
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.listeners" class="md-nav__link">
    listeners
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.module" class="md-nav__link">
    module
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.pipeline" class="md-nav__link">
    pipeline
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.structure" class="md-nav__link">
    structure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.values" class="md-nav__link">
    values
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.processing" class="md-nav__link">
    processing
  </a>
  
    <nav class="md-nav" aria-label="processing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.processing.Job" class="md-nav__link">
    Job
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.processing.JobLog" class="md-nav__link">
    JobLog
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.processing.JobStatus" class="md-nav__link">
    JobStatus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.processing.LogMessage" class="md-nav__link">
    LogMessage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.processing.ProcessingInfo" class="md-nav__link">
    ProcessingInfo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.processing.parallel" class="md-nav__link">
    parallel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.processing.processor" class="md-nav__link">
    processor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.utils" class="md-nav__link">
    utils
  </a>
  
    <nav class="md-nav" aria-label="utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.utils.check_valid_field_names" class="md-nav__link">
    check_valid_field_names()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.utils.find_free_id" class="md-nav__link">
    find_free_id()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.utils.get_auto_workflow_alias" class="md-nav__link">
    get_auto_workflow_alias()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.utils.class_loading" class="md-nav__link">
    class_loading
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.utils.concurrency" class="md-nav__link">
    concurrency
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.utils.modules" class="md-nav__link">
    modules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.utils.output" class="md-nav__link">
    output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.workflow" class="md-nav__link">
    workflow
  </a>
  
    <nav class="md-nav" aria-label="workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.workflow.kiara_workflow" class="md-nav__link">
    kiara_workflow
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/DHARPA-Project/kiara/edit/master/docs/src/kiara/__init__.py" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>



  <h1>kiara</h1>

<div class="doc doc-object doc-module">

<a id="kiara"></a>
    <div class="doc doc-contents first">




  <div class="doc doc-children">








  <div class="doc doc-object doc-attribute">



<h2 id="kiara.__author__" class="doc doc-heading">
<code class="highlight language-python"><span class="n">__author__</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.__author__" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>The author of this package.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h2 id="kiara.__email__" class="doc doc-heading">
<code class="highlight language-python"><span class="n">__email__</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.__email__" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Email address of the author.</p>
    </div>

  </div>







  <div class="doc doc-object doc-function">



<h2 id="kiara.get_version" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_version</span><span class="p">()</span></code>


<a href="#kiara.get_version" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Return the current version of <em>Kiara</em>.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_version</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return the current version of *Kiara*.&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">pkg_resources</span> <span class="kn">import</span> <span class="n">DistributionNotFound</span><span class="p">,</span> <span class="n">get_distribution</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Change here if project is renamed and does not equal the package name</span>
        <span class="n">dist_name</span> <span class="o">=</span> <span class="vm">__name__</span>
        <span class="n">__version__</span> <span class="o">=</span> <span class="n">get_distribution</span><span class="p">(</span><span class="n">dist_name</span><span class="p">)</span><span class="o">.</span><span class="n">version</span>
    <span class="k">except</span> <span class="n">DistributionNotFound</span><span class="p">:</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">version_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">&quot;version.txt&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">version_file</span><span class="p">):</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">version_file</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">vf</span><span class="p">:</span>
                    <span class="n">__version__</span> <span class="o">=</span> <span class="n">vf</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;unknown&quot;</span>

        <span class="k">except</span> <span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
            <span class="k">pass</span>

        <span class="k">if</span> <span class="n">__version__</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;unknown&quot;</span>

    <span class="k">return</span> <span class="n">__version__</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-module">



<h2 id="kiara.config" class="doc doc-heading">
        <code>config</code>



<a href="#kiara.config" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="kiara.config.KiaraConfig" class="doc doc-heading">
        <code>
KiaraConfig            (<span title="pydantic.env_settings.BaseSettings">BaseSettings</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.config.KiaraConfig" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KiaraConfig</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>
        <span class="n">env_file_encoding</span> <span class="o">=</span> <span class="s2">&quot;utf-8&quot;</span>
        <span class="n">env_prefix</span> <span class="o">=</span> <span class="s2">&quot;kiara_&quot;</span>

        <span class="nd">@classmethod</span>
        <span class="k">def</span> <span class="nf">customise_sources</span><span class="p">(</span>
            <span class="bp">cls</span><span class="p">,</span>
            <span class="n">init_settings</span><span class="p">,</span>
            <span class="n">env_settings</span><span class="p">,</span>
            <span class="n">file_secret_settings</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="n">init_settings</span><span class="p">,</span>
                <span class="n">env_settings</span><span class="p">,</span>
                <span class="n">yaml_config_settings_source</span><span class="p">,</span>
                <span class="n">file_secret_settings</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="n">module_managers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
        <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">PythonModuleManagerConfig</span><span class="p">,</span> <span class="n">PipelineModuleManagerConfig</span><span class="p">]</span>
        <span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The module managers to use in this kiara instance.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>
    <span class="n">default_processor</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
        <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">SynchronousProcessorConfig</span><span class="p">,</span> <span class="n">ThreadPoolProcessorConfig</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The configuration for the default processor to use.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="n">SynchronousProcessorConfig</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">data_store</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The path to the local kiara data store.&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">KIARA_DATA_STORE_DIR</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">extra_pipeline_folders</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Paths to local folders that contain kiara pipelines.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ignore_errors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;If set, kiara will try to ignore most errors (that can be ignored).&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;module_managers&quot;</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_validate_managers</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">]</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">ModuleManager</span><span class="p">):</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">)</span>
                <span class="n">mm_type</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;module_manager_type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">mm_type</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;No module manager type provided in config: </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>

                <span class="k">if</span> <span class="n">mm_type</span> <span class="o">==</span> <span class="s2">&quot;python&quot;</span><span class="p">:</span>
                    <span class="n">item_config</span> <span class="o">=</span> <span class="n">PythonModuleManagerConfig</span><span class="p">(</span><span class="o">**</span><span class="n">item</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">mm_type</span> <span class="o">==</span> <span class="s2">&quot;pipeline&quot;</span><span class="p">:</span>
                    <span class="n">item_config</span> <span class="o">=</span> <span class="n">PipelineModuleManagerConfig</span><span class="p">(</span><span class="o">**</span><span class="n">item</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid module manager type: </span><span class="si">{</span><span class="n">mm_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item_config</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;default_processor&quot;</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_validate_default_processor</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">SynchronousProcessorConfig</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="p">(</span><span class="n">SynchronousProcessorConfig</span><span class="p">,</span> <span class="n">ThreadPoolProcessorConfig</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">v</span>

        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;synchronous&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">SynchronousProcessorConfig</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;multi-threaded&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ThreadPoolProcessorConfig</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; for default_processor config: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="n">processor_type</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;module_processor_type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">processor_type</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No &#39;module_processor_type&#39; provided: </span><span class="si">{config}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">processor_type</span> <span class="o">==</span> <span class="s2">&quot;synchronous&quot;</span><span class="p">:</span>
            <span class="n">config</span> <span class="o">=</span> <span class="n">SynchronousProcessorConfig</span><span class="p">(</span><span class="o">**</span><span class="n">v</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">processor_type</span> <span class="o">==</span> <span class="s2">&quot;multi-threaded&quot;</span><span class="p">:</span>
            <span class="n">config</span> <span class="o">=</span> <span class="n">ThreadPoolProcessorConfig</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">config</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.config.KiaraConfig.data_store" class="doc doc-heading">
<code class="highlight language-python"><span class="n">data_store</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.config.KiaraConfig.data_store" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The path to the local kiara data store.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.config.KiaraConfig.default_processor" class="doc doc-heading">
<code class="highlight language-python"><span class="n">default_processor</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">synchronous</span><span class="o">.</span><span class="n">SynchronousProcessorConfig</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">parallel</span><span class="o">.</span><span class="n">ThreadPoolProcessorConfig</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.config.KiaraConfig.default_processor" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The configuration for the default processor to use.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.config.KiaraConfig.extra_pipeline_folders" class="doc doc-heading">
<code class="highlight language-python"><span class="n">extra_pipeline_folders</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.config.KiaraConfig.extra_pipeline_folders" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Paths to local folders that contain kiara pipelines.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.config.KiaraConfig.ignore_errors" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ignore_errors</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.config.KiaraConfig.ignore_errors" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>If set, kiara will try to ignore most errors (that can be ignored).</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.config.KiaraConfig.module_managers" class="doc doc-heading">
<code class="highlight language-python"><span class="n">module_managers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">module_mgmt</span><span class="o">.</span><span class="n">python_classes</span><span class="o">.</span><span class="n">PythonModuleManagerConfig</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">module_mgmt</span><span class="o">.</span><span class="n">pipelines</span><span class="o">.</span><span class="n">PipelineModuleManagerConfig</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.config.KiaraConfig.module_managers" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The module managers to use in this kiara instance.</p>
    </div>

  </div>











  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h3 id="kiara.config.yaml_config_settings_source" class="doc doc-heading">
<code class="highlight language-python"><span class="n">yaml_config_settings_source</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span></code>


<a href="#kiara.config.yaml_config_settings_source" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>A simple settings source that loads variables from a JSON file
at the project's root.</p>
<p>Here we happen to choose to use the <code>env_file_encoding</code> from Config
when reading <code>config.json</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">yaml_config_settings_source</span><span class="p">(</span><span class="n">settings</span><span class="p">:</span> <span class="n">BaseSettings</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A simple settings source that loads variables from a JSON file</span>
<span class="sd">    at the project&#39;s root.</span>

<span class="sd">    Here we happen to choose to use the `env_file_encoding` from Config</span>
<span class="sd">    when reading `config.json`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">config_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">kiara_app_dirs</span><span class="o">.</span><span class="n">user_config_dir</span><span class="p">,</span> <span class="s2">&quot;config.yaml&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">config_file</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">get_data_from_file</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{}</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.data" class="doc doc-heading">
        <code>data</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Data and value related classes for <em>Kiara</em>.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h3 id="kiara.data.onboarding" class="doc doc-heading">
        <code>onboarding</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.onboarding" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="kiara.data.onboarding.ValueStoreConfig" class="doc doc-heading">
        <code>
ValueStoreConfig            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.onboarding.ValueStoreConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A configuration that describes which step outputs of a pipeline to save, and how.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/onboarding/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueStoreConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A configuration that describes which step outputs of a pipeline to save, and how.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">save_fields</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">base_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">value_set</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">],</span>
        <span class="n">matchers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">FieldMatcher</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>

        <span class="k">if</span> <span class="n">matchers</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">matchers</span> <span class="o">=</span> <span class="n">FieldMatcher</span><span class="o">.</span><span class="n">create_default_matchers</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">matcher</span> <span class="ow">in</span> <span class="n">matchers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">matcher</span><span class="o">.</span><span class="n">matcher_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;glob&quot;</span><span class="p">,</span> <span class="s2">&quot;regex&quot;</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                    <span class="s2">&quot;Only &#39;glob&#39; and &#39;regex&#39; field matcher type implemented yet.&quot;</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">matcher</span><span class="o">.</span><span class="n">matcher_type</span> <span class="o">==</span> <span class="s2">&quot;glob&quot;</span><span class="p">:</span>
                <span class="n">matcher</span><span class="o">.</span><span class="n">matcher_type</span> <span class="o">=</span> <span class="s2">&quot;regex&quot;</span>
                <span class="n">matcher</span><span class="o">.</span><span class="n">match_expr</span> <span class="o">=</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">matcher</span><span class="o">.</span><span class="n">match_expr</span><span class="p">)</span>

        <span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">()</span>

        <span class="n">to_save</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">value_set</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

            <span class="k">for</span> <span class="n">matcher</span> <span class="ow">in</span> <span class="n">matchers</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">matcher</span><span class="o">.</span><span class="n">match_expr</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
                    <span class="k">continue</span>

                <span class="n">template</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">matcher</span><span class="o">.</span><span class="n">alias_template</span><span class="p">)</span>
                <span class="n">rendered</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="n">field_name</span><span class="p">,</span> <span class="n">base_id</span><span class="o">=</span><span class="n">base_id</span><span class="p">)</span>

                <span class="n">to_save</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="nb">set</span><span class="p">())</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">rendered</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">matcher</span><span class="o">.</span><span class="n">check_next_on_match</span><span class="p">:</span>
                    <span class="k">break</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">aliases</span> <span class="ow">in</span> <span class="n">to_save</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">value</span> <span class="o">=</span> <span class="n">value_set</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
            <span class="n">_v</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">aliases</span><span class="o">=</span><span class="n">aliases</span><span class="p">)</span>
            <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">_v</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">aliases</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">FieldMatcher</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether and how to save inputs.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span>
    <span class="p">)</span>
    <span class="n">outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">FieldMatcher</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether and how to save inputs.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="n">FieldMatcher</span><span class="o">.</span><span class="n">create_default_matchers</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">steps</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="s2">&quot;ValueStoreConfig&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether and how to save step inputs and outputs.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.onboarding.ValueStoreConfig.inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">inputs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">onboarding</span><span class="o">.</span><span class="n">FieldMatcher</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.onboarding.ValueStoreConfig.inputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Whether and how to save inputs.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.onboarding.ValueStoreConfig.outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">outputs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">onboarding</span><span class="o">.</span><span class="n">FieldMatcher</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.onboarding.ValueStoreConfig.outputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Whether and how to save inputs.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.onboarding.ValueStoreConfig.steps" class="doc doc-heading">
<code class="highlight language-python"><span class="n">steps</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ValueStoreConfig</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.onboarding.ValueStoreConfig.steps" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Whether and how to save step inputs and outputs.</p>
    </div>

  </div>











  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h4 id="kiara.data.onboarding.batch" class="doc doc-heading">
        <code>batch</code>



<a href="#kiara.data.onboarding.batch" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h5 id="kiara.data.onboarding.batch.BatchOnboard" class="doc doc-heading">
        <code>
BatchOnboard            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.onboarding.batch.BatchOnboard" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/onboarding/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">BatchOnboard</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
        <span class="n">store_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueStoreConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Kiara</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="n">operation</span> <span class="o">=</span> <span class="n">Operation</span><span class="o">.</span><span class="n">create_operation</span><span class="p">(</span>
            <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>
            <span class="n">operation_id</span><span class="o">=</span><span class="s2">&quot;_batch_onboarding_&quot;</span><span class="p">,</span>
            <span class="n">config</span><span class="o">=</span><span class="n">module_type</span><span class="p">,</span>
            <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">store_config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">store_config</span> <span class="o">=</span> <span class="n">ValueStoreConfig</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">store_config</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="n">store_config</span> <span class="o">=</span> <span class="n">ValueStoreConfig</span><span class="p">(</span><span class="o">**</span><span class="n">store_config</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">BatchOnboard</span><span class="p">(</span>
            <span class="n">operation</span><span class="o">=</span><span class="n">operation</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span> <span class="n">store_config</span><span class="o">=</span><span class="n">store_config</span>
        <span class="p">)</span>

    <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The inputs.&quot;</span><span class="p">)</span>
    <span class="n">operation</span><span class="p">:</span> <span class="n">Operation</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The operation to use with the inputs.&quot;</span><span class="p">)</span>
    <span class="n">store_config</span><span class="p">:</span> <span class="n">ValueStoreConfig</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The configuration for storing operation/pipeline values.&quot;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>

        <span class="n">run_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">)</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">store_config</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Storing inputs not supported yet.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">store_config</span><span class="o">.</span><span class="n">steps</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Storing step inputs/outputs not supported yet.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">store_config</span><span class="o">.</span><span class="n">outputs</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">ValueStoreConfig</span><span class="o">.</span><span class="n">save_fields</span><span class="p">(</span>
                <span class="n">base_id</span><span class="o">=</span><span class="n">base_id</span><span class="p">,</span>
                <span class="n">value_set</span><span class="o">=</span><span class="n">run_result</span><span class="p">,</span>
                <span class="n">matchers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store_config</span><span class="o">.</span><span class="n">outputs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">value</span><span class="p">,</span> <span class="n">aliases</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">aliases</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="kiara.data.onboarding.batch.BatchOnboard.inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">inputs</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.onboarding.batch.BatchOnboard.inputs" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>The inputs.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="kiara.data.onboarding.batch.BatchOnboard.operation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">operation</span><span class="p">:</span> <span class="n">Operation</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.onboarding.batch.BatchOnboard.operation" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>The operation to use with the inputs.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="kiara.data.onboarding.batch.BatchOnboard.store_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">store_config</span><span class="p">:</span> <span class="n">ValueStoreConfig</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.onboarding.batch.BatchOnboard.store_config" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>The configuration for storing operation/pipeline values.</p>
    </div>

  </div>












  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.data.registry" class="doc doc-heading">
        <code>registry</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.registry" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="kiara.data.registry.BaseDataRegistry" class="doc doc-heading">
        <code>
BaseDataRegistry            (<span title="abc.ABC">ABC</span>)
        </code>



<a href="#kiara.data.registry.BaseDataRegistry" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Base class to extend if you want to write a <em>kiara</em> data registry.</p>
<p>This outlines the main methods that must be available for an entity that holds some values and their data, as
well as their associated aliases. In most cases users will interact with subclasses of the more fully
featured <a class="autorefs autorefs-internal" href="../data/registry/__init__/#kiara.data.registry.DataRegistry">DataRegistry</a> class, but there are cases where it will make sense
to sub-class this base class directly (like for example read-only 'archive' data registries).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/registry/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">BaseDataRegistry</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class to extend if you want to write a *kiara* data registry.</span>

<span class="sd">    This outlines the main methods that must be available for an entity that holds some values and their data, as</span>
<span class="sd">    well as their associated aliases. In most cases users will interact with subclasses of the more fully</span>
<span class="sd">    featured [DataRegistry][kiara.data.registry.DataRegistry] class, but there are cases where it will make sense</span>
<span class="sd">    to sub-class this base class directly (like for example read-only &#39;archive&#39; data registries).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="n">Kiara</span> <span class="o">=</span> <span class="n">kiara</span>
        <span class="c1"># self._hashes: typing.Dict[str, typing.Dict[str, str]] = {}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register_tokens</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_available_value_ids</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">alias_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_available_aliases</span><span class="p">())</span>

    <span class="c1"># ======================================================================</span>
    <span class="c1"># main abstract methods</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_available_value_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return all of the registries available value ids.&quot;&quot;&quot;</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_value_obj_for_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_value_data_for_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_item</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_available_aliases</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">pass</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_value_slot_for_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSlot</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_value_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]:</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_find_value_for_hashes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">hashes</span><span class="p">:</span> <span class="n">ValueHash</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Value</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return a value that matches one of the provided hashes.</span>

<span class="sd">        This method does not need to be overwritten, but it is recommended that it is done for performance reasons.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            hashes: a collection of hashes,</span>
<span class="sd">        Returns:</span>
<span class="sd">            A (registered) value that matches one of the hashes</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># -----------------------------------------------------------------------</span>
    <span class="c1"># main value retrieval methods</span>
    <span class="k">def</span> <span class="nf">_create_alias_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueAlias</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">alias</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;value:&quot;</span><span class="p">):</span>
            <span class="n">alias</span> <span class="o">=</span> <span class="n">alias</span><span class="p">[</span><span class="mi">6</span><span class="p">:]</span>
        <span class="n">value_alias</span> <span class="o">=</span> <span class="n">ValueAlias</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">value_alias</span><span class="o">=</span><span class="n">alias</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">value_alias</span><span class="o">.</span><span class="n">alias</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_value_ids</span><span class="p">()</span>
            <span class="ow">and</span> <span class="n">value_alias</span><span class="o">.</span><span class="n">alias</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_aliases</span><span class="p">()</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Neither id nor alias &#39;</span><span class="si">{</span><span class="n">alias</span><span class="si">}</span><span class="s2">&#39; registered with this registry.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">value_alias</span><span class="o">.</span><span class="n">alias</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_aliases</span><span class="p">()</span>
            <span class="ow">and</span> <span class="n">value_alias</span><span class="o">.</span><span class="n">tag</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="n">value_alias</span><span class="o">.</span><span class="n">version</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="n">value_alias</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_latest_version_for_alias</span><span class="p">(</span><span class="n">value_alias</span><span class="o">.</span><span class="n">alias</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">value_alias</span>

    <span class="k">def</span> <span class="nf">get_value_obj</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value_item</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">,</span> <span class="n">ValueAlias</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">],</span>
        <span class="n">raise_exception</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Value</span><span class="p">]:</span>

        <span class="k">if</span> <span class="n">value_item</span> <span class="o">==</span> <span class="n">NO_ID_YET_MARKER</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t get value object: value not fully registered yet.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_item</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="n">value_item</span> <span class="o">=</span> <span class="n">value_item</span><span class="o">.</span><span class="n">id</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_item</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
            <span class="n">value_item</span> <span class="o">=</span> <span class="n">value_item</span><span class="o">.</span><span class="n">get_latest_value</span><span class="p">()</span><span class="o">.</span><span class="n">id</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_item</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">value_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_alias_obj</span><span class="p">(</span><span class="n">value_item</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_item</span><span class="p">,</span> <span class="n">ValueAlias</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value_item</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; for value item parameter.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">value_item</span><span class="o">.</span><span class="n">alias</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_value_ids</span><span class="p">():</span>
            <span class="n">_value_id</span> <span class="o">=</span> <span class="n">value_item</span><span class="o">.</span><span class="n">alias</span>
            <span class="n">_value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_value_obj_for_id</span><span class="p">(</span><span class="n">_value_id</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">value_item</span><span class="o">.</span><span class="n">alias</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_aliases</span><span class="p">():</span>
            <span class="n">_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_alias_to_value</span><span class="p">(</span><span class="n">value_item</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_value</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">_value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">raise_exception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No value or alias registered in registry for: </span><span class="si">{</span><span class="n">value_item</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">_value</span>

    <span class="k">def</span> <span class="nf">get_value_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_item</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">,</span> <span class="n">ValueAlias</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_item</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value registered for: </span><span class="si">{</span><span class="n">value_item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">is_set</span> <span class="ow">and</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">,</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value not set: </span><span class="si">{</span><span class="n">value_obj</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_value_data_for_id</span><span class="p">(</span><span class="n">value_obj</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">data</span> <span class="o">==</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">data</span>

    <span class="k">def</span> <span class="nf">get_lineage</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_item</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]:</span>

        <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_item</span><span class="o">=</span><span class="n">value_item</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value registered for: </span><span class="si">{</span><span class="n">value_item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_value_lineage</span><span class="p">(</span><span class="n">value_obj</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="c1"># def get_value_info(self, value_item: typing.Union[str, Value, ValueAlias]) -&gt; ValueInfo:</span>
    <span class="c1">#</span>
    <span class="c1">#     value_obj = self.get_value_obj(value_item=value_item)</span>
    <span class="c1">#</span>
    <span class="c1">#     aliases = self.find_aliases_for_value_id(value_id=value_obj.id, include_all_versions=True, include_tags=True)</span>
    <span class="c1">#</span>
    <span class="c1">#     info = ValueInfo(value_id=value_obj.id, value_type=value_obj.value_schema.type, aliases=aliases, metadata=value_obj.get_metadata())</span>
    <span class="c1">#     return info</span>

    <span class="k">def</span> <span class="nf">get_value_slot</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">]:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
            <span class="n">alias</span> <span class="o">=</span> <span class="n">alias</span><span class="o">.</span><span class="n">id</span>

        <span class="k">if</span> <span class="n">alias</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">alias_names</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_value_slot_for_alias</span><span class="p">(</span><span class="n">alias_name</span><span class="o">=</span><span class="n">alias</span><span class="p">)</span>

    <span class="c1"># -----------------------------------------------------------------------</span>
    <span class="c1"># def _resolve_hash_to_value(</span>
    <span class="c1">#     self, hash_str: str, hash_type: typing.Optional[str] = None</span>
    <span class="c1"># ) -&gt; typing.Optional[Value]:</span>
    <span class="c1">#</span>
    <span class="c1">#     matches: typing.Set[str] = set()</span>
    <span class="c1">#     if hash_type is None:</span>
    <span class="c1">#         for hash_type, details in self._hashes.items():</span>
    <span class="c1">#             if hash_str in details.keys():</span>
    <span class="c1">#                 matches.add(details[hash_str])</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         hashes_for_type = self._hashes.get(hash_type, {})</span>
    <span class="c1">#         if hash_str in hashes_for_type.keys():</span>
    <span class="c1">#             matches.add(hashes_for_type[hash_str])</span>
    <span class="c1">#</span>
    <span class="c1">#     if len(matches) == 0:</span>
    <span class="c1">#         return None</span>
    <span class="c1">#     elif len(matches) &gt; 1:</span>
    <span class="c1">#         raise Exception(f&quot;Multiple values found for hash &#39;{hash_str}&#39;.&quot;)</span>
    <span class="c1">#</span>
    <span class="c1">#     match_id = next(iter(matches))</span>
    <span class="c1">#     value = self.get_value_obj(match_id)</span>
    <span class="c1">#     return value</span>

    <span class="k">def</span> <span class="nf">_check_register_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">register_token</span><span class="p">:</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">):</span>

        <span class="k">return</span> <span class="n">register_token</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_tokens</span>

    <span class="c1"># alias-related methods</span>
    <span class="k">def</span> <span class="nf">_resolve_alias_to_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="n">ValueAlias</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Value</span><span class="p">]:</span>

        <span class="n">alias_name</span> <span class="o">=</span> <span class="n">alias</span><span class="o">.</span><span class="n">alias</span>
        <span class="n">alias_version</span> <span class="o">=</span> <span class="n">alias</span><span class="o">.</span><span class="n">version</span>
        <span class="n">alias_tag</span> <span class="o">=</span> <span class="n">alias</span><span class="o">.</span><span class="n">tag</span>

        <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value_slot</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39; registered with registry.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">alias_tag</span><span class="p">:</span>
            <span class="n">_version</span> <span class="o">=</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">alias_tag</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">alias_version</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">_version</span> <span class="o">!=</span> <span class="n">alias_version</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Value alias object contains both tag and version information, but actual version of tag resolves to different version in the registry: </span><span class="si">{</span><span class="n">_version</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">alias_version</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">alias_version</span> <span class="o">=</span> <span class="n">_version</span>

        <span class="k">assert</span> <span class="n">alias_version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">alias_version</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_find_aliases_for_value_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ValueAlias</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Find all aliases that point to the specified value id.</span>

<span class="sd">        Sub-classes may overwrite this method for performance reasons.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_aliases</span><span class="p">():</span>
            <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">value_slot</span>
            <span class="n">aliases</span> <span class="o">=</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">find_linked_aliases</span><span class="p">(</span><span class="n">value_id</span><span class="p">)</span>
            <span class="n">result</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">aliases</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">_get_tags_for_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value_slot</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No alias &#39;</span><span class="si">{</span><span class="n">alias</span><span class="si">}</span><span class="s2">&#39; registered with registry.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">find_aliases_for_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value_item</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">],</span>
        <span class="n">include_all_versions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_tags</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ValueAlias</span><span class="p">]:</span>

        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_item</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t find registered value for: </span><span class="si">{</span><span class="n">value_item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">aliases</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_aliases_for_value_id</span><span class="p">(</span><span class="n">value_id</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">latest_cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">aliases</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">alias</span><span class="o">.</span><span class="n">version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">include_all_versions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">alias</span><span class="o">.</span><span class="n">alias</span> <span class="ow">in</span> <span class="n">latest_cache</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">latest_version</span> <span class="o">=</span> <span class="n">latest_cache</span><span class="p">[</span><span class="n">alias</span><span class="o">.</span><span class="n">alias</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">latest_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_latest_version_for_alias</span><span class="p">(</span><span class="n">alias</span><span class="o">.</span><span class="n">alias</span><span class="p">)</span>
                        <span class="n">latest_cache</span><span class="p">[</span><span class="n">alias</span><span class="o">.</span><span class="n">alias</span><span class="p">]</span> <span class="o">=</span> <span class="n">latest_version</span>
                    <span class="k">if</span> <span class="n">latest_version</span> <span class="o">==</span> <span class="n">alias</span><span class="o">.</span><span class="n">version</span><span class="p">:</span>
                        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">alias</span><span class="o">.</span><span class="n">tag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">include_tags</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">get_latest_version_for_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>

        <span class="n">versions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_versions_for_alias</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">versions</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">versions</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_versions_for_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return all available versions for the specified alias.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">_alias</span> <span class="o">=</span> <span class="n">ValueAlias</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">ValueAlias</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for alias: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_alias</span> <span class="o">=</span> <span class="n">alias</span>

        <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value_slot</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No alias &#39;</span><span class="si">{</span><span class="n">_alias</span><span class="o">.</span><span class="n">alias</span><span class="si">}</span><span class="s2">&#39; registered with registry.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">value_slot</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_tags_for_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">_alias</span> <span class="o">=</span> <span class="n">ValueAlias</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">ValueAlias</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for alias: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_alias</span> <span class="o">=</span> <span class="n">alias</span>

        <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value_slot</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No alias &#39;</span><span class="si">{</span><span class="n">_alias</span><span class="o">.</span><span class="n">alias</span><span class="si">}</span><span class="s2">&#39; registered with registry.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">value_slot</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;This will be removed soon in favor of a more generic way to query values.&quot;</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">find_all_values_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Find all values of a certain type.&quot;&quot;&quot;</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">value_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
            <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_item</span><span class="o">=</span><span class="n">value_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value registered for: </span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">type_name</span> <span class="o">==</span> <span class="n">value_type</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                <span class="n">result</span><span class="p">[</span><span class="n">value_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_obj</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="c1"># TODO: compare all attributes if id is equal, just to make sure...</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DataRegistry</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">id</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


















  <div class="doc doc-object doc-method">



<h5 id="kiara.data.registry.BaseDataRegistry.find_all_values_of_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_all_values_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">)</span></code>


<a href="#kiara.data.registry.BaseDataRegistry.find_all_values_of_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Find all values of a certain type.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/registry/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@deprecated</span><span class="p">(</span>
    <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;This will be removed soon in favor of a more generic way to query values.&quot;</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">find_all_values_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Find all values of a certain type.&quot;&quot;&quot;</span>

    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">value_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
        <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_item</span><span class="o">=</span><span class="n">value_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value registered for: </span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">type_name</span> <span class="o">==</span> <span class="n">value_type</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
            <span class="n">result</span><span class="p">[</span><span class="n">value_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_obj</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>









  <div class="doc doc-object doc-method">



<h5 id="kiara.data.registry.BaseDataRegistry.get_versions_for_alias" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_versions_for_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">)</span></code>


<a href="#kiara.data.registry.BaseDataRegistry.get_versions_for_alias" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return all available versions for the specified alias.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/registry/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_versions_for_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Return all available versions for the specified alias.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">_alias</span> <span class="o">=</span> <span class="n">ValueAlias</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">ValueAlias</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for alias: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_alias</span> <span class="o">=</span> <span class="n">alias</span>

    <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">value_slot</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No alias &#39;</span><span class="si">{</span><span class="n">_alias</span><span class="o">.</span><span class="n">alias</span><span class="si">}</span><span class="s2">&#39; registered with registry.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">value_slot</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.data.registry.DataRegistry" class="doc doc-heading">
        <code>
DataRegistry            (<a class="autorefs autorefs-internal" title="kiara.data.registry.BaseDataRegistry" href="../data/registry/__init__/#kiara.data.registry.BaseDataRegistry">BaseDataRegistry</a>)
        </code>



<a href="#kiara.data.registry.DataRegistry" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/registry/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DataRegistry</span><span class="p">(</span><span class="n">BaseDataRegistry</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_register_value_and_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Register data into this registry.</span>

<span class="sd">        Returns the values id. In case the value already has a value set (meaning it&#39;s different from string [NO_ID_YET_MARKER][kiara.data.value.NO_ID_YET_MARKER] / &#39;__no_id_yet__&#39;</span>
<span class="sd">        this method must use this id or throw an exception. Otherwise, it is required that the result id is different</span>
<span class="sd">        from ``NO_ID_YET_MARKER`` and a non-empty string.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_register_remote_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Register an existing value from a different registry into this one.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            value: the original value (with the &#39;_registry&#39; attribute still pointing to the original registry)</span>

<span class="sd">        Returns:</span>
<span class="sd">            either None (in which case the original value object will be copied with the &#39;_registry&#39; and &#39;_kiara&#39; attributes adjusted), or a value object.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">register_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value_data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span> <span class="o">=</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span>
        <span class="n">value_schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>

        <span class="c1"># if lineage and not lineage.output_name:</span>
        <span class="c1">#     raise Exception(f&quot;Value lineage for data of type &#39;{value_data.value_schema.type}&#39; does not have &#39;output_name&#39; field set.&quot;)</span>

        <span class="n">value_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">value_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t register value: value id &#39;</span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&#39; already exists.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">value_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">alias_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t register value: value id &#39;</span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&#39; already exists as alias.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">value_schema</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_data</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
                <span class="n">value_schema</span> <span class="o">=</span> <span class="n">value_data</span><span class="o">.</span><span class="n">value_schema</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value schema provided for value: </span><span class="si">{</span><span class="n">value_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">value_schema</span> <span class="o">=</span> <span class="n">ValueSchema</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">value_schema</span><span class="p">)</span>

        <span class="bp">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">get_value_type_cls</span><span class="p">(</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">_type_obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type_config</span><span class="p">)</span>

        <span class="n">existing_value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_data</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">value_data</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">metadata</span><span class="p">:</span>

                <span class="k">if</span> <span class="n">lineage</span><span class="p">:</span>
                    <span class="n">existing_lineage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">value_data</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">existing_lineage</span><span class="p">:</span>
                        <span class="n">log_message</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Overwriting existing value lineage for: </span><span class="si">{</span><span class="n">value_data</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="p">[</span><span class="n">value_data</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">lineage</span>

                <span class="c1"># TODO: check it&#39;s really the same</span>
                <span class="n">our_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_data</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">our_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="s2">&quot;Could not retrieve cloned value, this is probably a bug.&quot;</span>
                    <span class="p">)</span>
                <span class="k">return</span> <span class="n">our_value</span>

            <span class="n">existing_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_value_for_hashes</span><span class="p">(</span><span class="o">*</span><span class="n">value_data</span><span class="o">.</span><span class="n">get_hashes</span><span class="p">())</span>

            <span class="k">if</span> <span class="n">existing_value</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">metadata</span><span class="p">:</span>

                <span class="k">if</span> <span class="n">lineage</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">existing_value</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                    <span class="n">log_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Overwriting value lineage for: </span><span class="si">{</span><span class="n">existing_value</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">lineage</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="p">[</span><span class="n">existing_value</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">lineage</span>

                <span class="k">return</span> <span class="n">existing_value</span>

            <span class="k">if</span> <span class="n">value_data</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span> <span class="ow">and</span> <span class="n">metadata</span><span class="p">:</span>
                <span class="n">_metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
                    <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
                <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">metadata</span><span class="p">:</span>
                    <span class="n">_metadata</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="n">_metadata</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                        <span class="n">_metadata</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="s2">&quot;metadata_item&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
                        <span class="n">_metadata</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="s2">&quot;metadata_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">schema_json</span><span class="p">()</span>

                <span class="c1"># TODO: not resolve value_data ?</span>
                <span class="n">cloned_new_metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_value_obj</span><span class="p">(</span>
                    <span class="n">value_schema</span><span class="o">=</span><span class="n">value_data</span><span class="o">.</span><span class="n">value_schema</span><span class="p">,</span>
                    <span class="n">is_set</span><span class="o">=</span><span class="n">value_data</span><span class="o">.</span><span class="n">is_set</span><span class="p">,</span>
                    <span class="n">is_none</span><span class="o">=</span><span class="n">value_data</span><span class="o">.</span><span class="n">is_none</span><span class="p">,</span>
                    <span class="n">type_obj</span><span class="o">=</span><span class="n">value_data</span><span class="o">.</span><span class="n">type_obj</span><span class="p">,</span>
                    <span class="n">metadata</span><span class="o">=</span><span class="n">_metadata</span><span class="p">,</span>
                    <span class="n">value_hashes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_new_value_obj</span><span class="p">(</span>
                    <span class="n">value_obj</span><span class="o">=</span><span class="n">cloned_new_metadata</span><span class="p">,</span>
                    <span class="n">value_data</span><span class="o">=</span><span class="n">value_data</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(),</span>
                    <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span><span class="p">,</span>
                    <span class="c1"># value_hashes=value_hashes,</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">r</span>

            <span class="n">copied_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_remote_value</span><span class="p">(</span><span class="n">value_data</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">value_data</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Value with id &#39;</span><span class="si">{</span><span class="n">value_data</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39; wasn&#39;t successfully registered. This is most likely a bug.&quot;</span>
                <span class="p">)</span>

            <span class="k">assert</span> <span class="n">copied_value</span><span class="o">.</span><span class="n">_registry</span> <span class="o">==</span> <span class="bp">self</span>
            <span class="k">assert</span> <span class="n">copied_value</span><span class="o">.</span><span class="n">_kiara</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span>

            <span class="k">if</span> <span class="n">value_data</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="n">copied_value</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                <span class="n">log_message</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Value id for value of type </span><span class="si">{</span><span class="n">copied_value</span><span class="o">.</span><span class="n">type_name</span><span class="si">}</span><span class="s2"> changed when registering in other registry.&quot;</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Imported value object with id &#39;</span><span class="si">{</span><span class="n">value_data</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39; resulted in copied value with different id. This is a bug.&quot;</span>
                <span class="p">)</span>

            <span class="c1"># for hash_type, value_hash in copied_value.get_hashes().items():</span>
            <span class="c1">#     self._hashes.setdefault(hash_type, {})[value_hash.hash] = value_id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="p">[</span><span class="n">copied_value</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_data</span><span class="o">.</span><span class="n">get_lineage</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">copied_value</span>

        <span class="k">if</span> <span class="n">value_data</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">,</span>
        <span class="p">]</span> <span class="ow">and</span> <span class="n">value_schema</span><span class="o">.</span><span class="n">default</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">,</span>
        <span class="p">]:</span>

            <span class="k">if</span> <span class="n">metadata</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
            <span class="n">value_data</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">value_data</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">]:</span>
            <span class="c1"># TODO: actually implement that</span>
            <span class="k">for</span> <span class="n">hash_type</span> <span class="ow">in</span> <span class="n">_type_obj</span><span class="o">.</span><span class="n">get_supported_hash_types</span><span class="p">():</span>
                <span class="n">hash_str</span> <span class="o">=</span> <span class="n">_type_obj</span><span class="o">.</span><span class="n">calculate_value_hash</span><span class="p">(</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">value_data</span><span class="p">,</span> <span class="n">hash_type</span><span class="o">=</span><span class="n">hash_type</span>
                <span class="p">)</span>
                <span class="n">existing_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_value_for_hashes</span><span class="p">(</span>
                    <span class="n">ValueHash</span><span class="p">(</span><span class="n">hash_type</span><span class="o">=</span><span class="n">hash_type</span><span class="p">,</span> <span class="nb">hash</span><span class="o">=</span><span class="n">hash_str</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">existing_value</span><span class="p">:</span>
                    <span class="k">break</span>

        <span class="k">if</span> <span class="n">existing_value</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">metadata</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">lineage</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">existing_value</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">log_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Overwriting lineage for value &#39;</span><span class="si">{</span><span class="n">existing_value</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">lineage</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="p">[</span><span class="n">existing_value</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">lineage</span>
            <span class="k">return</span> <span class="n">existing_value</span>

        <span class="k">if</span> <span class="n">value_schema</span><span class="o">.</span><span class="n">is_constant</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">value_data</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">]</span>
                <span class="ow">and</span> <span class="n">value_data</span> <span class="o">!=</span> <span class="n">value_schema</span><span class="o">.</span><span class="n">default</span>
            <span class="p">):</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
            <span class="n">value_data</span> <span class="o">=</span> <span class="n">value_schema</span><span class="o">.</span><span class="n">default</span>

        <span class="n">is_set</span> <span class="o">=</span> <span class="n">value_data</span> <span class="o">!=</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span>
        <span class="n">is_none</span> <span class="o">=</span> <span class="n">value_data</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">]</span>

        <span class="n">_metadata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">metadata</span><span class="p">:</span>
            <span class="n">_metadata</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">_metadata</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">_metadata</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="s2">&quot;metadata_item&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
                <span class="n">_metadata</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="s2">&quot;metadata_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">schema_json</span><span class="p">()</span>

        <span class="c1"># value_hashes: typing.Dict[str] = {}</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_value_obj</span><span class="p">(</span>
            <span class="n">value_schema</span><span class="o">=</span><span class="n">value_schema</span><span class="p">,</span>
            <span class="n">is_set</span><span class="o">=</span><span class="n">is_set</span><span class="p">,</span>
            <span class="n">is_none</span><span class="o">=</span><span class="n">is_none</span><span class="p">,</span>
            <span class="n">type_obj</span><span class="o">=</span><span class="n">_type_obj</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">_metadata</span><span class="p">,</span>
            <span class="n">value_hashes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_register_new_value_obj</span><span class="p">(</span>
            <span class="n">value_obj</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
            <span class="n">value_data</span><span class="o">=</span><span class="n">value_data</span><span class="p">,</span>
            <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span><span class="p">,</span>
            <span class="c1"># value_hashes=value_hashes,</span>
        <span class="p">)</span>

        <span class="c1"># if not value.is_none:</span>
        <span class="c1"># value.get_metadata()</span>
        <span class="c1">#     metadata = self._kiara.metadata_mgmt.get_value_metadata(value=value, also_return_schema=True)</span>
        <span class="c1">#     print(metadata)</span>

        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_get_value_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]:</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">value_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_create_value_obj</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span><span class="p">,</span>
        <span class="n">is_set</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">is_none</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">type_obj</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">value_hashes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">ValueHash</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="c1"># if value_schema.is_constant and value_data not in [</span>
        <span class="c1">#     SpecialValue.NO_VALUE,</span>
        <span class="c1">#     SpecialValue.NOT_SET,</span>
        <span class="c1">#     None,</span>
        <span class="c1"># ]:</span>
        <span class="c1">#     raise Exception(</span>
        <span class="c1">#         &quot;Can&#39;t create value. Is a constant, but value data was provided.&quot;</span>
        <span class="c1">#     )</span>

        <span class="k">if</span> <span class="n">type_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value_schema</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">value_types</span><span class="p">:</span>
                <span class="n">log_message</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Value type &#39;</span><span class="si">{</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&#39; not supported in this kiara environment, changing type to &#39;any&#39;.&quot;</span>
                <span class="p">)</span>
                <span class="n">type_cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">get_value_type_cls</span><span class="p">(</span><span class="s2">&quot;any&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">type_cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">get_value_type_cls</span><span class="p">(</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="n">type_obj</span> <span class="o">=</span> <span class="n">type_cls</span><span class="p">(</span><span class="o">**</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type_config</span><span class="p">)</span>

        <span class="n">register_token</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register_tokens</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">register_token</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">Value</span><span class="p">(</span>
                <span class="n">registry</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                <span class="n">value_schema</span><span class="o">=</span><span class="n">value_schema</span><span class="p">,</span>
                <span class="n">type_obj</span><span class="o">=</span><span class="n">type_obj</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                <span class="n">is_set</span><span class="o">=</span><span class="n">is_set</span><span class="p">,</span>
                <span class="n">is_none</span><span class="o">=</span><span class="n">is_none</span><span class="p">,</span>
                <span class="n">hashes</span><span class="o">=</span><span class="n">value_hashes</span><span class="p">,</span>
                <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
                <span class="n">register_token</span><span class="o">=</span><span class="n">register_token</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_register_tokens</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">register_token</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_register_new_value_obj</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value_obj</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span>
        <span class="n">value_data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
        <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">],</span>
        <span class="c1"># value_hashes: typing.Optional[typing.Mapping[str, ValueHash]] = None,</span>
    <span class="p">):</span>

        <span class="c1"># assert value_obj.id == NO_ID_YET_MARKER</span>

        <span class="k">if</span> <span class="n">value_data</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">,</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">IGNORE</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">]:</span>
            <span class="c1"># TODO: should we keep the original value?</span>
            <span class="n">value_data</span> <span class="o">=</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">type_obj</span><span class="o">.</span><span class="n">import_value</span><span class="p">(</span><span class="n">value_data</span><span class="p">)</span>

        <span class="n">value_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_value_and_data</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value_obj</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">value_data</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">NO_ID_YET_MARKER</span><span class="p">:</span>
            <span class="n">value_obj</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">value_id</span>

        <span class="k">if</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="n">value_id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Inconsistent id for value: </span><span class="si">{</span><span class="n">value_obj</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">value_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Value id &#39;</span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&#39; wasn&#39;t registered propertly in registry. This is most likely a bug.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">lineage</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="p">[</span><span class="n">value_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">lineage</span>
        <span class="c1"># if value_hashes is None:</span>
        <span class="c1">#     value_hashes = {}</span>
        <span class="c1"># for hash_type, value_hash in value_hashes.items():</span>
        <span class="c1">#     self._hashes.setdefault(hash_type, {})[value_hash.hash] = value_id</span>

        <span class="k">return</span> <span class="n">value_obj</span>

    <span class="k">def</span> <span class="nf">set_value_lineage</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_item</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">],</span> <span class="n">value_lineage</span><span class="p">:</span> <span class="n">ValueLineage</span>
    <span class="p">):</span>

        <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_item</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value available for: </span><span class="si">{</span><span class="n">value_item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="p">[</span><span class="n">value_obj</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_lineage</span>

    <span class="k">def</span> <span class="nf">link_alias</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">],</span>
        <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">register_missing_alias</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value for: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="n">alias</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_slot</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">register_missing_alias</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t link value to alias &#39;</span><span class="si">{</span><span class="n">alias</span><span class="si">}</span><span class="s2">&#39;: alias not registered.&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">register_alias</span><span class="p">(</span><span class="n">value_or_schema</span><span class="o">=</span><span class="n">value_obj</span><span class="p">,</span> <span class="n">alias_name</span><span class="o">=</span><span class="n">alias</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value_alias</span> <span class="o">=</span> <span class="n">ValueAlias</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value_alias</span><span class="o">.</span><span class="n">tag</span><span class="p">:</span>
                <span class="n">value_slot</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span><span class="n">value_obj</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="n">value_alias</span><span class="o">.</span><span class="n">tag</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value_slot</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span><span class="n">value_obj</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">link_aliases</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">],</span>
        <span class="o">*</span><span class="n">aliases</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">register_missing_aliases</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value for: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">register_missing_aliases</span><span class="p">:</span>
            <span class="n">invalid</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">aliases</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">alias</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">alias_names</span><span class="p">:</span>
                    <span class="n">invalid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">invalid</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t link value(s), invalid alias(es): </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">invalid</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

        <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">aliases</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">link_alias</span><span class="p">(</span><span class="n">value_obj</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="n">alias</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_check_valid_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>

        <span class="n">match</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">VALID_ALIAS_PATTERN</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">match</span> <span class="k">else</span> <span class="kc">False</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_register_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSlot</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">register_aliases</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value_or_schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">callbacks</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">ValueSlotUpdateHandler</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]:</span>

        <span class="n">invalid</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">aliases</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid_alias</span><span class="p">(</span><span class="n">alias_name</span><span class="o">=</span><span class="n">alias</span><span class="p">):</span>
                <span class="n">invalid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">invalid</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid alias(es), only alphanumeric characters, &#39;-&#39;, and &#39;_&#39; allowed in alias name: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">invalid</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">aliases</span><span class="p">:</span>
            <span class="n">vs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">register_alias</span><span class="p">(</span>
                <span class="n">value_or_schema</span><span class="o">=</span><span class="n">value_or_schema</span><span class="p">,</span> <span class="n">alias_name</span><span class="o">=</span><span class="n">alias</span><span class="p">,</span> <span class="n">callbacks</span><span class="o">=</span><span class="n">callbacks</span>
            <span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">alias</span><span class="p">]</span> <span class="o">=</span> <span class="n">vs</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">register_alias</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value_or_schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="c1"># preseed: bool = False,</span>
        <span class="n">alias_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">callbacks</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">ValueSlotUpdateHandler</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSlot</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Register a value slot.</span>

<span class="sd">        A value slot is an object that holds multiple versions of values that all use the same schema.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            value_or_schema: a value, value_id, or schema, if value, it is added to the newly created slot (after preseed, if selected)</span>
<span class="sd">            preseed: whether to add an empty/non-set value to the newly created slot</span>
<span class="sd">            alias_name: the alias name, will be auto-created if not provided</span>
<span class="sd">            callbacks: a list of callbacks to trigger whenever the alias is updated</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">alias_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">alias_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">alias_name</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Empty alias name not allowed.&quot;</span><span class="p">)</span>

        <span class="n">match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid_alias</span><span class="p">(</span><span class="n">alias_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39;: only alphanumeric characters, &#39;-&#39;, and &#39;_&#39; allowed in alias name.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># if the provided value_or_schema argument is a string, it must be a value_id (for now)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">value_or_schema</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t register alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39;, provided string &#39;</span><span class="si">{</span><span class="n">value_or_schema</span><span class="si">}</span><span class="s2">&#39; not an existing value id.&quot;</span>
                <span class="p">)</span>
            <span class="n">_value_or_schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">_value_or_schema</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value registered for: </span><span class="si">{</span><span class="n">value_or_schema</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">value_or_schema</span> <span class="o">=</span> <span class="n">_value_or_schema</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="n">_value_schema</span> <span class="o">=</span> <span class="n">value_or_schema</span><span class="o">.</span><span class="n">value_schema</span>
            <span class="n">_value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_or_schema</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">):</span>
            <span class="n">_value_schema</span> <span class="o">=</span> <span class="n">value_or_schema</span>
            <span class="n">_value</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid value type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">alias_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_aliases</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t register alias: alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39; already exists.&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">alias_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_value_ids</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t register alias: alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39; already exists as value id.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># vs = ValueSlot.from_value(id=_id, value=value_or_schema)</span>
        <span class="n">vs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_alias</span><span class="p">(</span><span class="n">alias_name</span><span class="o">=</span><span class="n">alias_name</span><span class="p">,</span> <span class="n">value_schema</span><span class="o">=</span><span class="n">_value_schema</span><span class="p">)</span>
        <span class="c1"># self._value_slots[vs.id] = vs</span>

        <span class="c1"># if preseed:</span>
        <span class="c1">#     _v = Value(value_schema=_value_schema, kiara=self._kiara, registry=self)</span>
        <span class="c1">#     vs.add_value(_v)</span>

        <span class="k">if</span> <span class="n">callbacks</span><span class="p">:</span>
            <span class="n">vs</span><span class="o">.</span><span class="n">register_callbacks</span><span class="p">(</span><span class="o">*</span><span class="n">callbacks</span><span class="p">)</span>
            <span class="c1"># self.register_callbacks(vs, *callbacks)</span>

        <span class="k">if</span> <span class="n">_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">vs</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">vs</span>

    <span class="c1"># def find_value_slots(</span>
    <span class="c1">#     self, value_item: typing.Union[str, Value]</span>
    <span class="c1"># ) -&gt; typing.List[ValueSlot]:</span>
    <span class="c1">#</span>
    <span class="c1">#     value_item = self.get_value_obj(value_item)</span>
    <span class="c1">#     result = []</span>
    <span class="c1">#     for slot_id, slot in self._value_slots.items():</span>
    <span class="c1">#         if slot.is_latest_value(value_item):</span>
    <span class="c1">#             result.append(slot)</span>
    <span class="c1">#     return result</span>

    <span class="c1"># def register_callbacks(</span>
    <span class="c1">#     self,</span>
    <span class="c1">#     alias: typing.Union[str, ValueSlot],</span>
    <span class="c1">#     *callbacks: ValueSlotUpdateHandler,</span>
    <span class="c1"># ) -&gt; None:</span>
    <span class="c1">#</span>
    <span class="c1">#     _value_slot = self.get_value_slot(alias)</span>
    <span class="c1">#     _value_slot.register_callbacks(*callbacks)</span>

    <span class="k">def</span> <span class="nf">update_value_slot</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value_slot</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">],</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
        <span class="n">value_lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="c1"># first, resolve a potential string into a value_slot or value</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_slot</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">value_slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">alias_names</span><span class="p">:</span>
                <span class="n">_value_slot</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
                    <span class="kc">None</span><span class="p">,</span> <span class="n">Value</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">,</span> <span class="nb">str</span>
                <span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="n">value_slot</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">value_slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
                <span class="n">_value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_slot</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_value_slot</span> <span class="o">=</span> <span class="n">value_slot</span>

            <span class="k">if</span> <span class="n">_value_slot</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t retrieve target object for id: </span><span class="si">{</span><span class="n">value_slot</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">value_slot</span> <span class="o">=</span> <span class="n">_value_slot</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_slot</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="n">aliases</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_aliases_for_value</span><span class="p">(</span><span class="n">value_slot</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="c1"># slots = self.find_value_slots(value_slot)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">aliases</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value slot found for value &#39;</span><span class="si">{</span><span class="n">value_slot</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">aliases</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Multiple value slots found for value &#39;</span><span class="si">{</span><span class="n">value_slot</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39;. This is not supported (yet).&quot;</span>
                <span class="p">)</span>
            <span class="n">_value_slot_2</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span>
                <span class="n">alias</span><span class="o">=</span><span class="n">aliases</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">alias</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_slot</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
            <span class="n">_value_slot_2</span> <span class="o">=</span> <span class="n">value_slot</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for value slot: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value_slot</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">assert</span> <span class="n">_value_slot_2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">value_lineage</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t update value slot with new value lineage data.&quot;</span><span class="p">)</span>
            <span class="n">_value</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                <span class="n">value_data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                <span class="n">value_schema</span><span class="o">=</span><span class="n">value_slot</span><span class="o">.</span><span class="n">value_schema</span><span class="p">,</span>
                <span class="n">lineage</span><span class="o">=</span><span class="n">value_lineage</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="c1"># _value = self.create_value(</span>
            <span class="c1">#     value_data=data,</span>
            <span class="c1">#     value_schema=_value_slot.value_schema,</span>
            <span class="c1">#     value_lineage=value_lineage,</span>
            <span class="c1"># )</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_value_slot</span><span class="p">(</span>
            <span class="n">value_slot</span><span class="o">=</span><span class="n">_value_slot_2</span><span class="p">,</span> <span class="n">new_value</span><span class="o">=</span><span class="n">_value</span><span class="p">,</span> <span class="n">trigger_callbacks</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_value_slots</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">updated_values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">],</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]:</span>

        <span class="n">updated</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">cb_map</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlotUpdateHandler</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">invalid</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">alias</span><span class="p">,</span> <span class="n">value_item</span> <span class="ow">in</span> <span class="n">updated_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
                <span class="n">alias</span> <span class="o">=</span> <span class="n">alias</span><span class="o">.</span><span class="n">id</span>

            <span class="n">_alias</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">_alias</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
                    <span class="n">invalid</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">alias</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">invalid</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">invalid</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t update value slots: invalid alias name(s) &#39;</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">invalid</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="n">alias</span><span class="p">,</span> <span class="n">value_item</span> <span class="ow">in</span> <span class="n">updated_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
                <span class="n">alias</span> <span class="o">=</span> <span class="n">alias</span><span class="o">.</span><span class="n">id</span>

            <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value_slot</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t retrieve value slot for alias: </span><span class="si">{</span><span class="n">alias</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">alias</span><span class="p">,</span> <span class="n">value_item</span> <span class="ow">in</span> <span class="n">updated_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
                <span class="n">alias</span> <span class="o">=</span> <span class="n">alias</span><span class="o">.</span><span class="n">id</span>

            <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value_slot</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value slot for alias: </span><span class="si">{</span><span class="n">alias</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_item</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
                    <span class="n">_value_item</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="n">value_item</span>
                    <span class="k">if</span> <span class="n">_value_item</span><span class="o">.</span><span class="n">_registry</span> <span class="o">!=</span> <span class="bp">self</span><span class="p">:</span>
                        <span class="n">_value_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                            <span class="n">_value_item</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span>
                        <span class="p">)</span>
                    <span class="k">elif</span> <span class="n">metadata</span><span class="p">:</span>
                        <span class="n">_value_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                            <span class="n">_value_item</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span>
                        <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">_value_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                        <span class="n">value_data</span><span class="o">=</span><span class="n">value_item</span><span class="p">,</span>
                        <span class="n">value_schema</span><span class="o">=</span><span class="n">value_slot</span><span class="o">.</span><span class="n">value_schema</span><span class="p">,</span>
                        <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
                        <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span><span class="p">,</span>
                    <span class="p">)</span>

                <span class="n">updated_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_value_slot</span><span class="p">(</span>
                    <span class="n">value_slot</span><span class="o">=</span><span class="n">value_slot</span><span class="p">,</span>
                    <span class="n">new_value</span><span class="o">=</span><span class="n">_value_item</span><span class="p">,</span>
                    <span class="n">trigger_callbacks</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">result</span><span class="p">[</span><span class="n">value_slot</span><span class="p">]</span> <span class="o">=</span> <span class="n">updated_item</span>
                <span class="k">if</span> <span class="n">updated_item</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">cb_id</span><span class="p">,</span> <span class="n">cb</span> <span class="ow">in</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">_callbacks</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="n">cb_map</span><span class="p">[</span><span class="n">cb_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">cb</span>
                        <span class="n">updated</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">cb_id</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value_slot</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">log_message</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                    <span class="kn">import</span> <span class="nn">traceback</span>

                    <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                <span class="n">result</span><span class="p">[</span><span class="n">value_slot</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span>

        <span class="k">for</span> <span class="n">cb_id</span><span class="p">,</span> <span class="n">value_slots</span> <span class="ow">in</span> <span class="n">updated</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">cb</span> <span class="o">=</span> <span class="n">cb_map</span><span class="p">[</span><span class="n">cb_id</span><span class="p">]</span>
            <span class="n">cb</span><span class="o">.</span><span class="n">values_updated</span><span class="p">(</span><span class="o">*</span><span class="n">value_slots</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">_update_value_slot</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_slot</span><span class="p">:</span> <span class="n">ValueSlot</span><span class="p">,</span> <span class="n">new_value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span> <span class="n">trigger_callbacks</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="n">last_version</span> <span class="o">=</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">latest_version_nr</span>
        <span class="n">new_version</span> <span class="o">=</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span>
            <span class="n">new_value</span><span class="p">,</span> <span class="n">trigger_callbacks</span><span class="o">=</span><span class="n">trigger_callbacks</span>
        <span class="p">)</span>

        <span class="n">updated</span> <span class="o">=</span> <span class="n">last_version</span> <span class="o">!=</span> <span class="n">new_version</span>
        <span class="k">return</span> <span class="n">updated</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">












  <div class="doc doc-object doc-method">



<h5 id="kiara.data.registry.DataRegistry.register_alias" class="doc doc-heading">
<code class="highlight language-python"><span class="n">register_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_or_schema</span><span class="p">,</span> <span class="n">alias_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">callbacks</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#kiara.data.registry.DataRegistry.register_alias" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Register a value slot.</p>
<p>A value slot is an object that holds multiple versions of values that all use the same schema.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>value_or_schema</code></td>
        <td><code>Union[kiara.data.values.Value, kiara.data.values.ValueSchema, str]</code></td>
        <td><p>a value, value_id, or schema, if value, it is added to the newly created slot (after preseed, if selected)</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>preseed</code></td>
        <td></td>
        <td><p>whether to add an empty/non-set value to the newly created slot</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>alias_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>the alias name, will be auto-created if not provided</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>callbacks</code></td>
        <td><code>Optional[Iterable[kiara.data.registry.ValueSlotUpdateHandler]]</code></td>
        <td><p>a list of callbacks to trigger whenever the alias is updated</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/data/registry/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">register_alias</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">value_or_schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="c1"># preseed: bool = False,</span>
    <span class="n">alias_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">callbacks</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">ValueSlotUpdateHandler</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSlot</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Register a value slot.</span>

<span class="sd">    A value slot is an object that holds multiple versions of values that all use the same schema.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        value_or_schema: a value, value_id, or schema, if value, it is added to the newly created slot (after preseed, if selected)</span>
<span class="sd">        preseed: whether to add an empty/non-set value to the newly created slot</span>
<span class="sd">        alias_name: the alias name, will be auto-created if not provided</span>
<span class="sd">        callbacks: a list of callbacks to trigger whenever the alias is updated</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">alias_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">alias_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">alias_name</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Empty alias name not allowed.&quot;</span><span class="p">)</span>

    <span class="n">match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid_alias</span><span class="p">(</span><span class="n">alias_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39;: only alphanumeric characters, &#39;-&#39;, and &#39;_&#39; allowed in alias name.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># if the provided value_or_schema argument is a string, it must be a value_id (for now)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value_or_schema</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t register alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39;, provided string &#39;</span><span class="si">{</span><span class="n">value_or_schema</span><span class="si">}</span><span class="s2">&#39; not an existing value id.&quot;</span>
            <span class="p">)</span>
        <span class="n">_value_or_schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_value_or_schema</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value registered for: </span><span class="si">{</span><span class="n">value_or_schema</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">value_or_schema</span> <span class="o">=</span> <span class="n">_value_or_schema</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
        <span class="n">_value_schema</span> <span class="o">=</span> <span class="n">value_or_schema</span><span class="o">.</span><span class="n">value_schema</span>
        <span class="n">_value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_or_schema</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">):</span>
        <span class="n">_value_schema</span> <span class="o">=</span> <span class="n">value_or_schema</span>
        <span class="n">_value</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid value type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">alias_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_aliases</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Can&#39;t register alias: alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39; already exists.&quot;</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">alias_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_value_ids</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Can&#39;t register alias: alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39; already exists as value id.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># vs = ValueSlot.from_value(id=_id, value=value_or_schema)</span>
    <span class="n">vs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_alias</span><span class="p">(</span><span class="n">alias_name</span><span class="o">=</span><span class="n">alias_name</span><span class="p">,</span> <span class="n">value_schema</span><span class="o">=</span><span class="n">_value_schema</span><span class="p">)</span>
    <span class="c1"># self._value_slots[vs.id] = vs</span>

    <span class="c1"># if preseed:</span>
    <span class="c1">#     _v = Value(value_schema=_value_schema, kiara=self._kiara, registry=self)</span>
    <span class="c1">#     vs.add_value(_v)</span>

    <span class="k">if</span> <span class="n">callbacks</span><span class="p">:</span>
        <span class="n">vs</span><span class="o">.</span><span class="n">register_callbacks</span><span class="p">(</span><span class="o">*</span><span class="n">callbacks</span><span class="p">)</span>
        <span class="c1"># self.register_callbacks(vs, *callbacks)</span>

    <span class="k">if</span> <span class="n">_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">vs</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">vs</span>
</code></pre></div>
        </details>
    </div>

  </div>










  </div>

    </div>

  </div>




  <div class="doc doc-object doc-class">



<h4 id="kiara.data.registry.ValueSlotUpdateHandler" class="doc doc-heading">
        <code>
ValueSlotUpdateHandler            (<span title="typing.Protocol">Protocol</span>)
        </code>



<a href="#kiara.data.registry.ValueSlotUpdateHandler" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The call signature for callbacks that can be registered as value update handlers.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/registry/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueSlotUpdateHandler</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The call signature for callbacks that can be registered as value update handlers.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">values_updated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">items</span><span class="p">:</span> <span class="s2">&quot;ValueSlot&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="o">...</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">














  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h4 id="kiara.data.registry.store" class="doc doc-heading">
        <code>store</code>



<a href="#kiara.data.registry.store" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h5 id="kiara.data.registry.store.LocalDataStore" class="doc doc-heading">
        <code>
LocalDataStore            (<a class="autorefs autorefs-internal" title="kiara.data.registry.DataRegistry" href="../data/registry/__init__/#kiara.data.registry.DataRegistry">DataRegistry</a>)
        </code>



<a href="#kiara.data.registry.store.LocalDataStore" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>An implementation of a <em>kiara</em> data registry that stores data locally, so it can be accessed across sessions.</p>
<p>Data is stored under the value for the configured 'base_path' attribute, along with <a class="autorefs autorefs-internal" href="../metadata/data/#kiara.metadata.data.LoadConfig">LoadConfig</a> data
that describes how the data can be re-loaded into memory.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/registry/store.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">LocalDataStore</span><span class="p">(</span><span class="n">DataRegistry</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An implementation of a *kiara* data registry that stores data locally, so it can be accessed across sessions.</span>

<span class="sd">    Data is stored under the value for the configured &#39;base_path&#39; attribute, along with [LoadConfig][kiara.metadata.data.LoadConfig] data</span>
<span class="sd">    that describes how the data can be re-loaded into memory.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">,</span> <span class="n">base_path</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]):</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">base_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">base_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="n">base_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_obj_cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_info_cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">SavedValueInfo</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_metadata_cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">base_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span>

    <span class="k">def</span> <span class="nf">_get_saved_value_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SavedValueInfo</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">value_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_info_cache</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_info_cache</span><span class="p">[</span><span class="n">value_id</span><span class="p">]</span>

        <span class="n">metadata_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata_path</span><span class="p">(</span><span class="n">value_id</span><span class="o">=</span><span class="n">value_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">metadata_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value with id &#39;</span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&#39; registered.&quot;</span><span class="p">)</span>

        <span class="n">info_content</span> <span class="o">=</span> <span class="n">metadata_path</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
        <span class="n">info_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">info_content</span><span class="p">)</span>

        <span class="n">value_info</span> <span class="o">=</span> <span class="n">SavedValueInfo</span><span class="p">(</span><span class="o">**</span><span class="n">info_dict</span><span class="p">)</span>

        <span class="k">assert</span> <span class="n">value_info</span><span class="o">.</span><span class="n">value_id</span> <span class="o">==</span> <span class="n">value_id</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_value_info_cache</span><span class="p">[</span><span class="n">value_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_info</span>
        <span class="k">return</span> <span class="n">value_info</span>

    <span class="k">def</span> <span class="nf">_get_value_obj_for_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">value_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_obj_cache</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_obj_cache</span><span class="p">[</span><span class="n">value_id</span><span class="p">]</span>

        <span class="n">value_info</span><span class="p">:</span> <span class="n">SavedValueInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_saved_value_info</span><span class="p">(</span><span class="n">value_id</span><span class="p">)</span>
        <span class="n">value_schema</span> <span class="o">=</span> <span class="n">value_info</span><span class="o">.</span><span class="n">value_schema</span>
        <span class="c1"># value_schema = ValueSchema(</span>
        <span class="c1">#     type=value_info.value_type, type_config=value_info.value_type_config</span>
        <span class="c1"># )</span>

        <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_value_obj</span><span class="p">(</span>
            <span class="n">value_schema</span><span class="o">=</span><span class="n">value_schema</span><span class="p">,</span>
            <span class="n">is_set</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">is_none</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">value_hashes</span><span class="o">=</span><span class="n">value_info</span><span class="o">.</span><span class="n">hashes</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">value_info</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">value_obj</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">value_info</span><span class="o">.</span><span class="n">value_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register_new_value_obj</span><span class="p">(</span>
            <span class="n">value_obj</span><span class="o">=</span><span class="n">value_obj</span><span class="p">,</span>
            <span class="n">value_data</span><span class="o">=</span><span class="n">SpecialValue</span><span class="o">.</span><span class="n">IGNORE</span><span class="p">,</span>
            <span class="n">lineage</span><span class="o">=</span><span class="n">value_info</span><span class="o">.</span><span class="n">lineage</span><span class="p">,</span>
            <span class="c1"># value_hashes=value_info.hashes,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_obj_cache</span><span class="p">[</span><span class="n">value_obj</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_obj</span>
        <span class="k">return</span> <span class="n">value_obj</span>

    <span class="k">def</span> <span class="nf">_get_value_data_for_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">value_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_cache</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_cache</span><span class="p">[</span><span class="n">value_id</span><span class="p">]</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>

        <span class="c1"># # value_obj = self.get_value_obj(value_item=value_id)</span>
        <span class="c1"># metadata_path = self.get_metadata_path(value_id=value_id)</span>
        <span class="c1"># if not metadata_path.exists():</span>
        <span class="c1">#     raise Exception(f&quot;No value with id &#39;{value_id}&#39; registered.&quot;)</span>
        <span class="c1">#</span>
        <span class="c1"># info_content = metadata_path.read_text()</span>
        <span class="c1"># info_dict = json.loads(info_content)</span>
        <span class="c1"># value_info = SavedValueInfo(**info_dict)</span>
        <span class="n">value_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_saved_value_info</span><span class="p">(</span><span class="n">value_id</span><span class="o">=</span><span class="n">value_id</span><span class="p">)</span>

        <span class="k">assert</span> <span class="n">value_info</span><span class="o">.</span><span class="n">value_id</span> <span class="o">==</span> <span class="n">value_id</span>

        <span class="n">load_config</span> <span class="o">=</span> <span class="n">value_info</span><span class="o">.</span><span class="n">load_config</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="o">**</span><span class="n">load_config</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;value_id&quot;</span><span class="p">,</span> <span class="s2">&quot;base_path_input_name&quot;</span><span class="p">,</span> <span class="s2">&quot;doc&quot;</span><span class="p">}))</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_cache</span><span class="p">[</span><span class="n">value_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_get_value_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]:</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_saved_value_info</span><span class="p">(</span><span class="n">value_id</span><span class="p">)</span><span class="o">.</span><span class="n">lineage</span>

    <span class="k">def</span> <span class="nf">_register_value_and_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">data</span> <span class="o">==</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">IGNORE</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
        <span class="c1">#</span>
        <span class="c1"># new_value_id = str(uuid.uuid4())</span>
        <span class="c1">#</span>
        <span class="c1"># value.id = new_value_id</span>
        <span class="c1"># value_type = value.type_name</span>
        <span class="c1">#</span>
        <span class="c1"># # run the type and repo type specific save module, and retrieve the load_config that is needed to retrieve it again later</span>
        <span class="c1"># save_config = self._prepare_save_config(</span>
        <span class="c1">#     value_id=new_value_id, value_type=value_type, value=value</span>
        <span class="c1"># )</span>
        <span class="c1">#</span>
        <span class="c1"># save_module = save_config.create_module(kiara=self._kiara)</span>
        <span class="c1"># result = save_module.run(**save_config.inputs)</span>
        <span class="c1"># load_config_value: Value = result.get_value_obj(&quot;load_config&quot;)</span>
        <span class="c1">#</span>
        <span class="c1"># # assemble the value metadata</span>
        <span class="c1"># metadata: typing.Dict[str, typing.Mapping[str, typing.Any]] = dict(</span>
        <span class="c1">#     value.get_metadata(also_return_schema=True)</span>
        <span class="c1"># )</span>

    <span class="k">def</span> <span class="nf">_register_remote_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>

        <span class="n">value_metadata_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata_path</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_metadata_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t register remote value with id &#39;</span><span class="si">{</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39;. Load config for this id already exists: </span><span class="si">{</span><span class="n">value_metadata_path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">value_type</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">type_name</span>

        <span class="c1"># run the type and repo type specific save module, and retrieve the load_config that is needed to retrieve it again later</span>
        <span class="n">save_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_save_config</span><span class="p">(</span>
            <span class="n">value_id</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">value_type</span><span class="o">=</span><span class="n">value_type</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span>
        <span class="p">)</span>

        <span class="n">save_module</span> <span class="o">=</span> <span class="n">save_config</span><span class="o">.</span><span class="n">create_module</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">save_module</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="o">**</span><span class="n">save_config</span><span class="o">.</span><span class="n">inputs</span><span class="p">)</span>

        <span class="n">load_config_value</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="s2">&quot;load_config&quot;</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">value_type</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
            <span class="n">field_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>
        <span class="n">saved_value</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>

        <span class="n">load_config_data</span> <span class="o">=</span> <span class="n">load_config_value</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>

        <span class="n">metadata</span> <span class="o">=</span> <span class="n">saved_value</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">also_return_schema</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">value_info</span> <span class="o">=</span> <span class="n">SavedValueInfo</span><span class="p">(</span>
            <span class="n">value_id</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">value_schema</span><span class="o">=</span><span class="n">saved_value</span><span class="o">.</span><span class="n">value_schema</span><span class="p">,</span>
            <span class="n">is_valid</span><span class="o">=</span><span class="n">saved_value</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">(),</span>
            <span class="n">hashes</span><span class="o">=</span><span class="n">saved_value</span><span class="o">.</span><span class="n">get_hashes</span><span class="p">(),</span>
            <span class="n">lineage</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">get_lineage</span><span class="p">(),</span>
            <span class="n">save_lineage</span><span class="o">=</span><span class="n">saved_value</span><span class="o">.</span><span class="n">get_lineage</span><span class="p">(),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
            <span class="n">load_config</span><span class="o">=</span><span class="n">load_config_data</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">value_metadata_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">value_metadata_path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">value_info</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

        <span class="n">copied_value</span> <span class="o">=</span> <span class="n">saved_value</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">copied_value</span><span class="o">.</span><span class="n">_registry</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">copied_value</span><span class="o">.</span><span class="n">_kiara</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span>

        <span class="k">if</span> <span class="n">copied_value</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="n">log_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Saved value id different to original id &#39;</span><span class="si">{</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
            <span class="n">copied_value</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_value_obj_cache</span><span class="p">[</span><span class="n">copied_value</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">copied_value</span>

        <span class="k">return</span> <span class="n">copied_value</span>

    <span class="k">def</span> <span class="nf">_prepare_save_config</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="s2">&quot;Value&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SaveConfig</span><span class="p">:</span>

        <span class="n">store_operations</span><span class="p">:</span> <span class="n">StoreOperationType</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">get_operations</span><span class="p">(</span><span class="s2">&quot;store_value&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="n">op_config</span> <span class="o">=</span> <span class="n">store_operations</span><span class="o">.</span><span class="n">get_store_operation_for_type</span><span class="p">(</span><span class="n">value_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">op_config</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t save value: no save operation found for value type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
            <span class="p">)</span>

        <span class="n">target_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_path</span><span class="p">(</span><span class="n">value_id</span><span class="o">=</span><span class="n">value_id</span><span class="p">)</span>
        <span class="n">metadata_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata_path</span><span class="p">(</span><span class="n">value_id</span><span class="o">=</span><span class="n">value_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">metadata_path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t save value, metadata file already exists: </span><span class="si">{</span><span class="n">metadata_path</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">input_name</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">type_name</span>
        <span class="k">if</span> <span class="n">input_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
            <span class="n">input_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">input_name</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(),</span>
            <span class="s2">&quot;base_path&quot;</span><span class="p">:</span> <span class="n">target_path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span>
            <span class="s2">&quot;value_id&quot;</span><span class="p">:</span> <span class="n">value_id</span><span class="p">,</span>
        <span class="p">}</span>  <span class="c1"># type: ignore</span>

        <span class="n">save_config</span> <span class="o">=</span> <span class="n">SaveConfig</span><span class="p">(</span>
            <span class="n">module_type</span><span class="o">=</span><span class="n">op_config</span><span class="o">.</span><span class="n">module_type</span><span class="p">,</span>
            <span class="n">module_config</span><span class="o">=</span><span class="n">op_config</span><span class="o">.</span><span class="n">module_config</span><span class="p">,</span>
            <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span>
            <span class="n">load_config_output</span><span class="o">=</span><span class="s2">&quot;load_config&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">save_config</span>

    <span class="k">def</span> <span class="nf">get_data_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;value_</span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">/</span> <span class="s2">&quot;data&quot;</span>

    <span class="k">def</span> <span class="nf">get_metadata_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;value_</span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">/</span> <span class="s2">&quot;value_metadata.json&quot;</span>
        <span class="k">return</span> <span class="n">path</span>

    <span class="c1"># def get_load_config_path(self, value_id: str) -&gt; Path:</span>
    <span class="c1">#     path = self._base_path / f&quot;value_{value_id}&quot; / &quot;load_config.json&quot;</span>
    <span class="c1">#     return path</span>

    <span class="k">def</span> <span class="nf">_get_value_slot_for_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSlot</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">alias_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">[</span><span class="n">alias_name</span><span class="p">]</span>

        <span class="n">alias_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span> <span class="o">/</span> <span class="s2">&quot;aliases&quot;</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;alias_</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">.json&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">alias_file</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No alias with name &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39; registered.&quot;</span><span class="p">)</span>

        <span class="n">file_content</span> <span class="o">=</span> <span class="n">alias_file</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
        <span class="n">alias_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">file_content</span><span class="p">)</span>
        <span class="n">value_schema</span> <span class="o">=</span> <span class="n">ValueSchema</span><span class="p">(</span><span class="o">**</span><span class="n">alias_data</span><span class="p">[</span><span class="s2">&quot;value_schema&quot;</span><span class="p">])</span>

        <span class="n">value_slot</span> <span class="o">=</span> <span class="n">ValueSlot</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">alias_name</span><span class="p">,</span> <span class="n">value_schema</span><span class="o">=</span><span class="n">value_schema</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span> <span class="n">registry</span><span class="o">=</span><span class="bp">self</span>
        <span class="p">)</span>
        <span class="n">value_slot</span><span class="o">.</span><span class="n">register_callbacks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">version</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">alias_data</span><span class="p">[</span><span class="s2">&quot;versions&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())):</span>
            <span class="n">value_id</span> <span class="o">=</span> <span class="n">alias_data</span><span class="p">[</span><span class="s2">&quot;versions&quot;</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">version</span><span class="p">)]</span>
            <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_item</span><span class="o">=</span><span class="n">value_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t find value with id: </span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">tags</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">value_id</span> <span class="ow">in</span> <span class="n">alias_data</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">tags</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">tag</span>
                    <span class="k">for</span> <span class="n">tag</span><span class="p">,</span> <span class="n">version</span> <span class="ow">in</span> <span class="n">alias_data</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">version</span> <span class="o">==</span> <span class="n">version</span>
                <span class="p">]</span>

            <span class="n">new_version</span> <span class="o">=</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span>
                <span class="n">value_obj</span><span class="p">,</span> <span class="n">trigger_callbacks</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="n">tags</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">new_version</span> <span class="o">!=</span> <span class="nb">int</span><span class="p">(</span><span class="n">version</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;New version different to stored version (</span><span class="si">{</span><span class="n">new_version</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">). This is a bug.&quot;</span>
                <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">[</span><span class="n">alias_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_slot</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">[</span><span class="n">alias_name</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_get_available_aliases</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="n">alias_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span> <span class="o">/</span> <span class="s2">&quot;aliases&quot;</span>
        <span class="n">alias_file</span> <span class="o">=</span> <span class="n">alias_path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;alias_*.json&quot;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">af</span> <span class="ow">in</span> <span class="n">alias_file</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">af</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
                <span class="n">log_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Ignoring non-file: </span><span class="si">{</span><span class="n">af</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="n">alias_name</span> <span class="o">=</span> <span class="n">af</span><span class="o">.</span><span class="n">name</span><span class="p">[</span><span class="mi">6</span><span class="p">:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">_get_available_value_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">value_ids</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">x</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span><span class="p">[</span><span class="mi">6</span><span class="p">:]</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;value_*/value_metadata.json&quot;</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="k">return</span> <span class="n">value_ids</span>

    <span class="k">def</span> <span class="nf">_register_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSlot</span><span class="p">:</span>

        <span class="n">alias_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span> <span class="o">/</span> <span class="s2">&quot;aliases&quot;</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;alias_</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">.json&quot;</span>
        <span class="k">if</span> <span class="n">alias_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39; already registered.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">alias_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value slot for alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39; already exists.&quot;</span><span class="p">)</span>

        <span class="n">alias_file</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">vs</span> <span class="o">=</span> <span class="n">ValueSlot</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">alias_name</span><span class="p">,</span> <span class="n">value_schema</span><span class="o">=</span><span class="n">value_schema</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span> <span class="n">registry</span><span class="o">=</span><span class="bp">self</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">[</span><span class="n">alias_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">vs</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_write_alias_file</span><span class="p">(</span><span class="n">alias_name</span><span class="p">)</span>
        <span class="n">vs</span><span class="o">.</span><span class="n">register_callbacks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">vs</span>

    <span class="k">def</span> <span class="nf">_write_alias_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">):</span>

        <span class="n">alias_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span> <span class="o">/</span> <span class="s2">&quot;aliases&quot;</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;alias_</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">.json&quot;</span>

        <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">[</span><span class="n">alias_name</span><span class="p">]</span>

        <span class="n">alias_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;value_schema&quot;</span><span class="p">:</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">dict</span><span class="p">(),</span>
            <span class="s2">&quot;versions&quot;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="n">version</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">alias_dict</span><span class="p">[</span><span class="s2">&quot;versions&quot;</span><span class="p">][</span><span class="n">version</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span>

        <span class="k">for</span> <span class="n">tag_name</span><span class="p">,</span> <span class="n">version</span> <span class="ow">in</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">alias_dict</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">][</span><span class="n">tag_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">version</span>

        <span class="n">alias_file</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">alias_dict</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">values_updated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">items</span><span class="p">:</span> <span class="s2">&quot;ValueSlot&quot;</span><span class="p">):</span>

        <span class="n">invalid</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">invalid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">invalid</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t update value(s), invalid aliases: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">invalid</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_alias_file</span><span class="p">(</span><span class="n">alias_name</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">
















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="kiara.data.registry.store.SavedValueInfo" class="doc doc-heading">
        <code>
SavedValueInfo            (<a class="autorefs autorefs-internal" title="kiara.data.values.ValueInfo" href="../data/values/__init__/#kiara.data.values.ValueInfo">ValueInfo</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.registry.store.SavedValueInfo" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/registry/store.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SavedValueInfo</span><span class="p">(</span><span class="n">ValueInfo</span><span class="p">):</span>

    <span class="n">load_config</span><span class="p">:</span> <span class="n">LoadConfig</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The configuration to load this value from disk (or however it is stored).&quot;</span>
    <span class="p">)</span>
    <span class="n">save_lineage</span><span class="p">:</span> <span class="n">ValueLineage</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Information about how the value was saved.&quot;</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h6 id="kiara.data.registry.store.SavedValueInfo.load_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_config</span><span class="p">:</span> <span class="n">LoadConfig</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.registry.store.SavedValueInfo.load_config" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>The configuration to load this value from disk (or however it is stored).</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="kiara.data.registry.store.SavedValueInfo.save_lineage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save_lineage</span><span class="p">:</span> <span class="n">ValueLineage</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.registry.store.SavedValueInfo.save_lineage" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Information about how the value was saved.</p>
    </div>

  </div>










  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.data.types" class="doc doc-heading">
        <code>types</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.types" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>This is the base module that contains everything data type-related in <em>kiara</em>.</p>
<p>I'm still not 100% sure how to best implement the <em>kiara</em> type system, there are several ways it could be done, for example
based on Python type-hints, using JSON-schema, Avro (which is my 2nd favourite option), as well as by implementing a
custom type-class hierarchy. Which is what I have choosen to try first. For now, it looks like it'll work out,
but there is a chance requirements I haven't forseen will crop up that could make this become ugly.</p>
<p>Anyway, the way it works (for now) is that <em>kiara</em> comes with a set of often used types (the standard set of: scalars,
list, dict, table &amp; array, etc.) which each come with 2 functions that can serialize and deserialize values of that
type in a persistant fashion -- which could be storing as a file on disk, or as a cell/row in a database. Those functions
will most likley be <em>kiara</em> modules themselves, with even more restricted input/output type options.</p>
<p>In addition, packages that contain modules can implement their own, custom types, if suitable ones are not available in
core-<em>kiara</em>. Those can either be 'serialized/deserialized' into <em>kiara</em>-native types (which in turn will serialize them
using their own serializing functions), or will have to implement custom serializing functionality (which will probably
be discouraged, since this might not be trivial and there are quite a few things to consider).</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h4 id="kiara.data.types.ValueType" class="doc doc-heading">
        <code>
ValueType            (<span title="abc.ABC">ABC</span>, <span title="typing.Generic">Generic</span>)
        </code>



<a href="#kiara.data.types.ValueType" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Base class that all <em>kiara</em> types must inherit from.</p>
<p><em>kiara</em> types have 3 main responsibilities:</p>
<ul>
<li>serialize into / deserialize from persistent state</li>
<li>data validation</li>
<li>metadata extraction</li>
</ul>
<p>Serializing being the arguably most important of those, because without most of the data management features of
 <em>kiara</em> would be impossible. Validation should not require any explanation. Metadata extraction is important, because
 that metadata will be available to other components of <em>kiara</em> (or frontends for it), without them having to request
 the actual data. That will hopefully make <em>kiara</em> very efficient in terms of memory management, as well as data
 transfer and I/O. Ideally, the actual data (bytes) will only be requested at the last possible moment. For example when a
 module needs the input data to do processing on it -- and even then it might be that it only requests a part of the
 data, say a single column of a table. Or when a frontend needs to display/visualize the data.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueType</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Generic</span><span class="p">[</span><span class="n">TYPE_PYTHON_CLS</span><span class="p">,</span> <span class="n">TYPE_CONFIG_CLS</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Base class that all *kiara* types must inherit from.</span>

<span class="sd">    *kiara* types have 3 main responsibilities:</span>

<span class="sd">     - serialize into / deserialize from persistent state</span>
<span class="sd">     - data validation</span>
<span class="sd">     -  metadata extraction</span>

<span class="sd">     Serializing being the arguably most important of those, because without most of the data management features of</span>
<span class="sd">     *kiara* would be impossible. Validation should not require any explanation. Metadata extraction is important, because</span>
<span class="sd">     that metadata will be available to other components of *kiara* (or frontends for it), without them having to request</span>
<span class="sd">     the actual data. That will hopefully make *kiara* very efficient in terms of memory management, as well as data</span>
<span class="sd">     transfer and I/O. Ideally, the actual data (bytes) will only be requested at the last possible moment. For example when a</span>
<span class="sd">     module needs the input data to do processing on it -- and even then it might be that it only requests a part of the</span>
<span class="sd">     data, say a single column of a table. Or when a frontend needs to display/visualize the data.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_type_metadata</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueTypeMetadata</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ValueTypeMetadata</span><span class="o">.</span><span class="n">from_value_type_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>

    <span class="c1"># @classmethod</span>
    <span class="c1"># def doc(cls) -&gt; str:</span>
    <span class="c1">#</span>
    <span class="c1">#     return extract_doc_from_cls(cls)</span>
    <span class="c1">#</span>
    <span class="c1"># @classmethod</span>
    <span class="c1"># def desc(cls) -&gt; str:</span>
    <span class="c1">#     return extract_doc_from_cls(cls, only_first_line=True)</span>

    <span class="c1"># @classmethod</span>
    <span class="c1"># def conversions(</span>
    <span class="c1">#     self,</span>
    <span class="c1"># ) -&gt; typing.Optional[typing.Mapping[str, typing.Mapping[str, typing.Any]]]:</span>
    <span class="c1">#     &quot;&quot;&quot;Return a dictionary of configuration for modules that can transform this type.</span>
    <span class="c1">#</span>
    <span class="c1">#     The name of the transformation is the key of the result dictionary, the configuration is a module configuration</span>
    <span class="c1">#     (dictionary wth &#39;module_type&#39; and optional &#39;module_config&#39;, &#39;input_name&#39; and &#39;output_name&#39; keys).</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#</span>
    <span class="c1">#     return {&quot;string&quot;: {&quot;module_type&quot;: &quot;string.pretty_print&quot;, &quot;input_name&quot;: &quot;item&quot;}}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">check_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ValueType&quot;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Check whether the provided input matches this value type.</span>

<span class="sd">        If it does, return a ValueType object (with the appropriate type configuration).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">backing_python_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">TYPE_PYTHON_CLS</span><span class="p">]:</span>
        <span class="k">pass</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">type_config_cls</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">TYPE_CONFIG_CLS</span><span class="p">]:</span>
        <span class="k">pass</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">candidate_python_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_supported_hash_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">calculate_value_hash</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">hash_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calculate the hash of this value.</span>

<span class="sd">        If a hash can&#39;t be calculated, or the calculation of a type is not implemented (yet), this will return None.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value type &#39;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">_value_type_name</span><span class="si">}</span><span class="s2">&#39; does not support hash calculation.&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">type_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_type_config</span><span class="p">:</span> <span class="n">TYPE_CONFIG_CLS</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">type_config_cls</span><span class="p">(</span><span class="o">**</span><span class="n">type_config</span><span class="p">)</span>  <span class="c1"># type: ignore  # TODO: double-check this is only a mypy issue</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ValueTypeConfigException</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Error creating object for value_type: </span><span class="si">{</span><span class="n">ve</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span>
                <span class="n">type_config</span><span class="p">,</span>
                <span class="n">ve</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="c1"># self._type_config: typing.Mapping[str, typing.Any] = self</span>
        <span class="c1"># self._transformations: typing.Optional[</span>
        <span class="c1">#     typing.Mapping[str, typing.Mapping[str, typing.Any]]</span>
        <span class="c1"># ] = None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">type_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TYPE_CONFIG_CLS</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_config</span>

    <span class="k">def</span> <span class="nf">import_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="k">assert</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">parsed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">parsed</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">parsed</span> <span class="o">=</span> <span class="n">value</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">parsed</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KiaraValueException</span><span class="p">(</span>
                <span class="n">value_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">value_data</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">e</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">parsed</span>

    <span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Parse a value into a supported python type.</span>

<span class="sd">        This exists to make it easier to do trivial conversions (e.g. from a date string to a datetime object).</span>
<span class="sd">        If you choose to overwrite this method, make 100% sure that you don&#39;t change the meaning of the value, and try to</span>
<span class="sd">        avoid adding or removing information from the data (e.g. by changing the resolution of a date).</span>

<span class="sd">        Arguments:</span>
<span class="sd">            v: the value</span>

<span class="sd">        Returns:</span>
<span class="sd">            &#39;None&#39;, if no parsing was done and the original value should be used, otherwise return the parsed Python object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Validate the value. This expects an instance of the defined Python class (from &#39;backing_python_type).&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get_type_hint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;python&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return a type hint for this value type object.</span>

<span class="sd">        This can be used by kiara interfaces to document/validate user input. For now, only &#39;python&#39; type hints are</span>
<span class="sd">        expected to be implemented, but in theory this could also return type hints for other contexts.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">













  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.ValueType.calculate_value_hash" class="doc doc-heading">
<code class="highlight language-python"><span class="n">calculate_value_hash</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">hash_type</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.data.types.ValueType.calculate_value_hash" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Calculate the hash of this value.</p>
<p>If a hash can't be calculated, or the calculation of a type is not implemented (yet), this will return None.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">calculate_value_hash</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">hash_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Calculate the hash of this value.</span>

<span class="sd">    If a hash can&#39;t be calculated, or the calculation of a type is not implemented (yet), this will return None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value type &#39;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">_value_type_name</span><span class="si">}</span><span class="s2">&#39; does not support hash calculation.&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.ValueType.check_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.data.types.ValueType.check_data" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Check whether the provided input matches this value type.</p>
<p>If it does, return a ValueType object (with the appropriate type configuration).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">check_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ValueType&quot;</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Check whether the provided input matches this value type.</span>

<span class="sd">    If it does, return a ValueType object (with the appropriate type configuration).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.ValueType.get_type_hint" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_type_hint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="s1">&#39;python&#39;</span><span class="p">)</span></code>


<a href="#kiara.data.types.ValueType.get_type_hint" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return a type hint for this value type object.</p>
<p>This can be used by kiara interfaces to document/validate user input. For now, only 'python' type hints are
expected to be implemented, but in theory this could also return type hints for other contexts.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_type_hint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;python&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Return a type hint for this value type object.</span>

<span class="sd">    This can be used by kiara interfaces to document/validate user input. For now, only &#39;python&#39; type hints are</span>
<span class="sd">    expected to be implemented, but in theory this could also return type hints for other contexts.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.ValueType.parse_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.ValueType.parse_value" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Parse a value into a supported python type.</p>
<p>This exists to make it easier to do trivial conversions (e.g. from a date string to a datetime object).
If you choose to overwrite this method, make 100% sure that you don't change the meaning of the value, and try to
avoid adding or removing information from the data (e.g. by changing the resolution of a date).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>v</code></td>
        <td></td>
        <td><p>the value</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>'None', if no parsing was done and the original value should be used, otherwise return the parsed Python object</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Parse a value into a supported python type.</span>

<span class="sd">    This exists to make it easier to do trivial conversions (e.g. from a date string to a datetime object).</span>
<span class="sd">    If you choose to overwrite this method, make 100% sure that you don&#39;t change the meaning of the value, and try to</span>
<span class="sd">    avoid adding or removing information from the data (e.g. by changing the resolution of a date).</span>

<span class="sd">    Arguments:</span>
<span class="sd">        v: the value</span>

<span class="sd">    Returns:</span>
<span class="sd">        &#39;None&#39;, if no parsing was done and the original value should be used, otherwise return the parsed Python object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.ValueType.validate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.ValueType.validate" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Validate the value. This expects an instance of the defined Python class (from 'backing_python_type).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Validate the value. This expects an instance of the defined Python class (from &#39;backing_python_type).&quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.data.types.ValueTypeConfigMetadata" class="doc doc-heading">
        <code>
ValueTypeConfigMetadata            (<a class="autorefs autorefs-internal" title="kiara.metadata.core_models.WrapperMetadataModel" href="../metadata/core_models/#kiara.metadata.core_models.WrapperMetadataModel">WrapperMetadataModel</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.types.ValueTypeConfigMetadata" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueTypeConfigMetadata</span><span class="p">(</span><span class="n">WrapperMetadataModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_config_class</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">config_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">ValueTypeConfigSchema</span><span class="p">],</span>
    <span class="p">):</span>

        <span class="n">flat_models</span> <span class="o">=</span> <span class="n">get_flat_models_from_model</span><span class="p">(</span><span class="n">config_cls</span><span class="p">)</span>
        <span class="n">model_name_map</span> <span class="o">=</span> <span class="n">get_model_name_map</span><span class="p">(</span><span class="n">flat_models</span><span class="p">)</span>
        <span class="n">m_schema</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">model_process_schema</span><span class="p">(</span><span class="n">config_cls</span><span class="p">,</span> <span class="n">model_name_map</span><span class="o">=</span><span class="n">model_name_map</span><span class="p">)</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="n">m_schema</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span>

        <span class="n">config_values</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">details</span> <span class="ow">in</span> <span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">type_str</span> <span class="o">=</span> <span class="s2">&quot;-- n/a --&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;type&quot;</span> <span class="ow">in</span> <span class="n">details</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">type_str</span> <span class="o">=</span> <span class="n">details</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>

            <span class="n">desc</span> <span class="o">=</span> <span class="n">details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">DEFAULT_NO_DESC_VALUE</span><span class="p">)</span>

            <span class="n">default</span> <span class="o">=</span> <span class="n">config_cls</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">default</span>

            <span class="k">if</span> <span class="n">default</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">config_cls</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">default_factory</span><span class="p">):</span>
                    <span class="n">default</span> <span class="o">=</span> <span class="n">config_cls</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">default_factory</span><span class="p">()</span>  <span class="c1"># type: ignore</span>

            <span class="n">req</span> <span class="o">=</span> <span class="n">config_cls</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">required</span>

            <span class="n">config_values</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ValueTypeAndDescription</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">type_str</span><span class="p">,</span> <span class="n">value_default</span><span class="o">=</span><span class="n">default</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="n">req</span>
            <span class="p">)</span>

        <span class="n">python_cls</span> <span class="o">=</span> <span class="n">PythonClassMetadata</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">config_cls</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ValueTypeConfigMetadata</span><span class="p">(</span>
            <span class="n">python_class</span><span class="o">=</span><span class="n">python_cls</span><span class="p">,</span> <span class="n">config_values</span><span class="o">=</span><span class="n">config_values</span>
        <span class="p">)</span>

    <span class="n">config_values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueTypeAndDescription</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The available configuration values.&quot;</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.types.ValueTypeConfigMetadata.config_values" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config_values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">ValueTypeAndDescription</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.types.ValueTypeConfigMetadata.config_values" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The available configuration values.</p>
    </div>

  </div>











  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.data.types.ValueTypeConfigSchema" class="doc doc-heading">
        <code>
ValueTypeConfigSchema            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.types.ValueTypeConfigSchema" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Base class that describes the configuration a <a class="autorefs autorefs-internal" href="../data/types/__init__/#kiara.data.types.ValueType"><code>ValueType</code></a> class accepts.</p>
<p>This is stored in the <code>_config_cls</code> class attribute in each <code>ValueType</code> class. By default,
a <code>ValueType</code> is not configurable, unless the <code>_config_cls</code> class attribute points to a sub-class of this class.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueTypeConfigSchema</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class that describes the configuration a [``ValueType``][kiara.data.types.ValueType] class accepts.</span>

<span class="sd">    This is stored in the ``_config_cls`` class attribute in each ``ValueType`` class. By default,</span>
<span class="sd">    a ``ValueType`` is not configurable, unless the ``_config_cls`` class attribute points to a sub-class of this class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">requires_config</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return whether this class can be used as-is, or requires configuration before an instance can be created.&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">required</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">default</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="n">_config_hash</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>
        <span class="n">allow_mutation</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the value for the specified configuation key.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fields__</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No config value &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; in module config class &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config_hash</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
            <span class="n">hashes</span> <span class="o">=</span> <span class="n">deepdiff</span><span class="o">.</span><span class="n">DeepHash</span><span class="p">(</span><span class="n">_d</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_config_hash</span> <span class="o">=</span> <span class="n">hashes</span><span class="p">[</span><span class="n">_d</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config_hash</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_hash</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="n">my_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">MINIMAL</span><span class="p">,</span> <span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">my_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Field name&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">my_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fields__</span><span class="p">:</span>
            <span class="n">my_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">))</span>

        <span class="k">yield</span> <span class="n">my_table</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">












  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.ValueTypeConfigSchema.__eq__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.types.ValueTypeConfigSchema.__eq__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return self==value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.ValueTypeConfigSchema.__hash__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.types.ValueTypeConfigSchema.__hash__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return hash(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_hash</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.ValueTypeConfigSchema.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></code>


<a href="#kiara.data.types.ValueTypeConfigSchema.get" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Get the value for the specified configuation key.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Get the value for the specified configuation key.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fields__</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No config value &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; in module config class &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.ValueTypeConfigSchema.requires_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">requires_config</span><span class="p">()</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.data.types.ValueTypeConfigSchema.requires_config" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return whether this class can be used as-is, or requires configuration before an instance can be created.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">requires_config</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return whether this class can be used as-is, or requires configuration before an instance can be created.&quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">required</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">default</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>





  <div class="doc doc-object doc-function">



<h4 id="kiara.data.types.get_type_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_type_name</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>


<a href="#kiara.data.types.get_type_name" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Utility function to get a pretty string from the class of an object.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_type_name</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Utility function to get a pretty string from the class of an object.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__module__</span> <span class="o">==</span> <span class="s2">&quot;builtins&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-module">



<h4 id="kiara.data.types.core" class="doc doc-heading">
        <code>core</code>



<a href="#kiara.data.types.core" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h5 id="kiara.data.types.core.AnyType" class="doc doc-heading">
        <code>
AnyType            (<a class="autorefs autorefs-internal" title="kiara.data.types.ValueType" href="../data/types/__init__/#kiara.data.types.ValueType">ValueType</a>)
        </code>



<a href="#kiara.data.types.core.AnyType" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Any type / No type information.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">AnyType</span><span class="p">(</span><span class="n">ValueType</span><span class="p">[</span><span class="nb">object</span><span class="p">,</span> <span class="n">ValueTypeConfigSchema</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Any type / No type information.&quot;&quot;&quot;</span>

    <span class="n">_value_type_name</span> <span class="o">=</span> <span class="s2">&quot;any&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">backing_python_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">object</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">type_config_cls</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">ValueTypeConfigSchema</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">ValueTypeConfigSchema</span>

    <span class="k">def</span> <span class="nf">pretty_print_as_renderables</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="s2">&quot;Value&quot;</span><span class="p">,</span> <span class="n">print_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)]</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">














  </div>

    </div>

  </div>




  <div class="doc doc-object doc-class">



<h5 id="kiara.data.types.core.DeserializeConfigData" class="doc doc-heading">
        <code>
DeserializeConfigData            (<span title="kiara.data.types.core.KiaraInternalValueType">KiaraInternalValueType</span>)
        </code>



<a href="#kiara.data.types.core.DeserializeConfigData" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A dictionary representing a configuration to deserialize a value.</p>
<p>This contains all inputs necessary to re-create the value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DeserializeConfigData</span><span class="p">(</span><span class="n">KiaraInternalValueType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A dictionary representing a configuration to deserialize a value.</span>

<span class="sd">    This contains all inputs necessary to re-create the value.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">candidate_python_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">,</span> <span class="n">DeserializeConfig</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">type_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;deserialize_config&quot;</span>

    <span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="n">_value</span> <span class="o">=</span> <span class="n">DeserializeConfig</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">_value</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">DeserializeConfig</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for deserialize config: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h6 id="kiara.data.types.core.DeserializeConfigData.parse_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.core.DeserializeConfigData.parse_value" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Parse a value into a supported python type.</p>
<p>This exists to make it easier to do trivial conversions (e.g. from a date string to a datetime object).
If you choose to overwrite this method, make 100% sure that you don't change the meaning of the value, and try to
avoid adding or removing information from the data (e.g. by changing the resolution of a date).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>v</code></td>
        <td></td>
        <td><p>the value</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>'None', if no parsing was done and the original value should be used, otherwise return the parsed Python object</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
        <span class="n">_value</span> <span class="o">=</span> <span class="n">DeserializeConfig</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_value</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h6 id="kiara.data.types.core.DeserializeConfigData.validate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.core.DeserializeConfigData.validate" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Validate the value. This expects an instance of the defined Python class (from 'backing_python_type).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">DeserializeConfig</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for deserialize config: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-class">



<h5 id="kiara.data.types.core.LoadConfigData" class="doc doc-heading">
        <code>
LoadConfigData            (<span title="kiara.data.types.core.KiaraInternalValueType">KiaraInternalValueType</span>)
        </code>



<a href="#kiara.data.types.core.LoadConfigData" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A dictionary representing load config for a <em>kiara</em> value.</p>
<p>The load config schema itself can be looked up via the wrapper class  '[LoadConfig][kiara.data.persistence.LoadConfig]'.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">LoadConfigData</span><span class="p">(</span><span class="n">KiaraInternalValueType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A dictionary representing load config for a *kiara* value.</span>

<span class="sd">    The load config schema itself can be looked up via the wrapper class  &#39;[LoadConfig][kiara.data.persistence.LoadConfig]&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">candidate_python_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">,</span> <span class="n">LoadConfig</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">type_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;load_config&quot;</span>

    <span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="n">_value</span> <span class="o">=</span> <span class="n">LoadConfig</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">_value</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">LoadConfig</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for load config: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h6 id="kiara.data.types.core.LoadConfigData.parse_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.core.LoadConfigData.parse_value" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Parse a value into a supported python type.</p>
<p>This exists to make it easier to do trivial conversions (e.g. from a date string to a datetime object).
If you choose to overwrite this method, make 100% sure that you don't change the meaning of the value, and try to
avoid adding or removing information from the data (e.g. by changing the resolution of a date).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>v</code></td>
        <td></td>
        <td><p>the value</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>'None', if no parsing was done and the original value should be used, otherwise return the parsed Python object</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
        <span class="n">_value</span> <span class="o">=</span> <span class="n">LoadConfig</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_value</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h6 id="kiara.data.types.core.LoadConfigData.validate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.core.LoadConfigData.validate" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Validate the value. This expects an instance of the defined Python class (from 'backing_python_type).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">LoadConfig</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for load config: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="kiara.data.types.core.ValueInfoData" class="doc doc-heading">
        <code>
ValueInfoData            (<span title="kiara.data.types.core.KiaraInternalValueType">KiaraInternalValueType</span>)
        </code>



<a href="#kiara.data.types.core.ValueInfoData" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A dictionary representing a kiara ValueInfo object.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueInfoData</span><span class="p">(</span><span class="n">KiaraInternalValueType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A dictionary representing a kiara ValueInfo object.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">candidate_python_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">,</span> <span class="n">ValueInfo</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">type_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;value_info&quot;</span>

    <span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="n">_value</span> <span class="o">=</span> <span class="n">ValueInfo</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">_value</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ValueInfo</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for value info: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h6 id="kiara.data.types.core.ValueInfoData.parse_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.core.ValueInfoData.parse_value" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Parse a value into a supported python type.</p>
<p>This exists to make it easier to do trivial conversions (e.g. from a date string to a datetime object).
If you choose to overwrite this method, make 100% sure that you don't change the meaning of the value, and try to
avoid adding or removing information from the data (e.g. by changing the resolution of a date).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>v</code></td>
        <td></td>
        <td><p>the value</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>'None', if no parsing was done and the original value should be used, otherwise return the parsed Python object</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
        <span class="n">_value</span> <span class="o">=</span> <span class="n">ValueInfo</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_value</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h6 id="kiara.data.types.core.ValueInfoData.validate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.core.ValueInfoData.validate" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Validate the value. This expects an instance of the defined Python class (from 'backing_python_type).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ValueInfo</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for value info: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="kiara.data.types.core.ValueLineageData" class="doc doc-heading">
        <code>
ValueLineageData            (<span title="kiara.data.types.core.KiaraInternalValueType">KiaraInternalValueType</span>)
        </code>



<a href="#kiara.data.types.core.ValueLineageData" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A dictionary representing a kiara ValueLineage.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueLineageData</span><span class="p">(</span><span class="n">KiaraInternalValueType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A dictionary representing a kiara ValueLineage.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">candidate_python_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">,</span> <span class="n">ValueLineage</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">type_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;value_lineage&quot;</span>

    <span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="n">_value</span> <span class="o">=</span> <span class="n">ValueLineage</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">_value</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ValueLineage</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for value seed: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h6 id="kiara.data.types.core.ValueLineageData.parse_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.core.ValueLineageData.parse_value" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Parse a value into a supported python type.</p>
<p>This exists to make it easier to do trivial conversions (e.g. from a date string to a datetime object).
If you choose to overwrite this method, make 100% sure that you don't change the meaning of the value, and try to
avoid adding or removing information from the data (e.g. by changing the resolution of a date).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>v</code></td>
        <td></td>
        <td><p>the value</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>'None', if no parsing was done and the original value should be used, otherwise return the parsed Python object</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
        <span class="n">_value</span> <span class="o">=</span> <span class="n">ValueLineage</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_value</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h6 id="kiara.data.types.core.ValueLineageData.validate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.core.ValueLineageData.validate" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Validate the value. This expects an instance of the defined Python class (from 'backing_python_type).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ValueLineage</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for value seed: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="kiara.data.types.type_mgmt" class="doc doc-heading">
        <code>type_mgmt</code>



<a href="#kiara.data.types.type_mgmt" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h5 id="kiara.data.types.type_mgmt.TypeMgmt" class="doc doc-heading">
        <code>
TypeMgmt        </code>



<a href="#kiara.data.types.type_mgmt.TypeMgmt" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/types/type_mgmt.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">TypeMgmt</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="n">Kiara</span> <span class="o">=</span> <span class="n">kiara</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_types</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">bidict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_type_transformations</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_registered_python_classes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_hierarchy</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">invalidate_types</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_value_types</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_type_transformations</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_registered_python_classes</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">bidict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_types</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_types</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_value_types</span> <span class="o">=</span> <span class="n">bidict</span><span class="p">(</span><span class="n">find_all_value_types</span><span class="p">())</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_types</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value_type_hierarchy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;nx.DiGraph&quot;</span><span class="p">:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_hierarchy</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_hierarchy</span>

        <span class="k">def</span> <span class="nf">recursive_base_find</span><span class="p">(</span>
            <span class="bp">cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">,</span> <span class="n">current</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="p">):</span>

            <span class="k">if</span> <span class="n">current</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">current</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">base</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">:</span>

                <span class="k">if</span> <span class="n">base</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                    <span class="n">current</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">inverse</span><span class="p">[</span><span class="n">base</span><span class="p">])</span>

                <span class="n">recursive_base_find</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">current</span><span class="o">=</span><span class="n">current</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">current</span>

        <span class="n">bases</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">bases</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">recursive_base_find</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>

        <span class="n">hierarchy</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">_bases</span> <span class="ow">in</span> <span class="n">bases</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">hierarchy</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">_bases</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="c1"># we only need the first parent, all others will be taken care of by the parent of the parent</span>
            <span class="n">hierarchy</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">_bases</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_type_hierarchy</span> <span class="o">=</span> <span class="n">hierarchy</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_hierarchy</span>

    <span class="k">def</span> <span class="nf">get_type_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Returns the shortest path between the specified type and the &#39;any&#39; type, in reverse direction starting from the specified type.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">value_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; registered.&quot;</span><span class="p">)</span>

        <span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_type_hierarchy</span><span class="p">,</span> <span class="s2">&quot;any&quot;</span><span class="p">,</span> <span class="n">value_type</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_sub_types</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="k">if</span> <span class="n">value_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; registered.&quot;</span><span class="p">)</span>

        <span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>

        <span class="n">desc</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">descendants</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_type_hierarchy</span><span class="p">,</span> <span class="n">value_type</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">desc</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value_type_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">registered_python_classes</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registered_python_classes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registered_python_classes</span>

        <span class="n">registered_types</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">v_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">rel</span> <span class="o">=</span> <span class="n">v_type</span><span class="o">.</span><span class="n">candidate_python_types</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">rel</span><span class="p">:</span>
                <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">rel</span><span class="p">:</span>
                    <span class="n">registered_types</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_registered_python_classes</span> <span class="o">=</span> <span class="n">registered_types</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registered_python_classes</span>

    <span class="k">def</span> <span class="nf">get_type_config_for_data_profile</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">profile_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="n">type_name</span> <span class="o">=</span> <span class="n">TYPE_PROFILE_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">profile_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">type_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;file&quot;</span> <span class="ow">in</span> <span class="n">profile_name</span><span class="p">:</span>
                <span class="n">type_name</span> <span class="o">=</span> <span class="s2">&quot;file&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t find value type name for profile: </span><span class="si">{</span><span class="n">profile_name</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">type_name</span><span class="p">,</span> <span class="s2">&quot;type_config&quot;</span><span class="p">:</span> <span class="p">{}}</span>

    <span class="k">def</span> <span class="nf">determine_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">registered_types</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">registered_python_classes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="p">[]))</span>
        <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">:</span>
            <span class="n">reg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">registered_python_classes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">reg</span><span class="p">:</span>
                <span class="n">registered_types</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">reg</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">registered_types</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">rt</span> <span class="ow">in</span> <span class="n">registered_types</span><span class="p">:</span>
                <span class="n">_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_type_cls</span><span class="p">(</span><span class="n">rt</span><span class="p">)</span>
                <span class="n">match</span> <span class="o">=</span> <span class="n">_cls</span><span class="o">.</span><span class="n">check_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">match</span><span class="p">)</span>

        <span class="c1"># TODO: re-run all checks on all modules, not just the ones that registered interest in the class</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">result_str</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">_value_type_name</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Multiple value types found for value: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result_str</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_value_type_cls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">type_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]:</span>

        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">type_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">t</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No value type &#39;</span><span class="si">{</span><span class="n">type_name</span><span class="si">}</span><span class="s2">&#39;, available types: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">t</span>

    <span class="c1"># def get_value_type_transformations(</span>
    <span class="c1">#     self, value_type_name: str</span>
    <span class="c1"># ) -&gt; typing.Mapping[str, typing.Mapping[str, typing.Any]]:</span>
    <span class="c1">#     &quot;&quot;&quot;Return available transform pipelines for value types.&quot;&quot;&quot;</span>
    <span class="c1">#</span>
    <span class="c1">#     if value_type_name in self._value_type_transformations.keys():</span>
    <span class="c1">#         return self._value_type_transformations[value_type_name]</span>
    <span class="c1">#</span>
    <span class="c1">#     type_cls = self.get_value_type_cls(type_name=value_type_name)</span>
    <span class="c1">#     _configs = type_cls.conversions()</span>
    <span class="c1">#     if _configs is None:</span>
    <span class="c1">#         module_configs = {}</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         module_configs = dict(_configs)</span>
    <span class="c1">#     for base in type_cls.__bases__:</span>
    <span class="c1">#         if hasattr(base, &quot;conversions&quot;):</span>
    <span class="c1">#             _b_configs = base.conversions()  # type: ignore</span>
    <span class="c1">#             if not _b_configs:</span>
    <span class="c1">#                 continue</span>
    <span class="c1">#             for k, v in _b_configs.items():</span>
    <span class="c1">#                 if k not in module_configs.keys():</span>
    <span class="c1">#                     module_configs[k] = v</span>
    <span class="c1">#</span>
    <span class="c1">#     # TODO: check input type compatibility?</span>
    <span class="c1">#     result: typing.Dict[str, typing.Dict[str, typing.Any]] = {}</span>
    <span class="c1">#     for name, config in module_configs.items():</span>
    <span class="c1">#         config = dict(config)</span>
    <span class="c1">#         module_type = config.pop(&quot;module_type&quot;, None)</span>
    <span class="c1">#         if not module_type:</span>
    <span class="c1">#             raise Exception(</span>
    <span class="c1">#                 f&quot;Can&#39;t create transformation &#39;{name}&#39; for type &#39;{value_type_name}&#39;, no module type specified in config: {config}&quot;</span>
    <span class="c1">#             )</span>
    <span class="c1">#         module_config = config.pop(&quot;module_config&quot;, {})</span>
    <span class="c1">#         module = self._kiara.create_module(</span>
    <span class="c1">#             id=f&quot;_transform_{value_type_name}_{name}&quot;,</span>
    <span class="c1">#             module_type=module_type,</span>
    <span class="c1">#             module_config=module_config,</span>
    <span class="c1">#         )</span>
    <span class="c1">#</span>
    <span class="c1">#         if &quot;input_name&quot; not in config.keys():</span>
    <span class="c1">#</span>
    <span class="c1">#             if len(module.input_schemas) == 1:</span>
    <span class="c1">#                 config[&quot;input_name&quot;] = next(iter(module.input_schemas.keys()))</span>
    <span class="c1">#             else:</span>
    <span class="c1">#                 required_inputs = [</span>
    <span class="c1">#                     inp</span>
    <span class="c1">#                     for inp, schema in module.input_schemas.items()</span>
    <span class="c1">#                     if schema.is_required()</span>
    <span class="c1">#                 ]</span>
    <span class="c1">#                 if len(required_inputs) == 1:</span>
    <span class="c1">#                     config[&quot;input_name&quot;] = required_inputs[0]</span>
    <span class="c1">#                 else:</span>
    <span class="c1">#                     raise Exception(</span>
    <span class="c1">#                         f&quot;Can&#39;t create transformation &#39;{name}&#39; for type &#39;{value_type_name}&#39;: can&#39;t determine input name between those options: &#39;{&#39;, &#39;.join(required_inputs)}&#39;&quot;</span>
    <span class="c1">#                     )</span>
    <span class="c1">#</span>
    <span class="c1">#         if &quot;output_name&quot; not in config.keys():</span>
    <span class="c1">#</span>
    <span class="c1">#             if len(module.input_schemas) == 1:</span>
    <span class="c1">#                 config[&quot;output_name&quot;] = next(iter(module.output_schemas.keys()))</span>
    <span class="c1">#             else:</span>
    <span class="c1">#                 required_outputs = [</span>
    <span class="c1">#                     inp</span>
    <span class="c1">#                     for inp, schema in module.output_schemas.items()</span>
    <span class="c1">#                     if schema.is_required()</span>
    <span class="c1">#                 ]</span>
    <span class="c1">#                 if len(required_outputs) == 1:</span>
    <span class="c1">#                     config[&quot;output_name&quot;] = required_outputs[0]</span>
    <span class="c1">#                 else:</span>
    <span class="c1">#                     raise Exception(</span>
    <span class="c1">#                         f&quot;Can&#39;t create transformation &#39;{name}&#39; for type &#39;{value_type_name}&#39;: can&#39;t determine output name between those options: &#39;{&#39;, &#39;.join(required_outputs)}&#39;&quot;</span>
    <span class="c1">#                     )</span>
    <span class="c1">#</span>
    <span class="c1">#         result[name] = {</span>
    <span class="c1">#             &quot;module&quot;: module,</span>
    <span class="c1">#             &quot;module_type&quot;: module_type,</span>
    <span class="c1">#             &quot;module_config&quot;: module_config,</span>
    <span class="c1">#             &quot;transformation_config&quot;: config,</span>
    <span class="c1">#         }</span>
    <span class="c1">#</span>
    <span class="c1">#     self._value_type_transformations[value_type_name] = result</span>
    <span class="c1">#     return self._value_type_transformations[value_type_name]</span>

    <span class="k">def</span> <span class="nf">find_value_types_for_package</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">package_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]]:</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">value_type_name</span><span class="p">,</span> <span class="n">value_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">value_md</span> <span class="o">=</span> <span class="n">value_type</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span>
            <span class="n">package</span> <span class="o">=</span> <span class="n">value_md</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;package&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">package</span> <span class="o">==</span> <span class="n">package_name</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">value_type_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_type</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="c1"># def get_available_transformations_for_type(</span>
    <span class="c1">#     self, value_type_name: str</span>
    <span class="c1"># ) -&gt; typing.Iterable[str]:</span>
    <span class="c1">#</span>
    <span class="c1">#     return self.get_value_type_transformations(value_type_name=value_type_name)</span>

    <span class="c1"># def transform_value(</span>
    <span class="c1">#     self,</span>
    <span class="c1">#     transformation_alias: str,</span>
    <span class="c1">#     value: Value,</span>
    <span class="c1">#     other_inputs: typing.Optional[typing.Mapping[str, typing.Any]] = None,</span>
    <span class="c1"># ) -&gt; Value:</span>
    <span class="c1">#</span>
    <span class="c1">#     transformations = self.get_value_type_transformations(value.value_schema.type)</span>
    <span class="c1">#</span>
    <span class="c1">#     if transformation_alias not in transformations.keys():</span>
    <span class="c1">#         raise Exception(</span>
    <span class="c1">#             f&quot;Can&#39;t transform value of type &#39;{value.value_schema.type}&#39;, transformation &#39;{transformation_alias}&#39; not available for this type. Available: {&#39;, &#39;.join(transformations.keys())}&quot;</span>
    <span class="c1">#         )</span>
    <span class="c1">#</span>
    <span class="c1">#     config = transformations[transformation_alias]</span>
    <span class="c1">#</span>
    <span class="c1">#     transformation_config = config[&quot;transformation_config&quot;]</span>
    <span class="c1">#     input_name = transformation_config[&quot;input_name&quot;]</span>
    <span class="c1">#</span>
    <span class="c1">#     module: KiaraModule = config[&quot;module&quot;]</span>
    <span class="c1">#</span>
    <span class="c1">#     constants = module.get_config_value(&quot;constants&quot;)</span>
    <span class="c1">#     inputs = dict(constants)</span>
    <span class="c1">#</span>
    <span class="c1">#     if other_inputs:</span>
    <span class="c1">#</span>
    <span class="c1">#         for k, v in other_inputs.items():</span>
    <span class="c1">#             if k in constants.keys():</span>
    <span class="c1">#                 raise Exception(f&quot;Invalid value &#39;{k}&#39; for &#39;other_inputs&#39;, this is a constant that can&#39;t be overwrittern.&quot;)</span>
    <span class="c1">#             inputs[k] = v</span>
    <span class="c1">#</span>
    <span class="c1">#     defaults = transformation_config.get(&quot;defaults&quot;, None)</span>
    <span class="c1">#     if defaults:</span>
    <span class="c1">#         for k, v in defaults.items():</span>
    <span class="c1">#             if k in constants.keys():</span>
    <span class="c1">#                 raise Exception(f&quot;Invalid  default value &#39;{k}&#39;, this is a constant that can&#39;t be overwrittern.&quot;)</span>
    <span class="c1">#             if k not in inputs.keys():</span>
    <span class="c1">#                 inputs[k] = v</span>
    <span class="c1">#</span>
    <span class="c1">#     if input_name in inputs.keys():</span>
    <span class="c1">#         raise Exception(</span>
    <span class="c1">#             f&quot;Invalid value for inputs in transform arguments, can&#39;t contain the main input key &#39;{input_name}&#39;.&quot;</span>
    <span class="c1">#         )</span>
    <span class="c1">#</span>
    <span class="c1">#     inputs[input_name] = value</span>
    <span class="c1">#</span>
    <span class="c1">#     result = module.run(**inputs)</span>
    <span class="c1">#     output_name = transformation_config[&quot;output_name&quot;]</span>
    <span class="c1">#</span>
    <span class="c1">#     result_value = result.get_value_obj(output_name)</span>
    <span class="c1">#     return result_value</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


















  <div class="doc doc-object doc-method">



<h6 id="kiara.data.types.type_mgmt.TypeMgmt.get_type_lineage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_type_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">)</span></code>


<a href="#kiara.data.types.type_mgmt.TypeMgmt.get_type_lineage" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns the shortest path between the specified type and the 'any' type, in reverse direction starting from the specified type.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/type_mgmt.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_type_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Returns the shortest path between the specified type and the &#39;any&#39; type, in reverse direction starting from the specified type.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">value_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; registered.&quot;</span><span class="p">)</span>

    <span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>

    <span class="n">path</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_type_hierarchy</span><span class="p">,</span> <span class="s2">&quot;any&quot;</span><span class="p">,</span> <span class="n">value_type</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>







  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.data.values" class="doc doc-heading">
        <code>values</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>A module that contains value-related classes for <em>Kiara</em>.</p>
<p>A value in Kiara-speak is a pointer to actual data (aka 'bytes'). It contains metadata about that data (like whether it's
valid/set, what type/schema it has, when it was last modified, ...), but it does not contain the data itself. The reason for
that is that such data can be fairly large, and in a lot of cases it is not necessary for the code involved to have
access to it, access to the metadata is enough.</p>
<p>Each Value has a unique id, which can be used to retrieve the data (whole, or parts of it) from a <a class="autorefs autorefs-internal" href="../data/registry/__init__/#kiara.data.registry.DataRegistry">DataRegistry</a>.
In addition, that id can be used to subscribe to change events for a value (published whenever the data that is associated with a value was changed).</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-class">



<h4 id="kiara.data.values.Value" class="doc doc-heading">
        <code>
Value            (<span title="pydantic.main.BaseModel">BaseModel</span>, <span title="rich.jupyter.JupyterMixin">JupyterMixin</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.values.Value" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The underlying base class for all values.</p>
<p>The important subclasses here are the ones inheriting from 'PipelineValue', as those are registered in the data
registry.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Value</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">JupyterMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The underlying base class for all values.</span>

<span class="sd">    The important subclasses here are the ones inheriting from &#39;PipelineValue&#39;, as those are registered in the data</span>
<span class="sd">    registry.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>
        <span class="n">use_enum_values</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">registry</span><span class="p">:</span> <span class="s2">&quot;BaseDataRegistry&quot;</span><span class="p">,</span> <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span><span class="p">,</span> <span class="n">type_obj</span><span class="p">:</span> <span class="n">ValueType</span><span class="p">,</span> <span class="n">is_set</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">is_none</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">hashes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">ValueHash</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">register_token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>  <span class="c1"># type: ignore</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">register_token</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No register token provided.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">registry</span><span class="o">.</span><span class="n">_check_register_token</span><span class="p">(</span><span class="n">register_token</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Value registration with token &#39;</span><span class="si">{</span><span class="n">register_token</span><span class="si">}</span><span class="s2">&#39; not allowed.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">value_schema</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

        <span class="k">assert</span> <span class="n">registry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span> <span class="o">=</span> <span class="n">registry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">_kiara</span>

        <span class="n">kwargs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">NO_ID_YET_MARKER</span>

        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;value_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_schema</span>

        <span class="c1"># if value_lineage is None:</span>
        <span class="c1">#     value_lineage = ValueLineage()</span>
        <span class="c1">#</span>
        <span class="c1"># kwargs[&quot;value_lineage&quot;] = value_lineage</span>

        <span class="c1"># kwargs[&quot;is_streaming&quot;] = False  # not used yet</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;creation_date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;is_set&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_set</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;is_none&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_none</span>

        <span class="k">if</span> <span class="n">hashes</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;hashes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">hashes</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">metadata</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;metadata&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;metadata&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_obj</span> <span class="o">=</span> <span class="n">type_obj</span>

    <span class="n">_kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>
    <span class="n">_registry</span><span class="p">:</span> <span class="s2">&quot;BaseDataRegistry&quot;</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>
    <span class="n">_type_obj</span><span class="p">:</span> <span class="n">ValueType</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>
    <span class="n">_value_info</span><span class="p">:</span> <span class="s2">&quot;ValueInfo&quot;</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;A unique id for this value.&quot;</span><span class="p">)</span>
    <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The schema of this value.&quot;</span><span class="p">)</span>
    <span class="n">creation_date</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The time this value was created value happened.&quot;</span>
    <span class="p">)</span>
    <span class="c1"># is_streaming: bool = Field(</span>
    <span class="c1">#     default=False,</span>
    <span class="c1">#     description=&quot;Whether the value is currently streamed into this object.&quot;,</span>
    <span class="c1"># )</span>
    <span class="n">is_set</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the value was set (in some way: user input, default, constant...).&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">is_none</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the value is &#39;None&#39;.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">hashes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ValueHash</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Available hashes relating to the actual value data. This attribute is not populated by default, use the &#39;get_hashes()&#39; method to request one or several hash items, afterwards those hashes will be reflected in this attribute.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Available metadata relating to the actual value data (size, no. of rows, etc. -- depending on data type). This attribute is not populated by default, use the &#39;get_metadata()&#39; method to request one or several metadata items, afterwards those metadata items will be reflected in this attribute.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">type_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">type_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the object that contains all the type information for this value.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_obj</span>

    <span class="k">def</span> <span class="nf">get_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hash_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueHash</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calculate the hash of a specified type for this value. Hashes are cached.&quot;&quot;&quot;</span>

        <span class="n">hashes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_hashes</span><span class="p">(</span><span class="n">hash_type</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">hashes</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_hashes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">hash_types</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">ValueHash</span><span class="p">]:</span>

        <span class="n">all_hash_types</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_obj</span><span class="o">.</span><span class="n">get_supported_hash_types</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">hash_types</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">hash_types</span> <span class="o">=</span> <span class="n">all_hash_types</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">log_message</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">hash_types</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[]</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">missing</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">hash_types</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">hash_obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hashes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">hash_obj</span><span class="o">.</span><span class="n">hash_type</span> <span class="ow">in</span> <span class="n">hash_types</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hash_obj</span><span class="p">)</span>
                <span class="n">missing</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">hash_obj</span><span class="o">.</span><span class="n">hash_type</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">hash_type</span> <span class="ow">in</span> <span class="n">missing</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">hash_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_hash_types</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Hash type &#39;</span><span class="si">{</span><span class="n">hash_type</span><span class="si">}</span><span class="s2">&#39; not supported for &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                <span class="p">)</span>

            <span class="n">hash_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_obj</span><span class="o">.</span><span class="n">calculate_value_hash</span><span class="p">(</span>
                <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(),</span> <span class="n">hash_type</span><span class="o">=</span><span class="n">hash_type</span>
            <span class="p">)</span>
            <span class="n">hash_obj</span> <span class="o">=</span> <span class="n">ValueHash</span><span class="p">(</span><span class="n">hash_type</span><span class="o">=</span><span class="n">hash_type</span><span class="p">,</span> <span class="nb">hash</span><span class="o">=</span><span class="n">hash_str</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hashes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hash_obj</span><span class="p">)</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hash_obj</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">item_is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Check whether the current value is valid&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">optional</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_set</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_none</span>

    <span class="k">def</span> <span class="nf">item_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Print a human readable short description of this values status.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">optional</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_none</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s2">&quot;no value (not required)&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_name</span> <span class="ow">in</span> <span class="p">[</span>
                        <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
                    <span class="p">]:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span><span class="p">:</span>
                            <span class="k">return</span> <span class="s2">&quot;set (default)&quot;</span>
                    <span class="k">return</span> <span class="s2">&quot;set&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;not set (not required)&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_none</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s2">&quot;no value&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_name</span> <span class="ow">in</span> <span class="p">[</span>
                        <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
                    <span class="p">]:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span><span class="p">:</span>
                            <span class="k">return</span> <span class="s2">&quot;set (default)&quot;</span>
                    <span class="k">return</span> <span class="s2">&quot;set&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;not set&quot;</span>

    <span class="k">def</span> <span class="nf">get_value_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]:</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">get_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_value_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_lineage</span><span class="p">:</span> <span class="n">ValueLineage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="p">,</span> <span class="s2">&quot;set_value_lineage&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">set_value_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_lineage</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t set value lineage: registry is read only&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ValueInfo&quot;</span><span class="p">:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_info</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_value_info</span> <span class="o">=</span> <span class="n">ValueInfo</span><span class="o">.</span><span class="n">from_value</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_info</span>

    <span class="k">def</span> <span class="nf">create_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">include_deserialization_config</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ValueInfo&quot;</span><span class="p">:</span>

        <span class="k">return</span> <span class="n">ValueInfo</span><span class="o">.</span><span class="n">from_value</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">include_deserialization_config</span><span class="o">=</span><span class="n">include_deserialization_config</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_metadata</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">metadata_keys</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">also_return_schema</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Retrieve (if necessary) and return metadata for the specified keys.</span>

<span class="sd">        By default, the metadata is returned as a map (in case of a single key: single-item map) with metadata key as</span>
<span class="sd">        dict key, and the metadata as value. If &#39;also_return_schema&#39; was set to `True`, the value will be a two-key</span>
<span class="sd">        map with the metadata under the ``metadata_item`` subkey, and the value schema under ``metadata_schema``.</span>

<span class="sd">        If no metadata key is specified, all available metadata for this value type will be returned.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            metadata_keys: the metadata keys to retrieve metadata (empty for all available metadata)</span>
<span class="sd">            also_return_schema: whether to also return the schema for each metadata item</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">metadata_keys</span><span class="p">:</span>
            <span class="n">_metadata_keys</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">metadata_mgmt</span><span class="o">.</span><span class="n">get_metadata_keys_for_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type_name</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">_metadata_keys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_metadata_keys</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">metadata_keys</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">missing</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">metadata_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">_metadata_keys</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">metadata_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">also_return_schema</span><span class="p">:</span>
                    <span class="n">result</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">][</span><span class="s2">&quot;metadata_item&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">missing</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">metadata_key</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">missing</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>

        <span class="n">_md</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">metadata_mgmt</span><span class="o">.</span><span class="n">get_value_metadata</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">missing</span><span class="p">,</span> <span class="n">also_return_schema</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">_md</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
            <span class="k">if</span> <span class="n">also_return_schema</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="s2">&quot;metadata_item&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">keys</span><span class="p">())}</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">register_missing_aliases</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Value&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Save this value, under the specified alias(es).&quot;&quot;&quot;</span>

        <span class="c1"># if self.get_value_lineage():</span>
        <span class="c1">#     for field_name, value in self.get_value_lineage().inputs.items():</span>
        <span class="c1">#         value_obj = self._registry.get_value_obj(value)</span>
        <span class="c1">#         try:</span>
        <span class="c1">#             value_obj.save()</span>
        <span class="c1">#         except Exception as e:</span>
        <span class="c1">#             print(e)</span>

        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_store</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">aliases</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_store</span><span class="o">.</span><span class="n">link_aliases</span><span class="p">(</span>
                <span class="n">value</span><span class="p">,</span> <span class="o">*</span><span class="n">aliases</span><span class="p">,</span> <span class="n">register_missing_aliases</span><span class="o">=</span><span class="n">register_missing_aliases</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="c1"># TODO: compare all attributes if id is equal, just to make sure...</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">id</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Value(id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">, type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type_name</span><span class="si">}</span><span class="s2">, is_set=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">is_set</span><span class="si">}</span><span class="s2">, is_none=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">is_none</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="c1"># table = self._create_value_table()</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Value&quot;</span>
        <span class="k">yield</span> <span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_info</span><span class="p">(),</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">ROUNDED</span><span class="p">,</span> <span class="n">title_align</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.Value.creation_date" class="doc doc-heading">
<code class="highlight language-python"><span class="n">creation_date</span><span class="p">:</span> <span class="n">datetime</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.Value.creation_date" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The time this value was created value happened.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.Value.hashes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">hashes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ValueHash</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.Value.hashes" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Available hashes relating to the actual value data. This attribute is not populated by default, use the 'get_hashes()' method to request one or several hash items, afterwards those hashes will be reflected in this attribute.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.Value.id" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.Value.id" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A unique id for this value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.Value.is_none" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_none</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.Value.is_none" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Whether the value is 'None'.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.Value.is_set" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_set</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.Value.is_set" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Whether the value was set (in some way: user input, default, constant...).</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.Value.metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.Value.metadata" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Available metadata relating to the actual value data (size, no. of rows, etc. -- depending on data type). This attribute is not populated by default, use the 'get_metadata()' method to request one or several metadata items, afterwards those metadata items will be reflected in this attribute.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.Value.type_obj" class="doc doc-heading">
<code class="highlight language-python"><span class="n">type_obj</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.data.values.Value.type_obj" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return the object that contains all the type information for this value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.Value.value_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.Value.value_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The schema of this value.</p>
    </div>

  </div>








  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.Value.__eq__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.Value.__eq__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return self==value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

    <span class="c1"># TODO: compare all attributes if id is equal, just to make sure...</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">id</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.Value.__hash__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.Value.__hash__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return hash(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.Value.__repr__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.Value.__repr__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return repr(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Value(id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">, type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type_name</span><span class="si">}</span><span class="s2">, is_set=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">is_set</span><span class="si">}</span><span class="s2">, is_none=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">is_none</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.Value.__str__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.Value.__str__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return str(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.Value.get_hash" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hash_type</span><span class="p">)</span></code>


<a href="#kiara.data.values.Value.get_hash" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Calculate the hash of a specified type for this value. Hashes are cached.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hash_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueHash</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Calculate the hash of a specified type for this value. Hashes are cached.&quot;&quot;&quot;</span>

    <span class="n">hashes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_hashes</span><span class="p">(</span><span class="n">hash_type</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">hashes</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>






  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.Value.get_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">metadata_keys</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">also_return_schema</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#kiara.data.values.Value.get_metadata" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Retrieve (if necessary) and return metadata for the specified keys.</p>
<p>By default, the metadata is returned as a map (in case of a single key: single-item map) with metadata key as
dict key, and the metadata as value. If 'also_return_schema' was set to <code>True</code>, the value will be a two-key
map with the metadata under the <code>metadata_item</code> subkey, and the value schema under <code>metadata_schema</code>.</p>
<p>If no metadata key is specified, all available metadata for this value type will be returned.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>metadata_keys</code></td>
        <td><code>str</code></td>
        <td><p>the metadata keys to retrieve metadata (empty for all available metadata)</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>also_return_schema</code></td>
        <td><code>bool</code></td>
        <td><p>whether to also return the schema for each metadata item</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_metadata</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">metadata_keys</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">also_return_schema</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Retrieve (if necessary) and return metadata for the specified keys.</span>

<span class="sd">    By default, the metadata is returned as a map (in case of a single key: single-item map) with metadata key as</span>
<span class="sd">    dict key, and the metadata as value. If &#39;also_return_schema&#39; was set to `True`, the value will be a two-key</span>
<span class="sd">    map with the metadata under the ``metadata_item`` subkey, and the value schema under ``metadata_schema``.</span>

<span class="sd">    If no metadata key is specified, all available metadata for this value type will be returned.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        metadata_keys: the metadata keys to retrieve metadata (empty for all available metadata)</span>
<span class="sd">        also_return_schema: whether to also return the schema for each metadata item</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">metadata_keys</span><span class="p">:</span>
        <span class="n">_metadata_keys</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">metadata_mgmt</span><span class="o">.</span><span class="n">get_metadata_keys_for_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type_name</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">_metadata_keys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_metadata_keys</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">metadata_keys</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">missing</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">metadata_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">_metadata_keys</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">metadata_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">also_return_schema</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">][</span><span class="s2">&quot;metadata_item&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">missing</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">metadata_key</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">missing</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="n">_md</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">metadata_mgmt</span><span class="o">.</span><span class="n">get_value_metadata</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">missing</span><span class="p">,</span> <span class="n">also_return_schema</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">_md</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">if</span> <span class="n">also_return_schema</span><span class="p">:</span>
            <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="s2">&quot;metadata_item&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">keys</span><span class="p">())}</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.Value.item_is_valid" class="doc doc-heading">
<code class="highlight language-python"><span class="n">item_is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.data.values.Value.item_is_valid" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Check whether the current value is valid</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">item_is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Check whether the current value is valid&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">optional</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_set</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_none</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.Value.item_status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">item_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.data.values.Value.item_status" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Print a human readable short description of this values status.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">item_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Print a human readable short description of this values status.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">optional</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_none</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;no value (not required)&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_name</span> <span class="ow">in</span> <span class="p">[</span>
                    <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
                <span class="p">]:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span><span class="p">:</span>
                        <span class="k">return</span> <span class="s2">&quot;set (default)&quot;</span>
                <span class="k">return</span> <span class="s2">&quot;set&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;not set (not required)&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_none</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;no value&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_name</span> <span class="ow">in</span> <span class="p">[</span>
                    <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
                <span class="p">]:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span><span class="p">:</span>
                        <span class="k">return</span> <span class="s2">&quot;set (default)&quot;</span>
                <span class="k">return</span> <span class="s2">&quot;set&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;not set&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.Value.save" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">register_missing_aliases</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#kiara.data.values.Value.save" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Save this value, under the specified alias(es).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">save</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">register_missing_aliases</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Value&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Save this value, under the specified alias(es).&quot;&quot;&quot;</span>

    <span class="c1"># if self.get_value_lineage():</span>
    <span class="c1">#     for field_name, value in self.get_value_lineage().inputs.items():</span>
    <span class="c1">#         value_obj = self._registry.get_value_obj(value)</span>
    <span class="c1">#         try:</span>
    <span class="c1">#             value_obj.save()</span>
    <span class="c1">#         except Exception as e:</span>
    <span class="c1">#             print(e)</span>

    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_store</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">aliases</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_store</span><span class="o">.</span><span class="n">link_aliases</span><span class="p">(</span>
            <span class="n">value</span><span class="p">,</span> <span class="o">*</span><span class="n">aliases</span><span class="p">,</span> <span class="n">register_missing_aliases</span><span class="o">=</span><span class="n">register_missing_aliases</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">value</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.data.values.ValueAlias" class="doc doc-heading">
        <code>
ValueAlias            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.values.ValueAlias" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueAlias</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_string</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default_repo_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ValueAlias&quot;</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_alias</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid id_or_alias: not a string.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value_alias</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid id_or_alias: can&#39;t be empty string.&quot;</span><span class="p">)</span>

        <span class="n">_repo_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">default_repo_name</span>
        <span class="n">_version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">_tag</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="s2">&quot;#&quot;</span> <span class="ow">in</span> <span class="n">value_alias</span><span class="p">:</span>
            <span class="n">_repo_name</span><span class="p">,</span> <span class="n">_value_alias</span> <span class="o">=</span> <span class="n">value_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_value_alias</span> <span class="o">=</span> <span class="n">value_alias</span>

        <span class="k">if</span> <span class="s2">&quot;@&quot;</span> <span class="ow">in</span> <span class="n">_value_alias</span><span class="p">:</span>
            <span class="n">_alias</span><span class="p">,</span> <span class="n">_postfix</span> <span class="o">=</span> <span class="n">_value_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">_version</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_postfix</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">_postfix</span><span class="o">.</span><span class="n">isidentifier</span><span class="p">():</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Invalid format for version/tag element of id_or_alias: </span><span class="si">{</span><span class="n">_tag</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                <span class="n">_tag</span> <span class="o">=</span> <span class="n">_postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_alias</span> <span class="o">=</span> <span class="n">_value_alias</span>

        <span class="k">return</span> <span class="n">ValueAlias</span><span class="p">(</span>
            <span class="n">repo_name</span><span class="o">=</span><span class="n">_repo_name</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="n">_alias</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">_version</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">_tag</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_strings</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">value_aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ValueAlias&quot;</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="s2">&quot;ValueAlias&quot;</span><span class="p">]:</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">va</span> <span class="ow">in</span> <span class="n">value_aliases</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">va</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ValueAlias</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">va</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">va</span><span class="p">,</span> <span class="n">ValueAlias</span><span class="p">):</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">va</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">va</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; for type alias, expected &#39;str&#39; or &#39;ValueAlias&#39;.&quot;</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="n">repo_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name of the data repo the value lives in.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>
    <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;The alias name.&quot;</span><span class="p">)</span>
    <span class="n">version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The version of this alias.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>
    <span class="n">tag</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The tag for the alias.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">full_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">alias</span><span class="si">}</span><span class="s2">@</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">alias</span><span class="si">}</span><span class="s2">@</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">alias</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">








  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueAlias.repo_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">repo_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueAlias.repo_name" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The name of the data repo the value lives in.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueAlias.tag" class="doc doc-heading">
<code class="highlight language-python"><span class="n">tag</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueAlias.tag" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The tag for the alias.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueAlias.version" class="doc doc-heading">
<code class="highlight language-python"><span class="n">version</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueAlias.version" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The version of this alias.</p>
    </div>

  </div>












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.data.values.ValueHash" class="doc doc-heading">
        <code>
ValueHash            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.values.ValueHash" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueHash</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>

    <span class="nb">hash</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The value hash.&quot;</span><span class="p">)</span>
    <span class="n">hash_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The value hash method.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueHash.hash" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">hash</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueHash.hash" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The value hash.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueHash.hash_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">hash_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueHash.hash_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The value hash method.</p>
    </div>

  </div>










  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.data.values.ValueInfo" class="doc doc-heading">
        <code>
ValueInfo            (<span title="kiara.info.KiaraInfoModel">KiaraInfoModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.values.ValueInfo" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueInfo</span><span class="p">(</span><span class="n">KiaraInfoModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_value</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span> <span class="n">include_deserialization_config</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Value not registered (yet).&quot;</span><span class="p">)</span>

        <span class="c1"># aliases = value._registry.find_aliases_for_value(value)</span>
        <span class="n">hashes</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_hashes</span><span class="p">()</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">also_return_schema</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># metadata = value.metadata</span>
        <span class="n">value_lineage</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_lineage</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">include_deserialization_config</span><span class="p">:</span>
            <span class="c1"># serialize_operation: SerializeValueOperationType = (  # type: ignore</span>
            <span class="c1">#     value._kiara.operation_mgmt.get_operation(&quot;serialize&quot;)  # type: ignore</span>
            <span class="c1"># )</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ValueInfo</span><span class="p">(</span>
            <span class="n">value_id</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">value_schema</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">value_schema</span><span class="p">,</span>
            <span class="n">hashes</span><span class="o">=</span><span class="n">hashes</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
            <span class="n">lineage</span><span class="o">=</span><span class="n">value_lineage</span><span class="p">,</span>
            <span class="n">is_valid</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">(),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_id</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;value&quot;</span>

    <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The value id.&quot;</span><span class="p">)</span>
    <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The value schema.&quot;</span><span class="p">)</span>
    <span class="c1"># aliases: typing.List[ValueAlias] = Field(</span>
    <span class="c1">#     description=&quot;All aliases for this value.&quot;, default_factory=list</span>
    <span class="c1"># )</span>
    <span class="c1"># tags: typing.List[str] = Field(</span>
    <span class="c1">#     description=&quot;All tags for this value.&quot;, default_factory=list</span>
    <span class="c1"># )</span>
    <span class="c1"># created: str = Field(description=&quot;The time the data was created.&quot;)</span>
    <span class="n">is_valid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the item is valid (in the context of its schema).&quot;</span>
    <span class="p">)</span>
    <span class="n">hashes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ValueHash</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;All available hashes for this value.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span>
    <span class="p">)</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The metadata associated with this value.&quot;</span>
    <span class="p">)</span>
    <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Information about how the value was created.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>
    <span class="n">deserialize_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">DeserializeConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The module config (incl. inputs) to deserialize the value.&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_metadata_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">keys</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">keys</span><span class="p">:</span>
            <span class="n">_keys</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_keys</span> <span class="o">=</span> <span class="n">keys</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">_keys</span><span class="p">:</span>

            <span class="n">md</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">md</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No metadata for key &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39; available.&quot;</span><span class="p">)</span>

            <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">md</span><span class="p">[</span><span class="s2">&quot;metadata_item&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">get_metadata_schemas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">keys</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">keys</span><span class="p">:</span>
            <span class="n">_keys</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_keys</span> <span class="o">=</span> <span class="n">keys</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">_keys</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">md</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No metadata for key &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39; available.&quot;</span><span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">md</span><span class="p">[</span><span class="s2">&quot;metadata_schema&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="n">padding</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;padding&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">skip_metadata</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;skip_metadata&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="n">skip_value_lineage</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;skip_lineage&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">include_ids</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_ids&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">,</span> <span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="n">padding</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;property&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_id</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type_config</span><span class="p">:</span>
            <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type_config</span><span class="p">)</span>
            <span class="n">tc_content</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span><span class="n">json_data</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;type config&quot;</span><span class="p">,</span> <span class="n">tc_content</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">doc</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;is set&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span> <span class="k">else</span> <span class="s2">&quot;no&quot;</span><span class="p">)</span>
        <span class="c1"># table.add_row(&quot;is constant&quot;, &quot;yes&quot; if self.is_constant else &quot;no&quot;)</span>

        <span class="c1"># if isinstance(self.value_hash, int):</span>
        <span class="c1">#     vh = str(self.value_hash)</span>
        <span class="c1"># else:</span>
        <span class="c1">#     vh = self.value_hash.value</span>
        <span class="c1"># table.add_row(&quot;hash&quot;, vh)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hashes</span><span class="p">:</span>
            <span class="n">hashes_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">hs</span><span class="o">.</span><span class="n">hash_type</span><span class="p">:</span> <span class="n">hs</span><span class="o">.</span><span class="n">hash</span> <span class="k">for</span> <span class="n">hs</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hashes</span><span class="p">}</span>
            <span class="n">yaml_string</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">hashes_dict</span><span class="p">)</span>
            <span class="n">hases_str</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span><span class="n">yaml_string</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;hashes&quot;</span><span class="p">,</span> <span class="n">hases_str</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_metadata</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">:</span>
                <span class="n">yaml_string</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_metadata_items</span><span class="p">())</span>
                <span class="c1"># json_string = json.dumps(self.get_metadata_items(), indent=2)</span>
                <span class="n">metadata</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span><span class="n">yaml_string</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="s2">&quot;-- no metadata --&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_value_lineage</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineage</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">:</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="c1"># json_string = self.lineage.json(indent=2)</span>
            <span class="c1"># seed_content = Syntax(json_string, &quot;json&quot;)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
                <span class="s2">&quot;lineage&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineage</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">(</span><span class="n">include_ids</span><span class="o">=</span><span class="n">include_ids</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">table</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueInfo.deserialize_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">deserialize_config</span><span class="p">:</span> <span class="n">DeserializeConfig</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueInfo.deserialize_config" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The module config (incl. inputs) to deserialize the value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueInfo.hashes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">hashes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ValueHash</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueInfo.hashes" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>All available hashes for this value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueInfo.is_valid" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_valid</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueInfo.is_valid" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Whether the item is valid (in the context of its schema).</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueInfo.lineage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">lineage</span><span class="p">:</span> <span class="n">ValueLineage</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueInfo.lineage" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Information about how the value was created.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueInfo.metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueInfo.metadata" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The metadata associated with this value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueInfo.value_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueInfo.value_id" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The value id.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueInfo.value_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueInfo.value_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The value schema.</p>
    </div>

  </div>
















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.data.values.ValueLineage" class="doc doc-heading">
        <code>
ValueLineage            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleConfig" href="../module_config/#kiara.module_config.ModuleConfig">ModuleConfig</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.values.ValueLineage" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Model containing the lineage of a value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueLineage</span><span class="p">(</span><span class="n">ModuleConfig</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Model containing the lineage of a value.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_module_and_inputs</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">module</span><span class="p">:</span> <span class="s2">&quot;KiaraModule&quot;</span><span class="p">,</span>
        <span class="n">output_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Value&quot;</span><span class="p">,</span> <span class="s2">&quot;ValueInfo&quot;</span><span class="p">]],</span>
    <span class="p">):</span>

        <span class="n">module_type</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">_module_type_id</span>  <span class="c1"># type: ignore</span>
        <span class="n">module_config</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span><span class="o">.</span><span class="n">documentation</span>

        <span class="n">_inputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
                <span class="n">_inputs</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_info</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_inputs</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">return</span> <span class="n">ValueLineage</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span>
            <span class="n">module_type</span><span class="o">=</span><span class="n">module_type</span><span class="p">,</span>
            <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span>
            <span class="n">output_name</span><span class="o">=</span><span class="n">output_name</span><span class="p">,</span>
            <span class="n">inputs</span><span class="o">=</span><span class="n">_inputs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
        <span class="n">module_doc</span><span class="p">:</span> <span class="n">DocumentationMetadataModel</span><span class="p">,</span>
        <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Value&quot;</span><span class="p">,</span> <span class="s2">&quot;ValueInfo&quot;</span><span class="p">]],</span>
        <span class="n">output_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="n">_inputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
                <span class="n">_inputs</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_info</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_inputs</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">return</span> <span class="n">ValueLineage</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span>
            <span class="n">module_type</span><span class="o">=</span><span class="n">module_type</span><span class="p">,</span>
            <span class="n">module_config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">module_config</span><span class="p">),</span>
            <span class="n">doc</span><span class="o">=</span><span class="n">module_doc</span><span class="p">,</span>
            <span class="n">output_name</span><span class="o">=</span><span class="n">output_name</span><span class="p">,</span>
            <span class="n">inputs</span><span class="o">=</span><span class="n">_inputs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">output_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The result field name for the value this refers to.&quot;</span>
    <span class="p">)</span>
    <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ValueInfo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The inputs that were used to create the value this refers to.&quot;</span>
    <span class="p">)</span>
    <span class="n">value_index</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ValueInfo&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Index of all values that are associated with this value lineage.&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_minimal_dict</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">include_metadata</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_module_doc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_module_config</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="n">full_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">minimal_dict</span> <span class="o">=</span> <span class="n">filter_metadata_schema</span><span class="p">(</span>
            <span class="n">full_dict</span><span class="p">,</span>
            <span class="n">include_metadata</span><span class="o">=</span><span class="n">include_metadata</span><span class="p">,</span>
            <span class="n">include_module_doc</span><span class="o">=</span><span class="n">include_module_doc</span><span class="p">,</span>
            <span class="n">include_module_config</span><span class="o">=</span><span class="n">include_module_config</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">minimal_dict</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="n">all_ids</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">find_all_ids_in_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="n">id_color_map</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">v_id</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">all_ids</span><span class="p">):</span>
            <span class="n">id_color_map</span><span class="p">[</span><span class="n">v_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">COLOR_LIST</span><span class="p">[</span><span class="n">idx</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">COLOR_LIST</span><span class="p">)]</span>

        <span class="n">show_ids</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_ids&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="n">tree</span> <span class="o">=</span> <span class="n">fill_lineage_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">include_ids</span><span class="o">=</span><span class="n">show_ids</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tree</span>

    <span class="k">def</span> <span class="nf">create_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">:</span>

        <span class="k">return</span> <span class="n">create_lineage_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueLineage.inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueInfo</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueLineage.inputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The inputs that were used to create the value this refers to.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueLineage.output_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">output_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueLineage.output_name" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The result field name for the value this refers to.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueLineage.value_index" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_index</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueInfo</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueLineage.value_index" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Index of all values that are associated with this value lineage.</p>
    </div>

  </div>










  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.ValueLineage.create_renderable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">)</span></code>


<a href="#kiara.data.values.ValueLineage.create_renderable" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Create a renderable for this module configuration.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

    <span class="n">all_ids</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">find_all_ids_in_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
    <span class="n">id_color_map</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">v_id</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">all_ids</span><span class="p">):</span>
        <span class="n">id_color_map</span><span class="p">[</span><span class="n">v_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">COLOR_LIST</span><span class="p">[</span><span class="n">idx</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">COLOR_LIST</span><span class="p">)]</span>

    <span class="n">show_ids</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_ids&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="n">tree</span> <span class="o">=</span> <span class="n">fill_lineage_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">include_ids</span><span class="o">=</span><span class="n">show_ids</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tree</span>
</code></pre></div>
        </details>
    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.data.values.ValueSchema" class="doc doc-heading">
        <code>
ValueSchema            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The schema of a value.</p>
<p>The schema contains the <a class="autorefs autorefs-internal" href="../data/types/__init__/#kiara.data.types.ValueType">ValueType</a> of a value, as well as an optional default that
will be used if no user input was given (yet) for a value.</p>
<p>For more complex container types like array, tables, unions etc, types can also be configured with values from the <code>type_config</code> field.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueSchema</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The schema of a value.</span>

<span class="sd">    The schema contains the [ValueType][kiara.data.values.ValueType] of a value, as well as an optional default that</span>
<span class="sd">    will be used if no user input was given (yet) for a value.</span>

<span class="sd">    For more complex container types like array, tables, unions etc, types can also be configured with values from the ``type_config`` field.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">use_enum_values</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># extra = Extra.forbid</span>

    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The type of the value.&quot;</span><span class="p">)</span>
    <span class="n">type_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Configuration for the type, in case it&#39;s complex.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">default</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A default value.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span>
    <span class="p">)</span>

    <span class="n">optional</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether this value is required (True), or whether &#39;None&#39; value is allowed (False).&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">is_constant</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the value is a constant.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
    <span class="c1"># required: typing.Any = Field(</span>
    <span class="c1">#     description=&quot;Whether this value is required to be set.&quot;, default=True</span>
    <span class="c1"># )</span>

    <span class="n">doc</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;-- n/a --&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A description for the value of this input field.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_required</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">optional</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">]:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">validate_types</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid value type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&#39;, available types: </span><span class="si">{</span><span class="n">kiara</span><span class="o">.</span><span class="n">value_type_names</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">desc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The first line of the &#39;doc&#39; value.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="p">))</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueSchema.default" class="doc doc-heading">
<code class="highlight language-python"><span class="n">default</span><span class="p">:</span> <span class="n">Any</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.default" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A default value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueSchema.desc" class="doc doc-heading">
<code class="highlight language-python"><span class="n">desc</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.desc" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The first line of the 'doc' value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueSchema.doc" class="doc doc-heading">
<code class="highlight language-python"><span class="n">doc</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.doc" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A description for the value of this input field.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueSchema.is_constant" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_constant</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.is_constant" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Whether the value is a constant.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueSchema.optional" class="doc doc-heading">
<code class="highlight language-python"><span class="n">optional</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.optional" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Whether this value is required (True), or whether 'None' value is allowed (False).</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueSchema.type" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The type of the value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueSchema.type_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">type_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.type_config" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Configuration for the type, in case it's complex.</p>
    </div>

  </div>








  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.ValueSchema.__eq__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.__eq__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return self==value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.ValueSchema.__hash__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.__hash__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return hash(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>








  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.data.values.ValueSlot" class="doc doc-heading">
        <code>
ValueSlot            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.values.ValueSlot" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueSlot</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_value</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ValueSlot&quot;</span><span class="p">:</span>

        <span class="n">vs</span> <span class="o">=</span> <span class="n">ValueSlot</span><span class="o">.</span><span class="n">from_value_schema</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">value_schema</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">value_schema</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">_kiara</span>
        <span class="p">)</span>
        <span class="n">vs</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">vs</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_value_schema</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ValueSlot&quot;</span><span class="p">:</span>

        <span class="n">vs</span> <span class="o">=</span> <span class="n">ValueSlot</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">value_schema</span><span class="o">=</span><span class="n">value_schema</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">vs</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
        <span class="n">_kiara</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;kiara&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No kiara context provided.&quot;</span><span class="p">)</span>
        <span class="n">_registry</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;registry&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_registry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_registry</span> <span class="o">=</span> <span class="n">_kiara</span><span class="o">.</span><span class="n">data_registry</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span> <span class="o">=</span> <span class="n">_kiara</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span> <span class="o">=</span> <span class="n">_registry</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>

    <span class="n">_kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>
    <span class="n">_registry</span><span class="p">:</span> <span class="s2">&quot;DataRegistry&quot;</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>
    <span class="n">_callbacks</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ValueSlotUpdateHandler&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span>
    <span class="p">)</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The id for this slot.&quot;</span><span class="p">)</span>
    <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The schema for the values of this slot.&quot;</span>
    <span class="p">)</span>
    <span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The values of this slot, with versions as key.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">tags</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The tags for this value slot (tag name as key, linked version as value.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">latest_version_nr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_latest_value</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>

        <span class="n">lv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">latest_version_nr</span>
        <span class="k">if</span> <span class="n">lv</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No value added to value slot yet.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">latest_version_nr</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">register_callbacks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">callbacks</span><span class="p">:</span> <span class="s2">&quot;ValueSlotUpdateHandler&quot;</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="n">callbacks</span><span class="p">:</span>
            <span class="n">cb_id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">cb_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callbacks</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Callback with id &#39;</span><span class="si">{</span><span class="n">cb_id</span><span class="si">}</span><span class="s2">&#39; already registered.&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cb</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">cb</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
                    <span class="n">cb_id</span> <span class="o">=</span> <span class="n">cb</span><span class="o">.</span><span class="n">id</span><span class="p">()</span>  <span class="c1"># type: ignore</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">cb_id</span> <span class="o">=</span> <span class="n">cb</span><span class="o">.</span><span class="n">id</span>  <span class="c1"># type: ignore</span>
            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cb</span><span class="p">,</span> <span class="s2">&quot;get_id&quot;</span><span class="p">):</span>
                <span class="n">cb_id</span> <span class="o">=</span> <span class="n">cb</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>  <span class="c1"># type: ignore</span>

            <span class="k">if</span> <span class="n">cb_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">cb_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cb_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_callbacks</span><span class="p">[</span><span class="n">cb_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">cb</span>

    <span class="k">def</span> <span class="nf">add_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span>
        <span class="n">trigger_callbacks</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Add a value to this slot.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">latest_version_nr</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_latest_value</span><span class="p">()</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">latest_version_nr</span>

        <span class="c1"># TODO: check value data equality</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">is_constant</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                <span class="kn">import</span> <span class="nn">traceback</span>

                <span class="n">traceback</span><span class="o">.</span><span class="n">print_stack</span><span class="p">()</span>

            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t add value: value slot marked as &#39;constant&#39;.&quot;</span><span class="p">)</span>

        <span class="n">version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">latest_version_nr</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">assert</span> <span class="n">version</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">version</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="n">tags</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">version</span>

        <span class="k">if</span> <span class="n">trigger_callbacks</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callbacks</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">cb</span><span class="o">.</span><span class="n">values_updated</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">version</span>

    <span class="k">def</span> <span class="nf">is_latest_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">):</span>

        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_latest_value</span><span class="p">()</span><span class="o">.</span><span class="n">id</span>

    <span class="k">def</span> <span class="nf">find_linked_aliases</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_item</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="s2">&quot;ValueAlias&quot;</span><span class="p">]:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_item</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="n">value_item</span> <span class="o">=</span> <span class="n">value_item</span><span class="o">.</span><span class="n">id</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_version</span><span class="p">,</span> <span class="n">_value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">_value</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">value_item</span><span class="p">:</span>
                <span class="n">va</span> <span class="o">=</span> <span class="n">ValueAlias</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">_version</span><span class="p">)</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">va</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">_version</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                    <span class="k">for</span> <span class="n">_tag</span><span class="p">,</span> <span class="n">_tag_version</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">_tag_version</span> <span class="o">==</span> <span class="n">_version</span><span class="p">:</span>
                            <span class="n">va</span> <span class="o">=</span> <span class="n">ValueAlias</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">_tag</span><span class="p">)</span>
                            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">va</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">id</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueSlot.id" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueSlot.id" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The id for this slot.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueSlot.tags" class="doc doc-heading">
<code class="highlight language-python"><span class="n">tags</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueSlot.tags" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The tags for this value slot (tag name as key, linked version as value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueSlot.value_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueSlot.value_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The schema for the values of this slot.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.values.ValueSlot.values" class="doc doc-heading">
<code class="highlight language-python"><span class="n">values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">Value</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueSlot.values" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The values of this slot, with versions as key.</p>
    </div>

  </div>







  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.ValueSlot.__eq__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.ValueSlot.__eq__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return self==value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">id</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.ValueSlot.__hash__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.ValueSlot.__hash__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return hash(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.ValueSlot.add_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">trigger_callbacks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#kiara.data.values.ValueSlot.add_value" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Add a value to this slot.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_value</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span>
    <span class="n">trigger_callbacks</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add a value to this slot.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">latest_version_nr</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_latest_value</span><span class="p">()</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">latest_version_nr</span>

    <span class="c1"># TODO: check value data equality</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">is_constant</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
            <span class="kn">import</span> <span class="nn">traceback</span>

            <span class="n">traceback</span><span class="o">.</span><span class="n">print_stack</span><span class="p">()</span>

        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t add value: value slot marked as &#39;constant&#39;.&quot;</span><span class="p">)</span>

    <span class="n">version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">latest_version_nr</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="n">version</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">version</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">if</span> <span class="n">tags</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">version</span>

    <span class="k">if</span> <span class="n">trigger_callbacks</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callbacks</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">cb</span><span class="o">.</span><span class="n">values_updated</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">version</span>
</code></pre></div>
        </details>
    </div>

  </div>











  </div>

    </div>

  </div>










  <div class="doc doc-object doc-module">



<h4 id="kiara.data.values.value_set" class="doc doc-heading">
        <code>value_set</code>



<a href="#kiara.data.values.value_set" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h5 id="kiara.data.values.value_set.SlottedValueSet" class="doc doc-heading">
        <code>
SlottedValueSet            (<a class="autorefs autorefs-internal" title="kiara.data.values.value_set.ValueSet" href="../data/values/value_set/#kiara.data.values.value_set.ValueSet">ValueSet</a>)
        </code>



<a href="#kiara.data.values.value_set.SlottedValueSet" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/values/value_set.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SlottedValueSet</span><span class="p">(</span><span class="n">ValueSet</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_schemas</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">schemas</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ValueSchema&quot;</span><span class="p">],</span>
        <span class="n">read_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">check_for_sameness</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">initial_values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">default_value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span> <span class="o">=</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">registry</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">DataRegistry</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SlottedValueSet&quot;</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara.kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">registry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">registry</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">data_registry</span>

        <span class="n">values</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">schema</span> <span class="ow">in</span> <span class="n">schemas</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">def_val</span> <span class="o">=</span> <span class="n">default_value</span>
            <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">default_value</span><span class="p">):</span>
                <span class="n">def_val</span> <span class="o">=</span> <span class="n">default_value</span><span class="p">()</span>

            <span class="n">_init_value</span> <span class="o">=</span> <span class="n">def_val</span>

            <span class="k">if</span> <span class="n">initial_values</span> <span class="ow">and</span> <span class="n">initial_values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">_init_value</span> <span class="o">=</span> <span class="n">initial_values</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_init_value</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
                <span class="n">value</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                    <span class="n">value_data</span><span class="o">=</span><span class="n">_init_value</span><span class="p">,</span> <span class="n">value_schema</span><span class="o">=</span><span class="n">schema</span>
                <span class="p">)</span>
                <span class="c1"># value: Value = Value(value_schema=schema, value_data=_init_value, registry=registry)  # type: ignore</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">_init_value</span>

            <span class="n">values</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">items</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">read_only</span><span class="o">=</span><span class="n">read_only</span><span class="p">,</span>
            <span class="n">check_for_sameness</span><span class="o">=</span><span class="n">check_for_sameness</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>
            <span class="n">registry</span><span class="o">=</span><span class="n">registry</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">items</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;ValueSlot&quot;</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">]],</span>
        <span class="n">read_only</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">check_for_sameness</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">registry</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">DataRegistry</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A `ValueSet` implementation that keeps a history of each fields value.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            items: the value slots</span>
<span class="sd">            read_only: whether it is allowed to set new values to fields in this set</span>
<span class="sd">            check_for_sameness: whether a check should be performed that checks for equality of the new and old values, if equal, skip the update</span>
<span class="sd">            title: An optional title for this value set</span>
<span class="sd">            kiara: the kiara context</span>
<span class="sd">            registry: the registry to use to register the values to</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">items</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Can&#39;t create ValueSet: no values provided&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_for_sameness</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">check_for_sameness</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">read_only</span><span class="o">=</span><span class="n">read_only</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">registry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">registry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_registry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="p">:</span> <span class="n">DataRegistry</span> <span class="o">=</span> <span class="n">registry</span>

        <span class="n">_value_slots</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">items</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t create value set, item &#39;</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&#39; does not have a value (yet).&quot;</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value name can&#39;t start with &#39;_&#39;: </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">INVALID_VALUE_NAMES</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid value name &#39;</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
                <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">register_alias</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
                <span class="n">slot</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type: &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

            <span class="n">_value_slots</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">slot</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span> <span class="o">=</span> <span class="n">_value_slots</span>

    <span class="k">def</span> <span class="nf">get_all_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_get_value_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Value&quot;</span><span class="p">:</span>

        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">slot</span><span class="o">.</span><span class="n">get_latest_value</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_set_values</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]:</span>

        <span class="c1"># we want to set all registry-type values seperately, in one go, because it&#39;s more efficient</span>
        <span class="n">registries</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
            <span class="n">DataRegistry</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Value&quot;</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">field_slot_map</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">value_or_data</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">value_slot</span><span class="p">:</span> <span class="n">ValueSlot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">metadata</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_for_sameness</span><span class="p">:</span>
                <span class="n">latest_val</span> <span class="o">=</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">get_latest_value</span><span class="p">()</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_or_data</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">latest_val</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">value_or_data</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                        <span class="n">result</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">continue</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span>
                        <span class="n">latest_val</span><span class="o">.</span><span class="n">is_set</span>
                        <span class="ow">and</span> <span class="n">latest_val</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span> <span class="o">==</span> <span class="n">value_or_data</span>
                    <span class="p">):</span>
                        <span class="n">result</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">continue</span>

            <span class="n">registries</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">value_slot</span><span class="o">.</span><span class="n">_registry</span><span class="p">,</span> <span class="p">{})[</span><span class="n">value_slot</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_or_data</span>
            <span class="n">field_slot_map</span><span class="p">[</span><span class="n">value_slot</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_name</span>

        <span class="k">for</span> <span class="n">registry</span><span class="p">,</span> <span class="n">value_slots_details</span> <span class="ow">in</span> <span class="n">registries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">_r</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">update_value_slots</span><span class="p">(</span><span class="n">value_slots_details</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

            <span class="k">for</span> <span class="n">value_slot</span><span class="p">,</span> <span class="n">details</span> <span class="ow">in</span> <span class="n">_r</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">result</span><span class="p">[</span><span class="n">field_slot_map</span><span class="p">[</span><span class="n">value_slot</span><span class="p">]]</span> <span class="o">=</span> <span class="n">details</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="kiara.data.values.value_set.SlottedValueSet.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">,</span> <span class="n">read_only</span><span class="p">,</span> <span class="n">check_for_sameness</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">registry</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.value_set.SlottedValueSet.__init__" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>A <code>ValueSet</code> implementation that keeps a history of each fields value.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>items</code></td>
        <td><code>Mapping[str, Union[ValueSlot, Value]]</code></td>
        <td><p>the value slots</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>read_only</code></td>
        <td><code>bool</code></td>
        <td><p>whether it is allowed to set new values to fields in this set</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>check_for_sameness</code></td>
        <td><code>bool</code></td>
        <td><p>whether a check should be performed that checks for equality of the new and old values, if equal, skip the update</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>title</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>An optional title for this value set</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>kiara</code></td>
        <td><code>Optional[Kiara]</code></td>
        <td><p>the kiara context</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>registry</code></td>
        <td><code>Optional[kiara.data.registry.DataRegistry]</code></td>
        <td><p>the registry to use to register the values to</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/data/values/value_set.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;ValueSlot&quot;</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">]],</span>
    <span class="n">read_only</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">check_for_sameness</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">title</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">registry</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">DataRegistry</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A `ValueSet` implementation that keeps a history of each fields value.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        items: the value slots</span>
<span class="sd">        read_only: whether it is allowed to set new values to fields in this set</span>
<span class="sd">        check_for_sameness: whether a check should be performed that checks for equality of the new and old values, if equal, skip the update</span>
<span class="sd">        title: An optional title for this value set</span>
<span class="sd">        kiara: the kiara context</span>
<span class="sd">        registry: the registry to use to register the values to</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">items</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Can&#39;t create ValueSet: no values provided&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_check_for_sameness</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">check_for_sameness</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">read_only</span><span class="o">=</span><span class="n">read_only</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">registry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">registry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_registry</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="p">:</span> <span class="n">DataRegistry</span> <span class="o">=</span> <span class="n">registry</span>

    <span class="n">_value_slots</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">items</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t create value set, item &#39;</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&#39; does not have a value (yet).&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value name can&#39;t start with &#39;_&#39;: </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">INVALID_VALUE_NAMES</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid value name &#39;</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">register_alias</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
            <span class="n">slot</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type: &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

        <span class="n">_value_slots</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">slot</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span> <span class="o">=</span> <span class="n">_value_slots</span>
</code></pre></div>
        </details>
    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="kiara.data.values.value_set.ValueSet" class="doc doc-heading">
        <code>
ValueSet            (<span title="collections.abc.MutableMapping">MutableMapping</span>, <span title="typing.Generic">Generic</span>)
        </code>



<a href="#kiara.data.values.value_set.ValueSet" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/values/value_set.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueSet</span><span class="p">(</span><span class="n">typing</span><span class="o">.</span><span class="n">MutableMapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">]):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">read_only</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="c1"># from kiara.data.values import ValueSchema</span>
        <span class="c1"># schema = ValueSchema(type=&quot;any&quot;, default=None, doc=&quot;-- n/a --&quot;)</span>
        <span class="c1"># self._schema = schema</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara.kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span> <span class="o">=</span> <span class="n">kiara</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_read_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">read_only</span>
        <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;-- n/a --&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">title</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_all_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">pass</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_value_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_set_values</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]:</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">get_value_obj</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">ensure_metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()):</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Field &#39;</span><span class="si">{</span><span class="n">field_name</span><span class="si">}</span><span class="s2">&#39; not available in value set. Available fields: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">obj</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_value_obj</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">ensure_metadata</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ensure_metadata</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ensure_metadata</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">ensure_metadata</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ensure_metadata</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">):</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="o">*</span><span class="n">ensure_metadata</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">ensure_metadata</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; for &#39;ensure_metadata&#39; argument.&quot;</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="nf">set_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span><span class="p">})</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="ne">Exception</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>  <span class="c1"># type: ignore</span>

    <span class="k">def</span> <span class="nf">set_values</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Batch set several values.</span>

<span class="sd">        If metadata is provided, it is added to all values.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_read_only</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t set values: this value set is read-only.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">values</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{}</span>

        <span class="n">invalid</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">():</span>
                <span class="n">invalid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">invalid</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No field(s) with name(s) </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">invalid</span><span class="p">)</span><span class="si">}</span><span class="s2"> available, valid names: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">resolved_values</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">data</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;value:&quot;</span><span class="p">):</span>
                <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="n">resolved_values</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">resolved_values</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">value_set_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_values</span><span class="p">(</span>
                <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span><span class="p">,</span> <span class="o">**</span><span class="n">resolved_values</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">log_message</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                <span class="kn">import</span> <span class="nn">traceback</span>

                <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_set_result</span><span class="p">[</span><span class="n">field</span><span class="p">],</span> <span class="ne">Exception</span><span class="p">):</span>
                <span class="n">result</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_set_result</span><span class="p">[</span><span class="n">field</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">is_read_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_only</span>

    <span class="k">def</span> <span class="nf">items_are_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="k">return</span> <span class="n">check_valueset_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># for field_name in self.get_all_field_names():</span>
        <span class="c1">#     item = self.get_value_obj(field_name)</span>
        <span class="c1">#     if not item.item_is_valid():</span>
        <span class="c1">#         return False</span>
        <span class="c1"># return True</span>

    <span class="k">def</span> <span class="nf">check_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Check whether the value set is invalid, if it is, return a description of what&#39;s wrong.&quot;&quot;&quot;</span>

        <span class="n">invalid</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">is_required</span><span class="p">():</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;not set&quot;</span>
                    <span class="k">elif</span> <span class="n">item</span><span class="o">.</span><span class="n">is_none</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;no value&quot;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;n/a&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;n/a&quot;</span>
                <span class="n">invalid</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">msg</span>
        <span class="k">return</span> <span class="n">invalid</span>

    <span class="k">def</span> <span class="nf">get_all_value_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">fn</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span> <span class="k">for</span> <span class="n">fn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()}</span>

    <span class="k">def</span> <span class="nf">get_value_data_for_fields</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">field_names</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">raise_exception_when_unset</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return the data for a one or several fields of this ValueSet.</span>

<span class="sd">        If a value is unset, by default &#39;None&#39; is returned for it. Unless &#39;raise_exception_when_unset&#39; is set to &#39;True&#39;,</span>
<span class="sd">        in which case an Exception will be raised (obviously).</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">unset</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">raise_exception_when_unset</span><span class="p">:</span>
                    <span class="n">unset</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>
                <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>

        <span class="k">if</span> <span class="n">unset</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t get data for fields, one or several of the requested fields are not set yet: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">unset</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">get_value_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">raise_exception_when_unset</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_data_for_fields</span><span class="p">(</span>
            <span class="n">field_name</span><span class="p">,</span> <span class="n">raise_exception_when_unset</span><span class="o">=</span><span class="n">raise_exception_when_unset</span>
        <span class="p">)[</span><span class="n">field_name</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_all_value_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">raise_exception_when_unset</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_data_for_fields</span><span class="p">(</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">(),</span>
            <span class="n">raise_exception_when_unset</span><span class="o">=</span><span class="n">raise_exception_when_unset</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">save_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">aliases</span><span class="p">:</span>
            <span class="n">aliases</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">aliases</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">field_aliases</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">aliases</span><span class="p">:</span>
                <span class="n">field_aliases</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">aliases</span><span class="p">]</span>
            <span class="n">v</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">aliases</span><span class="o">=</span><span class="n">field_aliases</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Value&quot;</span><span class="p">:</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>

        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Removing items not supported: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">())</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()))</span>

    <span class="k">def</span> <span class="nf">to_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ensure_metadata</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineValuesInfo&quot;</span><span class="p">:</span>

        <span class="kn">from</span> <span class="nn">kiara.pipeline</span> <span class="kn">import</span> <span class="n">PipelineValueInfo</span><span class="p">,</span> <span class="n">PipelineValuesInfo</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">():</span>
            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">PipelineValueInfo</span><span class="o">.</span><span class="n">from_value_obj</span><span class="p">(</span>
                <span class="n">item</span><span class="p">,</span> <span class="n">ensure_metadata</span><span class="o">=</span><span class="n">ensure_metadata</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">PipelineValuesInfo</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_create_rich_table</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">show_headers</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ensure_metadata</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">,</span> <span class="n">show_header</span><span class="o">=</span><span class="n">show_headers</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Field name&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Required&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Is set&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">():</span>
            <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">ensure_metadata</span><span class="o">=</span><span class="n">ensure_metadata</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span>
            <span class="n">desc</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">doc</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">is_required</span><span class="p">():</span>
                <span class="n">req</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">v</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span>
                    <span class="ow">and</span> <span class="n">v</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span> <span class="o">!=</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span>
                    <span class="ow">and</span> <span class="n">v</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span> <span class="o">!=</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span>
                <span class="p">):</span>
                    <span class="n">req</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">req</span> <span class="o">=</span> <span class="s2">&quot;[red]yes[/red]&quot;</span>
            <span class="n">is_set</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span> <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;no&quot;</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">desc</span><span class="p">,</span> <span class="n">req</span><span class="p">,</span> <span class="n">is_set</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">table</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">title_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_title</span><span class="p">:</span>
            <span class="n">title_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; title=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_title</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(field_names=</span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}{</span><span class="n">title_str</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_title</span>
        <span class="k">if</span> <span class="n">title</span><span class="p">:</span>
            <span class="n">postfix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; [b]</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">[/b]&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">postfix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">yield</span> <span class="n">Panel</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_create_rich_table</span><span class="p">(</span><span class="n">show_headers</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">ROUNDED</span><span class="p">,</span>
            <span class="n">title_align</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Value-Set:</span><span class="si">{</span><span class="n">postfix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


















  <div class="doc doc-object doc-method">



<h6 id="kiara.data.values.value_set.ValueSet.check_invalid" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.data.values.value_set.ValueSet.check_invalid" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Check whether the value set is invalid, if it is, return a description of what's wrong.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/value_set.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Check whether the value set is invalid, if it is, return a description of what&#39;s wrong.&quot;&quot;&quot;</span>

    <span class="n">invalid</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">is_required</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;not set&quot;</span>
                <span class="k">elif</span> <span class="n">item</span><span class="o">.</span><span class="n">is_none</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;no value&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;n/a&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;n/a&quot;</span>
            <span class="n">invalid</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">msg</span>
    <span class="k">return</span> <span class="n">invalid</span>
</code></pre></div>
        </details>
    </div>

  </div>







  <div class="doc doc-object doc-method">



<h6 id="kiara.data.values.value_set.ValueSet.get_value_data_for_fields" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_value_data_for_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">field_names</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">raise_exception_when_unset</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#kiara.data.values.value_set.ValueSet.get_value_data_for_fields" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Return the data for a one or several fields of this ValueSet.</p>
<p>If a value is unset, by default 'None' is returned for it. Unless 'raise_exception_when_unset' is set to 'True',
in which case an Exception will be raised (obviously).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/value_set.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_value_data_for_fields</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">field_names</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">raise_exception_when_unset</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Return the data for a one or several fields of this ValueSet.</span>

<span class="sd">    If a value is unset, by default &#39;None&#39; is returned for it. Unless &#39;raise_exception_when_unset&#39; is set to &#39;True&#39;,</span>
<span class="sd">    in which case an Exception will be raised (obviously).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">unset</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">:</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">raise_exception_when_unset</span><span class="p">:</span>
                <span class="n">unset</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>
            <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">if</span> <span class="n">unset</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Can&#39;t get data for fields, one or several of the requested fields are not set yet: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">unset</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>








  <div class="doc doc-object doc-method">



<h6 id="kiara.data.values.value_set.ValueSet.set_values" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">values</span><span class="p">)</span></code>


<a href="#kiara.data.values.value_set.ValueSet.set_values" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Batch set several values.</p>
<p>If metadata is provided, it is added to all values.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/value_set.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_values</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Batch set several values.</span>

<span class="sd">    If metadata is provided, it is added to all values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_read_only</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t set values: this value set is read-only.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">values</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="n">invalid</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">():</span>
            <span class="n">invalid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">invalid</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No field(s) with name(s) </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">invalid</span><span class="p">)</span><span class="si">}</span><span class="s2"> available, valid names: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="n">resolved_values</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">data</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;value:&quot;</span><span class="p">):</span>
            <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="n">resolved_values</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">resolved_values</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">value_set_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_values</span><span class="p">(</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span><span class="p">,</span> <span class="o">**</span><span class="n">resolved_values</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">log_message</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
            <span class="kn">import</span> <span class="nn">traceback</span>

            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">raise</span> <span class="n">e</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_set_result</span><span class="p">[</span><span class="n">field</span><span class="p">],</span> <span class="ne">Exception</span><span class="p">):</span>
            <span class="n">result</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_set_result</span><span class="p">[</span><span class="n">field</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>









  </div>

    </div>

  </div>




  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.defaults" class="doc doc-heading">
        <code>defaults</code>



<a href="#kiara.defaults" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h3 id="kiara.defaults.DEFAULT_EXCLUDE_DIRS" class="doc doc-heading">
<code class="highlight language-python"><span class="n">DEFAULT_EXCLUDE_DIRS</span></code>


<a href="#kiara.defaults.DEFAULT_EXCLUDE_DIRS" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>List of directory names to exclude by default when walking a folder recursively.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="kiara.defaults.DEFAULT_EXCLUDE_FILES" class="doc doc-heading">
<code class="highlight language-python"><span class="n">DEFAULT_EXCLUDE_FILES</span></code>


<a href="#kiara.defaults.DEFAULT_EXCLUDE_FILES" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>List of file names to exclude by default when reading folders.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h3 id="kiara.defaults.DEFAULT_PIPELINE_PARENT_ID" class="doc doc-heading">
<code class="highlight language-python"><span class="n">DEFAULT_PIPELINE_PARENT_ID</span></code>


<a href="#kiara.defaults.DEFAULT_PIPELINE_PARENT_ID" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Default parent id for pipeline objects that are not associated with a workflow.</p>
    </div>

  </div>





  <div class="doc doc-object doc-attribute">



<h3 id="kiara.defaults.INVALID_VALUE_NAMES" class="doc doc-heading">
<code class="highlight language-python"><span class="n">INVALID_VALUE_NAMES</span></code>


<a href="#kiara.defaults.INVALID_VALUE_NAMES" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>List of reserved names, inputs/outputs can't use those.</p>
    </div>

  </div>








  <div class="doc doc-object doc-attribute">



<h3 id="kiara.defaults.KIARA_MODULE_BASE_FOLDER" class="doc doc-heading">
<code class="highlight language-python"><span class="n">KIARA_MODULE_BASE_FOLDER</span></code>


<a href="#kiara.defaults.KIARA_MODULE_BASE_FOLDER" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Marker to indicate the base folder for the <code>kiara</code> module.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h3 id="kiara.defaults.KIARA_RESOURCES_FOLDER" class="doc doc-heading">
<code class="highlight language-python"><span class="n">KIARA_RESOURCES_FOLDER</span></code>


<a href="#kiara.defaults.KIARA_RESOURCES_FOLDER" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Default resources folder for this package.</p>
    </div>

  </div>





  <div class="doc doc-object doc-attribute">



<h3 id="kiara.defaults.MODULE_TYPE_KEY" class="doc doc-heading">
<code class="highlight language-python"><span class="n">MODULE_TYPE_KEY</span></code>


<a href="#kiara.defaults.MODULE_TYPE_KEY" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>The key to specify the type of a module.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="kiara.defaults.MODULE_TYPE_NAME_KEY" class="doc doc-heading">
<code class="highlight language-python"><span class="n">MODULE_TYPE_NAME_KEY</span></code>


<a href="#kiara.defaults.MODULE_TYPE_NAME_KEY" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>The string for the module type name in a module configuration dict.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="kiara.defaults.NO_HASH_MARKER" class="doc doc-heading">
<code class="highlight language-python"><span class="n">NO_HASH_MARKER</span></code>


<a href="#kiara.defaults.NO_HASH_MARKER" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Marker string to indicate no hash was calculated.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="kiara.defaults.NO_VALUE_ID_MARKER" class="doc doc-heading">
<code class="highlight language-python"><span class="n">NO_VALUE_ID_MARKER</span></code>


<a href="#kiara.defaults.NO_VALUE_ID_MARKER" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Marker string to indicate no value id exists.</p>
    </div>

  </div>






  <div class="doc doc-object doc-attribute">



<h3 id="kiara.defaults.PIPELINE_PARENT_MARKER" class="doc doc-heading">
<code class="highlight language-python"><span class="n">PIPELINE_PARENT_MARKER</span></code>


<a href="#kiara.defaults.PIPELINE_PARENT_MARKER" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Marker string in the pipeline structure that indicates a parent pipeline element.</p>
    </div>

  </div>





  <div class="doc doc-object doc-attribute">



<h3 id="kiara.defaults.STEP_ID_KEY" class="doc doc-heading">
<code class="highlight language-python"><span class="n">STEP_ID_KEY</span></code>


<a href="#kiara.defaults.STEP_ID_KEY" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>The key to specify the step id.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h3 id="kiara.defaults.VALID_PIPELINE_FILE_EXTENSIONS" class="doc doc-heading">
<code class="highlight language-python"><span class="n">VALID_PIPELINE_FILE_EXTENSIONS</span></code>


<a href="#kiara.defaults.VALID_PIPELINE_FILE_EXTENSIONS" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>File extensions a kiara pipeline/workflow file can have.</p>
    </div>

  </div>







  <div class="doc doc-object doc-class">



<h3 id="kiara.defaults.SpecialValue" class="doc doc-heading">
        <code>
SpecialValue            (<span title="enum.Enum">Enum</span>)
        </code>



<a href="#kiara.defaults.SpecialValue" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>An enumeration.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/defaults.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SpecialValue</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>

    <span class="n">NOT_SET</span> <span class="o">=</span> <span class="s2">&quot;__not_set__&quot;</span>
    <span class="n">NO_VALUE</span> <span class="o">=</span> <span class="s2">&quot;__no_value__&quot;</span>
    <span class="n">IGNORE</span> <span class="o">=</span> <span class="s2">&quot;__ignore__&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">














  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.doc" class="doc doc-heading">
        <code>doc</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.doc" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Main module for code that helps with documentation auto-generation in supported projects.</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="kiara.doc.FrklDocumentationPlugin" class="doc doc-heading">
        <code>
FrklDocumentationPlugin            (<span title="mkdocs.plugins.BasePlugin">BasePlugin</span>)
        </code>



<a href="#kiara.doc.FrklDocumentationPlugin" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p><a href="https://www.mkdocs.org/">mkdocs</a> plugin to render API documentation for a project.</p>
<p>To add to a project, add this to the 'plugins' section of a mkdocs config file:</p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">frkl-docgen</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">main_module</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;module_name&quot;</span><span class="w"></span>
</code></pre></div>
<p>This will add an <code>API reference</code> navigation item to your page navigation, with auto-generated entries for every
Python module in your package.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/doc/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">FrklDocumentationPlugin</span><span class="p">(</span><span class="n">BasePlugin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;[mkdocs](https://www.mkdocs.org/) plugin to render API documentation for a project.</span>

<span class="sd">    To add to a project, add this to the &#39;plugins&#39; section of a mkdocs config file:</span>

<span class="sd">    ```yaml</span>
<span class="sd">    - frkl-docgen:</span>
<span class="sd">        main_module: &quot;module_name&quot;</span>
<span class="sd">    ```</span>

<span class="sd">    This will add an ``API reference`` navigation item to your page navigation, with auto-generated entries for every</span>
<span class="sd">    Python module in your package.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">config_scheme</span> <span class="o">=</span> <span class="p">((</span><span class="s2">&quot;main_module&quot;</span><span class="p">,</span> <span class="n">mkdocs</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">config_options</span><span class="o">.</span><span class="n">Type</span><span class="p">(</span><span class="nb">str</span><span class="p">)),)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_doc_paths</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;frkl_doc_gen_&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_doc_files</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">on_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">files</span><span class="p">:</span> <span class="n">Files</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Files</span><span class="p">:</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_doc_paths</span> <span class="o">=</span> <span class="n">gen_pages_for_module</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;main_module&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_doc_files</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_doc_paths</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">x</span><span class="p">)[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_doc_paths</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
            <span class="n">_file</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span>
                <span class="n">k</span><span class="p">,</span>
                <span class="n">src_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dir</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">dest_dir</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;site_dir&quot;</span><span class="p">],</span>
                <span class="n">use_directory_urls</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;use_directory_urls&quot;</span><span class="p">],</span>
            <span class="p">)</span>

            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">_file</span><span class="o">.</span><span class="n">abs_src_path</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">_file</span><span class="o">.</span><span class="n">abs_src_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_doc_files</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">_file</span>
            <span class="n">files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_file</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">files</span>

    <span class="k">def</span> <span class="nf">on_page_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">page</span><span class="p">:</span> <span class="n">Page</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span> <span class="n">files</span><span class="p">:</span> <span class="n">Files</span><span class="p">):</span>

        <span class="n">repo_url</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;repo_url&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">python_src</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;edit_uri&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">page</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">src_path</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_doc_paths</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">src_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_doc_paths</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">src_path</span><span class="p">)[</span><span class="s2">&quot;python_src&quot;</span><span class="p">][</span><span class="s2">&quot;rel_path&quot;</span><span class="p">]</span>
            <span class="n">rel_base</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urljoin</span><span class="p">(</span><span class="n">repo_url</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">python_src</span><span class="si">}</span><span class="s2">/../src/</span><span class="si">{</span><span class="n">src_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">page</span><span class="o">.</span><span class="n">edit_url</span> <span class="o">=</span> <span class="n">rel_base</span>

        <span class="k">return</span> <span class="n">html</span>

    <span class="k">def</span> <span class="nf">on_nav</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nav</span><span class="p">:</span> <span class="n">Navigation</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span> <span class="n">files</span><span class="p">:</span> <span class="n">Files</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">nav</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">title</span> <span class="ow">and</span> <span class="s2">&quot;Api reference&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">title</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nav</span>

        <span class="n">pages</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_file</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_doc_files</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">pages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_file</span><span class="o">.</span><span class="n">page</span><span class="p">)</span>

        <span class="n">section</span> <span class="o">=</span> <span class="n">Section</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;API reference&quot;</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="n">pages</span><span class="p">)</span>
        <span class="n">nav</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
        <span class="n">nav</span><span class="o">.</span><span class="n">pages</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">pages</span><span class="p">)</span>

        <span class="n">_add_previous_and_next_links</span><span class="p">(</span><span class="n">nav</span><span class="o">.</span><span class="n">pages</span><span class="p">)</span>
        <span class="n">_add_parent_links</span><span class="p">(</span><span class="n">nav</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">nav</span>

    <span class="k">def</span> <span class="nf">on_post_build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_dir</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">

















  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h3 id="kiara.doc.gen_info_pages" class="doc doc-heading">
        <code>gen_info_pages</code>



<a href="#kiara.doc.gen_info_pages" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">











  <div class="doc doc-object doc-function">



<h4 id="kiara.doc.gen_info_pages.render_item_listing" class="doc doc-heading">
<code class="highlight language-python"><span class="n">render_item_listing</span><span class="p">(</span><span class="n">kiara</span><span class="p">,</span> <span class="n">item_type</span><span class="p">,</span> <span class="n">limit_to_package</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#kiara.doc.gen_info_pages.render_item_listing" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Render an item listing summary page, for: https://oprypin.github.io/mkdocs-literate-nav/</p>
<p>This code is a terrible, terrible mess, but I just don't care enough. If the output it produces is wrong, it'll be
obvious in the documentation (hopefully).
I'd have to spend considerable time cleaning this up, and at the moment it does not seem worth it.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/doc/gen_info_pages.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">render_item_listing</span><span class="p">(</span>
    <span class="n">kiara</span><span class="p">:</span> <span class="n">Kiara</span><span class="p">,</span> <span class="n">item_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">limit_to_package</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Render an item listing summary page, for: https://oprypin.github.io/mkdocs-literate-nav/</span>

<span class="sd">    This code is a terrible, terrible mess, but I just don&#39;t care enough. If the output it produces is wrong, it&#39;ll be</span>
<span class="sd">    obvious in the documentation (hopefully).</span>
<span class="sd">    I&#39;d have to spend considerable time cleaning this up, and at the moment it does not seem worth it.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">info</span><span class="p">:</span> <span class="n">KiaraInfoModel</span> <span class="o">=</span> <span class="n">KiaraContext</span><span class="o">.</span><span class="n">get_info</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>
    <span class="n">tree</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">get_subcomponent_tree</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">tree</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t render item listing, no subcomponent tree available.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">extract_cls_from_kiara_module_type_metadata</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">python_class</span><span class="o">.</span><span class="n">get_class</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">extract_cls_from_operation</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="vm">__class__</span>

    <span class="k">def</span> <span class="nf">extract_cls_from_op_type</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">python_class</span><span class="o">.</span><span class="n">get_class</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">extract_cls_from_value_type</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">python_class</span><span class="o">.</span><span class="n">get_class</span><span class="p">()</span>

    <span class="n">item_type_map</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;module&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;cls&quot;</span><span class="p">:</span> <span class="n">KiaraModuleTypeMetadata</span><span class="p">,</span>
            <span class="s2">&quot;extract&quot;</span><span class="p">:</span> <span class="n">extract_cls_from_kiara_module_type_metadata</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;pipeline&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;cls&quot;</span><span class="p">:</span> <span class="n">KiaraModuleTypeMetadata</span><span class="p">,</span>
            <span class="s2">&quot;extract&quot;</span><span class="p">:</span> <span class="n">extract_cls_from_kiara_module_type_metadata</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;value_type&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;cls&quot;</span><span class="p">:</span> <span class="n">ValueTypeMetadata</span><span class="p">,</span>
            <span class="s2">&quot;extract&quot;</span><span class="p">:</span> <span class="n">extract_cls_from_value_type</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;cls&quot;</span><span class="p">:</span> <span class="n">Operation</span><span class="p">,</span> <span class="s2">&quot;extract&quot;</span><span class="p">:</span> <span class="n">extract_cls_from_operation</span><span class="p">},</span>
        <span class="s2">&quot;operation_type&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;cls&quot;</span><span class="p">:</span> <span class="n">OperationsMetadata</span><span class="p">,</span>
            <span class="s2">&quot;extract&quot;</span><span class="p">:</span> <span class="n">extract_cls_from_op_type</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
    <span class="n">item_cls</span> <span class="o">=</span> <span class="n">item_type_map</span><span class="p">[</span><span class="n">item_type</span><span class="p">][</span><span class="s2">&quot;cls&quot;</span><span class="p">]</span>
    <span class="n">plural</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">item_type</span><span class="si">}</span><span class="s2">s&quot;</span>

    <span class="n">item_summaries</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Tuple</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">list_template</span> <span class="o">=</span> <span class="n">get_jina_env</span><span class="p">()</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">item_type</span><span class="si">}</span><span class="s2">_list.md.j2&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="p">():</span>
        <span class="n">tokens</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">category</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="s2">&quot;obj&quot;</span><span class="p">]</span>

        <span class="n">path_tokens</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>

        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="n">plural</span><span class="p">:</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">item_cls</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
                <span class="k">if</span> <span class="n">limit_to_package</span><span class="p">:</span>
                    <span class="bp">cls</span> <span class="o">=</span> <span class="n">item_type_map</span><span class="p">[</span><span class="n">item_type</span><span class="p">][</span><span class="s2">&quot;extract&quot;</span><span class="p">](</span><span class="n">obj</span><span class="p">)</span>
                    <span class="n">md</span> <span class="o">=</span> <span class="n">ContextMetadataModel</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">md</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;package&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">!=</span> <span class="n">limit_to_package</span><span class="p">:</span>
                        <span class="k">continue</span>
                <span class="n">item_summaries</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">path_tokens</span><span class="p">),</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">KiaraDynamicInfoModel</span><span class="p">):</span>
                <span class="n">item_summaries</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">path_tokens</span><span class="p">),</span> <span class="p">[])</span>

    <span class="n">new_summary</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Tuple</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">no_childs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">path_tokens</span><span class="p">,</span> <span class="n">items</span> <span class="ow">in</span> <span class="n">item_summaries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># if len(path_tokens) == 1:</span>
        <span class="c1">#     new_summary[path_tokens] = item_summaries[path_tokens]</span>

        <span class="c1"># full_path = [path_tokens[0]]</span>
        <span class="n">full_path</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">collect</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">path_tokens</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">collect</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">collect</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
                <span class="n">t</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">full_path</span> <span class="o">+</span> <span class="n">collect</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">item_summaries</span><span class="p">[</span><span class="n">t</span><span class="p">]:</span>
                    <span class="k">continue</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_summary</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">full_path</span><span class="p">),</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="n">item_summaries</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">full_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
                <span class="n">t</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">full_path</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">item_summaries</span><span class="p">[</span><span class="n">t</span><span class="p">]:</span>
                    <span class="n">new_summary</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">item_summaries</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">match</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">any_childs</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">item_summaries</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">full_path</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">full_path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                            <span class="n">match</span> <span class="o">=</span> <span class="kc">True</span>

                        <span class="k">if</span> <span class="p">(</span>
                            <span class="nb">len</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span>
                            <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                            <span class="ow">and</span> <span class="n">k</span><span class="p">[</span><span class="mi">0</span> <span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)]</span> <span class="o">==</span> <span class="n">t</span>  <span class="c1"># noqa</span>
                            <span class="ow">and</span> <span class="n">item_summaries</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                        <span class="p">):</span>
                            <span class="n">any_childs</span> <span class="o">=</span> <span class="kc">True</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">any_childs</span><span class="p">:</span>
                        <span class="n">no_childs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
                        <span class="n">new_summary</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="p">[])</span>
                        <span class="n">collect</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">new_summary</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">item_summaries</span><span class="p">[</span><span class="n">t</span><span class="p">])</span>

    <span class="n">main_summary</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">summary_path</span><span class="p">,</span> <span class="n">items</span> <span class="ow">in</span> <span class="n">new_summary</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">summary_path</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="n">match</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">nc</span> <span class="ow">in</span> <span class="n">no_childs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">summary_path</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nc</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">summary_path</span><span class="p">[</span><span class="mi">0</span> <span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">nc</span><span class="p">)]</span> <span class="o">==</span> <span class="n">nc</span><span class="p">:</span>  <span class="c1"># noqa</span>
                    <span class="n">match</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">break</span>
        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="n">padding</span> <span class="o">=</span> <span class="s2">&quot;  &quot;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">summary_path</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="o">*</span><span class="n">summary_path</span><span class="p">)</span>

        <span class="n">rendered</span> <span class="o">=</span> <span class="n">list_template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span> <span class="n">plural</span><span class="p">:</span> <span class="n">items</span><span class="p">})</span>
        <span class="n">p_write</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">plural</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="s2">&quot;index.md&quot;</span><span class="p">)</span>
        <span class="n">p_index</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;index.md&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="n">mkdocs_gen_files</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">p_write</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">rendered</span><span class="p">)</span>

        <span class="n">main_summary</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">padding</span><span class="si">}</span><span class="s2">* [</span><span class="si">{</span><span class="n">summary_path</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">](</span><span class="si">{</span><span class="n">p_index</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="n">modules_content</span> <span class="o">=</span> <span class="s2">&quot;xxxxxxx&quot;</span>
    <span class="k">with</span> <span class="n">mkdocs_gen_files</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">plural</span><span class="si">}</span><span class="s2">/index.md&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">modules_content</span><span class="p">)</span>

    <span class="n">summary_content</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">main_summary</span><span class="p">)</span>

    <span class="n">summary_page</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">plural</span><span class="si">}</span><span class="s2">/SUMMARY.md&quot;</span>
    <span class="k">with</span> <span class="n">mkdocs_gen_files</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">summary_page</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">summary_content</span><span class="p">)</span>

    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">plural</span><span class="si">}</span><span class="s2">/&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.doc.generate_api_doc" class="doc doc-heading">
        <code>generate_api_doc</code>



<a href="#kiara.doc.generate_api_doc" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h4 id="kiara.doc.generate_api_doc.gen_pages_for_module" class="doc doc-heading">
<code class="highlight language-python"><span class="n">gen_pages_for_module</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;api_reference&#39;</span><span class="p">)</span></code>


<a href="#kiara.doc.generate_api_doc.gen_pages_for_module" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Generate modules for a set of modules (using the <a href="https://github.com/mkdocstrings/mkdocstrings">mkdocstring</a> package.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/doc/generate_api_doc.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">gen_pages_for_module</span><span class="p">(</span>
    <span class="n">module</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ModuleType</span><span class="p">],</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;api_reference&quot;</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generate modules for a set of modules (using the [mkdocstring](https://github.com/mkdocstrings/mkdocstrings) package.&quot;&quot;&quot;</span>

    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">modules_info</span> <span class="o">=</span> <span class="n">get_source_tree</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">module_name</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">modules_info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

        <span class="n">page_name</span> <span class="o">=</span> <span class="n">module_name</span>

        <span class="k">if</span> <span class="n">page_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;__init__&quot;</span><span class="p">):</span>
            <span class="n">page_name</span> <span class="o">=</span> <span class="n">page_name</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">page_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;._frkl&quot;</span><span class="p">):</span>
            <span class="k">continue</span>

        <span class="n">doc_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="si">}{</span><span class="n">page_name</span><span class="si">}</span><span class="s2">.md&quot;</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">[</span><span class="s2">&quot;abs_path&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
            <span class="k">continue</span>

        <span class="n">main_module</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="s2">&quot;main_module&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">page_name</span> <span class="o">==</span> <span class="n">main_module</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="n">page_name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="n">page_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">main_module</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span> <span class="s2">&quot;➜ &quot;</span><span class="p">)</span>

        <span class="n">result</span><span class="p">[</span><span class="n">doc_path</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;python_src&quot;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span>
            <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;---</span><span class="se">\n</span><span class="s2">title: </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="se">\n</span><span class="s2">---</span><span class="se">\n</span><span class="s2"># </span><span class="si">{</span><span class="n">page_name</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">::: </span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="kiara.doc.generate_api_doc.get_source_tree" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_source_tree</span><span class="p">(</span><span class="n">module</span><span class="p">)</span></code>


<a href="#kiara.doc.generate_api_doc.get_source_tree" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Find all python source files for a module.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/doc/generate_api_doc.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_source_tree</span><span class="p">(</span><span class="n">module</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ModuleType</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Find all python source files for a module.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">ModuleType</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">module</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;, input needs to be a string or module.&quot;</span>
        <span class="p">)</span>

    <span class="n">module_file</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="vm">__file__</span>
    <span class="k">assert</span> <span class="n">module_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="n">module_root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">module_file</span><span class="p">)</span>
    <span class="n">module_name</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="vm">__name__</span>

    <span class="n">src</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">Path</span><span class="p">(</span><span class="n">module_root</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;**/*.py&quot;</span><span class="p">):</span>

        <span class="n">rel</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">module_root</span><span class="p">)</span>
        <span class="n">mod_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">rel</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">rel_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">module_name</span><span class="si">}{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="si">}{</span><span class="n">rel</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">src</span><span class="p">[</span><span class="n">mod_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;rel_path&quot;</span><span class="p">:</span> <span class="n">rel_path</span><span class="p">,</span>
            <span class="s2">&quot;abs_path&quot;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span>
            <span class="s2">&quot;main_module&quot;</span><span class="p">:</span> <span class="n">module_name</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">return</span> <span class="n">src</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.doc.mkdocs_macros_cli" class="doc doc-heading">
        <code>mkdocs_macros_cli</code>



<a href="#kiara.doc.mkdocs_macros_cli" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">










  <div class="doc doc-object doc-function">



<h4 id="kiara.doc.mkdocs_macros_cli.define_env" class="doc doc-heading">
<code class="highlight language-python"><span class="n">define_env</span><span class="p">(</span><span class="n">env</span><span class="p">)</span></code>


<a href="#kiara.doc.mkdocs_macros_cli.define_env" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Helper macros for Python project documentation.</p>
<p>Currently, those macros are available (check the source code for more details):</p>
<h6 id="kiara.doc.mkdocs_macros_cli.define_env--cli"><code>cli</code><a class="headerlink" href="#kiara.doc.mkdocs_macros_cli.define_env--cli" title="Permanent link">&para;</a></h6>
<p>Execute a command on the command-line, capture the output and return it to be used in a documentation page.</p>
<h6 id="kiara.doc.mkdocs_macros_cli.define_env--inline_file_as_codeblock"><code>inline_file_as_codeblock</code><a class="headerlink" href="#kiara.doc.mkdocs_macros_cli.define_env--inline_file_as_codeblock" title="Permanent link">&para;</a></h6>
<p>Read an external file, and return its content as a markdown code block.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/doc/mkdocs_macros_cli.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">define_env</span><span class="p">(</span><span class="n">env</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper macros for Python project documentation.</span>

<span class="sd">    Currently, those macros are available (check the source code for more details):</span>

<span class="sd">    ## ``cli``</span>

<span class="sd">    Execute a command on the command-line, capture the output and return it to be used in a documentation page.</span>

<span class="sd">    ## ``inline_file_as_codeblock``</span>

<span class="sd">    Read an external file, and return its content as a markdown code block.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># env.variables[&quot;baz&quot;] = &quot;John Doe&quot;</span>

    <span class="nd">@env</span><span class="o">.</span><span class="n">macro</span>
    <span class="k">def</span> <span class="nf">cli</span><span class="p">(</span>
        <span class="o">*</span><span class="n">command</span><span class="p">,</span>
        <span class="n">print_command</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">code_block</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">split_command_and_output</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">max_height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">cache_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">extra_env</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">fake_command</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Execute the provided command, save the output and return it to be used in documentation modules.&quot;&quot;&quot;</span>

        <span class="n">hashes</span> <span class="o">=</span> <span class="n">DeepHash</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
        <span class="n">hash_str</span> <span class="o">=</span> <span class="n">hashes</span><span class="p">[</span><span class="n">command</span><span class="p">]</span>
        <span class="n">hashes_env</span> <span class="o">=</span> <span class="n">DeepHash</span><span class="p">(</span><span class="n">extra_env</span><span class="p">)</span>
        <span class="n">hashes_env_str</span> <span class="o">=</span> <span class="n">hashes_env</span><span class="p">[</span><span class="n">extra_env</span><span class="p">]</span>

        <span class="n">hash_str</span> <span class="o">=</span> <span class="n">hash_str</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">hashes_env_str</span>
        <span class="k">if</span> <span class="n">cache_key</span><span class="p">:</span>
            <span class="n">hash_str</span> <span class="o">=</span> <span class="n">hash_str</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">cache_key</span>

        <span class="n">cache_file</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CACHE_DIR</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">hash_str</span><span class="p">)))</span>

        <span class="n">_run_env</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">os_env_vars</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">extra_env</span><span class="p">:</span>
            <span class="n">_run_env</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">extra_env</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">cache_file</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
            <span class="n">stdout</span> <span class="o">=</span> <span class="n">cache_file</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;RUNNING: </span><span class="si">{</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">command</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">check_output</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">_run_env</span><span class="p">)</span>
                <span class="n">stdout</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
                <span class="n">cache_file</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">stdout</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">stdout</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">Stdout: </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">stdout</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">Stderr: </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">stderr</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;stdout:&quot;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;stderr:&quot;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;FAIL_DOC_BUILD_ON_ERROR&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
                    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">fake_command</span><span class="p">:</span>
            <span class="n">command_str</span> <span class="o">=</span> <span class="n">fake_command</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">command_str</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">split_command_and_output</span> <span class="ow">and</span> <span class="n">print_command</span><span class="p">:</span>
            <span class="n">_c</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">``` console</span><span class="se">\n</span><span class="si">{</span><span class="n">command_str</span><span class="si">}</span><span class="se">\n</span><span class="s2">```</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">_output</span> <span class="o">=</span> <span class="s2">&quot;``` console</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">stdout</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">```</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">max_height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">max_height</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">_output</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&lt;div style=&#39;max-height:</span><span class="si">{</span><span class="n">max_height</span><span class="si">}</span><span class="s2">px;overflow:auto&#39;&gt;</span><span class="se">\n</span><span class="si">{</span><span class="n">_output</span><span class="si">}</span><span class="se">\n</span><span class="s2">&lt;/div&gt;&quot;</span>
            <span class="n">_stdout</span> <span class="o">=</span> <span class="n">_c</span> <span class="o">+</span> <span class="n">_output</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">print_command</span><span class="p">:</span>
                <span class="n">_stdout</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&gt; </span><span class="si">{</span><span class="n">command_str</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">stdout</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">code_block</span><span class="p">:</span>
                <span class="n">_stdout</span> <span class="o">=</span> <span class="s2">&quot;``` console</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">_stdout</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">```</span><span class="se">\n</span><span class="s2">&quot;</span>

            <span class="k">if</span> <span class="n">max_height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">max_height</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">_stdout</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&lt;div style=&#39;max-height:</span><span class="si">{</span><span class="n">max_height</span><span class="si">}</span><span class="s2">px;overflow:auto&#39;&gt;</span><span class="se">\n</span><span class="si">{</span><span class="n">_stdout</span><span class="si">}</span><span class="se">\n</span><span class="s2">&lt;/div&gt;&quot;</span>

        <span class="k">return</span> <span class="n">_stdout</span>

    <span class="nd">@env</span><span class="o">.</span><span class="n">macro</span>
    <span class="k">def</span> <span class="nf">inline_file_as_codeblock</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Import external file and return its content as a markdown code block.&quot;&quot;&quot;</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;```</span><span class="si">{</span><span class="nb">format</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">f</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">```&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.doc.mkdocs_macros_kiara" class="doc doc-heading">
        <code>mkdocs_macros_kiara</code>



<a href="#kiara.doc.mkdocs_macros_kiara" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">












  <div class="doc doc-object doc-function">



<h4 id="kiara.doc.mkdocs_macros_kiara.define_env" class="doc doc-heading">
<code class="highlight language-python"><span class="n">define_env</span><span class="p">(</span><span class="n">env</span><span class="p">)</span></code>


<a href="#kiara.doc.mkdocs_macros_kiara.define_env" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>This is the hook for defining variables, macros and filters</p>
<ul>
<li>variables: the dictionary that contains the environment variables</li>
<li>macro: a decorator function, to declare a macro.</li>
</ul>

        <details class="quote">
          <summary>Source code in <code>kiara/doc/mkdocs_macros_kiara.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">define_env</span><span class="p">(</span><span class="n">env</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is the hook for defining variables, macros and filters</span>

<span class="sd">    - variables: the dictionary that contains the environment variables</span>
<span class="sd">    - macro: a decorator function, to declare a macro.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># env.variables[&quot;baz&quot;] = &quot;John Doe&quot;</span>

    <span class="nd">@env</span><span class="o">.</span><span class="n">macro</span>
    <span class="k">def</span> <span class="nf">get_schema_for_model</span><span class="p">(</span><span class="n">model_class</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]]):</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">_class</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]</span> <span class="o">=</span> <span class="n">locate</span><span class="p">(</span><span class="n">model_class</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_class</span> <span class="o">=</span> <span class="n">model_class</span>

        <span class="n">schema_json</span> <span class="o">=</span> <span class="n">_class</span><span class="o">.</span><span class="n">schema_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">schema_json</span>

    <span class="nd">@env</span><span class="o">.</span><span class="n">macro</span>
    <span class="k">def</span> <span class="nf">get_src_of_object</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]):</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">_obj</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]</span> <span class="o">=</span> <span class="n">locate</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_obj</span> <span class="o">=</span> <span class="n">obj</span>

            <span class="n">src</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getsource</span><span class="p">(</span><span class="n">_obj</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">src</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Can&#39;t render object source: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@env</span><span class="o">.</span><span class="n">macro</span>
    <span class="k">def</span> <span class="nf">get_pipeline_config</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>

        <span class="n">pmm</span> <span class="o">=</span> <span class="n">PipelineModuleManager</span><span class="p">()</span>
        <span class="n">desc</span> <span class="o">=</span> <span class="n">pmm</span><span class="o">.</span><span class="n">pipeline_descs</span><span class="p">[</span><span class="n">pipeline_name</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>

        <span class="n">desc_str</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">desc</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">desc_str</span>

    <span class="nd">@env</span><span class="o">.</span><span class="n">macro</span>
    <span class="k">def</span> <span class="nf">get_module_info</span><span class="p">(</span><span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="n">m_cls</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">get_module_class</span><span class="p">(</span><span class="n">module_type</span><span class="p">)</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">KiaraModuleTypeMetadata</span><span class="o">.</span><span class="n">from_module_class</span><span class="p">(</span><span class="n">m_cls</span><span class="p">)</span>

            <span class="kn">from</span> <span class="nn">rich.console</span> <span class="kn">import</span> <span class="n">Console</span>

            <span class="n">console</span> <span class="o">=</span> <span class="n">Console</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>

            <span class="n">html</span> <span class="o">=</span> <span class="n">console</span><span class="o">.</span><span class="n">export_text</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">html</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Can&#39;t render module info: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@env</span><span class="o">.</span><span class="n">macro</span>
    <span class="k">def</span> <span class="nf">get_info_item_list_for_category</span><span class="p">(</span>
        <span class="n">category</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">limit_to_package</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">KiaraInfoModel</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">_get_info_item_list_for_category</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">category</span><span class="p">,</span> <span class="n">limit_to_package</span><span class="o">=</span><span class="n">limit_to_package</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_info_item_list_for_category</span><span class="p">(</span>
        <span class="n">category</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">limit_to_package</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">KiaraInfoModel</span><span class="p">]:</span>

        <span class="n">infos</span> <span class="o">=</span> <span class="n">kiara_context</span><span class="o">.</span><span class="n">find_subcomponents</span><span class="p">(</span><span class="n">category</span><span class="o">=</span><span class="n">category</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">limit_to_package</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">n_id</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">infos</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;package&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="n">limit_to_package</span><span class="p">:</span>
                    <span class="n">temp</span><span class="p">[</span><span class="n">n_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
            <span class="n">infos</span> <span class="o">=</span> <span class="n">temp</span>

        <span class="n">docs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">n_id</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">infos</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">docs</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">get_id</span><span class="p">()]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">description</span>

        <span class="k">return</span> <span class="n">docs</span>

    <span class="nd">@env</span><span class="o">.</span><span class="n">macro</span>
    <span class="k">def</span> <span class="nf">get_info_for_categories</span><span class="p">(</span>
        <span class="o">*</span><span class="n">categories</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">limit_to_package</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>

        <span class="n">TITLE_MAP</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;metadata.module&quot;</span><span class="p">:</span> <span class="s2">&quot;Modules&quot;</span><span class="p">,</span>
            <span class="s2">&quot;metadata.pipeline&quot;</span><span class="p">:</span> <span class="s2">&quot;Pipelines&quot;</span><span class="p">,</span>
            <span class="s2">&quot;metadata.value_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Value types&quot;</span><span class="p">,</span>
            <span class="s2">&quot;metadata.operation_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Operation types&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">cat</span> <span class="ow">in</span> <span class="n">categories</span><span class="p">:</span>
            <span class="n">infos</span> <span class="o">=</span> <span class="n">_get_info_item_list_for_category</span><span class="p">(</span>
                <span class="n">cat</span><span class="p">,</span> <span class="n">limit_to_package</span><span class="o">=</span><span class="n">limit_to_package</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">infos</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">cat</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="n">infos</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">TITLE_MAP</span><span class="p">[</span><span class="n">cat</span><span class="p">]}</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@env</span><span class="o">.</span><span class="n">macro</span>
    <span class="k">def</span> <span class="nf">get_module_list_for_package</span><span class="p">(</span>
        <span class="n">package_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">include_core_modules</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">include_pipelines</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="n">modules</span> <span class="o">=</span> <span class="n">kiara_obj</span><span class="o">.</span><span class="n">module_mgmt</span><span class="o">.</span><span class="n">find_modules_for_package</span><span class="p">(</span>
            <span class="n">package_name</span><span class="p">,</span>
            <span class="n">include_core_modules</span><span class="o">=</span><span class="n">include_core_modules</span><span class="p">,</span>
            <span class="n">include_pipelines</span><span class="o">=</span><span class="n">include_pipelines</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">type_md</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;[``</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">``][kiara_info.modules.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">]: </span><span class="si">{</span><span class="n">type_md</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@env</span><span class="o">.</span><span class="n">macro</span>
    <span class="k">def</span> <span class="nf">get_value_types_for_package</span><span class="p">(</span><span class="n">package_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>

        <span class="n">value_types</span> <span class="o">=</span> <span class="n">kiara_obj</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">find_value_types_for_package</span><span class="p">(</span><span class="n">package_name</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">value_types</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">type_md</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - ``</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">``: </span><span class="si">{</span><span class="n">type_md</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

    <span class="nd">@env</span><span class="o">.</span><span class="n">macro</span>
    <span class="k">def</span> <span class="nf">get_metadata_models_for_package</span><span class="p">(</span><span class="n">package_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>

        <span class="n">metadata_schemas</span> <span class="o">=</span> <span class="n">kiara_obj</span><span class="o">.</span><span class="n">metadata_mgmt</span><span class="o">.</span><span class="n">find_all_models_for_package</span><span class="p">(</span>
            <span class="n">package_name</span>
        <span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">metadata_schemas</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">type_md</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - ``</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">``: </span><span class="si">{</span><span class="n">type_md</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

    <span class="nd">@env</span><span class="o">.</span><span class="n">macro</span>
    <span class="k">def</span> <span class="nf">get_kiara_context</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">KiaraContext</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">kiara_context</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="kiara.doc.mkdocs_macros_kiara.on_post_build" class="doc doc-heading">
<code class="highlight language-python"><span class="n">on_post_build</span><span class="p">(</span><span class="n">env</span><span class="p">)</span></code>


<a href="#kiara.doc.mkdocs_macros_kiara.on_post_build" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Post-build actions</p>

        <details class="quote">
          <summary>Source code in <code>kiara/doc/mkdocs_macros_kiara.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">on_post_build</span><span class="p">(</span><span class="n">env</span><span class="p">):</span>
    <span class="s2">&quot;Post-build actions&quot;</span>

    <span class="n">site_dir</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">conf</span><span class="p">[</span><span class="s2">&quot;site_dir&quot;</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">category</span><span class="p">,</span> <span class="n">classes</span> <span class="ow">in</span> <span class="n">KIARA_MODEL_CLASSES</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

        <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">:</span>
            <span class="n">schema_json</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">schema_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">site_dir</span><span class="p">,</span> <span class="s2">&quot;development&quot;</span><span class="p">,</span> <span class="s2">&quot;entities&quot;</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.json&quot;</span>
            <span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">schema_json</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.doc.mkdocstrings" class="doc doc-heading">
        <code>mkdocstrings</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.doc.mkdocstrings" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h4 id="kiara.doc.mkdocstrings.collector" class="doc doc-heading">
        <code>collector</code>



<a href="#kiara.doc.mkdocstrings.collector" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h5 id="kiara.doc.mkdocstrings.collector.KiaraCollector" class="doc doc-heading">
        <code>
KiaraCollector            (<span title="mkdocstrings.handlers.base.BaseCollector">BaseCollector</span>)
        </code>



<a href="#kiara.doc.mkdocstrings.collector.KiaraCollector" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The class responsible for loading Jinja templates and rendering them.
It defines some configuration options, implements the <code>render</code> method,
and overrides the <code>update_env</code> method of the [<code>BaseRenderer</code> class][mkdocstrings.handlers.base.BaseRenderer].</p>

        <details class="quote">
          <summary>Source code in <code>kiara/doc/mkdocstrings/collector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KiaraCollector</span><span class="p">(</span><span class="n">BaseCollector</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The class responsible for loading Jinja templates and rendering them.</span>
<span class="sd">    It defines some configuration options, implements the `render` method,</span>
<span class="sd">    and overrides the `update_env` method of the [`BaseRenderer` class][mkdocstrings.handlers.base.BaseRenderer].</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">default_config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;docstring_style&quot;</span><span class="p">:</span> <span class="s2">&quot;google&quot;</span><span class="p">,</span> <span class="s2">&quot;docstring_options&quot;</span><span class="p">:</span> <span class="p">{}}</span>
    <span class="sd">&quot;&quot;&quot;The default selection options.</span>
<span class="sd">    Option | Type | Description | Default</span>
<span class="sd">    ------ | ---- | ----------- | -------</span>
<span class="sd">    **`docstring_style`** | `&quot;google&quot; | &quot;numpy&quot; | &quot;sphinx&quot; | None` | The docstring style to use. | `&quot;google&quot;`</span>
<span class="sd">    **`docstring_options`** | `dict[str, Any]` | The options for the docstring parser. | `{}`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">fallback_config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;fallback&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Initialize the collector.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="n">Kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="p">:</span> <span class="n">KiaraContext</span> <span class="o">=</span> <span class="n">KiaraContext</span><span class="o">.</span><span class="n">get_info</span><span class="p">(</span>
            <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_component_tree</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="o">.</span><span class="n">get_subcomponent_tree</span><span class="p">()</span>  <span class="c1"># type: ignore</span>

    <span class="k">def</span> <span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CollectorItem</span><span class="p">:</span>  <span class="c1"># noqa: WPS231</span>
        <span class="sd">&quot;&quot;&quot;Collect the documentation tree given an identifier and selection options.</span>
<span class="sd">        Arguments:</span>
<span class="sd">            identifier: The dotted-path of a Python object available in the Python path.</span>
<span class="sd">            config: Selection options, used to alter the data collection done by `pytkdocs`.</span>
<span class="sd">        Raises:</span>
<span class="sd">            CollectionError: When there was a problem collecting the object documentation.</span>
<span class="sd">        Returns:</span>
<span class="sd">            The collected object-tree.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">tokens</span> <span class="o">=</span> <span class="n">identifier</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="n">kiara_id</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;kiara_info&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
            <span class="c1"># raise Exception(</span>
            <span class="c1">#     f&quot;Handler &#39;kiara&#39; can only be used with identifiers that start with &#39;kiara_info.&#39;, the provided id is invalid: {identifier}&quot;</span>
            <span class="c1"># )</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_component_tree</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;__self__.</span><span class="si">{</span><span class="n">kiara_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">][</span><span class="s2">&quot;obj&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">traceback</span>

            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;obj&quot;</span><span class="p">:</span> <span class="n">info</span><span class="p">,</span> <span class="s2">&quot;identifier&quot;</span><span class="p">:</span> <span class="n">identifier</span><span class="p">,</span> <span class="s2">&quot;kiara_id&quot;</span><span class="p">:</span> <span class="n">kiara_id</span><span class="p">}</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="kiara.doc.mkdocstrings.collector.KiaraCollector.default_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">default_config</span><span class="p">:</span> <span class="nb">dict</span></code>


<a href="#kiara.doc.mkdocstrings.collector.KiaraCollector.default_config" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>The default selection options.
Option | Type | Description | Default
------ | ---- | ----------- | -------
<strong><code>docstring_style</code></strong> | <code>"google" | "numpy" | "sphinx" | None</code> | The docstring style to use. | <code>"google"</code>
<strong><code>docstring_options</code></strong> | <code>dict[str, Any]</code> | The options for the docstring parser. | <code>{}</code></p>
    </div>

  </div>







  <div class="doc doc-object doc-method">



<h6 id="kiara.doc.mkdocstrings.collector.KiaraCollector.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.doc.mkdocstrings.collector.KiaraCollector.__init__" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Initialize the collector.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/doc/mkdocstrings/collector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Initialize the collector.&quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="n">Kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="p">:</span> <span class="n">KiaraContext</span> <span class="o">=</span> <span class="n">KiaraContext</span><span class="o">.</span><span class="n">get_info</span><span class="p">(</span>
        <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_component_tree</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="o">.</span><span class="n">get_subcomponent_tree</span><span class="p">()</span>  <span class="c1"># type: ignore</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="kiara.doc.mkdocstrings.collector.KiaraCollector.collect" class="doc doc-heading">
<code class="highlight language-python"><span class="n">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span></code>


<a href="#kiara.doc.mkdocstrings.collector.KiaraCollector.collect" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Collect the documentation tree given an identifier and selection options.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>identifier</code></td>
        <td><code>str</code></td>
        <td><p>The dotted-path of a Python object available in the Python path.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>config</code></td>
        <td><code>dict</code></td>
        <td><p>Selection options, used to alter the data collection done by <code>pytkdocs</code>.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>CollectionError</code></td>
        <td><p>When there was a problem collecting the object documentation.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>CollectorItem</code></td>
      <td><p>The collected object-tree.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/doc/mkdocstrings/collector.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CollectorItem</span><span class="p">:</span>  <span class="c1"># noqa: WPS231</span>
    <span class="sd">&quot;&quot;&quot;Collect the documentation tree given an identifier and selection options.</span>
<span class="sd">    Arguments:</span>
<span class="sd">        identifier: The dotted-path of a Python object available in the Python path.</span>
<span class="sd">        config: Selection options, used to alter the data collection done by `pytkdocs`.</span>
<span class="sd">    Raises:</span>
<span class="sd">        CollectionError: When there was a problem collecting the object documentation.</span>
<span class="sd">    Returns:</span>
<span class="sd">        The collected object-tree.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tokens</span> <span class="o">=</span> <span class="n">identifier</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
    <span class="n">kiara_id</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;kiara_info&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
        <span class="c1"># raise Exception(</span>
        <span class="c1">#     f&quot;Handler &#39;kiara&#39; can only be used with identifiers that start with &#39;kiara_info.&#39;, the provided id is invalid: {identifier}&quot;</span>
        <span class="c1"># )</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_component_tree</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;__self__.</span><span class="si">{</span><span class="n">kiara_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">][</span><span class="s2">&quot;obj&quot;</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">traceback</span>

        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">raise</span> <span class="n">e</span>

    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;obj&quot;</span><span class="p">:</span> <span class="n">info</span><span class="p">,</span> <span class="s2">&quot;identifier&quot;</span><span class="p">:</span> <span class="n">identifier</span><span class="p">,</span> <span class="s2">&quot;kiara_id&quot;</span><span class="p">:</span> <span class="n">kiara_id</span><span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="kiara.doc.mkdocstrings.handler" class="doc doc-heading">
        <code>handler</code>



<a href="#kiara.doc.mkdocstrings.handler" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h5 id="kiara.doc.mkdocstrings.handler.KiaraHandler" class="doc doc-heading">
        <code>
KiaraHandler            (<span title="mkdocstrings.handlers.base.BaseHandler">BaseHandler</span>)
        </code>



<a href="#kiara.doc.mkdocstrings.handler.KiaraHandler" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The kiara handler class.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>domain</code></td>
        <td><code>str</code></td>
        <td><p>The cross-documentation domain/language for this handler.</p></td>
      </tr>
      <tr>
        <td><code>enable_inventory</code></td>
        <td><code>bool</code></td>
        <td><p>Whether this handler is interested in enabling the creation
of the <code>objects.inv</code> Sphinx inventory file.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/doc/mkdocstrings/handler.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KiaraHandler</span><span class="p">(</span><span class="n">BaseHandler</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The kiara handler class.</span>
<span class="sd">    Attributes:</span>
<span class="sd">        domain: The cross-documentation domain/language for this handler.</span>
<span class="sd">        enable_inventory: Whether this handler is interested in enabling the creation</span>
<span class="sd">            of the `objects.inv` Sphinx inventory file.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;kiara&quot;</span>
    <span class="n">enable_inventory</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># load_inventory = staticmethod(inventory.list_object_urls)</span>
    <span class="c1">#</span>
    <span class="c1"># @classmethod</span>
    <span class="c1"># def load_inventory(</span>
    <span class="c1">#     cls,</span>
    <span class="c1">#     in_file: typing.BinaryIO,</span>
    <span class="c1">#     url: str,</span>
    <span class="c1">#     base_url: typing.Optional[str] = None,</span>
    <span class="c1">#     **kwargs: typing.Any,</span>
    <span class="c1"># ) -&gt; typing.Iterator[typing.Tuple[str, str]]:</span>
    <span class="c1">#     &quot;&quot;&quot;Yield items and their URLs from an inventory file streamed from `in_file`.</span>
    <span class="c1">#     This implements mkdocstrings&#39; `load_inventory` &quot;protocol&quot; (see plugin.py).</span>
    <span class="c1">#     Arguments:</span>
    <span class="c1">#         in_file: The binary file-like object to read the inventory from.</span>
    <span class="c1">#         url: The URL that this file is being streamed from (used to guess `base_url`).</span>
    <span class="c1">#         base_url: The URL that this inventory&#39;s sub-paths are relative to.</span>
    <span class="c1">#         **kwargs: Ignore additional arguments passed from the config.</span>
    <span class="c1">#     Yields:</span>
    <span class="c1">#         Tuples of (item identifier, item URL).</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#</span>
    <span class="c1">#     print(&quot;XXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;)</span>
    <span class="c1">#</span>
    <span class="c1">#     if base_url is None:</span>
    <span class="c1">#         base_url = posixpath.dirname(url)</span>
    <span class="c1">#</span>
    <span class="c1">#     for item in Inventory.parse_sphinx(</span>
    <span class="c1">#         in_file, domain_filter=(&quot;py&quot;,)</span>
    <span class="c1">#     ).values():  # noqa: WPS526</span>
    <span class="c1">#         yield item.name, posixpath.join(base_url, item.uri)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">













  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h5 id="kiara.doc.mkdocstrings.handler.get_handler" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_handler</span><span class="p">(</span><span class="n">theme</span><span class="p">,</span> <span class="n">custom_templates</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">)</span></code>


<a href="#kiara.doc.mkdocstrings.handler.get_handler" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Simply return an instance of <code>PythonHandler</code>.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>theme</code></td>
        <td><code>str</code></td>
        <td><p>The theme to use when rendering contents.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>custom_templates</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Directory containing custom templates.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**config</code></td>
        <td><code>Any</code></td>
        <td><p>Configuration passed to the handler.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>KiaraHandler</code></td>
      <td><p>An instance of <code>PythonHandler</code>.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/doc/mkdocstrings/handler.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_handler</span><span class="p">(</span>
    <span class="n">theme</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>  <span class="c1"># noqa: W0613 (unused argument config)</span>
    <span class="n">custom_templates</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KiaraHandler</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Simply return an instance of `PythonHandler`.</span>
<span class="sd">    Arguments:</span>
<span class="sd">        theme: The theme to use when rendering contents.</span>
<span class="sd">        custom_templates: Directory containing custom templates.</span>
<span class="sd">        **config: Configuration passed to the handler.</span>
<span class="sd">    Returns:</span>
<span class="sd">        An instance of `PythonHandler`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">custom_templates</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Custom templates are not supported for the kiara renderer.&quot;</span><span class="p">)</span>

    <span class="n">custom_templates</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="n">KIARA_RESOURCES_FOLDER</span><span class="p">,</span> <span class="s2">&quot;templates&quot;</span><span class="p">,</span> <span class="s2">&quot;info_templates&quot;</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">KiaraHandler</span><span class="p">(</span>
        <span class="n">collector</span><span class="o">=</span><span class="n">KiaraCollector</span><span class="p">(),</span>
        <span class="n">renderer</span><span class="o">=</span><span class="n">KiaraInfoRenderer</span><span class="p">(</span><span class="s2">&quot;kiara&quot;</span><span class="p">,</span> <span class="n">theme</span><span class="p">,</span> <span class="n">custom_templates</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="kiara.doc.mkdocstrings.renderer" class="doc doc-heading">
        <code>renderer</code>



<a href="#kiara.doc.mkdocstrings.renderer" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h5 id="kiara.doc.mkdocstrings.renderer.KiaraInfoRenderer" class="doc doc-heading">
        <code>
KiaraInfoRenderer            (<span title="mkdocstrings.handlers.base.BaseRenderer">BaseRenderer</span>)
        </code>



<a href="#kiara.doc.mkdocstrings.renderer.KiaraInfoRenderer" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/doc/mkdocstrings/renderer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KiaraInfoRenderer</span><span class="p">(</span><span class="n">BaseRenderer</span><span class="p">):</span>

    <span class="n">default_config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">get_anchors</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">CollectorItem</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>  <span class="c1"># noqa: D102 (ignore missing docstring)</span>

        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">()</span>

        <span class="k">return</span> <span class="nb">list</span><span class="p">([</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;identifier&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;kiara_id&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;obj&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get_id</span><span class="p">()])</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">config</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>

        <span class="n">final_config</span> <span class="o">=</span> <span class="n">ChainMap</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_config</span><span class="p">)</span>

        <span class="n">obj</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;obj&quot;</span><span class="p">]</span>
        <span class="n">data_type</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">func_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;render_</span><span class="si">{</span><span class="n">data_type</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func_name</span><span class="p">):</span>
            <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">payload</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">final_config</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">create_html</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Rendered: </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;identifier&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">html</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h6 id="kiara.doc.mkdocstrings.renderer.KiaraInfoRenderer.get_anchors" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_anchors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></code>


<a href="#kiara.doc.mkdocstrings.renderer.KiaraInfoRenderer.get_anchors" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Return the possible identifiers (HTML anchors) for a collected item.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>Any</code></td>
        <td><p>The collected data.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[str]</code></td>
      <td><p>The HTML anchors (without '#'), or an empty tuple if this item doesn't have an anchor.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/doc/mkdocstrings/renderer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_anchors</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">CollectorItem</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>  <span class="c1"># noqa: D102 (ignore missing docstring)</span>

    <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">()</span>

    <span class="k">return</span> <span class="nb">list</span><span class="p">([</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;identifier&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;kiara_id&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;obj&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get_id</span><span class="p">()])</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="kiara.doc.mkdocstrings.renderer.KiaraInfoRenderer.render" class="doc doc-heading">
<code class="highlight language-python"><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span></code>


<a href="#kiara.doc.mkdocstrings.renderer.KiaraInfoRenderer.render" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Render a template using provided data and configuration options.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>The collected data to render.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>config</code></td>
        <td><code>dict</code></td>
        <td><p>The rendering options.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The rendered template as HTML.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/doc/mkdocstrings/renderer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">config</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>

    <span class="n">final_config</span> <span class="o">=</span> <span class="n">ChainMap</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_config</span><span class="p">)</span>

    <span class="n">obj</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;obj&quot;</span><span class="p">]</span>
    <span class="n">data_type</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">func_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;render_</span><span class="si">{</span><span class="n">data_type</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func_name</span><span class="p">):</span>
        <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">payload</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">final_config</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">create_html</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Rendered: </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;identifier&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">html</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.environment" class="doc doc-heading">
        <code>environment</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.environment" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h3 id="kiara.environment.RuntimeEnvironmentConfig" class="doc doc-heading">
        <code>
RuntimeEnvironmentConfig            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.environment.RuntimeEnvironmentConfig" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/environment/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">RuntimeEnvironmentConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">allow_mutation</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">include_all_info</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to include all properties, even if it might include potentially private/sensitive information. This is mainly used for debug purposes.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.environment.RuntimeEnvironmentConfig.include_all_info" class="doc doc-heading">
<code class="highlight language-python"><span class="n">include_all_info</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.environment.RuntimeEnvironmentConfig.include_all_info" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Whether to include all properties, even if it might include potentially private/sensitive information. This is mainly used for debug purposes.</p>
    </div>

  </div>











  </div>

    </div>

  </div>







  <div class="doc doc-object doc-module">



<h3 id="kiara.environment.operating_system" class="doc doc-heading">
        <code>operating_system</code>



<a href="#kiara.environment.operating_system" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.environment.operating_system.OSRuntimeEnvironment" class="doc doc-heading">
        <code>
OSRuntimeEnvironment            (<span title="kiara.environment.BaseRuntimeEnvironment">BaseRuntimeEnvironment</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.environment.operating_system.OSRuntimeEnvironment" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Manages information about the OS this kiara instance is running in.</p>
<h5 id="kiara.environment.operating_system.OSRuntimeEnvironment--todo-details-for-other-oss-mainly-bsds">TODO: details for other OS's (mainly BSDs)<a class="headerlink" href="#kiara.environment.operating_system.OSRuntimeEnvironment--todo-details-for-other-oss-mainly-bsds" title="Permanent link">&para;</a></h5>

        <details class="quote">
          <summary>Source code in <code>kiara/environment/operating_system.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">OSRuntimeEnvironment</span><span class="p">(</span><span class="n">BaseRuntimeEnvironment</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Manages information about the OS this kiara instance is running in.</span>

<span class="sd">    # TODO: details for other OS&#39;s (mainly BSDs)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">environment_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;operating_system&quot;</span><span class="p">]</span>
    <span class="n">operation_system</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The operation system name.&quot;</span><span class="p">)</span>
    <span class="n">platform</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The platform name.&quot;</span><span class="p">)</span>
    <span class="n">release</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The platform release name.&quot;</span><span class="p">)</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The platform version name.&quot;</span><span class="p">)</span>
    <span class="n">machine</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The architecture.&quot;</span><span class="p">)</span>
    <span class="n">os_specific</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;OS specific platform metadata.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span>
    <span class="p">)</span>
    <span class="n">uname</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Platform uname information.&quot;</span>
    <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">retrieve_environment_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">RuntimeEnvironmentConfig</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="n">os_specific</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">platform_system</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">platform_system</span> <span class="o">==</span> <span class="s2">&quot;Linux&quot;</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">distro</span>

            <span class="n">data</span> <span class="o">=</span> <span class="n">distro</span><span class="o">.</span><span class="n">linux_distribution</span><span class="p">()</span>
            <span class="n">os_specific</span><span class="p">[</span><span class="s2">&quot;distribution&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                <span class="s2">&quot;codename&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
            <span class="p">}</span>
        <span class="k">elif</span> <span class="n">platform_system</span> <span class="o">==</span> <span class="s2">&quot;Darwin&quot;</span><span class="p">:</span>
            <span class="n">mac_version</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">mac_ver</span><span class="p">()</span>
            <span class="n">os_specific</span><span class="p">[</span><span class="s2">&quot;mac_ver_release&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mac_version</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">os_specific</span><span class="p">[</span><span class="s2">&quot;mac_ver_machine&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mac_version</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;operation_system&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;platform&quot;</span><span class="p">:</span> <span class="n">platform_system</span><span class="p">,</span>
            <span class="s2">&quot;release&quot;</span><span class="p">:</span> <span class="n">platform</span><span class="o">.</span><span class="n">release</span><span class="p">(),</span>
            <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="n">platform</span><span class="o">.</span><span class="n">version</span><span class="p">(),</span>
            <span class="s2">&quot;machine&quot;</span><span class="p">:</span> <span class="n">platform</span><span class="o">.</span><span class="n">machine</span><span class="p">(),</span>
            <span class="s2">&quot;os_specific&quot;</span><span class="p">:</span> <span class="n">os_specific</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">include_all_info</span><span class="p">:</span>
            <span class="n">result</span><span class="p">[</span><span class="s2">&quot;uname&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">uname</span><span class="p">()</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">








  <div class="doc doc-object doc-attribute">



<h5 id="kiara.environment.operating_system.OSRuntimeEnvironment.machine" class="doc doc-heading">
<code class="highlight language-python"><span class="n">machine</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.environment.operating_system.OSRuntimeEnvironment.machine" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The architecture.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.environment.operating_system.OSRuntimeEnvironment.operation_system" class="doc doc-heading">
<code class="highlight language-python"><span class="n">operation_system</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.environment.operating_system.OSRuntimeEnvironment.operation_system" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The operation system name.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.environment.operating_system.OSRuntimeEnvironment.os_specific" class="doc doc-heading">
<code class="highlight language-python"><span class="n">os_specific</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.environment.operating_system.OSRuntimeEnvironment.os_specific" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>OS specific platform metadata.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.environment.operating_system.OSRuntimeEnvironment.platform" class="doc doc-heading">
<code class="highlight language-python"><span class="n">platform</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.environment.operating_system.OSRuntimeEnvironment.platform" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The platform name.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.environment.operating_system.OSRuntimeEnvironment.release" class="doc doc-heading">
<code class="highlight language-python"><span class="n">release</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.environment.operating_system.OSRuntimeEnvironment.release" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The platform release name.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.environment.operating_system.OSRuntimeEnvironment.uname" class="doc doc-heading">
<code class="highlight language-python"><span class="n">uname</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.environment.operating_system.OSRuntimeEnvironment.uname" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Platform uname information.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.environment.operating_system.OSRuntimeEnvironment.version" class="doc doc-heading">
<code class="highlight language-python"><span class="n">version</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.environment.operating_system.OSRuntimeEnvironment.version" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The platform version name.</p>
    </div>

  </div>











  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.environment.python" class="doc doc-heading">
        <code>python</code>



<a href="#kiara.environment.python" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.environment.python.PythonPackage" class="doc doc-heading">
        <code>
PythonPackage            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.environment.python.PythonPackage" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/environment/python.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PythonPackage</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name of the Python package.&quot;</span><span class="p">)</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The version of the package.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.environment.python.PythonPackage.name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.environment.python.PythonPackage.name" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The name of the Python package.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.environment.python.PythonPackage.version" class="doc doc-heading">
<code class="highlight language-python"><span class="n">version</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.environment.python.PythonPackage.version" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The version of the package.</p>
    </div>

  </div>










  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.environment.python.PythonRuntimeEnvironment" class="doc doc-heading">
        <code>
PythonRuntimeEnvironment            (<span title="kiara.environment.BaseRuntimeEnvironment">BaseRuntimeEnvironment</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.environment.python.PythonRuntimeEnvironment" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/environment/python.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PythonRuntimeEnvironment</span><span class="p">(</span><span class="n">BaseRuntimeEnvironment</span><span class="p">):</span>

    <span class="n">environment_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">]</span>
    <span class="n">python_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The version of Python.&quot;</span><span class="p">)</span>
    <span class="n">packages</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">PythonPackage</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The packages installed in the Python (virtual) environment.&quot;</span>
    <span class="p">)</span>
    <span class="n">python_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Configuration details about the Python installation.&quot;</span>
    <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">retrieve_environment_data</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">RuntimeEnvironmentConfig</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="n">packages</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">all_packages</span> <span class="o">=</span> <span class="n">packages_distributions</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">pkgs</span> <span class="ow">in</span> <span class="n">all_packages</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">pkg</span> <span class="ow">in</span> <span class="n">pkgs</span><span class="p">:</span>
                <span class="n">dist</span> <span class="o">=</span> <span class="n">distribution</span><span class="p">(</span><span class="n">pkg</span><span class="p">)</span>
                <span class="n">packages</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="n">dist</span><span class="o">.</span><span class="n">version</span><span class="p">})</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;python_version&quot;</span><span class="p">:</span> <span class="n">sys</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
            <span class="s2">&quot;packages&quot;</span><span class="p">:</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">packages</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]),</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">include_all_info</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">sysconfig</span>

            <span class="n">result</span><span class="p">[</span><span class="s2">&quot;python_config&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sysconfig</span><span class="o">.</span><span class="n">get_config_vars</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">








  <div class="doc doc-object doc-attribute">



<h5 id="kiara.environment.python.PythonRuntimeEnvironment.packages" class="doc doc-heading">
<code class="highlight language-python"><span class="n">packages</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">PythonPackage</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.environment.python.PythonRuntimeEnvironment.packages" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The packages installed in the Python (virtual) environment.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.environment.python.PythonRuntimeEnvironment.python_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">python_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.environment.python.PythonRuntimeEnvironment.python_config" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Configuration details about the Python installation.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.environment.python.PythonRuntimeEnvironment.python_version" class="doc doc-heading">
<code class="highlight language-python"><span class="n">python_version</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.environment.python.PythonRuntimeEnvironment.python_version" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The version of Python.</p>
    </div>

  </div>











  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.events" class="doc doc-heading">
        <code>events</code>



<a href="#kiara.events" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="kiara.events.PipelineInputEvent" class="doc doc-heading">
        <code>
PipelineInputEvent            (<a class="autorefs autorefs-internal" title="kiara.events.StepEvent" href="../events/#kiara.events.StepEvent">StepEvent</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.events.PipelineInputEvent" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Event that gets fired when one or several inputs for the pipeline itself have changed.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/events.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineInputEvent</span><span class="p">(</span><span class="n">StepEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Event that gets fired when one or several inputs for the pipeline itself have changed.&quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;pipeline_input&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;pipeline_input&quot;</span>
    <span class="n">updated_pipeline_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;list of pipeline input names that where changed&quot;</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h4 id="kiara.events.PipelineInputEvent.updated_pipeline_inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">updated_pipeline_inputs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.events.PipelineInputEvent.updated_pipeline_inputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>list of pipeline input names that where changed</p>
    </div>

  </div>










  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.events.PipelineOutputEvent" class="doc doc-heading">
        <code>
PipelineOutputEvent            (<a class="autorefs autorefs-internal" title="kiara.events.StepEvent" href="../events/#kiara.events.StepEvent">StepEvent</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.events.PipelineOutputEvent" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Event that gets fired when one or several outputs for the pipeline itself have changed.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/events.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineOutputEvent</span><span class="p">(</span><span class="n">StepEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Event that gets fired when one or several outputs for the pipeline itself have changed.&quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;pipeline_output&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;pipeline_output&quot;</span>
    <span class="n">updated_pipeline_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;list of pipeline output names that where changed&quot;</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h4 id="kiara.events.PipelineOutputEvent.updated_pipeline_outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">updated_pipeline_outputs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.events.PipelineOutputEvent.updated_pipeline_outputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>list of pipeline output names that where changed</p>
    </div>

  </div>










  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.events.StepEvent" class="doc doc-heading">
        <code>
StepEvent            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.events.StepEvent" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/events.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StepEvent</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">allow_mutation</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">pipeline_id</span><span class="p">:</span> <span class="nb">str</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
        <span class="n">d</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;pipeline_id&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(pipeline_id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_id</span><span class="si">}</span><span class="s2"> data=</span><span class="si">{</span><span class="n">d</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">













  <div class="doc doc-object doc-method">



<h4 id="kiara.events.StepEvent.__repr__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.events.StepEvent.__repr__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return repr(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/events.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
    <span class="n">d</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;pipeline_id&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(pipeline_id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_id</span><span class="si">}</span><span class="s2"> data=</span><span class="si">{</span><span class="n">d</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.events.StepEvent.__str__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.events.StepEvent.__str__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return str(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/events.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.events.StepInputEvent" class="doc doc-heading">
        <code>
StepInputEvent            (<a class="autorefs autorefs-internal" title="kiara.events.StepEvent" href="../events/#kiara.events.StepEvent">StepEvent</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.events.StepInputEvent" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Event that gets fired when one or several inputs for steps within a pipeline have changed.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/events.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StepInputEvent</span><span class="p">(</span><span class="n">StepEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Event that gets fired when one or several inputs for steps within a pipeline have changed.&quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;step_input&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;step_input&quot;</span>
    <span class="n">updated_step_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;steps (keys) with updated inputs which need re-processing (value is list of updated input names)&quot;</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">newly_stale_steps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Convenience method to display the steps that have been rendered &#39;stale&#39; by this event.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updated_step_inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.events.StepInputEvent.newly_stale_steps" class="doc doc-heading">
<code class="highlight language-python"><span class="n">newly_stale_steps</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.events.StepInputEvent.newly_stale_steps" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Convenience method to display the steps that have been rendered 'stale' by this event.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h4 id="kiara.events.StepInputEvent.updated_step_inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">updated_step_inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.events.StepInputEvent.updated_step_inputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>steps (keys) with updated inputs which need re-processing (value is list of updated input names)</p>
    </div>

  </div>










  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.events.StepOutputEvent" class="doc doc-heading">
        <code>
StepOutputEvent            (<a class="autorefs autorefs-internal" title="kiara.events.StepEvent" href="../events/#kiara.events.StepEvent">StepEvent</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.events.StepOutputEvent" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Event that gets fired when one or several outputs for steps within a pipeline have changed.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/events.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StepOutputEvent</span><span class="p">(</span><span class="n">StepEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Event that gets fired when one or several outputs for steps within a pipeline have changed.&quot;&quot;&quot;</span>

    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;step_output&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;step_output&quot;</span>
    <span class="n">updated_step_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;steps (keys) that finished processing of one, several or all outputs (values are list of &#39;finished&#39; output fields)&quot;</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h4 id="kiara.events.StepOutputEvent.updated_step_outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">updated_step_outputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.events.StepOutputEvent.updated_step_outputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>steps (keys) that finished processing of one, several or all outputs (values are list of 'finished' output fields)</p>
    </div>

  </div>










  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.examples" class="doc doc-heading">
        <code>examples</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.examples" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h3 id="kiara.examples.example_controller" class="doc doc-heading">
        <code>example_controller</code>



<a href="#kiara.examples.example_controller" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.examples.example_controller.ExampleController" class="doc doc-heading">
        <code>
ExampleController            (<a class="autorefs autorefs-internal" title="kiara.pipeline.controller.PipelineController" href="../pipeline/controller/__init__/#kiara.pipeline.controller.PipelineController">PipelineController</a>)
        </code>



<a href="#kiara.examples.example_controller.ExampleController" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/examples/example_controller.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ExampleController</span><span class="p">(</span><span class="n">PipelineController</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">PipelineInputEvent</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline inputs changed: </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">updated_pipeline_inputs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  -&gt; pipeline status: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_status</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">PipelineOutputEvent</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline outputs changed: </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">updated_pipeline_outputs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  -&gt; pipeline status: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_status</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">StepInputEvent</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Step inputs changed, new values:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">input_names</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">updated_step_inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;:&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">input_names</span><span class="p">:</span>
                <span class="n">new_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;      </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">new_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">step_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">StepOutputEvent</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Step outputs changed, new values:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">output_names</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">updated_step_outputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;:&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">output_names</span><span class="p">:</span>
                <span class="n">new_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;      </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">new_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Executing steps: &#39;and&#39;, &#39;not&#39;...&quot;</span><span class="p">)</span>
        <span class="n">and_job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_step</span><span class="p">(</span><span class="s2">&quot;and&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_jobs</span><span class="p">(</span><span class="n">and_job_id</span><span class="p">)</span>
        <span class="n">not_job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_step</span><span class="p">(</span><span class="s2">&quot;not&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_jobs</span><span class="p">(</span><span class="n">not_job_id</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h5 id="kiara.examples.example_controller.ExampleController.pipeline_inputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.examples.example_controller.ExampleController.pipeline_inputs_changed" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several pipeline inputs have changed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
</div>
<p>Whenever pipeline inputs change, the connected step inputs also change and an (extra) event will be fired for those. Which means
you can choose to only implement the <code>step_inputs_changed</code> method if you want to. This behaviour might change in the future.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>PipelineInputEvent</code></td>
        <td><p>the pipeline input event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/examples/example_controller.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">PipelineInputEvent</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline inputs changed: </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">updated_pipeline_inputs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  -&gt; pipeline status: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_status</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.examples.example_controller.ExampleController.pipeline_outputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.examples.example_controller.ExampleController.pipeline_outputs_changed" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several pipeline outputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>PipelineOutputEvent</code></td>
        <td><p>the pipeline output event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/examples/example_controller.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">PipelineOutputEvent</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline outputs changed: </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">updated_pipeline_outputs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  -&gt; pipeline status: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_status</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.examples.example_controller.ExampleController.step_inputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.examples.example_controller.ExampleController.step_inputs_changed" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several step inputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>StepInputEvent</code></td>
        <td><p>the step input event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/examples/example_controller.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">StepInputEvent</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Step inputs changed, new values:&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">input_names</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">updated_step_inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">input_names</span><span class="p">:</span>
            <span class="n">new_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;      </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">new_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.examples.example_controller.ExampleController.step_outputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.examples.example_controller.ExampleController.step_outputs_changed" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several step outputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>StepOutputEvent</code></td>
        <td><p>the step output event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/examples/example_controller.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">step_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">StepOutputEvent</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Step outputs changed, new values:&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">output_names</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">updated_step_outputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">output_names</span><span class="p">:</span>
            <span class="n">new_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;      </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">new_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>








  </div>

    </div>

  </div>




  </div>

    </div>

  </div>




  <div class="doc doc-object doc-module">



<h2 id="kiara.info" class="doc doc-heading">
        <code>info</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.info" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">













  <div class="doc doc-object doc-module">



<h3 id="kiara.info.kiara" class="doc doc-heading">
        <code>kiara</code>



<a href="#kiara.info.kiara" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.info.kiara.KiaraContext" class="doc doc-heading">
        <code>
KiaraContext            (<span title="kiara.info.KiaraInfoModel">KiaraInfoModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.info.kiara.KiaraContext" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/info/kiara.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KiaraContext</span><span class="p">(</span><span class="n">KiaraInfoModel</span><span class="p">):</span>

    <span class="n">available_categories</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">ClassVar</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">VALUE_TYPES_CATEGORY_ALIAS</span><span class="p">,</span>
        <span class="n">MODULE_TYPES_CATEGORY_ALIAS</span><span class="p">,</span>
        <span class="n">PIPELINE_TYPES_CATEGORY_ALIAS</span><span class="p">,</span>
        <span class="n">OPERATIONS_CATEGORY_ALIAS</span><span class="p">,</span>
        <span class="n">OPERATION_TYPES_CATEGORY_ALIAS</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">_info_cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">ClassVar</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_info_for_category</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">,</span> <span class="n">category_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KiaraInfoModel</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">category_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">available_categories</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t provide information for category &#39;</span><span class="si">{</span><span class="n">category_name</span><span class="si">}</span><span class="s2">&#39;: invalid category name. Valid names: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">available_categories</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">cache</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_info_cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">kiara</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="p">{})</span>
            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">category_name</span><span class="p">,</span> <span class="p">{})</span>
            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ignore_errors</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">cache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">cache</span>

        <span class="k">if</span> <span class="n">category_name</span> <span class="o">==</span> <span class="n">VALUE_TYPES_CATEGORY_ALIAS</span><span class="p">:</span>
            <span class="n">all_types</span> <span class="o">=</span> <span class="n">ValueTypeMetadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">KiaraDynamicInfoModel</span><span class="o">.</span><span class="n">create_from_child_models</span><span class="p">(</span><span class="o">**</span><span class="n">all_types</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">elif</span> <span class="n">category_name</span> <span class="o">==</span> <span class="n">MODULE_TYPES_CATEGORY_ALIAS</span><span class="p">:</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">ModuleTypesGroupInfo</span><span class="o">.</span><span class="n">from_type_names</span><span class="p">(</span>
                <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span> <span class="n">ignore_pipeline_modules</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">category_name</span> <span class="o">==</span> <span class="n">PIPELINE_TYPES_CATEGORY_ALIAS</span><span class="p">:</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">PipelineTypesGroupInfo</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
                <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="n">ignore_errors</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">category_name</span> <span class="o">==</span> <span class="n">OPERATION_TYPES_CATEGORY_ALIAS</span><span class="p">:</span>
            <span class="n">all_op_types</span> <span class="o">=</span> <span class="n">OperationsMetadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">KiaraDynamicInfoModel</span><span class="o">.</span><span class="n">create_from_child_models</span><span class="p">(</span>
                <span class="n">_category_alias</span><span class="o">=</span><span class="n">OPERATION_TYPES_CATEGORY_ALIAS</span><span class="p">,</span> <span class="o">**</span><span class="n">all_op_types</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">category_name</span> <span class="o">==</span> <span class="n">OPERATIONS_CATEGORY_ALIAS</span><span class="p">:</span>
            <span class="n">ops_infos</span> <span class="o">=</span> <span class="n">KiaraDynamicInfoModel</span><span class="o">.</span><span class="n">create_from_child_models</span><span class="p">(</span>
                <span class="o">**</span><span class="n">OperationsInfo</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="p">)</span>
            <span class="n">operation_configs</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ops_infos</span><span class="o">.</span><span class="n">__root__</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">configs</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">operation_configs</span>
                <span class="n">operation_configs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">configs</span><span class="p">)</span>

            <span class="n">info</span> <span class="o">=</span> <span class="n">KiaraDynamicInfoModel</span><span class="o">.</span><span class="n">create_from_child_models</span><span class="p">(</span>
                <span class="n">_category_alias</span><span class="o">=</span><span class="n">OPERATIONS_CATEGORY_ALIAS</span><span class="p">,</span> <span class="o">**</span><span class="n">operation_configs</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Category not available: </span><span class="si">{</span><span class="n">category_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">cls</span><span class="o">.</span><span class="n">_info_cache</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">kiara</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">ignore_errors</span><span class="p">,</span> <span class="p">{})[</span>
            <span class="n">category_name</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">info</span>
        <span class="k">return</span> <span class="n">info</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_info</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">,</span>
        <span class="n">sub_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ignore_errors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="k">if</span> <span class="n">sub_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="n">module_types</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_info_for_category</span><span class="p">(</span>
                <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span> <span class="n">category_name</span><span class="o">=</span><span class="s2">&quot;modules&quot;</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="n">ignore_errors</span>
            <span class="p">)</span>
            <span class="n">value_types</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_info_for_category</span><span class="p">(</span>
                <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span> <span class="n">category_name</span><span class="o">=</span><span class="s2">&quot;value_types&quot;</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="n">ignore_errors</span>
            <span class="p">)</span>
            <span class="n">pipeline_types</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_info_for_category</span><span class="p">(</span>
                <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span> <span class="n">category_name</span><span class="o">=</span><span class="s2">&quot;pipelines&quot;</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="n">ignore_errors</span>
            <span class="p">)</span>
            <span class="n">op_group</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_info_for_category</span><span class="p">(</span>
                <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span> <span class="n">category_name</span><span class="o">=</span><span class="s2">&quot;operations&quot;</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="n">ignore_errors</span>
            <span class="p">)</span>
            <span class="n">op_types</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_info_for_category</span><span class="p">(</span>
                <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>
                <span class="n">category_name</span><span class="o">=</span><span class="s2">&quot;operation_types&quot;</span><span class="p">,</span>
                <span class="n">ignore_errors</span><span class="o">=</span><span class="n">ignore_errors</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">return</span> <span class="n">KiaraContext</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">kiara</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span>
                <span class="n">value_types</span><span class="o">=</span><span class="n">value_types</span><span class="p">,</span>
                <span class="n">modules</span><span class="o">=</span><span class="n">module_types</span><span class="p">,</span>
                <span class="n">pipelines</span><span class="o">=</span><span class="n">pipeline_types</span><span class="p">,</span>
                <span class="n">operations</span><span class="o">=</span><span class="n">op_group</span><span class="p">,</span>
                <span class="n">operation_types</span><span class="o">=</span><span class="n">op_types</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tokens</span> <span class="o">=</span> <span class="n">sub_type</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
            <span class="n">current</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_info_for_category</span><span class="p">(</span>
                <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span> <span class="n">category_name</span><span class="o">=</span><span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="n">ignore_errors</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">current</span>

            <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">get_subcomponent</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t get &#39;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&#39; information for &#39;</span><span class="si">{</span><span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="n">current</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The id of the kiara context.&quot;</span><span class="p">)</span>
    <span class="n">value_types</span><span class="p">:</span> <span class="n">KiaraDynamicInfoModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Information about available value types.&quot;</span>
    <span class="p">)</span>
    <span class="n">modules</span><span class="p">:</span> <span class="n">ModuleTypesGroupInfo</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Information about the available modules.&quot;</span>
    <span class="p">)</span>
    <span class="n">pipelines</span><span class="p">:</span> <span class="n">PipelineTypesGroupInfo</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Information about available pipelines.&quot;</span>
    <span class="p">)</span>
    <span class="n">operation_types</span><span class="p">:</span> <span class="n">KiaraDynamicInfoModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Information about operation types contained in the current kiara context.&quot;</span>
    <span class="p">)</span>
    <span class="n">operations</span><span class="p">:</span> <span class="n">KiaraDynamicInfoModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Available operations.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;root_context&quot;</span>

    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Key&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>

        <span class="n">value_type_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">()</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;value_types&quot;</span><span class="p">,</span> <span class="n">value_type_table</span><span class="p">)</span>

        <span class="n">module_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">()</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;modules&quot;</span><span class="p">,</span> <span class="n">module_table</span><span class="p">)</span>

        <span class="n">pipelines_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipelines</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">()</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;pipelines&quot;</span><span class="p">,</span> <span class="n">pipelines_table</span><span class="p">)</span>

        <span class="n">operation_types_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_types</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">()</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;operation_types&quot;</span><span class="p">,</span> <span class="n">operation_types_table</span><span class="p">)</span>

        <span class="n">operations_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">()</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;operations&quot;</span><span class="p">,</span> <span class="n">operations_table</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">table</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">








  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.kiara.KiaraContext.id" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.kiara.KiaraContext.id" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The id of the kiara context.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.kiara.KiaraContext.modules" class="doc doc-heading">
<code class="highlight language-python"><span class="n">modules</span><span class="p">:</span> <span class="n">ModuleTypesGroupInfo</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.kiara.KiaraContext.modules" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Information about the available modules.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.kiara.KiaraContext.operation_types" class="doc doc-heading">
<code class="highlight language-python"><span class="n">operation_types</span><span class="p">:</span> <span class="n">KiaraDynamicInfoModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.kiara.KiaraContext.operation_types" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Information about operation types contained in the current kiara context.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.kiara.KiaraContext.operations" class="doc doc-heading">
<code class="highlight language-python"><span class="n">operations</span><span class="p">:</span> <span class="n">KiaraDynamicInfoModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.kiara.KiaraContext.operations" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Available operations.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.kiara.KiaraContext.pipelines" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipelines</span><span class="p">:</span> <span class="n">PipelineTypesGroupInfo</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.kiara.KiaraContext.pipelines" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Information about available pipelines.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.kiara.KiaraContext.value_types" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_types</span><span class="p">:</span> <span class="n">KiaraDynamicInfoModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.kiara.KiaraContext.value_types" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Information about available value types.</p>
    </div>

  </div>















  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  <div class="doc doc-object doc-module">



<h3 id="kiara.info.modules" class="doc doc-heading">
        <code>modules</code>



<a href="#kiara.info.modules" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.info.modules.ModuleTypesGroupInfo" class="doc doc-heading">
        <code>
ModuleTypesGroupInfo            (<span title="kiara.info.KiaraInfoModel">KiaraInfoModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.info.modules.ModuleTypesGroupInfo" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/info/modules.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ModuleTypesGroupInfo</span><span class="p">(</span><span class="n">KiaraInfoModel</span><span class="p">):</span>

    <span class="n">__root__</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">KiaraModuleTypeMetadata</span><span class="p">]</span>
    <span class="n">_hash_cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_type_names</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">,</span>
        <span class="n">type_names</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ignore_pipeline_modules</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">ignore_non_pipeline_modules</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span>
    <span class="p">):</span>

        <span class="k">if</span> <span class="n">ignore_pipeline_modules</span> <span class="ow">and</span> <span class="n">ignore_non_pipeline_modules</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t ignore both pipeline and non-pipeline modules.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">type_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">type_names</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">available_module_types</span>

        <span class="n">classes</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">tn</span> <span class="ow">in</span> <span class="n">type_names</span><span class="p">:</span>
            <span class="n">_cls</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">get_module_class</span><span class="p">(</span><span class="n">tn</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ignore_pipeline_modules</span> <span class="ow">and</span> <span class="n">_cls</span><span class="o">.</span><span class="n">is_pipeline</span><span class="p">():</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">ignore_non_pipeline_modules</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">_cls</span><span class="o">.</span><span class="n">is_pipeline</span><span class="p">():</span>
                <span class="k">continue</span>
            <span class="n">classes</span><span class="p">[</span><span class="n">tn</span><span class="p">]</span> <span class="o">=</span> <span class="n">KiaraModuleTypeMetadata</span><span class="o">.</span><span class="n">from_module_class</span><span class="p">(</span><span class="n">_cls</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ModuleTypesGroupInfo</span><span class="p">(</span><span class="n">__root__</span><span class="o">=</span><span class="n">classes</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_renderable_from_type_names</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">,</span>
        <span class="n">type_names</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">ignore_pipeline_modules</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">ignore_non_pipeline_modules</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span>
    <span class="p">):</span>

        <span class="n">classes</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">tn</span> <span class="ow">in</span> <span class="n">type_names</span><span class="p">:</span>
            <span class="n">_cls</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">get_module_class</span><span class="p">(</span><span class="n">tn</span><span class="p">)</span>
            <span class="n">classes</span><span class="p">[</span><span class="n">tn</span><span class="p">]</span> <span class="o">=</span> <span class="n">_cls</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">create_renderable_from_module_type_map</span><span class="p">(</span>
            <span class="n">module_types</span><span class="o">=</span><span class="n">classes</span><span class="p">,</span>
            <span class="n">ignore_pipeline_modules</span><span class="o">=</span><span class="n">ignore_pipeline_modules</span><span class="p">,</span>
            <span class="n">ignore_non_pipeline_modules</span><span class="o">=</span><span class="n">ignore_non_pipeline_modules</span><span class="p">,</span>
            <span class="o">**</span><span class="n">config</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_renderable_from_module_type_map</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">module_types</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">]],</span>
        <span class="n">ignore_pipeline_modules</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">ignore_non_pipeline_modules</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a renderable from a map of module classes.</span>

<span class="sd">        Render-configuration options:</span>
<span class="sd">          - include_full_doc (default: False): include the full documentation, instead of just a one line description</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">create_renderable_from_module_info_map</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">KiaraModuleTypeMetadata</span><span class="o">.</span><span class="n">from_module_class</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">module_types</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="p">},</span>
            <span class="n">ignore_pipeline_modules</span><span class="o">=</span><span class="n">ignore_pipeline_modules</span><span class="p">,</span>
            <span class="n">ignore_non_pipeline_modules</span><span class="o">=</span><span class="n">ignore_non_pipeline_modules</span><span class="p">,</span>
            <span class="o">**</span><span class="n">config</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_renderable_from_module_info_map</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">module_types</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">KiaraModuleTypeMetadata</span><span class="p">],</span>
        <span class="n">ignore_pipeline_modules</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">ignore_non_pipeline_modules</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a renderable from a map of module info wrappers.</span>

<span class="sd">        Render-configuration options:</span>
<span class="sd">          - include_full_doc (default: False): include the full documentation, instead of just a one line description</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">ignore_pipeline_modules</span> <span class="ow">and</span> <span class="n">ignore_non_pipeline_modules</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t ignore both pipeline and non-pipeline modules.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">ignore_pipeline_modules</span><span class="p">:</span>
            <span class="n">module_types</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">module_types</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">is_pipeline</span><span class="p">}</span>
        <span class="k">elif</span> <span class="n">ignore_non_pipeline_modules</span><span class="p">:</span>
            <span class="n">module_types</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">module_types</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">is_pipeline</span><span class="p">}</span>

        <span class="n">show_lines</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">,</span> <span class="n">show_lines</span><span class="o">=</span><span class="n">show_lines</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">details</span> <span class="ow">in</span> <span class="n">module_types</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_full_doc&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">details</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">full_doc</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">details</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">table</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">module_config_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span>

        <span class="n">obj</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__root__</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">DeepHash</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">hasher</span><span class="o">=</span><span class="n">KIARA_HASH_FUNCTION</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span> <span class="o">=</span> <span class="n">h</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span>

    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_config_hash</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">MODULE_TYPES_CATEGORY_ALIAS</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="k">return</span> <span class="n">ModuleTypesGroupInfo</span><span class="o">.</span><span class="n">create_renderable_from_module_info_map</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__root__</span>
        <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">















  <div class="doc doc-object doc-method">



<h5 id="kiara.info.modules.ModuleTypesGroupInfo.create_renderable_from_module_info_map" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_renderable_from_module_info_map</span><span class="p">(</span><span class="n">module_types</span><span class="p">,</span> <span class="n">ignore_pipeline_modules</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ignore_non_pipeline_modules</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.info.modules.ModuleTypesGroupInfo.create_renderable_from_module_info_map" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Create a renderable from a map of module info wrappers.</p>
<p>Render-configuration options:
  - include_full_doc (default: False): include the full documentation, instead of just a one line description</p>

        <details class="quote">
          <summary>Source code in <code>kiara/info/modules.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">create_renderable_from_module_info_map</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">module_types</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">KiaraModuleTypeMetadata</span><span class="p">],</span>
    <span class="n">ignore_pipeline_modules</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">ignore_non_pipeline_modules</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a renderable from a map of module info wrappers.</span>

<span class="sd">    Render-configuration options:</span>
<span class="sd">      - include_full_doc (default: False): include the full documentation, instead of just a one line description</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">ignore_pipeline_modules</span> <span class="ow">and</span> <span class="n">ignore_non_pipeline_modules</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t ignore both pipeline and non-pipeline modules.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">ignore_pipeline_modules</span><span class="p">:</span>
        <span class="n">module_types</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">module_types</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">is_pipeline</span><span class="p">}</span>
    <span class="k">elif</span> <span class="n">ignore_non_pipeline_modules</span><span class="p">:</span>
        <span class="n">module_types</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">module_types</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">is_pipeline</span><span class="p">}</span>

    <span class="n">show_lines</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">,</span> <span class="n">show_lines</span><span class="o">=</span><span class="n">show_lines</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">details</span> <span class="ow">in</span> <span class="n">module_types</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_full_doc&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">details</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">full_doc</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">details</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">table</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.info.modules.ModuleTypesGroupInfo.create_renderable_from_module_type_map" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_renderable_from_module_type_map</span><span class="p">(</span><span class="n">module_types</span><span class="p">,</span> <span class="n">ignore_pipeline_modules</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ignore_non_pipeline_modules</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.info.modules.ModuleTypesGroupInfo.create_renderable_from_module_type_map" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Create a renderable from a map of module classes.</p>
<p>Render-configuration options:
  - include_full_doc (default: False): include the full documentation, instead of just a one line description</p>

        <details class="quote">
          <summary>Source code in <code>kiara/info/modules.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">create_renderable_from_module_type_map</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">module_types</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">]],</span>
    <span class="n">ignore_pipeline_modules</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">ignore_non_pipeline_modules</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a renderable from a map of module classes.</span>

<span class="sd">    Render-configuration options:</span>
<span class="sd">      - include_full_doc (default: False): include the full documentation, instead of just a one line description</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">create_renderable_from_module_info_map</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="n">k</span><span class="p">:</span> <span class="n">KiaraModuleTypeMetadata</span><span class="o">.</span><span class="n">from_module_class</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">module_types</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">},</span>
        <span class="n">ignore_pipeline_modules</span><span class="o">=</span><span class="n">ignore_pipeline_modules</span><span class="p">,</span>
        <span class="n">ignore_non_pipeline_modules</span><span class="o">=</span><span class="n">ignore_non_pipeline_modules</span><span class="p">,</span>
        <span class="o">**</span><span class="n">config</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>









  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.info.operations" class="doc doc-heading">
        <code>operations</code>



<a href="#kiara.info.operations" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.info.operations.OperationsInfo" class="doc doc-heading">
        <code>
OperationsInfo            (<span title="kiara.info.KiaraInfoModel">KiaraInfoModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.info.operations.OperationsInfo" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/info/operations.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">OperationsInfo</span><span class="p">(</span><span class="n">KiaraInfoModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="n">Kiara</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;OperationsInfo&quot;</span><span class="p">]:</span>

        <span class="n">op_types</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">operation_types</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">op_name</span><span class="p">:</span> <span class="n">OperationsInfo</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">operations</span><span class="o">=</span><span class="n">op_types</span><span class="p">[</span><span class="n">op_name</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">op_name</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">op_types</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">operations</span><span class="p">:</span> <span class="n">OperationType</span><span class="p">):</span>

        <span class="n">info</span> <span class="o">=</span> <span class="n">OperationsMetadata</span><span class="o">.</span><span class="n">from_operations_class</span><span class="p">(</span><span class="n">operations</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">OperationsInfo</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">,</span> <span class="n">operation_configs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">operations</span><span class="o">.</span><span class="n">operations</span><span class="p">))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_renderable_from_operations_map</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">op_map</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;OperationsInfo&quot;</span><span class="p">]</span>
    <span class="p">):</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Key&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">op_name</span><span class="p">,</span> <span class="n">ops</span> <span class="ow">in</span> <span class="n">op_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">op_name</span><span class="p">,</span> <span class="n">ops</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">table</span>

    <span class="n">info</span><span class="p">:</span> <span class="n">OperationsMetadata</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Details about the type of operations contained in this collection.&quot;</span>
    <span class="p">)</span>
    <span class="n">operation_configs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;All available operation ids and their configurations.&quot;</span>
    <span class="p">)</span>
    <span class="n">_hash_cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">module_config_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span>

        <span class="n">obj</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">get_id</span><span class="p">(),</span>
            <span class="s2">&quot;operation_configs&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_configs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">DeepHash</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">hasher</span><span class="o">=</span><span class="n">KIARA_HASH_FUNCTION</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span> <span class="o">=</span> <span class="n">h</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span>

    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_config_hash</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;all_operations_info&quot;</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">(</span>
            <span class="n">operations</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">operation_configs</span><span class="p">,</span> <span class="n">omit_type_name</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.operations.OperationsInfo.info" class="doc doc-heading">
<code class="highlight language-python"><span class="n">info</span><span class="p">:</span> <span class="n">OperationsMetadata</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.operations.OperationsInfo.info" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Details about the type of operations contained in this collection.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.operations.OperationsInfo.operation_configs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">operation_configs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">Operation</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.operations.OperationsInfo.operation_configs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>All available operation ids and their configurations.</p>
    </div>

  </div>
















  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.info.pipelines" class="doc doc-heading">
        <code>pipelines</code>



<a href="#kiara.info.pipelines" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="kiara.info.pipelines.PipelineModuleInfo" class="doc doc-heading">
        <code>
PipelineModuleInfo            (<a class="autorefs autorefs-internal" title="kiara.metadata.module_models.KiaraModuleTypeMetadata" href="../metadata/module_models/#kiara.metadata.module_models.KiaraModuleTypeMetadata">KiaraModuleTypeMetadata</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineModuleInfo" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/info/pipelines.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineModuleInfo</span><span class="p">(</span><span class="n">KiaraModuleTypeMetadata</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_type_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">module_type_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">):</span>

        <span class="n">m</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">get_module_class</span><span class="p">(</span><span class="n">module_type</span><span class="o">=</span><span class="n">module_type_name</span><span class="p">)</span>

        <span class="n">base_conf</span><span class="p">:</span> <span class="s2">&quot;PipelineConfig&quot;</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">_base_pipeline_config</span>  <span class="c1"># type: ignore</span>
        <span class="n">structure</span> <span class="o">=</span> <span class="n">base_conf</span><span class="o">.</span><span class="n">create_pipeline_structure</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>
        <span class="n">struc_desc</span> <span class="o">=</span> <span class="n">PipelineStructureDesc</span><span class="o">.</span><span class="n">create_pipeline_structure_desc</span><span class="p">(</span>
            <span class="n">pipeline</span><span class="o">=</span><span class="n">structure</span>
        <span class="p">)</span>
        <span class="n">attrs</span> <span class="o">=</span> <span class="n">PipelineModuleInfo</span><span class="o">.</span><span class="n">extract_module_attributes</span><span class="p">(</span><span class="n">module_cls</span><span class="o">=</span><span class="n">m</span><span class="p">)</span>
        <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;structure&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">struc_desc</span>
        <span class="n">pmi</span> <span class="o">=</span> <span class="n">PipelineModuleInfo</span><span class="p">(</span><span class="o">**</span><span class="n">attrs</span><span class="p">)</span>
        <span class="n">pmi</span><span class="o">.</span><span class="n">_kiara</span> <span class="o">=</span> <span class="n">kiara</span>
        <span class="n">pmi</span><span class="o">.</span><span class="n">_structure</span> <span class="o">=</span> <span class="n">structure</span>
        <span class="k">return</span> <span class="n">pmi</span>

    <span class="n">_kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>
    <span class="n">_structure</span><span class="p">:</span> <span class="s2">&quot;PipelineStructure&quot;</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>
    <span class="n">structure</span><span class="p">:</span> <span class="n">PipelineStructureDesc</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The pipeline structure.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">PIPELINE_TYPE_CATEGORY_ALIAS</span>

    <span class="k">def</span> <span class="nf">print_data_flow_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">simplified</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">structure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span>

        <span class="k">if</span> <span class="n">simplified</span><span class="p">:</span>
            <span class="n">graph</span> <span class="o">=</span> <span class="n">structure</span><span class="o">.</span><span class="n">data_flow_graph_simple</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">graph</span> <span class="o">=</span> <span class="n">structure</span><span class="o">.</span><span class="n">data_flow_graph</span>

        <span class="n">print_ascii_graph</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">print_execution_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">structure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span>
        <span class="n">print_ascii_graph</span><span class="p">(</span><span class="n">structure</span><span class="o">.</span><span class="n">execution_graph</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="n">my_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">,</span> <span class="n">show_lines</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">my_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Property&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">my_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>
        <span class="n">my_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">python_class</span><span class="o">.</span><span class="n">full_name</span><span class="p">)</span>
        <span class="n">my_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;is pipeline&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">)</span>

        <span class="n">my_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;doc&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">full_doc</span><span class="p">)</span>
        <span class="n">my_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;config class&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">python_class</span><span class="o">.</span><span class="n">full_name</span><span class="p">)</span>
        <span class="n">my_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
            <span class="s2">&quot;config&quot;</span><span class="p">,</span>
            <span class="n">create_table_from_config_class</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">python_class</span><span class="o">.</span><span class="n">get_class</span><span class="p">(),</span>  <span class="c1"># type: ignore</span>
                <span class="n">remove_pipeline_config</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="n">structure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span>

        <span class="n">p_inputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">input_name</span><span class="p">,</span> <span class="n">schema</span> <span class="ow">in</span> <span class="n">structure</span><span class="o">.</span><span class="n">pipeline_input_schema</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">p_inputs</span><span class="p">[</span><span class="n">input_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">schema</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="n">schema</span><span class="o">.</span><span class="n">doc</span><span class="p">}</span>
        <span class="n">inputs_str</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">p_inputs</span><span class="p">)</span>
        <span class="n">_inputs_txt</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span><span class="n">inputs_str</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
        <span class="n">my_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;pipeline inputs&quot;</span><span class="p">,</span> <span class="n">_inputs_txt</span><span class="p">)</span>

        <span class="n">outputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">output_name</span><span class="p">,</span> <span class="n">schema</span> <span class="ow">in</span> <span class="n">structure</span><span class="o">.</span><span class="n">pipeline_output_schema</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">outputs</span><span class="p">[</span><span class="n">output_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">schema</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="n">schema</span><span class="o">.</span><span class="n">doc</span><span class="p">}</span>
        <span class="n">outputs_str</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span>
        <span class="n">_outputs_txt</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span><span class="n">outputs_str</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
        <span class="n">my_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;pipeline outputs&quot;</span><span class="p">,</span> <span class="n">_outputs_txt</span><span class="p">)</span>

        <span class="n">stages</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">nr</span><span class="p">,</span> <span class="n">stage</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">structure</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">s_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
                <span class="n">step</span> <span class="o">=</span> <span class="n">structure</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">s_id</span><span class="p">)</span>
                <span class="n">mc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">get_module_class</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">module_type</span><span class="p">)</span>
                <span class="n">desc</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">full_doc</span>
                <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="s2">&quot;ValueRef&quot;</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">inp</span> <span class="ow">in</span> <span class="n">structure</span><span class="o">.</span><span class="n">steps_inputs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">inp</span><span class="o">.</span><span class="n">step_id</span> <span class="o">!=</span> <span class="n">s_id</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">if</span> <span class="n">inp</span><span class="o">.</span><span class="n">connected_outputs</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">co</span> <span class="ow">in</span> <span class="n">inp</span><span class="o">.</span><span class="n">connected_outputs</span><span class="p">:</span>
                            <span class="n">inputs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">inp</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">co</span><span class="o">.</span><span class="n">alias</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">inputs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">inp</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;__pipeline__.</span><span class="si">{</span><span class="n">inp</span><span class="o">.</span><span class="n">connected_pipeline_input</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>

                <span class="n">inp_str</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="o">.</span><span class="n">value_name</span><span class="si">}</span><span class="s2"> ← </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">inp_str</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

                <span class="n">outp_str</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">outp</span> <span class="ow">in</span> <span class="n">structure</span><span class="o">.</span><span class="n">steps_outputs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">outp</span><span class="o">.</span><span class="n">step_id</span> <span class="o">!=</span> <span class="n">s_id</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">if</span> <span class="n">outp</span><span class="o">.</span><span class="n">pipeline_output</span><span class="p">:</span>
                        <span class="n">outp_str</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">outp</span><span class="o">.</span><span class="n">value_name</span><span class="si">}</span><span class="s2"> → __pipeline__.</span><span class="si">{</span><span class="n">outp</span><span class="o">.</span><span class="n">pipeline_output</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">outp_str</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">outp</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>

                <span class="n">stages</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;stage </span><span class="si">{</span><span class="n">nr</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">{})[</span><span class="n">s_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;module&quot;</span><span class="p">:</span> <span class="n">step</span><span class="o">.</span><span class="n">module_type</span><span class="p">,</span>
                    <span class="s2">&quot;desc&quot;</span><span class="p">:</span> <span class="n">desc</span><span class="p">,</span>
                    <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="n">inp_str</span><span class="p">,</span>
                    <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="n">outp_str</span><span class="p">,</span>
                <span class="p">}</span>

        <span class="n">stages_str</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">stages</span><span class="p">)</span>
        <span class="n">_stages_txt</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span><span class="n">stages_str</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
        <span class="n">my_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;processing stages&quot;</span><span class="p">,</span> <span class="n">_stages_txt</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">my_table</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.PipelineModuleInfo.structure" class="doc doc-heading">
<code class="highlight language-python"><span class="n">structure</span><span class="p">:</span> <span class="n">PipelineStructureDesc</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineModuleInfo.structure" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The pipeline structure.</p>
    </div>

  </div>
















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.info.pipelines.PipelineState" class="doc doc-heading">
        <code>
PipelineState            (<span title="kiara.info.KiaraInfoModel">KiaraInfoModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineState" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Describes the current state of a pipeline.</p>
<p>This includes the structure of the pipeline (how the internal modules/steps are connected to each other), as well
as all current input/output values for the pipeline itself, as well as for all internal steps.</p>
<p>Use the <code>dict</code> or <code>json</code> methods to convert this object into a generic data structure.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/info/pipelines.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineState</span><span class="p">(</span><span class="n">KiaraInfoModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Describes the current state of a pipeline.</span>

<span class="sd">    This includes the structure of the pipeline (how the internal modules/steps are connected to each other), as well</span>
<span class="sd">    as all current input/output values for the pipeline itself, as well as for all internal steps.</span>

<span class="sd">    Use the ``dict`` or ``json`` methods to convert this object into a generic data structure.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">pipeline_state_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Id of this state instance.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="n">create_uuid4_string</span>
    <span class="p">)</span>
    <span class="n">structure</span><span class="p">:</span> <span class="n">PipelineStructureDesc</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The structure (interconnections of modules/steps) of the pipeline.&quot;</span>
    <span class="p">)</span>
    <span class="n">pipeline_inputs</span><span class="p">:</span> <span class="n">PipelineValuesInfo</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The current (externally facing) input values of this pipeline.&quot;</span>
    <span class="p">)</span>
    <span class="n">pipeline_outputs</span><span class="p">:</span> <span class="n">PipelineValuesInfo</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The current (externally facing) output values of this pipeline.&quot;</span>
    <span class="p">)</span>
    <span class="n">step_states</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepStatus</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The status of each step.&quot;</span>
    <span class="p">)</span>
    <span class="n">step_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineValuesInfo</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The current (internal) input values of each step of this pipeline.&quot;</span>
    <span class="p">)</span>
    <span class="n">step_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineValuesInfo</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The current (internal) output values of each step of this pipeline.&quot;</span>
    <span class="p">)</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">StepStatus</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The current overal status of the pipeline.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_state_id</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;instance.pipeline.state&quot;</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="kn">from</span> <span class="nn">kiara.pipeline.pipeline</span> <span class="kn">import</span> <span class="n">StepStatus</span>

        <span class="nb">all</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">RenderableType</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="nb">all</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;[b]Pipeline state[/b]&quot;</span><span class="p">)</span>
        <span class="nb">all</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">RESULTS_READY</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="s2">&quot;green&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">INPUTS_READY</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="s2">&quot;yellow&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="s2">&quot;red&quot;</span>
        <span class="nb">all</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[b]Status[/b]: [b i </span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">]</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[/b i </span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
        <span class="nb">all</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="nb">all</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;[b]Inputs / Outputs[/b]&quot;</span><span class="p">)</span>

        <span class="n">r_gro</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">inp_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">)</span>
        <span class="n">inp_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Field name&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">inp_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span>
        <span class="n">inp_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">)</span>
        <span class="n">inp_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Required&quot;</span><span class="p">)</span>
        <span class="n">inp_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Status&quot;</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">)</span>
        <span class="n">inp_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Ready&quot;</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_inputs</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">req</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">is_required</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">req</span><span class="p">:</span>
                <span class="n">req_string</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">req_string</span> <span class="o">=</span> <span class="s2">&quot;[bold]yes[/bold]&quot;</span>

            <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
                <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;-- set --&quot;</span>
                <span class="n">valid</span> <span class="o">=</span> <span class="s2">&quot;[green]yes[/green]&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">valid</span> <span class="o">=</span> <span class="s2">&quot;[green]yes[/green]&quot;</span> <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">is_valid</span> <span class="k">else</span> <span class="s2">&quot;[red]no[/red]&quot;</span>
                <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">is_valid</span><span class="p">:</span>
                    <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;-- not set --&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;-- not set --&quot;</span>

            <span class="n">inp_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
                <span class="n">field_name</span><span class="p">,</span>
                <span class="n">value</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
                <span class="n">value</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">doc</span><span class="p">,</span>
                <span class="n">req_string</span><span class="p">,</span>
                <span class="n">status</span><span class="p">,</span>
                <span class="n">valid</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">r_gro</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">Panel</span><span class="p">(</span><span class="n">inp_table</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">ROUNDED</span><span class="p">,</span> <span class="n">title_align</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Inputs&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">out_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">)</span>
        <span class="n">out_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Field name&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">out_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span>
        <span class="n">out_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">)</span>
        <span class="n">out_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Required&quot;</span><span class="p">)</span>
        <span class="n">out_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Status&quot;</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">)</span>
        <span class="n">out_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Ready&quot;</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_outputs</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">req</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">is_required</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">req</span><span class="p">:</span>
                <span class="n">req_string</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">req_string</span> <span class="o">=</span> <span class="s2">&quot;[bold]yes[/bold]&quot;</span>

            <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
                <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;-- set --&quot;</span>
                <span class="n">valid</span> <span class="o">=</span> <span class="s2">&quot;[green]yes[/green]&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">valid</span> <span class="o">=</span> <span class="s2">&quot;[green]yes[/green]&quot;</span> <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">is_valid</span> <span class="k">else</span> <span class="s2">&quot;[red]no[/red]&quot;</span>
                <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;-- not set --&quot;</span>

            <span class="n">out_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
                <span class="n">field_name</span><span class="p">,</span>
                <span class="n">value</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
                <span class="n">value</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">doc</span><span class="p">,</span>
                <span class="n">req_string</span><span class="p">,</span>
                <span class="n">status</span><span class="p">,</span>
                <span class="n">valid</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">r_gro</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">Panel</span><span class="p">(</span><span class="n">out_table</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">ROUNDED</span><span class="p">,</span> <span class="n">title_align</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Outputs&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="nb">all</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Panel</span><span class="p">(</span><span class="n">RenderGroup</span><span class="p">(</span><span class="o">*</span><span class="n">r_gro</span><span class="p">),</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">))</span>

        <span class="n">rg</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">nr</span><span class="p">,</span> <span class="n">stage</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">):</span>

            <span class="n">render_group</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>

                <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="n">step_table</span> <span class="o">=</span> <span class="n">create_pipeline_step_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
                <span class="n">render_group</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">step_table</span><span class="p">)</span>

            <span class="n">panel</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span>
                <span class="n">RenderGroup</span><span class="p">(</span><span class="o">*</span><span class="n">render_group</span><span class="p">),</span>
                <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">ROUNDED</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Processing stage: </span><span class="si">{</span><span class="n">nr</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">title_align</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">rg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">panel</span><span class="p">)</span>

        <span class="nb">all</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;[b]Steps[/b]&quot;</span><span class="p">)</span>
        <span class="n">r_panel</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">RenderGroup</span><span class="p">(</span><span class="o">*</span><span class="n">rg</span><span class="p">),</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">)</span>
        <span class="nb">all</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r_panel</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">RenderGroup</span><span class="p">(</span><span class="o">*</span><span class="nb">all</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.PipelineState.pipeline_inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_inputs</span><span class="p">:</span> <span class="n">PipelineValuesInfo</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineState.pipeline_inputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The current (externally facing) input values of this pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.PipelineState.pipeline_outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_outputs</span><span class="p">:</span> <span class="n">PipelineValuesInfo</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineState.pipeline_outputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The current (externally facing) output values of this pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.PipelineState.pipeline_state_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_state_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineState.pipeline_state_id" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Id of this state instance.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.PipelineState.status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">status</span><span class="p">:</span> <span class="n">StepStatus</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineState.status" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The current overal status of the pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.PipelineState.step_inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">PipelineValuesInfo</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineState.step_inputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The current (internal) input values of each step of this pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.PipelineState.step_outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_outputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">PipelineValuesInfo</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineState.step_outputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The current (internal) output values of each step of this pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.PipelineState.step_states" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_states</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">StepStatus</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineState.step_states" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The status of each step.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.PipelineState.structure" class="doc doc-heading">
<code class="highlight language-python"><span class="n">structure</span><span class="p">:</span> <span class="n">PipelineStructureDesc</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineState.structure" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The structure (interconnections of modules/steps) of the pipeline.</p>
    </div>

  </div>













  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.info.pipelines.PipelineStructureDesc" class="doc doc-heading">
        <code>
PipelineStructureDesc            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineStructureDesc" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Outlines the internal structure of a <a class="autorefs autorefs-internal" href="../pipeline/pipeline/#kiara.pipeline.pipeline.Pipeline">Pipeline</a>.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/info/pipelines.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineStructureDesc</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Outlines the internal structure of a [Pipeline][kiara.pipeline.pipeline.Pipeline].&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_pipeline_structure_desc</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">pipeline</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Pipeline&quot;</span><span class="p">,</span> <span class="s2">&quot;PipelineStructure&quot;</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineStructureDesc&quot;</span><span class="p">:</span>

        <span class="kn">from</span> <span class="nn">kiara.pipeline.pipeline</span> <span class="kn">import</span> <span class="n">Pipeline</span>
        <span class="kn">from</span> <span class="nn">kiara.pipeline.structure</span> <span class="kn">import</span> <span class="n">PipelineStructure</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">Pipeline</span><span class="p">):</span>
            <span class="n">structure</span><span class="p">:</span> <span class="n">PipelineStructure</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">structure</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">PipelineStructure</span><span class="p">):</span>
            <span class="n">structure</span> <span class="o">=</span> <span class="n">pipeline</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">pipeline</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; for pipeline.&quot;</span><span class="p">)</span>

        <span class="n">steps</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">workflow_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">workflow_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">m_id</span><span class="p">,</span> <span class="n">details</span> <span class="ow">in</span> <span class="n">structure</span><span class="o">.</span><span class="n">steps_details</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">step</span> <span class="o">=</span> <span class="n">details</span><span class="p">[</span><span class="s2">&quot;step&quot;</span><span class="p">]</span>

            <span class="n">input_connections</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">details</span><span class="p">[</span><span class="s2">&quot;inputs&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">connected_pipeline_input</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">connected_item</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">connected_pipeline_input</span>
                    <span class="n">input_connections</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="n">generate_step_alias</span><span class="p">(</span><span class="n">PIPELINE_PARENT_MARKER</span><span class="p">,</span> <span class="n">connected_item</span><span class="p">)</span>
                    <span class="p">]</span>
                    <span class="n">workflow_inputs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">connected_item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">alias</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">v</span><span class="o">.</span><span class="n">connected_outputs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">connected_outputs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
                    <span class="k">for</span> <span class="n">co</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">connected_outputs</span><span class="p">:</span>
                        <span class="n">input_connections</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">co</span><span class="o">.</span><span class="n">alias</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid connection type: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">output_connections</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">details</span><span class="p">[</span><span class="s2">&quot;outputs&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">for</span> <span class="n">connected_item</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">connected_inputs</span><span class="p">:</span>

                    <span class="n">output_connections</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">generate_step_alias</span><span class="p">(</span>
                            <span class="n">connected_item</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="n">connected_item</span><span class="o">.</span><span class="n">value_name</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">pipeline_output</span><span class="p">:</span>
                    <span class="n">output_connections</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">generate_step_alias</span><span class="p">(</span><span class="n">PIPELINE_PARENT_MARKER</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">pipeline_output</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="n">workflow_outputs</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">pipeline_output</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">alias</span>

            <span class="n">steps</span><span class="p">[</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">StepDesc</span><span class="p">(</span>
                <span class="n">step</span><span class="o">=</span><span class="n">step</span><span class="p">,</span>
                <span class="n">processing_stage</span><span class="o">=</span><span class="n">details</span><span class="p">[</span><span class="s2">&quot;processing_stage&quot;</span><span class="p">],</span>
                <span class="n">input_connections</span><span class="o">=</span><span class="n">input_connections</span><span class="p">,</span>
                <span class="n">output_connections</span><span class="o">=</span><span class="n">output_connections</span><span class="p">,</span>
                <span class="n">required</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">required</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">PipelineStructureDesc</span><span class="p">(</span>
            <span class="n">steps</span><span class="o">=</span><span class="n">steps</span><span class="p">,</span>
            <span class="n">processing_stages</span><span class="o">=</span><span class="n">structure</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">,</span>
            <span class="n">pipeline_input_connections</span><span class="o">=</span><span class="n">workflow_inputs</span><span class="p">,</span>
            <span class="n">pipeline_output_connections</span><span class="o">=</span><span class="n">workflow_outputs</span><span class="p">,</span>
            <span class="n">pipeline_inputs</span><span class="o">=</span><span class="n">structure</span><span class="o">.</span><span class="n">pipeline_inputs</span><span class="p">,</span>
            <span class="n">pipeline_outputs</span><span class="o">=</span><span class="n">structure</span><span class="o">.</span><span class="n">pipeline_outputs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">allow_mutation</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>

    <span class="n">steps</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepDesc</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The steps contained in this pipeline, with the &#39;step_id&#39; as key.&quot;</span>
    <span class="p">)</span>
    <span class="n">processing_stages</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The order in which this pipeline has to be processed (basically the dependencies of each step on other steps, if any).&quot;</span>
    <span class="p">)</span>
    <span class="n">pipeline_input_connections</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The connections of this pipelines input fields. One input field can be connected to one or several step input fields.&quot;</span>
    <span class="p">)</span>
    <span class="n">pipeline_output_connections</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The connections of this pipelines output fields. Each pipeline output is connected to exactly one step output field.&quot;</span>
    <span class="p">)</span>
    <span class="n">pipeline_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineInputRef</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The pipeline inputs.&quot;</span>
    <span class="p">)</span>
    <span class="n">pipeline_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineOutputRef</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The pipeline outputs.&quot;</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">steps_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StepsInfo</span><span class="p">:</span>

        <span class="k">return</span> <span class="n">StepsInfo</span><span class="p">(</span>
            <span class="n">processing_stages</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">,</span>
            <span class="n">steps</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="k">yield</span> <span class="s2">&quot;[b]Pipeline structure[/b]</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">yield</span> <span class="s2">&quot;[b]Inputs / Outputs[/b]&quot;</span>

        <span class="n">data_panel</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">inp_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">,</span> <span class="n">show_lines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">inp_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">inp_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span>
        <span class="n">inp_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">)</span>
        <span class="n">inp_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Required&quot;</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">)</span>
        <span class="n">inp_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Default&quot;</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">inp</span><span class="p">,</span> <span class="n">details</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">req</span> <span class="o">=</span> <span class="n">details</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">is_required</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">req</span><span class="p">:</span>
                <span class="n">req_str</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">details</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span>
                <span class="k">if</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">]:</span>
                    <span class="n">req_str</span> <span class="o">=</span> <span class="s2">&quot;[b]yes[/b]&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">req_str</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
            <span class="n">default</span> <span class="o">=</span> <span class="n">details</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span>
            <span class="k">if</span> <span class="n">default</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">]:</span>
                <span class="n">default</span> <span class="o">=</span> <span class="s2">&quot;-- no default --&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">default</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">default</span><span class="p">)</span>
            <span class="n">inp_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
                <span class="n">inp</span><span class="p">,</span>
                <span class="n">details</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
                <span class="n">details</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">doc</span><span class="p">,</span>
                <span class="n">req_str</span><span class="p">,</span>
                <span class="n">default</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">p_inp</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span>
            <span class="n">inp_table</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">ROUNDED</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Input fields&quot;</span><span class="p">,</span> <span class="n">title_align</span><span class="o">=</span><span class="s2">&quot;left&quot;</span>
        <span class="p">)</span>
        <span class="n">data_panel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_inp</span><span class="p">)</span>

        <span class="c1"># yield &quot;[b]Pipeline outputs[/b]&quot;</span>

        <span class="n">out_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">,</span> <span class="n">show_lines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">out_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">out_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span>
        <span class="n">out_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">inp</span><span class="p">,</span> <span class="n">details_o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_outputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">out_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
                <span class="n">inp</span><span class="p">,</span>
                <span class="n">details_o</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
                <span class="n">details_o</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">doc</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">outp</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span>
            <span class="n">out_table</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">ROUNDED</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Output fields&quot;</span><span class="p">,</span> <span class="n">title_align</span><span class="o">=</span><span class="s2">&quot;left&quot;</span>
        <span class="p">)</span>
        <span class="n">data_panel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">outp</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">Panel</span><span class="p">(</span><span class="n">RenderGroup</span><span class="p">(</span><span class="o">*</span><span class="n">data_panel</span><span class="p">),</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">)</span>

        <span class="n">step_color_map</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
            <span class="n">step_color_map</span><span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">COLOR_LIST</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">COLOR_LIST</span><span class="p">)]</span>

        <span class="n">rg</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">nr</span><span class="p">,</span> <span class="n">stage</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">):</span>

            <span class="n">render_group</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>

                <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="n">step_table</span> <span class="o">=</span> <span class="n">create_step_table</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">step_color_map</span><span class="p">)</span>
                <span class="n">render_group</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">step_table</span><span class="p">)</span>

            <span class="n">panel</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span>
                <span class="n">RenderGroup</span><span class="p">(</span><span class="o">*</span><span class="n">render_group</span><span class="p">),</span>
                <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">ROUNDED</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Processing stage: </span><span class="si">{</span><span class="n">nr</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">title_align</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">rg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">panel</span><span class="p">)</span>

        <span class="k">yield</span> <span class="s2">&quot;[b]Steps[/b]&quot;</span>
        <span class="n">r_panel</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">RenderGroup</span><span class="p">(</span><span class="o">*</span><span class="n">rg</span><span class="p">),</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">r_panel</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.PipelineStructureDesc.pipeline_input_connections" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_input_connections</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineStructureDesc.pipeline_input_connections" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The connections of this pipelines input fields. One input field can be connected to one or several step input fields.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.PipelineStructureDesc.pipeline_inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">PipelineInputRef</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineStructureDesc.pipeline_inputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The pipeline inputs.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.PipelineStructureDesc.pipeline_output_connections" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_output_connections</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineStructureDesc.pipeline_output_connections" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The connections of this pipelines output fields. Each pipeline output is connected to exactly one step output field.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.PipelineStructureDesc.pipeline_outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_outputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">PipelineOutputRef</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineStructureDesc.pipeline_outputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The pipeline outputs.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.PipelineStructureDesc.processing_stages" class="doc doc-heading">
<code class="highlight language-python"><span class="n">processing_stages</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineStructureDesc.processing_stages" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The order in which this pipeline has to be processed (basically the dependencies of each step on other steps, if any).</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.PipelineStructureDesc.steps" class="doc doc-heading">
<code class="highlight language-python"><span class="n">steps</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">StepDesc</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.pipelines.PipelineStructureDesc.steps" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The steps contained in this pipeline, with the 'step_id' as key.</p>
    </div>

  </div>














  </div>

    </div>

  </div>




  <div class="doc doc-object doc-class">



<h4 id="kiara.info.pipelines.StepsInfo" class="doc doc-heading">
        <code>
StepsInfo            (<span title="kiara.info.KiaraInfoModel">KiaraInfoModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.info.pipelines.StepsInfo" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/info/pipelines.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StepsInfo</span><span class="p">(</span><span class="n">KiaraInfoModel</span><span class="p">):</span>

    <span class="n">steps_info_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Id for this steps information instance.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="n">create_uuid4_string</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">steps</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepDesc</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;A list of step details.&quot;</span><span class="p">)</span>
    <span class="n">processing_stages</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The stages in which the steps are processed.&quot;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">,</span> <span class="n">show_lines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Stage&quot;</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Step Id&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Module type&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">nr</span><span class="p">,</span> <span class="n">stage</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">):</span>

            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">stage</span><span class="p">):</span>
                <span class="n">step</span><span class="p">:</span> <span class="n">StepDesc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">required</span><span class="p">:</span>
                    <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[b]</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">[/b]&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[b]</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">[/b] [i](optional)[/i]&quot;</span>

                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="p">,</span> <span class="s2">&quot;instance_doc&quot;</span><span class="p">):</span>
                    <span class="n">doc</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">module_instance_doc</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">doc</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">full_doc</span>
                <span class="n">row</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">nr</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>

                <span class="c1"># TODO; generate the right link here</span>
                <span class="n">module_link</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">step</span><span class="o">.</span><span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">references</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                        <span class="s2">&quot;sources&quot;</span><span class="p">,</span> <span class="kc">None</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">module_link</span><span class="p">:</span>
                    <span class="n">module_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[link=</span><span class="si">{</span><span class="n">module_link</span><span class="si">}</span><span class="s2">]</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">step</span><span class="o">.</span><span class="n">module_type</span><span class="si">}</span><span class="s2">[/link]&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">module_str</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">step</span><span class="o">.</span><span class="n">module_type</span>
                <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">module_str</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">doc</span> <span class="ow">and</span> <span class="n">doc</span> <span class="o">!=</span> <span class="s2">&quot;-- n/a --&quot;</span><span class="p">:</span>
                    <span class="n">m</span> <span class="o">=</span> <span class="n">Markdown</span><span class="p">(</span><span class="n">doc</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">---</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="o">*</span><span class="n">row</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">table</span>
        <span class="c1"># yield Panel(table, title_align=&quot;left&quot;, title=&quot;Processing stages&quot;)</span>

    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">steps_info_id</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;instance.steps_info&quot;</span>

    <span class="c1"># def __rich_console_old__(</span>
    <span class="c1">#     self, console: Console, options: ConsoleOptions</span>
    <span class="c1"># ) -&gt; RenderResult:</span>
    <span class="c1">#</span>
    <span class="c1">#     explanation = {}</span>
    <span class="c1">#</span>
    <span class="c1">#     for nr, stage in enumerate(self.processing_stages):</span>
    <span class="c1">#</span>
    <span class="c1">#         stage_details = {}</span>
    <span class="c1">#         for step_id in stage:</span>
    <span class="c1">#             step: StepDesc = self.steps[step_id]</span>
    <span class="c1">#             if step.required:</span>
    <span class="c1">#                 title = step_id</span>
    <span class="c1">#             else:</span>
    <span class="c1">#                 title = f&quot;{step_id} (optional)&quot;</span>
    <span class="c1">#             stage_details[title] = step.step.module.get_type_metadata().model_doc()</span>
    <span class="c1">#</span>
    <span class="c1">#         explanation[nr + 1] = stage_details</span>
    <span class="c1">#</span>
    <span class="c1">#     lines = []</span>
    <span class="c1">#     for stage_nr, stage_steps in explanation.items():</span>
    <span class="c1">#         lines.append(f&quot;[bold]Processing stage {stage_nr}[/bold]:&quot;)</span>
    <span class="c1">#         lines.append(&quot;&quot;)</span>
    <span class="c1">#         for step_id, desc in stage_steps.items():</span>
    <span class="c1">#             if desc == DEFAULT_NO_DESC_VALUE:</span>
    <span class="c1">#                 lines.append(f&quot;  - {step_id}&quot;)</span>
    <span class="c1">#             else:</span>
    <span class="c1">#                 lines.append(f&quot;  - {step_id}: [i]{desc}[/i]&quot;)</span>
    <span class="c1">#             lines.append(&quot;&quot;)</span>
    <span class="c1">#</span>
    <span class="c1">#     padding = (1, 2, 0, 2)</span>
    <span class="c1">#     yield Panel(</span>
    <span class="c1">#         &quot;\n&quot;.join(lines),</span>
    <span class="c1">#         box=box.ROUNDED,</span>
    <span class="c1">#         title_align=&quot;left&quot;,</span>
    <span class="c1">#         title=f&quot;Stages for pipeline: [b]{self.pipeline_id}[/b]&quot;,</span>
    <span class="c1">#         padding=padding,</span>
    <span class="c1">#     )</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.StepsInfo.processing_stages" class="doc doc-heading">
<code class="highlight language-python"><span class="n">processing_stages</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.pipelines.StepsInfo.processing_stages" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The stages in which the steps are processed.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.StepsInfo.steps" class="doc doc-heading">
<code class="highlight language-python"><span class="n">steps</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">StepDesc</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.pipelines.StepsInfo.steps" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A list of step details.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.pipelines.StepsInfo.steps_info_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">steps_info_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.info.pipelines.StepsInfo.steps_info_id" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Id for this steps information instance.</p>
    </div>

  </div>













  </div>

    </div>

  </div>









  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.info.types" class="doc doc-heading">
        <code>types</code>



<a href="#kiara.info.types" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.info.types.ValueTypeInfo" class="doc doc-heading">
        <code>
ValueTypeInfo            (<span title="kiara.info.KiaraInfoModel">KiaraInfoModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.info.types.ValueTypeInfo" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/info/types.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueTypeInfo</span><span class="p">(</span><span class="n">KiaraInfoModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_type_class</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">type_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;ValueType&quot;</span><span class="p">],</span> <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Kiara</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>

        <span class="n">type_attrs</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">extract_type_attributes</span><span class="p">(</span><span class="n">type_cls</span><span class="o">=</span><span class="n">type_cls</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">type_attrs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">extract_type_attributes</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">type_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;ValueType&quot;</span><span class="p">],</span> <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Kiara</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="n">origin_md</span> <span class="o">=</span> <span class="n">OriginMetadataModel</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">type_cls</span><span class="p">)</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">DocumentationMetadataModel</span><span class="o">.</span><span class="n">from_class_doc</span><span class="p">(</span><span class="n">type_cls</span><span class="p">)</span>
        <span class="n">python_class</span> <span class="o">=</span> <span class="n">PythonClassMetadata</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">type_cls</span><span class="p">)</span>
        <span class="n">properties_md</span> <span class="o">=</span> <span class="n">ContextMetadataModel</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">type_cls</span><span class="p">)</span>

        <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">type_cls</span><span class="o">.</span><span class="n">_value_type_name</span>  <span class="c1"># type: ignore</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">ValueTypeConfigMetadata</span><span class="o">.</span><span class="n">from_config_class</span><span class="p">(</span><span class="n">type_cls</span><span class="o">.</span><span class="n">type_config_cls</span><span class="p">())</span>

        <span class="n">metadata_keys</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">metadata_mgmt</span><span class="o">.</span><span class="n">get_metadata_keys_for_type</span><span class="p">(</span>
            <span class="n">value_type</span><span class="o">=</span><span class="n">value_type</span>
        <span class="p">)</span>
        <span class="n">metadata_models</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">MetadataModel</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">metadata_key</span> <span class="ow">in</span> <span class="n">metadata_keys</span><span class="p">:</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">metadata_mgmt</span><span class="o">.</span><span class="n">all_schemas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">metadata_key</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">schema</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">metadata_models</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">MetadataModelMetadata</span><span class="o">.</span><span class="n">from_model_class</span><span class="p">(</span>
                    <span class="n">schema</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;type_name&quot;</span><span class="p">:</span> <span class="n">type_cls</span><span class="o">.</span><span class="n">_value_type_name</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="s2">&quot;documentation&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">,</span>
            <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="n">origin_md</span><span class="p">,</span>
            <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="n">properties_md</span><span class="p">,</span>
            <span class="s2">&quot;python_class&quot;</span><span class="p">:</span> <span class="n">python_class</span><span class="p">,</span>
            <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="n">config</span><span class="p">,</span>
            <span class="s2">&quot;metadata_types&quot;</span><span class="p">:</span> <span class="n">metadata_models</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="n">type_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name under which the type is registered.&quot;</span><span class="p">)</span>
    <span class="n">documentation</span><span class="p">:</span> <span class="n">DocumentationMetadataModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The documentation for this value type.&quot;</span>
    <span class="p">)</span>
    <span class="n">origin</span><span class="p">:</span> <span class="n">OriginMetadataModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Information about authorship for the value type.&quot;</span>
    <span class="p">)</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">ContextMetadataModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic properties of this value type (description, tags, labels, references, ...).&quot;</span>
    <span class="p">)</span>
    <span class="n">python_class</span><span class="p">:</span> <span class="n">PythonClassMetadata</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Information about the Python class for this value type.&quot;</span>
    <span class="p">)</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">ValueTypeConfigMetadata</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Details on how this value type can be configured.&quot;</span>
    <span class="p">)</span>
    <span class="n">metadata_types</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataModelMetadata</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The available metadata types for this value type.&quot;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="n">include_config_schema</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_config_schema&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">include_doc</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_doc&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">include_full_metadata</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_full_metadata&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">,</span> <span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;property&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">include_doc</span><span class="p">:</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
                <span class="s2">&quot;Documentation&quot;</span><span class="p">,</span>
                <span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">(),</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Origin&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">())</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Context&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">include_config_schema</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">config</span><span class="p">:</span>
                <span class="n">config_cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">python_class</span><span class="o">.</span><span class="n">get_class</span><span class="p">()</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Type config&quot;</span><span class="p">,</span> <span class="n">create_table_from_base_model</span><span class="p">(</span><span class="n">config_cls</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Type config&quot;</span><span class="p">,</span> <span class="s2">&quot;-- no config --&quot;</span><span class="p">)</span>

        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Python class&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">python_class</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">include_full_metadata</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_types</span><span class="p">:</span>
            <span class="n">md_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">md</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_types</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">fields_table</span> <span class="o">=</span> <span class="n">md</span><span class="o">.</span><span class="n">create_fields_table</span><span class="p">(</span>
                    <span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">show_required</span><span class="o">=</span><span class="kc">False</span>
                <span class="p">)</span>
                <span class="n">md_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[i]</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">[/i]&quot;</span><span class="p">,</span> <span class="n">fields_table</span><span class="p">)</span>

            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Type metadata&quot;</span><span class="p">,</span> <span class="n">md_table</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">table</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.types.ValueTypeInfo.config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config</span><span class="p">:</span> <span class="n">ValueTypeConfigMetadata</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.types.ValueTypeInfo.config" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Details on how this value type can be configured.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.types.ValueTypeInfo.context" class="doc doc-heading">
<code class="highlight language-python"><span class="n">context</span><span class="p">:</span> <span class="n">ContextMetadataModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.types.ValueTypeInfo.context" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Generic properties of this value type (description, tags, labels, references, ...).</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.types.ValueTypeInfo.documentation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">documentation</span><span class="p">:</span> <span class="n">DocumentationMetadataModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.types.ValueTypeInfo.documentation" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The documentation for this value type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.types.ValueTypeInfo.metadata_types" class="doc doc-heading">
<code class="highlight language-python"><span class="n">metadata_types</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">core_models</span><span class="o">.</span><span class="n">MetadataModelMetadata</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.types.ValueTypeInfo.metadata_types" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The available metadata types for this value type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.types.ValueTypeInfo.origin" class="doc doc-heading">
<code class="highlight language-python"><span class="n">origin</span><span class="p">:</span> <span class="n">OriginMetadataModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.types.ValueTypeInfo.origin" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Information about authorship for the value type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.types.ValueTypeInfo.python_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">python_class</span><span class="p">:</span> <span class="n">PythonClassMetadata</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.types.ValueTypeInfo.python_class" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Information about the Python class for this value type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.info.types.ValueTypeInfo.type_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">type_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.info.types.ValueTypeInfo.type_name" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The name under which the type is registered.</p>
    </div>

  </div>













  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.interfaces" class="doc doc-heading">
        <code>interfaces</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.interfaces" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Implementation of interfaces for <em>Kiara</em>.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h3 id="kiara.interfaces.get_console" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_console</span><span class="p">()</span></code>


<a href="#kiara.interfaces.get_console" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Get a global Console instance.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Console</code></td>
      <td><p>A console instance.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/interfaces/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_console</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Console</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Get a global Console instance.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Console: A console instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_console</span>
    <span class="k">if</span> <span class="n">_console</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">console_width</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;CONSOLE_WIDTH&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">console_width</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">console_width</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="n">_console</span> <span class="o">=</span> <span class="n">Console</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">_console</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-module">



<h3 id="kiara.interfaces.cli" class="doc doc-heading">
        <code>cli</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.interfaces.cli" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>A command-line interface for <em>Kiara</em>.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h4 id="kiara.interfaces.cli.data" class="doc doc-heading">
        <code>data</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.interfaces.cli.data" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h5 id="kiara.interfaces.cli.data.commands" class="doc doc-heading">
        <code>commands</code>



<a href="#kiara.interfaces.cli.data.commands" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Data-related sub-commands for the cli.</p>



  <div class="doc doc-children">












  </div>

    </div>

  </div>




  </div>

    </div>

  </div>





  <div class="doc doc-object doc-module">



<h4 id="kiara.interfaces.cli.explain" class="doc doc-heading">
        <code>explain</code>



<a href="#kiara.interfaces.cli.explain" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The 'run' subcommand for the cli.</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h5 id="kiara.interfaces.cli.explain.KiaraEntityMatches" class="doc doc-heading">
        <code>
KiaraEntityMatches            (<span title="kiara.info.KiaraInfoModel">KiaraInfoModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.interfaces.cli.explain.KiaraEntityMatches" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/interfaces/cli/explain.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KiaraEntityMatches</span><span class="p">(</span><span class="n">KiaraInfoModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">search_term</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">search_ids</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">search_aliases</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">search_desc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">search_full_doc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Kiara</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="n">module_types</span> <span class="o">=</span> <span class="n">find_module_types</span><span class="p">(</span>
            <span class="n">item</span><span class="o">=</span><span class="n">search_term</span><span class="p">,</span>
            <span class="n">search_desc</span><span class="o">=</span><span class="n">search_desc</span><span class="p">,</span>
            <span class="n">search_full_doc</span><span class="o">=</span><span class="n">search_full_doc</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">operation_types</span> <span class="o">=</span> <span class="n">find_operation_types</span><span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">search_term</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>
        <span class="n">operations</span> <span class="o">=</span> <span class="n">find_operations</span><span class="p">(</span>
            <span class="n">item</span><span class="o">=</span><span class="n">search_term</span><span class="p">,</span>
            <span class="n">search_desc</span><span class="o">=</span><span class="n">search_desc</span><span class="p">,</span>
            <span class="n">search_full_doc</span><span class="o">=</span><span class="n">search_full_doc</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">find_values</span><span class="p">(</span>
            <span class="n">item</span><span class="o">=</span><span class="n">search_term</span><span class="p">,</span>
            <span class="n">search_ids</span><span class="o">=</span><span class="n">search_ids</span><span class="p">,</span>
            <span class="n">search_aliases</span><span class="o">=</span><span class="n">search_aliases</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">KiaraEntityMatches</span><span class="p">(</span>
            <span class="n">module_types</span><span class="o">=</span><span class="n">module_types</span><span class="p">,</span>
            <span class="n">operation_types</span><span class="o">=</span><span class="n">operation_types</span><span class="p">,</span>
            <span class="n">operations</span><span class="o">=</span><span class="n">operations</span><span class="p">,</span>
            <span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">module_types</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">KiaraModule</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">operation_types</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">OperationsMetadata</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">operations</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">Kiara</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="n">init_dict</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">module_types</span><span class="p">:</span>
            <span class="n">init_dict</span><span class="p">[</span><span class="s2">&quot;module_types&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">module_types</span>
        <span class="k">if</span> <span class="n">operation_types</span><span class="p">:</span>
            <span class="n">init_dict</span><span class="p">[</span><span class="s2">&quot;operation_types&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">operation_types</span>
        <span class="k">if</span> <span class="n">operations</span><span class="p">:</span>
            <span class="n">init_dict</span><span class="p">[</span><span class="s2">&quot;operations&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">operations</span>
        <span class="k">if</span> <span class="n">values</span><span class="p">:</span>
            <span class="n">init_dict</span><span class="p">[</span><span class="s2">&quot;values&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">init_dict</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span> <span class="o">=</span> <span class="n">kiara</span>

    <span class="n">_kiara</span><span class="p">:</span> <span class="n">Kiara</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The entity instance id.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="n">create_uuid4_string</span>
    <span class="p">)</span>
    <span class="n">module_types</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">KiaraModuleTypeMetadata</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Matching module types.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span>
    <span class="p">)</span>
    <span class="n">operation_types</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">OperationsMetadata</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Matching operation types.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span>
    <span class="p">)</span>
    <span class="n">operations</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Matching operations.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span>
    <span class="p">)</span>
    <span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueInfo</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Matching values.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;instance.entity&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">no_module_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module_types</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">no_operation_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operation_types</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">no_operations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">no_values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">no_results</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_module_types</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_operation_types</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_operations</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_values</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_single_result</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_results</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_types</span><span class="p">:</span>
            <span class="n">match_key</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module_types</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
            <span class="n">match_value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_types</span><span class="p">[</span><span class="n">match_key</span><span class="p">]</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">KiaraModuleTypeMetadata</span><span class="p">,</span> <span class="n">match_key</span><span class="p">,</span> <span class="n">match_value</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_types</span><span class="p">:</span>
            <span class="n">match_key</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operation_types</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
            <span class="n">match_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_types</span><span class="p">[</span><span class="n">match_key</span><span class="p">]</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">OperationsMetadata</span><span class="p">,</span> <span class="n">match_key</span><span class="p">,</span> <span class="n">match_value</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">:</span>
            <span class="n">match_key</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
            <span class="n">match_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">[</span><span class="n">match_key</span><span class="p">]</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">Operation</span><span class="p">,</span> <span class="n">match_key</span><span class="p">,</span> <span class="n">match_value</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
            <span class="n">match_key</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
            <span class="n">match_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">match_key</span><span class="p">]</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">ValueInfo</span><span class="p">,</span> <span class="n">match_key</span><span class="p">,</span> <span class="n">match_value</span><span class="p">)</span>

        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No match found. This is a bug.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;KiaraEntityMatches&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KiaraEntityMatches&quot;</span><span class="p">:</span>

        <span class="n">module_types</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module_types</span><span class="p">)</span>
        <span class="n">module_types</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">module_types</span><span class="p">)</span>

        <span class="n">operation_types</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operation_types</span><span class="p">)</span>
        <span class="n">operation_types</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">operation_types</span><span class="p">)</span>

        <span class="n">operations</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">)</span>
        <span class="n">operations</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">operations</span><span class="p">)</span>

        <span class="n">values</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
        <span class="n">values</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">KiaraEntityMatches</span><span class="p">(</span>
            <span class="n">module_types</span><span class="o">=</span><span class="n">module_types</span><span class="p">,</span>
            <span class="n">operation_types</span><span class="o">=</span><span class="n">operation_types</span><span class="p">,</span>
            <span class="n">operations</span><span class="o">=</span><span class="n">operations</span><span class="p">,</span>
            <span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Id&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">)</span>

        <span class="n">empty_line</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_types</span><span class="p">:</span>

            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">()</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;[b]Module types[/b]&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">module_type</span><span class="p">,</span> <span class="n">module_type_info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_types</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;  [i]</span><span class="si">{</span><span class="n">module_type</span><span class="si">}</span><span class="s2">[/i]&quot;</span><span class="p">,</span>
                    <span class="n">module_type_info</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="n">empty_line</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_types</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">empty_line</span><span class="p">:</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">()</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;[b]Operation types[/b]&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_type_info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_types</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;  [i]</span><span class="si">{</span><span class="n">op_type</span><span class="si">}</span><span class="s2">[/i]&quot;</span><span class="p">,</span> <span class="n">op_type_info</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">description</span>
                <span class="p">)</span>

            <span class="n">empty_line</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">empty_line</span><span class="p">:</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">()</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;[b]Operations[/b]&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">op_id</span><span class="p">,</span> <span class="n">op_info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  [i]</span><span class="si">{</span><span class="n">op_id</span><span class="si">}</span><span class="s2">[/i]&quot;</span><span class="p">,</span> <span class="n">op_info</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>

            <span class="n">empty_line</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">empty_line</span><span class="p">:</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">()</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;[b]Values[/b]&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">value_id</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  [i]</span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">[/i]&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">table</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h6 id="kiara.interfaces.cli.explain.KiaraEntityMatches.id" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.interfaces.cli.explain.KiaraEntityMatches.id" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>The entity instance id.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="kiara.interfaces.cli.explain.KiaraEntityMatches.module_types" class="doc doc-heading">
<code class="highlight language-python"><span class="n">module_types</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">module_models</span><span class="o">.</span><span class="n">KiaraModuleTypeMetadata</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.interfaces.cli.explain.KiaraEntityMatches.module_types" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Matching module types.</p>
    </div>

  </div>








  <div class="doc doc-object doc-attribute">



<h6 id="kiara.interfaces.cli.explain.KiaraEntityMatches.operation_types" class="doc doc-heading">
<code class="highlight language-python"><span class="n">operation_types</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">operation_models</span><span class="o">.</span><span class="n">OperationsMetadata</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.interfaces.cli.explain.KiaraEntityMatches.operation_types" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Matching operation types.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="kiara.interfaces.cli.explain.KiaraEntityMatches.operations" class="doc doc-heading">
<code class="highlight language-python"><span class="n">operations</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">Operation</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.interfaces.cli.explain.KiaraEntityMatches.operations" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Matching operations.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="kiara.interfaces.cli.explain.KiaraEntityMatches.values" class="doc doc-heading">
<code class="highlight language-python"><span class="n">values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ValueInfo</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.interfaces.cli.explain.KiaraEntityMatches.values" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Matching values.</p>
    </div>

  </div>

















  </div>

    </div>

  </div>











  </div>

    </div>

  </div>




  <div class="doc doc-object doc-module">



<h4 id="kiara.interfaces.cli.metadata" class="doc doc-heading">
        <code>metadata</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.interfaces.cli.metadata" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Metadata-related sub-commands for the cli.</p>



  <div class="doc doc-children">












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="kiara.interfaces.cli.module" class="doc doc-heading">
        <code>module</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.interfaces.cli.module" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h5 id="kiara.interfaces.cli.module.commands" class="doc doc-heading">
        <code>commands</code>



<a href="#kiara.interfaces.cli.module.commands" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Module related subcommands for the cli.</p>


    </div>

  </div>




  </div>

    </div>

  </div>




  <div class="doc doc-object doc-module">



<h4 id="kiara.interfaces.cli.pipeline" class="doc doc-heading">
        <code>pipeline</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.interfaces.cli.pipeline" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h5 id="kiara.interfaces.cli.pipeline.commands" class="doc doc-heading">
        <code>commands</code>



<a href="#kiara.interfaces.cli.pipeline.commands" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Pipeline-related subcommands for the cli.</p>


    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="kiara.interfaces.cli.run" class="doc doc-heading">
        <code>run</code>



<a href="#kiara.interfaces.cli.run" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The 'run' subcommand for the cli.</p>


    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="kiara.interfaces.cli.type" class="doc doc-heading">
        <code>type</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.interfaces.cli.type" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h5 id="kiara.interfaces.cli.type.commands" class="doc doc-heading">
        <code>commands</code>



<a href="#kiara.interfaces.cli.type.commands" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Type-related subcommands for the cli.</p>


    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="kiara.interfaces.cli.utils" class="doc doc-heading">
        <code>utils</code>



<a href="#kiara.interfaces.cli.utils" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Shared utilties to be used by cli sub-commands.</p>


    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.interfaces.python_api" class="doc doc-heading">
        <code>python_api</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.interfaces.python_api" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>A Python API for creating workflow sessions and dynamic pipelines in <em>kiara</em>.</p>



  <div class="doc doc-children">













  <div class="doc doc-object doc-class">



<h4 id="kiara.interfaces.python_api.StepInfo" class="doc doc-heading">
        <code>
StepInfo            (<span title="rich.jupyter.JupyterMixin">JupyterMixin</span>, <span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.interfaces.python_api.StepInfo" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/interfaces/python_api/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StepInfo</span><span class="p">(</span><span class="n">JupyterMixin</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>

    <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The step id.&quot;</span><span class="p">)</span>
    <span class="n">module_metadata</span><span class="p">:</span> <span class="n">KiaraModuleInstanceMetadata</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The module metadata.&quot;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="n">doc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_metadata</span><span class="o">.</span><span class="n">type_metadata</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">()</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_metadata</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">(</span><span class="n">include_doc</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">panel</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span>
            <span class="n">RenderGroup</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">Panel</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">),</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">),</span>
            <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Step info: [b]</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">[/b] (type: [i]</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">module_metadata</span><span class="o">.</span><span class="n">type_metadata</span><span class="o">.</span><span class="n">type_id</span><span class="si">}</span><span class="s2">[/i])&quot;</span><span class="p">,</span>
            <span class="n">title_align</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">yield</span> <span class="n">panel</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.interfaces.python_api.StepInfo.module_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">module_metadata</span><span class="p">:</span> <span class="n">KiaraModuleInstanceMetadata</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.interfaces.python_api.StepInfo.module_metadata" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The module metadata.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.interfaces.python_api.StepInfo.step_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.interfaces.python_api.StepInfo.step_id" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The step id.</p>
    </div>

  </div>











  </div>

    </div>

  </div>








  <div class="doc doc-object doc-module">



<h4 id="kiara.interfaces.python_api.controller" class="doc doc-heading">
        <code>controller</code>



<a href="#kiara.interfaces.python_api.controller" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h5 id="kiara.interfaces.python_api.controller.ApiController" class="doc doc-heading">
        <code>
ApiController            (<a class="autorefs autorefs-internal" title="kiara.pipeline.controller.PipelineController" href="../pipeline/controller/__init__/#kiara.pipeline.controller.PipelineController">PipelineController</a>)
        </code>



<a href="#kiara.interfaces.python_api.controller.ApiController" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A pipeline controller for pipelines generated by the <em>kiara</em> Python API.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/interfaces/python_api/controller.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ApiController</span><span class="p">(</span><span class="n">PipelineController</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A pipeline controller for pipelines generated by the *kiara* Python API.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">pipeline</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Pipeline</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">processor</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ModuleProcessor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">pipeline</span><span class="o">=</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">processor</span><span class="o">=</span><span class="n">processor</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already running.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">:</span>
                <span class="n">job_ids</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                            <span class="k">continue</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="c1"># from kiara.utils.output import rich_print</span>
                            <span class="c1"># rich_print(self.pipeline.get_current_state())</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;Required pipeline step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; can&#39;t be processed, inputs not ready yet: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span>
                            <span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>

                            <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                            <span class="n">job_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="c1"># TODO: cancel running jobs?</span>
                        <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Processing of step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; from pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39; failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                        <span class="k">return</span> <span class="kc">False</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">StepInputEvent</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">updated_step_inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="c1"># outputs = self.get_step_outputs(step_id)</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
            <span class="c1"># outputs.invalidate()</span>

    <span class="k">def</span> <span class="nf">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">PipelineInputEvent</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;PipelineOutputEvent&quot;</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_finished</span><span class="p">():</span>
            <span class="c1"># TODO: check if something is running</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">get_pipeline_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ensure_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

        <span class="n">outputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">outputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="n">field_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_pipeline_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ensure_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

        <span class="n">outputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">outputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="n">field_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Process the specified step.</span>

<span class="sd">        Returns:</span>
<span class="sd">            &#39;None&#39;, if no processing was needed, but the step output is valid, &#39;False&#39; if it&#39;s not possible to process the step, or a string which represents the job id of the processing</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Required pipeline step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; can&#39;t be processed, inputs not ready yet: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>
                <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">job_id</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># TODO: cancel running jobs?</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Processing of step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; from pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39; failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">ensure_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Ensure a step has valid outputs.</span>

<span class="sd">        Returns:</span>
<span class="sd">            &#39;True&#39; if the step now has valid outputs, &#39;False` if that&#39;s not possible because of invalid/missing inputs</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">step_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">step_ids</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No step with id: </span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">outputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="o">=</span><span class="n">step_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">outputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already running.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">:</span>
                <span class="n">job_ids</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">finished</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
                    <span class="n">finished</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process</span><span class="p">(</span><span class="n">step_id</span><span class="o">=</span><span class="n">step_id</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">job_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">return</span> <span class="kc">True</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">job_id</span><span class="p">:</span>
                        <span class="k">return</span> <span class="kc">False</span>
                    <span class="n">job_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">s_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
                        <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process</span><span class="p">(</span><span class="n">step_id</span><span class="o">=</span><span class="n">s_id</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">job_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">continue</span>
                        <span class="k">elif</span> <span class="n">job_id</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                            <span class="k">return</span> <span class="kc">False</span>

                        <span class="n">job_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">finished</span><span class="p">:</span>
                    <span class="k">break</span>

        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h6 id="kiara.interfaces.python_api.controller.ApiController.ensure_step" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ensure_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.interfaces.python_api.controller.ApiController.ensure_step" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Ensure a step has valid outputs.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>'True' if the step now has valid outputs, 'False` if that's not possible because of invalid/missing inputs</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/interfaces/python_api/controller.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ensure_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Ensure a step has valid outputs.</span>

<span class="sd">    Returns:</span>
<span class="sd">        &#39;True&#39; if the step now has valid outputs, &#39;False` if that&#39;s not possible because of invalid/missing inputs</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">step_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">step_ids</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No step with id: </span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">outputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="o">=</span><span class="n">step_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">outputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already running.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">:</span>
            <span class="n">job_ids</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">finished</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
                <span class="n">finished</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process</span><span class="p">(</span><span class="n">step_id</span><span class="o">=</span><span class="n">step_id</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">job_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">job_id</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="n">job_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">s_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
                    <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process</span><span class="p">(</span><span class="n">step_id</span><span class="o">=</span><span class="n">s_id</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">job_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">elif</span> <span class="n">job_id</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                        <span class="k">return</span> <span class="kc">False</span>

                    <span class="n">job_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">finished</span><span class="p">:</span>
                <span class="k">break</span>

    <span class="k">finally</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h6 id="kiara.interfaces.python_api.controller.ApiController.pipeline_inputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.interfaces.python_api.controller.ApiController.pipeline_inputs_changed" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several pipeline inputs have changed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
</div>
<p>Whenever pipeline inputs change, the connected step inputs also change and an (extra) event will be fired for those. Which means
you can choose to only implement the <code>step_inputs_changed</code> method if you want to. This behaviour might change in the future.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>PipelineInputEvent</code></td>
        <td><p>the pipeline input event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/interfaces/python_api/controller.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">PipelineInputEvent</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="kiara.interfaces.python_api.controller.ApiController.pipeline_outputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.interfaces.python_api.controller.ApiController.pipeline_outputs_changed" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several pipeline outputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>PipelineOutputEvent</code></td>
        <td><p>the pipeline output event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/interfaces/python_api/controller.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;PipelineOutputEvent&quot;</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_finished</span><span class="p">():</span>
        <span class="c1"># TODO: check if something is running</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="kiara.interfaces.python_api.controller.ApiController.process_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.interfaces.python_api.controller.ApiController.process_pipeline" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Execute the connected pipeline end-to-end.</p>
<p>Controllers can elect to overwrite this method, but this is optional.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/interfaces/python_api/controller.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already running.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">:</span>
            <span class="n">job_ids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                        <span class="k">continue</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># from kiara.utils.output import rich_print</span>
                        <span class="c1"># rich_print(self.pipeline.get_current_state())</span>
                        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Required pipeline step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; can&#39;t be processed, inputs not ready yet: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>

                        <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                        <span class="n">job_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="c1"># TODO: cancel running jobs?</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Processing of step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; from pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39; failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="kiara.interfaces.python_api.controller.ApiController.step_inputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.interfaces.python_api.controller.ApiController.step_inputs_changed" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several step inputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>StepInputEvent</code></td>
        <td><p>the step input event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/interfaces/python_api/controller.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">StepInputEvent</span><span class="p">):</span>

    <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">updated_step_inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="c1"># outputs = self.get_step_outputs(step_id)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
        <span class="c1"># outputs.invalidate()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.kiara" class="doc doc-heading">
        <code>kiara</code>



<a href="#kiara.kiara" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Main module.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h3 id="kiara.kiara.Kiara" class="doc doc-heading">
        <code>
Kiara        </code>



<a href="#kiara.kiara.Kiara" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>The core context of a kiara session.</p>
<p>The <code>Kiara</code> object holds all information related to the current environment the user does works in. This includes:</p>
<ul>
<li>available modules, operations &amp; pipelines</li>
<li>available value types</li>
<li>available metadata schemas</li>
<li>available data items</li>
<li>available controller and processor types</li>
<li>misc. configuration options</li>
</ul>
<p>It's possible to use <em>kiara</em> without ever manually touching the 'Kiara' class, by default all relevant classes and functions
will use a default instance of this class (available via the <code>Kiara.instance()</code> method.</p>
<p>The Kiara class is highly dependent on the Python environment it lives in, because it auto-discovers available sub-classes
of its building blocks (modules, value types, etc.). So, you can't assume that, for example, a pipeline you create
will work the same way (or at all) in a different environment. <em>kiara</em> will always be able to tell you all the details
of this environment, though, and it will attach those details to things like data, so there is always a record of
how something was created, and in which environment.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/kiara.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Kiara</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The core context of a kiara session.</span>

<span class="sd">    The `Kiara` object holds all information related to the current environment the user does works in. This includes:</span>

<span class="sd">      - available modules, operations &amp; pipelines</span>
<span class="sd">      - available value types</span>
<span class="sd">      - available metadata schemas</span>
<span class="sd">      - available data items</span>
<span class="sd">      - available controller and processor types</span>
<span class="sd">      - misc. configuration options</span>

<span class="sd">    It&#39;s possible to use *kiara* without ever manually touching the &#39;Kiara&#39; class, by default all relevant classes and functions</span>
<span class="sd">    will use a default instance of this class (available via the `Kiara.instance()` method.</span>

<span class="sd">    The Kiara class is highly dependent on the Python environment it lives in, because it auto-discovers available sub-classes</span>
<span class="sd">    of its building blocks (modules, value types, etc.). So, you can&#39;t assume that, for example, a pipeline you create</span>
<span class="sd">    will work the same way (or at all) in a different environment. *kiara* will always be able to tell you all the details</span>
<span class="sd">    of this environment, though, and it will attach those details to things like data, so there is always a record of</span>
<span class="sd">    how something was created, and in which environment.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_instance</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The default *kiara* context. In most cases, it&#39;s recommended you create and manage your own, though.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="n">Kiara</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">KiaraConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="p">:</span>
            <span class="n">config</span> <span class="o">=</span> <span class="n">KiaraConfig</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span> <span class="n">KiaraConfig</span> <span class="o">=</span> <span class="n">config</span>

        <span class="c1"># self._zmq_context: Context = Context.instance()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_operation_mgmt</span> <span class="o">=</span> <span class="n">OperationMgmt</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_metadata_mgmt</span> <span class="o">=</span> <span class="n">MetadataMgmt</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_data_store</span> <span class="o">=</span> <span class="n">LocalDataStore</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_path</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">data_store</span><span class="p">)</span>

        <span class="c1"># self.start_zmq_device()</span>
        <span class="c1"># self.start_log_thread()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_processor</span><span class="p">:</span> <span class="n">ModuleProcessor</span> <span class="o">=</span> <span class="n">ModuleProcessor</span><span class="o">.</span><span class="n">from_config</span><span class="p">(</span>
            <span class="n">config</span><span class="o">.</span><span class="n">default_processor</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_type_mgmt_obj</span><span class="p">:</span> <span class="n">TypeMgmt</span> <span class="o">=</span> <span class="n">TypeMgmt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="p">:</span> <span class="n">InMemoryDataRegistry</span> <span class="o">=</span> <span class="n">InMemoryDataRegistry</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgr</span><span class="p">:</span> <span class="n">MergedModuleManager</span> <span class="o">=</span> <span class="n">MergedModuleManager</span><span class="p">(</span>
            <span class="n">config</span><span class="o">.</span><span class="n">module_managers</span><span class="p">,</span>
            <span class="n">extra_pipeline_folders</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">extra_pipeline_folders</span><span class="p">,</span>
            <span class="n">ignore_errors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">ignore_errors</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_template_mgmt</span><span class="p">:</span> <span class="n">TemplateRenderingMgmt</span> <span class="o">=</span> <span class="n">TemplateRenderingMgmt</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KiaraConfig</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The configuration of this *kiara* environment.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ModuleProcessor&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The default module processor that will be used in this environment, unless otherwise specified.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_processor</span>

    <span class="k">def</span> <span class="nf">start_zmq_device</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">pd</span> <span class="o">=</span> <span class="n">ThreadDevice</span><span class="p">(</span><span class="n">zmq</span><span class="o">.</span><span class="n">QUEUE</span><span class="p">,</span> <span class="n">zmq</span><span class="o">.</span><span class="n">SUB</span><span class="p">,</span> <span class="n">zmq</span><span class="o">.</span><span class="n">PUB</span><span class="p">)</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">bind_in</span><span class="p">(</span><span class="s2">&quot;inproc://kiara_in&quot;</span><span class="p">)</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">bind_out</span><span class="p">(</span><span class="s2">&quot;inproc://kiara_out&quot;</span><span class="p">)</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">setsockopt_in</span><span class="p">(</span><span class="n">zmq</span><span class="o">.</span><span class="n">SUBSCRIBE</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">setsockopt_in</span><span class="p">(</span><span class="n">zmq</span><span class="o">.</span><span class="n">IDENTITY</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;SUB&quot;</span><span class="p">)</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">setsockopt_out</span><span class="p">(</span><span class="n">zmq</span><span class="o">.</span><span class="n">IDENTITY</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;PUB&quot;</span><span class="p">)</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">start_log_thread</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">log_messages</span><span class="p">():</span>
            <span class="n">socket</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zmq_context</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">zmq</span><span class="o">.</span><span class="n">SUB</span><span class="p">)</span>
            <span class="n">socket</span><span class="o">.</span><span class="n">setsockopt_string</span><span class="p">(</span><span class="n">zmq</span><span class="o">.</span><span class="n">SUBSCRIBE</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">socket</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;inproc://kiara_out&quot;</span><span class="p">)</span>

            <span class="n">debug</span> <span class="o">=</span> <span class="n">is_debug</span><span class="p">()</span>

            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
                <span class="n">topic</span><span class="p">,</span> <span class="n">details</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">job</span> <span class="o">=</span> <span class="n">Job</span><span class="o">.</span><span class="n">parse_raw</span><span class="p">(</span><span class="n">details</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">job</span><span class="o">.</span><span class="n">pipeline_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">job</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">job</span><span class="o">.</span><span class="n">pipeline_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">job</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
                        <span class="kn">import</span> <span class="nn">traceback</span>

                        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exception</span><span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">log_messages</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">explain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">):</span>
        <span class="n">explain</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">type_mgmt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TypeMgmt</span><span class="p">:</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_mgmt_obj</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data_store</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalDataStore</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_store</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">module_mgmt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MergedModuleManager</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgr</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">metadata_mgmt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MetadataMgmt</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata_mgmt</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_types</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value_type_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span>

    <span class="k">def</span> <span class="nf">determine_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]:</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

        <span class="c1"># return self.type_mgmt.determine_type(data)</span>

    <span class="k">def</span> <span class="nf">get_value_type_cls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">type_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]:</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">get_value_type_cls</span><span class="p">(</span><span class="n">type_name</span><span class="o">=</span><span class="n">type_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value_id</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; for value id, must be a string.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">value_id</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;value:&quot;</span><span class="p">):</span>
            <span class="n">value_id</span> <span class="o">=</span> <span class="n">value_id</span><span class="p">[</span><span class="mi">6</span><span class="p">:]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">value_id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No value id provided.&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_registry</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value with id: </span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_store</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value with id: </span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value registered for id: </span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_module_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module_manager</span><span class="p">:</span> <span class="n">ModuleManager</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgr</span><span class="o">.</span><span class="n">add_module_manager</span><span class="p">(</span><span class="n">module_manager</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_mgmt_obj</span><span class="o">.</span><span class="n">invalidate_types</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data_registry</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataRegistry</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">operation_mgmt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OperationMgmt</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_operation_mgmt</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">template_mgmt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TemplateRenderingMgmt</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_template_mgmt</span>

    <span class="k">def</span> <span class="nf">get_module_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgr</span><span class="o">.</span><span class="n">get_module_class</span><span class="p">(</span><span class="n">module_type</span><span class="o">=</span><span class="n">module_type</span><span class="p">)</span>

    <span class="c1"># def get_module_info(self, module_type: str) -&gt; &quot;ModuleInfo&quot;:</span>
    <span class="c1">#</span>
    <span class="c1">#     if module_type not in self.available_module_types:</span>
    <span class="c1">#         raise ValueError(f&quot;Module type &#39;{module_type}&#39; not available.&quot;)</span>
    <span class="c1">#</span>
    <span class="c1">#     if module_type in self.available_pipeline_module_types:</span>
    <span class="c1">#         from kiara.pipeline.module import PipelineModuleInfo</span>
    <span class="c1">#</span>
    <span class="c1">#         info = PipelineModuleInfo(module_type=module_type, _kiara=self)  # type: ignore</span>
    <span class="c1">#         return info</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         from kiara.module import ModuleInfo</span>
    <span class="c1">#</span>
    <span class="c1">#         info = ModuleInfo.from_module_cls(module_cls=module_type)</span>
    <span class="c1">#         return info</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">available_module_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return the names of all available modules&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgr</span><span class="o">.</span><span class="n">available_module_types</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">available_non_pipeline_module_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return the names of all available pipeline-type modules.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgr</span><span class="o">.</span><span class="n">available_non_pipeline_module_types</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">available_pipeline_module_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return the names of all available pipeline-type modules.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgr</span><span class="o">.</span><span class="n">available_pipeline_module_types</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">available_operation_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_operation_mgmt</span><span class="o">.</span><span class="n">operation_ids</span>

    <span class="k">def</span> <span class="nf">is_pipeline_module</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgr</span><span class="o">.</span><span class="n">is_pipeline_module</span><span class="p">(</span><span class="n">module_type</span><span class="o">=</span><span class="n">module_type</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">register_pipeline_description</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]],</span>
        <span class="n">module_type_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">namespace</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">raise_exception</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgr</span><span class="o">.</span><span class="n">register_pipeline_description</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="n">module_type_name</span><span class="o">=</span><span class="n">module_type_name</span><span class="p">,</span>
            <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span><span class="p">,</span>
            <span class="n">raise_exception</span><span class="o">=</span><span class="n">raise_exception</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_module</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parent_id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KiaraModule&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Create a module instance.</span>

<span class="sd">        The &#39;module_type&#39; argument can be a module type id, or an operation id. In case of the latter, the &#39;real&#39; module_type</span>
<span class="sd">        and module_config will be resolved via the operation management.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            module_type: the module type- or operation-id</span>
<span class="sd">            module_config: the module instance configuration (must be empty in case of the module_type being an operation id</span>
<span class="sd">            id: the id of this module, only relevant if the module is part of a pipeline, in which case it must be unique within the pipeline</span>
<span class="sd">            parent_id: a reference to the pipeline that contains this module (if applicable)</span>

<span class="sd">        Returns:</span>
<span class="sd">            The instantiated module object.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">module_type</span> <span class="o">==</span> <span class="s2">&quot;pipeline&quot;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara</span> <span class="kn">import</span> <span class="n">PipelineModule</span>

            <span class="n">module</span> <span class="o">=</span> <span class="n">PipelineModule</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">parent_id</span><span class="o">=</span><span class="n">parent_id</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">module</span>

        <span class="k">elif</span> <span class="p">(</span>
            <span class="n">module_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_module_types</span>
            <span class="ow">and</span> <span class="n">module_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">operation_ids</span>
        <span class="p">):</span>
            <span class="n">op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">get_operation</span><span class="p">(</span><span class="n">module_type</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">op</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="n">module_type</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module_type</span>
            <span class="n">op_config</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module_config</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">module_config</span><span class="p">:</span>
                <span class="n">_module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
                    <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>
                <span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_module_config</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">op_config</span><span class="p">)</span>
                <span class="n">_module_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">module_config</span><span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span>
            <span class="n">module_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_module_types</span>
            <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">module_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">module_type</span><span class="p">)))</span>
        <span class="p">):</span>

            <span class="k">if</span> <span class="n">module_config</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="s2">&quot;Creating pipeline module from file with extra module_config not supported (yet).&quot;</span>
                <span class="p">)</span>

            <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">module_type</span><span class="p">)</span>
            <span class="n">pipeline_config_data</span> <span class="o">=</span> <span class="n">get_data_from_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="n">pipeline_config</span> <span class="o">=</span> <span class="n">PipelineConfig</span><span class="p">(</span><span class="o">**</span><span class="n">pipeline_config_data</span><span class="p">)</span>

            <span class="kn">from</span> <span class="nn">kiara</span> <span class="kn">import</span> <span class="n">PipelineModule</span>

            <span class="n">module</span> <span class="o">=</span> <span class="n">PipelineModule</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">parent_id</span><span class="o">=</span><span class="n">parent_id</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">pipeline_config</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">module</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">_module_config</span> <span class="o">=</span> <span class="n">module_config</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgr</span><span class="o">.</span><span class="n">create_module</span><span class="p">(</span>
            <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
            <span class="n">module_type</span><span class="o">=</span><span class="n">module_type</span><span class="p">,</span>
            <span class="n">module_config</span><span class="o">=</span><span class="n">_module_config</span><span class="p">,</span>
            <span class="n">parent_id</span><span class="o">=</span><span class="n">parent_id</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_module_doc</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_module</span><span class="p">(</span><span class="n">module_type</span><span class="o">=</span><span class="n">module_type</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">module_instance_doc</span>

    <span class="k">def</span> <span class="nf">get_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Operation</span><span class="p">:</span>

        <span class="n">op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">profiles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">operation_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">op</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No operation with id &#39;</span><span class="si">{</span><span class="n">operation_id</span><span class="si">}</span><span class="s2">&#39; available.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">op</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">module_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">],</span>
        <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">output_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">resolve_result</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSet</span><span class="p">,</span> <span class="n">Value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">module_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">module_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_module_types</span><span class="p">:</span>
                <span class="n">module</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_module</span><span class="p">(</span>
                    <span class="n">module_type</span><span class="o">=</span><span class="n">module_type</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">module_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">profiles</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">module_config</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
                <span class="n">op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">profiles</span><span class="p">[</span><span class="n">module_type</span><span class="p">]</span>
                <span class="n">module</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module</span>
            <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">module_type</span><span class="p">))):</span>
                <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">module_type</span><span class="p">)</span>
                <span class="n">pipeline_config_data</span> <span class="o">=</span> <span class="n">get_data_from_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                <span class="c1"># pipeline_config = PipelineConfig(**pipeline_config_data)</span>
                <span class="n">module</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_module</span><span class="p">(</span>
                    <span class="s2">&quot;pipeline&quot;</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">pipeline_config_data</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t run operation: invalid module type &#39;</span><span class="si">{</span><span class="n">module_type</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">module_type</span><span class="p">,</span> <span class="n">Operation</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">module_config</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
            <span class="n">module</span> <span class="o">=</span> <span class="n">module_type</span><span class="o">.</span><span class="n">module</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid class for module_type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">module_type</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_module</span><span class="p">(</span>
            <span class="n">module</span><span class="o">=</span><span class="n">module</span><span class="p">,</span>
            <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span>
            <span class="n">output_name</span><span class="o">=</span><span class="n">output_name</span><span class="p">,</span>
            <span class="n">resolve_result</span><span class="o">=</span><span class="n">resolve_result</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">run_module</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">module</span><span class="p">:</span> <span class="s2">&quot;KiaraModule&quot;</span><span class="p">,</span>
        <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">output_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">resolve_result</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="k">if</span> <span class="n">inputs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">inputs</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">output_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resolve_result</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">v</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">v</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">resolve_result</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">get_all_value_data</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">create_pipeline</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">PipelineConfig</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">controller</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">PipelineController</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Pipeline</span><span class="p">:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="n">pipeline_config</span><span class="p">:</span> <span class="n">PipelineConfig</span> <span class="o">=</span> <span class="n">PipelineConfig</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">config</span> <span class="o">==</span> <span class="s2">&quot;pipeline&quot;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="s2">&quot;Can&#39;t create pipeline from &#39;pipeline&#39; module type without further configuration.&quot;</span>
                <span class="p">)</span>

            <span class="c1"># TODO: if already a pipeline, don&#39;t wrap</span>
            <span class="c1"># if config in self.available_pipeline_module_types:</span>
            <span class="c1">#     pass</span>
            <span class="k">if</span> <span class="n">config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_module_types</span><span class="p">:</span>
                <span class="n">config_data</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;steps&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="n">config</span><span class="p">,</span>
                            <span class="s2">&quot;step_id&quot;</span><span class="p">:</span> <span class="n">create_valid_identifier</span><span class="p">(</span><span class="n">config</span><span class="p">),</span>
                        <span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">}</span>
                <span class="n">pipeline_config</span> <span class="o">=</span> <span class="n">PipelineConfig</span><span class="p">(</span><span class="o">**</span><span class="n">config_data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">))):</span>
                <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
                <span class="n">pipeline_config_data</span> <span class="o">=</span> <span class="n">get_data_from_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                <span class="n">pipeline_config</span> <span class="o">=</span> <span class="n">PipelineConfig</span><span class="p">(</span><span class="o">**</span><span class="n">pipeline_config_data</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t create pipeline config from string &#39;</span><span class="si">{</span><span class="n">config</span><span class="si">}</span><span class="s2">&#39;. Value must be path to a file, or one of: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">available_module_types</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">PipelineConfig</span><span class="p">):</span>
            <span class="n">pipeline_config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; for pipeline configuration.&quot;</span>
            <span class="p">)</span>

        <span class="n">pipeline</span> <span class="o">=</span> <span class="n">pipeline_config</span><span class="o">.</span><span class="n">create_pipeline</span><span class="p">(</span><span class="n">controller</span><span class="o">=</span><span class="n">controller</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pipeline</span>

    <span class="k">def</span> <span class="nf">create_workflow_from_operation_config</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="s2">&quot;ModuleConfig&quot;</span><span class="p">,</span>
        <span class="n">workflow_id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">controller</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">PipelineController</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">workflow_id</span><span class="p">:</span>
            <span class="n">workflow_id</span> <span class="o">=</span> <span class="n">get_auto_workflow_alias</span><span class="p">(</span>
                <span class="n">config</span><span class="o">.</span><span class="n">module_type</span><span class="p">,</span> <span class="n">use_incremental_ids</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>

        <span class="n">workflow</span> <span class="o">=</span> <span class="n">KiaraWorkflow</span><span class="p">(</span>
            <span class="n">workflow_id</span><span class="o">=</span><span class="n">workflow_id</span><span class="p">,</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">controller</span><span class="o">=</span><span class="n">controller</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">workflow</span>

    <span class="k">def</span> <span class="nf">create_workflow</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ModuleConfig</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">workflow_id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">controller</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">PipelineController</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KiaraWorkflow</span><span class="p">:</span>

        <span class="n">_config</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="o">.</span><span class="n">create_module_config</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_workflow_from_operation_config</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">_config</span><span class="p">,</span> <span class="n">workflow_id</span><span class="o">=</span><span class="n">workflow_id</span><span class="p">,</span> <span class="n">controller</span><span class="o">=</span><span class="n">controller</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">pretty_print</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span>
        <span class="n">target_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;renderables&quot;</span><span class="p">,</span>
        <span class="n">print_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="n">pretty_print_ops</span><span class="p">:</span> <span class="n">PrettyPrintOperationType</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">get_operations</span><span class="p">(</span><span class="s2">&quot;pretty_print&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="k">return</span> <span class="n">pretty_print_ops</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">target_type</span><span class="o">=</span><span class="n">target_type</span><span class="p">,</span> <span class="n">print_config</span><span class="o">=</span><span class="n">print_config</span>
        <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.kiara.Kiara.available_module_types" class="doc doc-heading">
<code class="highlight language-python"><span class="n">available_module_types</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.kiara.Kiara.available_module_types" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return the names of all available modules</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.kiara.Kiara.available_non_pipeline_module_types" class="doc doc-heading">
<code class="highlight language-python"><span class="n">available_non_pipeline_module_types</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.kiara.Kiara.available_non_pipeline_module_types" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return the names of all available pipeline-type modules.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h4 id="kiara.kiara.Kiara.available_pipeline_module_types" class="doc doc-heading">
<code class="highlight language-python"><span class="n">available_pipeline_module_types</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.kiara.Kiara.available_pipeline_module_types" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return the names of all available pipeline-type modules.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.kiara.Kiara.config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config</span><span class="p">:</span> <span class="n">KiaraConfig</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.kiara.Kiara.config" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The configuration of this <em>kiara</em> environment.</p>
    </div>

  </div>





  <div class="doc doc-object doc-attribute">



<h4 id="kiara.kiara.Kiara.default_processor" class="doc doc-heading">
<code class="highlight language-python"><span class="n">default_processor</span><span class="p">:</span> <span class="n">ModuleProcessor</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.kiara.Kiara.default_processor" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The default module processor that will be used in this environment, unless otherwise specified.</p>
    </div>

  </div>















  <div class="doc doc-object doc-method">



<h4 id="kiara.kiara.Kiara.create_module" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_module</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module_type</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#kiara.kiara.Kiara.create_module" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Create a module instance.</p>
<p>The 'module_type' argument can be a module type id, or an operation id. In case of the latter, the 'real' module_type
and module_config will be resolved via the operation management.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>module_type</code></td>
        <td><code>str</code></td>
        <td><p>the module type- or operation-id</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>module_config</code></td>
        <td><code>Optional[Mapping[str, Any]]</code></td>
        <td><p>the module instance configuration (must be empty in case of the module_type being an operation id</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>id</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>the id of this module, only relevant if the module is part of a pipeline, in which case it must be unique within the pipeline</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>parent_id</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>a reference to the pipeline that contains this module (if applicable)</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>KiaraModule</code></td>
      <td><p>The instantiated module object.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/kiara.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_module</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">parent_id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KiaraModule&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Create a module instance.</span>

<span class="sd">    The &#39;module_type&#39; argument can be a module type id, or an operation id. In case of the latter, the &#39;real&#39; module_type</span>
<span class="sd">    and module_config will be resolved via the operation management.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        module_type: the module type- or operation-id</span>
<span class="sd">        module_config: the module instance configuration (must be empty in case of the module_type being an operation id</span>
<span class="sd">        id: the id of this module, only relevant if the module is part of a pipeline, in which case it must be unique within the pipeline</span>
<span class="sd">        parent_id: a reference to the pipeline that contains this module (if applicable)</span>

<span class="sd">    Returns:</span>
<span class="sd">        The instantiated module object.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">module_type</span> <span class="o">==</span> <span class="s2">&quot;pipeline&quot;</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">kiara</span> <span class="kn">import</span> <span class="n">PipelineModule</span>

        <span class="n">module</span> <span class="o">=</span> <span class="n">PipelineModule</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">parent_id</span><span class="o">=</span><span class="n">parent_id</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">module</span>

    <span class="k">elif</span> <span class="p">(</span>
        <span class="n">module_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_module_types</span>
        <span class="ow">and</span> <span class="n">module_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">operation_ids</span>
    <span class="p">):</span>
        <span class="n">op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">get_operation</span><span class="p">(</span><span class="n">module_type</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">op</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="n">module_type</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module_type</span>
        <span class="n">op_config</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module_config</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">module_config</span><span class="p">:</span>
            <span class="n">_module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
                <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>
            <span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_module_config</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">op_config</span><span class="p">)</span>
            <span class="n">_module_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">module_config</span><span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span>
        <span class="n">module_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_module_types</span>
        <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">module_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">module_type</span><span class="p">)))</span>
    <span class="p">):</span>

        <span class="k">if</span> <span class="n">module_config</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Creating pipeline module from file with extra module_config not supported (yet).&quot;</span>
            <span class="p">)</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">module_type</span><span class="p">)</span>
        <span class="n">pipeline_config_data</span> <span class="o">=</span> <span class="n">get_data_from_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">pipeline_config</span> <span class="o">=</span> <span class="n">PipelineConfig</span><span class="p">(</span><span class="o">**</span><span class="n">pipeline_config_data</span><span class="p">)</span>

        <span class="kn">from</span> <span class="nn">kiara</span> <span class="kn">import</span> <span class="n">PipelineModule</span>

        <span class="n">module</span> <span class="o">=</span> <span class="n">PipelineModule</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">parent_id</span><span class="o">=</span><span class="n">parent_id</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">pipeline_config</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">module</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">_module_config</span> <span class="o">=</span> <span class="n">module_config</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgr</span><span class="o">.</span><span class="n">create_module</span><span class="p">(</span>
        <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
        <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
        <span class="n">module_type</span><span class="o">=</span><span class="n">module_type</span><span class="p">,</span>
        <span class="n">module_config</span><span class="o">=</span><span class="n">_module_config</span><span class="p">,</span>
        <span class="n">parent_id</span><span class="o">=</span><span class="n">parent_id</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>













  <div class="doc doc-object doc-method">



<h4 id="kiara.kiara.Kiara.instance" class="doc doc-heading">
<code class="highlight language-python"><span class="n">instance</span><span class="p">()</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.kiara.Kiara.instance" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The default <em>kiara</em> context. In most cases, it's recommended you create and manage your own, though.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/kiara.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The default *kiara* context. In most cases, it&#39;s recommended you create and manage your own, though.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="n">Kiara</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span>
</code></pre></div>
        </details>
    </div>

  </div>












  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h3 id="kiara.kiara.explain" class="doc doc-heading">
<code class="highlight language-python"><span class="n">explain</span><span class="p">(</span><span class="n">item</span><span class="p">)</span></code>


<a href="#kiara.kiara.explain" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Pretty print information about an item on the terminal.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/kiara.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">explain</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Pretty print information about an item on the terminal.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">kiara.module</span> <span class="kn">import</span> <span class="n">KiaraModule</span>

        <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">KiaraModule</span><span class="p">):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">KiaraModuleTypeMetadata</span><span class="o">.</span><span class="n">from_module_class</span><span class="p">(</span><span class="n">module_cls</span><span class="o">=</span><span class="n">item</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
        <span class="n">item</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">()</span>

    <span class="n">console</span> <span class="o">=</span> <span class="n">get_console</span><span class="p">()</span>
    <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.metadata" class="doc doc-heading">
        <code>metadata</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.metadata" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="kiara.metadata.MetadataModel" class="doc doc-heading">
        <code>
MetadataModel            (<span title="kiara.info.KiaraInfoModel">KiaraInfoModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.MetadataModel" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Base class for classes that represent value metadata in kiara.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/metadata/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">MetadataModel</span><span class="p">(</span><span class="n">KiaraInfoModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for classes that represent value metadata in kiara.&quot;&quot;&quot;</span>

    <span class="c1"># @classmethod</span>
    <span class="c1"># def get_type_metadata(cls) -&gt; &quot;MetadataModelMetadata&quot;:</span>
    <span class="c1">#     &quot;&quot;&quot;Return all metadata associated with this module type.&quot;&quot;&quot;</span>
    <span class="c1">#</span>
    <span class="c1">#     from kiara.metadata.core_models import MetadataModelMetadata</span>
    <span class="c1">#</span>
    <span class="c1">#     return MetadataModelMetadata.from_model_class(model_cls=cls)</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;metadata&quot;</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Key&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s2">&quot;type_name&quot;</span> <span class="ow">and</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;omit_type_name&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">extract_renderable</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;operations&quot;</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;operations&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;operations&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ids</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">table</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">
















  </div>

    </div>

  </div>




  <div class="doc doc-object doc-class">



<h3 id="kiara.metadata.ValueTypeAndDescription" class="doc doc-heading">
        <code>
ValueTypeAndDescription            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.ValueTypeAndDescription" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/metadata/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueTypeAndDescription</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>

    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The description for the value.&quot;</span><span class="p">)</span>
    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The value type.&quot;</span><span class="p">)</span>
    <span class="n">value_default</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Default for the value.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>
    <span class="n">required</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether this value is required&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.metadata.ValueTypeAndDescription.description" class="doc doc-heading">
<code class="highlight language-python"><span class="n">description</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.ValueTypeAndDescription.description" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The description for the value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.metadata.ValueTypeAndDescription.required" class="doc doc-heading">
<code class="highlight language-python"><span class="n">required</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.ValueTypeAndDescription.required" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Whether this value is required</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.metadata.ValueTypeAndDescription.type" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.ValueTypeAndDescription.type" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The value type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.metadata.ValueTypeAndDescription.value_default" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_default</span><span class="p">:</span> <span class="n">Any</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.metadata.ValueTypeAndDescription.value_default" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Default for the value.</p>
    </div>

  </div>










  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h3 id="kiara.metadata.core_models" class="doc doc-heading">
        <code>core_models</code>



<a href="#kiara.metadata.core_models" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.metadata.core_models.AuthorModel" class="doc doc-heading">
        <code>
AuthorModel            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.core_models.AuthorModel" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/metadata/core_models.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">AuthorModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The full name of the author.&quot;</span><span class="p">)</span>
    <span class="n">email</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">EmailStr</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The email address of the author&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.AuthorModel.email" class="doc doc-heading">
<code class="highlight language-python"><span class="n">email</span><span class="p">:</span> <span class="n">EmailStr</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.metadata.core_models.AuthorModel.email" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The email address of the author</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.AuthorModel.name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.core_models.AuthorModel.name" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The full name of the author.</p>
    </div>

  </div>










  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.metadata.core_models.ContextMetadataModel" class="doc doc-heading">
        <code>
ContextMetadataModel            (<span title="kiara.metadata.core_models.HashedMetadataModel">HashedMetadataModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.core_models.ContextMetadataModel" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/metadata/core_models.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ContextMetadataModel</span><span class="p">(</span><span class="n">HashedMetadataModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">item_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">):</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">get_metadata_for_python_module_or_class</span><span class="p">(</span><span class="n">item_cls</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="n">merged</span> <span class="o">=</span> <span class="n">merge_dicts</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">parse_obj</span><span class="p">(</span><span class="n">merged</span><span class="p">)</span>

    <span class="n">_metadata_key</span> <span class="o">=</span> <span class="s2">&quot;properties&quot;</span>

    <span class="n">references</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">LinkModel</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;References for the item.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span>
    <span class="p">)</span>
    <span class="n">tags</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A list of tags for the item.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">set</span>
    <span class="p">)</span>
    <span class="n">labels</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A list of labels for the item.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_obj_to_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Key&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="p">:</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Tags&quot;</span><span class="p">,</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[i]</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">[/i]: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Labels&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">references</span><span class="p">:</span>
            <span class="n">references</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">_k</span><span class="p">,</span> <span class="n">_v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">references</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">link</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[link=</span><span class="si">{</span><span class="n">_v</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">]</span><span class="si">{</span><span class="n">_v</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">[/link]&quot;</span>
                <span class="n">references</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[i]</span><span class="si">{</span><span class="n">_k</span><span class="si">}</span><span class="s2">[/i]: </span><span class="si">{</span><span class="n">link</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;References&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">references</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">table</span>

    <span class="k">def</span> <span class="nf">add_reference</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ref_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">desc</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="k">if</span> <span class="n">ref_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">references</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">force</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reference of type &#39;</span><span class="si">{</span><span class="n">ref_type</span><span class="si">}</span><span class="s2">&#39; already present.&quot;</span><span class="p">)</span>
        <span class="n">link</span> <span class="o">=</span> <span class="n">LinkModel</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">desc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">references</span><span class="p">[</span><span class="n">ref_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">link</span>

    <span class="k">def</span> <span class="nf">get_url_for_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="n">link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">references</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">link</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">link</span><span class="o">.</span><span class="n">url</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.ContextMetadataModel.labels" class="doc doc-heading">
<code class="highlight language-python"><span class="n">labels</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.metadata.core_models.ContextMetadataModel.labels" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A list of labels for the item.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.ContextMetadataModel.references" class="doc doc-heading">
<code class="highlight language-python"><span class="n">references</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">core_models</span><span class="o">.</span><span class="n">LinkModel</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.metadata.core_models.ContextMetadataModel.references" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>References for the item.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.ContextMetadataModel.tags" class="doc doc-heading">
<code class="highlight language-python"><span class="n">tags</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.metadata.core_models.ContextMetadataModel.tags" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A list of tags for the item.</p>
    </div>

  </div>














  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.metadata.core_models.DocumentationMetadataModel" class="doc doc-heading">
        <code>
DocumentationMetadataModel            (<span title="kiara.metadata.core_models.HashedMetadataModel">HashedMetadataModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.core_models.DocumentationMetadataModel" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/metadata/core_models.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DocumentationMetadataModel</span><span class="p">(</span><span class="n">HashedMetadataModel</span><span class="p">):</span>

    <span class="n">_metadata_key</span> <span class="o">=</span> <span class="s2">&quot;documentation&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_class_doc</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">item_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">):</span>

        <span class="n">doc</span> <span class="o">=</span> <span class="n">item_cls</span><span class="o">.</span><span class="vm">__doc__</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">doc</span><span class="p">:</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="n">DEFAULT_NO_DESC_VALUE</span>

        <span class="n">doc</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">cleandoc</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_string</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">doc</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">doc</span><span class="p">:</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="n">DEFAULT_NO_DESC_VALUE</span>

        <span class="k">if</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
            <span class="n">desc</span><span class="p">,</span> <span class="n">doc</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">desc</span> <span class="o">=</span> <span class="n">doc</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">doc</span><span class="p">:</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">desc</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">doc</span><span class="o">=</span><span class="n">doc</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>

        <span class="n">doc</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;doc&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">desc</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">desc</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">desc</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">doc</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">desc</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">DEFAULT_NO_DESC_VALUE</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">doc</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">desc</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">desc</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">doc</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">desc</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">DocumentationMetadataModel</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="n">doc</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">DEFAULT_NO_DESC_VALUE</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">DocumentationMetadataModel</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">item</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_class_doc</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t create documentation from type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Short description of the item.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_NO_DESC_VALUE</span>
    <span class="p">)</span>
    <span class="n">doc</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Detailed documentation of the item (in markdown).&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_obj_to_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_doc</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">full_doc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="se">\n\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="k">return</span> <span class="n">Markdown</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">full_doc</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.DocumentationMetadataModel.description" class="doc doc-heading">
<code class="highlight language-python"><span class="n">description</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.metadata.core_models.DocumentationMetadataModel.description" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Short description of the item.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.DocumentationMetadataModel.doc" class="doc doc-heading">
<code class="highlight language-python"><span class="n">doc</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.metadata.core_models.DocumentationMetadataModel.doc" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Detailed documentation of the item (in markdown).</p>
    </div>

  </div>
















  </div>

    </div>

  </div>




  <div class="doc doc-object doc-class">



<h4 id="kiara.metadata.core_models.LinkModel" class="doc doc-heading">
        <code>
LinkModel            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.core_models.LinkModel" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/metadata/core_models.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">LinkModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>

    <span class="n">url</span><span class="p">:</span> <span class="n">AnyUrl</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The url.&quot;</span><span class="p">)</span>
    <span class="n">desc</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A short description of the link content.&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">DEFAULT_NO_DESC_VALUE</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.LinkModel.desc" class="doc doc-heading">
<code class="highlight language-python"><span class="n">desc</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.metadata.core_models.LinkModel.desc" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A short description of the link content.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.LinkModel.url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">url</span><span class="p">:</span> <span class="n">AnyUrl</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.core_models.LinkModel.url" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The url.</p>
    </div>

  </div>










  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.metadata.core_models.MetadataModelMetadata" class="doc doc-heading">
        <code>
MetadataModelMetadata            (<a class="autorefs autorefs-internal" title="kiara.metadata.core_models.WrapperMetadataModel" href="../metadata/core_models/#kiara.metadata.core_models.WrapperMetadataModel">WrapperMetadataModel</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.core_models.MetadataModelMetadata" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/metadata/core_models.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">MetadataModelMetadata</span><span class="p">(</span><span class="n">WrapperMetadataModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_model_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">model_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">MetadataModel</span><span class="p">]):</span>

        <span class="n">origin_md</span> <span class="o">=</span> <span class="n">OriginMetadataModel</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">model_cls</span><span class="p">)</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">DocumentationMetadataModel</span><span class="o">.</span><span class="n">from_class_doc</span><span class="p">(</span><span class="n">model_cls</span><span class="p">)</span>
        <span class="n">python_class</span> <span class="o">=</span> <span class="n">PythonClassMetadata</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">model_cls</span><span class="p">)</span>
        <span class="n">properties_md</span> <span class="o">=</span> <span class="n">ContextMetadataModel</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">model_cls</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">MetadataModelMetadata</span><span class="p">(</span>
            <span class="n">type_name</span><span class="o">=</span><span class="n">model_cls</span><span class="o">.</span><span class="n">_metadata_key</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="n">documentation</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span>
            <span class="n">origin</span><span class="o">=</span><span class="n">origin_md</span><span class="p">,</span>
            <span class="n">context</span><span class="o">=</span><span class="n">properties_md</span><span class="p">,</span>
            <span class="n">python_class</span><span class="o">=</span><span class="n">python_class</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">type_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The registered name for this value type.&quot;</span><span class="p">)</span>
    <span class="n">documentation</span><span class="p">:</span> <span class="n">DocumentationMetadataModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Documentation for the value type.&quot;</span>
    <span class="p">)</span>
    <span class="n">origin</span><span class="p">:</span> <span class="n">OriginMetadataModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Information about the creator of this value type.&quot;</span>
    <span class="p">)</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">ContextMetadataModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic properties of this value type.&quot;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;metadata.model&quot;</span>

    <span class="k">def</span> <span class="nf">create_fields_table</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">show_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_required</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>

        <span class="n">type_cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">python_class</span><span class="o">.</span><span class="n">get_class</span><span class="p">()</span>

        <span class="n">fields_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="n">show_header</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">)</span>
        <span class="n">fields_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Field name&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">fields_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">show_required</span><span class="p">:</span>
            <span class="n">fields_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Required&quot;</span><span class="p">)</span>
        <span class="n">fields_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">details</span> <span class="ow">in</span> <span class="n">type_cls</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">field_type</span> <span class="o">=</span> <span class="n">type_cls</span><span class="o">.</span><span class="n">schema</span><span class="p">()[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">details</span><span class="o">.</span><span class="n">field_info</span><span class="o">.</span><span class="n">description</span>
            <span class="k">if</span> <span class="n">show_required</span><span class="p">:</span>
                <span class="n">req</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span> <span class="k">if</span> <span class="n">details</span><span class="o">.</span><span class="n">required</span> <span class="k">else</span> <span class="s2">&quot;no&quot;</span>
                <span class="n">fields_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">field_type</span><span class="p">,</span> <span class="n">req</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fields_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">field_type</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">fields_table</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="n">include_schema</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;display_schema&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="n">include_doc</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_doc&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Property&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">include_doc</span><span class="p">:</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
                <span class="s2">&quot;Documentation&quot;</span><span class="p">,</span>
                <span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">(),</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Origin&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">())</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Context&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">())</span>

        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Python class&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">python_class</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">())</span>

        <span class="n">fields_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_fields_table</span><span class="p">()</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Fields&quot;</span><span class="p">,</span> <span class="n">fields_table</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">include_schema</span><span class="p">:</span>
            <span class="n">json_str</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">python_class</span><span class="o">.</span><span class="n">get_class</span><span class="p">()</span><span class="o">.</span><span class="n">schema_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
                <span class="s2">&quot;json&quot;</span><span class="p">,</span>
                <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Json Schema&quot;</span><span class="p">,</span> <span class="n">json_str</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">table</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.MetadataModelMetadata.context" class="doc doc-heading">
<code class="highlight language-python"><span class="n">context</span><span class="p">:</span> <span class="n">ContextMetadataModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.core_models.MetadataModelMetadata.context" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Generic properties of this value type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.MetadataModelMetadata.documentation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">documentation</span><span class="p">:</span> <span class="n">DocumentationMetadataModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.core_models.MetadataModelMetadata.documentation" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Documentation for the value type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.MetadataModelMetadata.origin" class="doc doc-heading">
<code class="highlight language-python"><span class="n">origin</span><span class="p">:</span> <span class="n">OriginMetadataModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.core_models.MetadataModelMetadata.origin" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Information about the creator of this value type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.MetadataModelMetadata.type_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">type_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.core_models.MetadataModelMetadata.type_name" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The registered name for this value type.</p>
    </div>

  </div>














  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.metadata.core_models.OriginMetadataModel" class="doc doc-heading">
        <code>
OriginMetadataModel            (<span title="kiara.metadata.core_models.HashedMetadataModel">HashedMetadataModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.core_models.OriginMetadataModel" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/metadata/core_models.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">OriginMetadataModel</span><span class="p">(</span><span class="n">HashedMetadataModel</span><span class="p">):</span>

    <span class="n">_metadata_key</span> <span class="o">=</span> <span class="s2">&quot;origin&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">item_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">):</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">get_metadata_for_python_module_or_class</span><span class="p">(</span><span class="n">item_cls</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="n">merged</span> <span class="o">=</span> <span class="n">merge_dicts</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">parse_obj</span><span class="p">(</span><span class="n">merged</span><span class="p">)</span>

    <span class="n">authors</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">AuthorModel</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The authors/creators of this item.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_obj_to_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">authors</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Key&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>

        <span class="n">authors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">author</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">authors</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">author</span><span class="o">.</span><span class="n">email</span><span class="p">:</span>
                <span class="n">authors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">author</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">author</span><span class="o">.</span><span class="n">email</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">authors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">author</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Authors&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">authors</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">table</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.OriginMetadataModel.authors" class="doc doc-heading">
<code class="highlight language-python"><span class="n">authors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">core_models</span><span class="o">.</span><span class="n">AuthorModel</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.metadata.core_models.OriginMetadataModel.authors" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The authors/creators of this item.</p>
    </div>

  </div>












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.metadata.core_models.PythonClassMetadata" class="doc doc-heading">
        <code>
PythonClassMetadata            (<a class="autorefs autorefs-internal" title="kiara.metadata.MetadataModel" href="../metadata/__init__/#kiara.metadata.MetadataModel">MetadataModel</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.core_models.PythonClassMetadata" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Python class and module information.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/metadata/core_models.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PythonClassMetadata</span><span class="p">(</span><span class="n">MetadataModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Python class and module information.&quot;&quot;&quot;</span>

    <span class="n">_metadata_key</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;python_class&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">item_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">):</span>

        <span class="n">conf</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;class_name&quot;</span><span class="p">:</span> <span class="n">item_cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="s2">&quot;module_name&quot;</span><span class="p">:</span> <span class="n">item_cls</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span>
            <span class="s2">&quot;full_name&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">item_cls</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">item_cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">PythonClassMetadata</span><span class="p">(</span><span class="o">**</span><span class="n">conf</span><span class="p">)</span>

    <span class="n">class_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name of the Python class.&quot;</span><span class="p">)</span>
    <span class="n">module_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name of the Python module this class lives in.&quot;</span>
    <span class="p">)</span>
    <span class="n">full_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The full class namespace.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_name</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;metadata.python_class&quot;</span>

    <span class="k">def</span> <span class="nf">get_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_module</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">class_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_module</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModuleType</span><span class="p">:</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">m</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.PythonClassMetadata.class_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">class_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.core_models.PythonClassMetadata.class_name" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The name of the Python class.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.PythonClassMetadata.full_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">full_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.core_models.PythonClassMetadata.full_name" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The full class namespace.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.PythonClassMetadata.module_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">module_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.core_models.PythonClassMetadata.module_name" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The name of the Python module this class lives in.</p>
    </div>

  </div>















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.metadata.core_models.WrapperMetadataModel" class="doc doc-heading">
        <code>
WrapperMetadataModel            (<a class="autorefs autorefs-internal" title="kiara.metadata.MetadataModel" href="../metadata/__init__/#kiara.metadata.MetadataModel">MetadataModel</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.core_models.WrapperMetadataModel" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/metadata/core_models.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">WrapperMetadataModel</span><span class="p">(</span><span class="n">MetadataModel</span><span class="p">):</span>

    <span class="n">python_class</span><span class="p">:</span> <span class="n">PythonClassMetadata</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Information about the Python class for this module type.&quot;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">python_class</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.core_models.WrapperMetadataModel.python_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">python_class</span><span class="p">:</span> <span class="n">PythonClassMetadata</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.core_models.WrapperMetadataModel.python_class" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Information about the Python class for this module type.</p>
    </div>

  </div>











  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.metadata.data" class="doc doc-heading">
        <code>data</code>



<a href="#kiara.metadata.data" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.metadata.data.DeserializeConfig" class="doc doc-heading">
        <code>
DeserializeConfig            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleConfig" href="../module_config/#kiara.module_config.ModuleConfig">ModuleConfig</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.data.DeserializeConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/metadata/data.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DeserializeConfig</span><span class="p">(</span><span class="n">ModuleConfig</span><span class="p">):</span>

    <span class="c1"># value_id: str = Field(description=&quot;The id of the value.&quot;)</span>
    <span class="n">serialization_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The serialization type.&quot;</span><span class="p">)</span>
    <span class="nb">input</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The inputs to use when running this module.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span>
    <span class="p">)</span>
    <span class="n">output_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name of the output field for the value.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.data.DeserializeConfig.input" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">input</span><span class="p">:</span> <span class="n">Any</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.metadata.data.DeserializeConfig.input" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The inputs to use when running this module.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.data.DeserializeConfig.output_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">output_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.data.DeserializeConfig.output_name" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The name of the output field for the value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.data.DeserializeConfig.serialization_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">serialization_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.data.DeserializeConfig.serialization_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The serialization type.</p>
    </div>

  </div>










  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.metadata.data.LoadConfig" class="doc doc-heading">
        <code>
LoadConfig            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleConfig" href="../module_config/#kiara.module_config.ModuleConfig">ModuleConfig</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.data.LoadConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/metadata/data.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">LoadConfig</span><span class="p">(</span><span class="n">ModuleConfig</span><span class="p">):</span>

    <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The id of the value.&quot;</span><span class="p">)</span>
    <span class="n">base_path_input_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name of the input that stores the base_path where the value is saved.&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The inputs to use when running this module.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span>
    <span class="p">)</span>
    <span class="n">output_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name of the output field for the value.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.data.LoadConfig.base_path_input_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">base_path_input_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.metadata.data.LoadConfig.base_path_input_name" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The name of the input that stores the base_path where the value is saved.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.data.LoadConfig.inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.metadata.data.LoadConfig.inputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The inputs to use when running this module.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.data.LoadConfig.output_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">output_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.data.LoadConfig.output_name" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The name of the output field for the value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.data.LoadConfig.value_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.data.LoadConfig.value_id" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The id of the value.</p>
    </div>

  </div>










  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.metadata.data.SaveConfig" class="doc doc-heading">
        <code>
SaveConfig            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleConfig" href="../module_config/#kiara.module_config.ModuleConfig">ModuleConfig</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.data.SaveConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/metadata/data.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SaveConfig</span><span class="p">(</span><span class="n">ModuleConfig</span><span class="p">):</span>

    <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The inputs to use when running this module.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span>
    <span class="p">)</span>
    <span class="n">load_config_output</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The output name that will contain the load config output value.&quot;</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.data.SaveConfig.inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.metadata.data.SaveConfig.inputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The inputs to use when running this module.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.data.SaveConfig.load_config_output" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_config_output</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.data.SaveConfig.load_config_output" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The output name that will contain the load config output value.</p>
    </div>

  </div>










  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  <div class="doc doc-object doc-module">



<h3 id="kiara.metadata.module_models" class="doc doc-heading">
        <code>module_models</code>



<a href="#kiara.metadata.module_models" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.metadata.module_models.KiaraModuleConfigMetadata" class="doc doc-heading">
        <code>
KiaraModuleConfigMetadata            (<a class="autorefs autorefs-internal" title="kiara.metadata.core_models.WrapperMetadataModel" href="../metadata/core_models/#kiara.metadata.core_models.WrapperMetadataModel">WrapperMetadataModel</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.module_models.KiaraModuleConfigMetadata" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/metadata/module_models.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KiaraModuleConfigMetadata</span><span class="p">(</span><span class="n">WrapperMetadataModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_config_class</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">config_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">ModuleTypeConfigSchema</span><span class="p">],</span>
        <span class="n">remove_pipeline_config</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="n">flat_models</span> <span class="o">=</span> <span class="n">get_flat_models_from_model</span><span class="p">(</span><span class="n">config_cls</span><span class="p">)</span>
        <span class="n">model_name_map</span> <span class="o">=</span> <span class="n">get_model_name_map</span><span class="p">(</span><span class="n">flat_models</span><span class="p">)</span>
        <span class="n">m_schema</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">model_process_schema</span><span class="p">(</span><span class="n">config_cls</span><span class="p">,</span> <span class="n">model_name_map</span><span class="o">=</span><span class="n">model_name_map</span><span class="p">)</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="n">m_schema</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span>

        <span class="n">config_values</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">details</span> <span class="ow">in</span> <span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">remove_pipeline_config</span> <span class="ow">and</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="s2">&quot;steps&quot;</span><span class="p">,</span>
                <span class="s2">&quot;input_aliases&quot;</span><span class="p">,</span>
                <span class="s2">&quot;output_aliases&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">,</span>
            <span class="p">]:</span>
                <span class="k">continue</span>

            <span class="n">type_str</span> <span class="o">=</span> <span class="s2">&quot;-- n/a --&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;type&quot;</span> <span class="ow">in</span> <span class="n">details</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">type_str</span> <span class="o">=</span> <span class="n">details</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>

            <span class="n">desc</span> <span class="o">=</span> <span class="n">details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">DEFAULT_NO_DESC_VALUE</span><span class="p">)</span>
            <span class="n">default</span> <span class="o">=</span> <span class="n">config_cls</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">default</span>
            <span class="n">default</span> <span class="o">=</span> <span class="n">config_cls</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">default</span>
            <span class="k">if</span> <span class="n">default</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">config_cls</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">default_factory</span><span class="p">):</span>
                    <span class="n">default</span> <span class="o">=</span> <span class="n">config_cls</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">default_factory</span><span class="p">()</span>  <span class="c1"># type: ignore</span>

            <span class="n">req</span> <span class="o">=</span> <span class="n">config_cls</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">required</span>

            <span class="n">config_values</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ValueTypeAndDescription</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">type_str</span><span class="p">,</span> <span class="n">value_default</span><span class="o">=</span><span class="n">default</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="n">req</span>
            <span class="p">)</span>

        <span class="n">python_cls</span> <span class="o">=</span> <span class="n">PythonClassMetadata</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">config_cls</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">KiaraModuleConfigMetadata</span><span class="p">(</span>
            <span class="n">python_class</span><span class="o">=</span><span class="n">python_cls</span><span class="p">,</span> <span class="n">config_values</span><span class="o">=</span><span class="n">config_values</span>
        <span class="p">)</span>

    <span class="n">config_values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueTypeAndDescription</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The available configuration values.&quot;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;metadata.module_config&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.module_models.KiaraModuleConfigMetadata.config_values" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config_values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">ValueTypeAndDescription</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.module_models.KiaraModuleConfigMetadata.config_values" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The available configuration values.</p>
    </div>

  </div>












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.metadata.module_models.KiaraModuleInstanceMetadata" class="doc doc-heading">
        <code>
KiaraModuleInstanceMetadata            (<span title="kiara.metadata.core_models.HashedMetadataModel">HashedMetadataModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.module_models.KiaraModuleInstanceMetadata" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/metadata/module_models.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KiaraModuleInstanceMetadata</span><span class="p">(</span><span class="n">HashedMetadataModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_module_obj</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;KiaraModule&quot;</span><span class="p">):</span>

        <span class="n">config</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="s2">&quot;steps&quot;</span><span class="p">,</span>
            <span class="s2">&quot;input_aliases&quot;</span><span class="p">,</span>
            <span class="s2">&quot;output_aliases&quot;</span><span class="p">,</span>
            <span class="s2">&quot;module_type_name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">,</span>
            <span class="s2">&quot;metadata&quot;</span><span class="p">,</span>
        <span class="p">]:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">type_metadata</span> <span class="o">=</span> <span class="n">KiaraModuleTypeMetadata</span><span class="o">.</span><span class="n">from_module_class</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">KiaraModuleInstanceMetadata</span><span class="p">(</span>
            <span class="n">type_metadata</span><span class="o">=</span><span class="n">type_metadata</span><span class="p">,</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">inputs_schema</span><span class="o">=</span><span class="n">obj</span><span class="o">.</span><span class="n">input_schemas</span><span class="p">,</span>
            <span class="n">outputs_schema</span><span class="o">=</span><span class="n">obj</span><span class="o">.</span><span class="n">output_schemas</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="n">type_metadata</span><span class="p">:</span> <span class="n">KiaraModuleTypeMetadata</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Metadata for the module type of this instance.&quot;</span>
    <span class="p">)</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Configuration that was used to create this module instance.&quot;</span>
    <span class="p">)</span>
    <span class="n">inputs_schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The schema for the module inputs.&quot;</span>
    <span class="p">)</span>
    <span class="n">outputs_schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The schema for the module outputs.&quot;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_obj_to_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="c1"># TODO: include environment hash and/or version?</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_metadata</span><span class="o">.</span><span class="n">get_id</span><span class="p">(),</span> <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;instance.module&quot;</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="n">include_desc</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_doc&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">,</span> <span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">show_lines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Property&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">include_desc</span><span class="p">:</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_metadata</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>

        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Origin&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_metadata</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">())</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Type context&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_metadata</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">())</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
            <span class="s2">&quot;Python class&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_metadata</span><span class="o">.</span><span class="n">python_class</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">conf</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;default&quot;</span>
        <span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Configuration&quot;</span><span class="p">,</span> <span class="n">conf</span><span class="p">)</span>

        <span class="n">constants</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;constants&quot;</span><span class="p">)</span>
        <span class="n">inputs_table</span> <span class="o">=</span> <span class="n">create_table_from_field_schemas</span><span class="p">(</span>
            <span class="n">_add_required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">_add_default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">_show_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">_constants</span><span class="o">=</span><span class="n">constants</span><span class="p">,</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs_schema</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Inputs&quot;</span><span class="p">,</span> <span class="n">inputs_table</span><span class="p">)</span>
        <span class="n">outputs_table</span> <span class="o">=</span> <span class="n">create_table_from_field_schemas</span><span class="p">(</span>
            <span class="n">_add_required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">_add_default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">_show_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">_constants</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">outputs_schema</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Outputs&quot;</span><span class="p">,</span> <span class="n">outputs_table</span><span class="p">)</span>
        <span class="c1"># table.add_row(&quot;Source code&quot;, self.type_metadata.process_src)</span>

        <span class="k">return</span> <span class="n">table</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.module_models.KiaraModuleInstanceMetadata.config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.module_models.KiaraModuleInstanceMetadata.config" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Configuration that was used to create this module instance.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.module_models.KiaraModuleInstanceMetadata.inputs_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">inputs_schema</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ValueSchema</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.module_models.KiaraModuleInstanceMetadata.inputs_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The schema for the module inputs.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.module_models.KiaraModuleInstanceMetadata.outputs_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">outputs_schema</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ValueSchema</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.module_models.KiaraModuleInstanceMetadata.outputs_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The schema for the module outputs.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.module_models.KiaraModuleInstanceMetadata.type_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">type_metadata</span><span class="p">:</span> <span class="n">KiaraModuleTypeMetadata</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.module_models.KiaraModuleInstanceMetadata.type_metadata" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Metadata for the module type of this instance.</p>
    </div>

  </div>













  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.metadata.module_models.KiaraModuleTypeMetadata" class="doc doc-heading">
        <code>
KiaraModuleTypeMetadata            (<a class="autorefs autorefs-internal" title="kiara.metadata.core_models.WrapperMetadataModel" href="../metadata/core_models/#kiara.metadata.core_models.WrapperMetadataModel">WrapperMetadataModel</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.module_models.KiaraModuleTypeMetadata" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/metadata/module_models.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KiaraModuleTypeMetadata</span><span class="p">(</span><span class="n">WrapperMetadataModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_module_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">module_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">]):</span>

        <span class="n">module_attrs</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">extract_module_attributes</span><span class="p">(</span><span class="n">module_cls</span><span class="o">=</span><span class="n">module_cls</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">module_attrs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">extract_module_attributes</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">module_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">module_cls</span><span class="p">,</span> <span class="s2">&quot;process&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Module class &#39;</span><span class="si">{</span><span class="n">module_cls</span><span class="si">}</span><span class="s2">&#39; misses &#39;process&#39; method.&quot;</span><span class="p">)</span>
        <span class="n">proc_src</span> <span class="o">=</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getsource</span><span class="p">(</span><span class="n">module_cls</span><span class="o">.</span><span class="n">process</span><span class="p">))</span>  <span class="c1"># type: ignore</span>

        <span class="n">origin_md</span> <span class="o">=</span> <span class="n">OriginMetadataModel</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">module_cls</span><span class="p">)</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">DocumentationMetadataModel</span><span class="o">.</span><span class="n">from_class_doc</span><span class="p">(</span><span class="n">module_cls</span><span class="p">)</span>
        <span class="n">python_class</span> <span class="o">=</span> <span class="n">PythonClassMetadata</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">module_cls</span><span class="p">)</span>
        <span class="n">properties_md</span> <span class="o">=</span> <span class="n">ContextMetadataModel</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">module_cls</span><span class="p">)</span>

        <span class="n">is_pipeline</span> <span class="o">=</span> <span class="n">module_cls</span><span class="o">.</span><span class="n">is_pipeline</span><span class="p">()</span>
        <span class="n">doc_url</span> <span class="o">=</span> <span class="n">properties_md</span><span class="o">.</span><span class="n">get_url_for_reference</span><span class="p">(</span><span class="s2">&quot;documentation&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">doc_url</span><span class="p">:</span>
            <span class="n">class_doc</span> <span class="o">=</span> <span class="n">calculate_class_doc_url</span><span class="p">(</span><span class="n">doc_url</span><span class="p">,</span> <span class="n">module_cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span> <span class="n">pipeline</span><span class="o">=</span><span class="n">is_pipeline</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="n">properties_md</span><span class="o">.</span><span class="n">add_reference</span><span class="p">(</span>
                <span class="s2">&quot;module_doc&quot;</span><span class="p">,</span>
                <span class="n">class_doc</span><span class="p">,</span>
                <span class="s2">&quot;A link to the published, auto-generated module documentation.&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_pipeline</span><span class="p">:</span>
            <span class="n">repo_url</span> <span class="o">=</span> <span class="n">properties_md</span><span class="o">.</span><span class="n">get_url_for_reference</span><span class="p">(</span><span class="s2">&quot;source_repo&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">repo_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">src_url</span> <span class="o">=</span> <span class="n">calculate_class_source_url</span><span class="p">(</span><span class="n">repo_url</span><span class="p">,</span> <span class="n">python_class</span><span class="p">)</span>
                <span class="n">properties_md</span><span class="o">.</span><span class="n">add_reference</span><span class="p">(</span>
                    <span class="s2">&quot;source_url&quot;</span><span class="p">,</span>
                    <span class="n">src_url</span><span class="p">,</span>
                    <span class="s2">&quot;A link to the published source file that contains this module.&quot;</span><span class="p">,</span>
                <span class="p">)</span>

        <span class="n">config</span> <span class="o">=</span> <span class="n">KiaraModuleConfigMetadata</span><span class="o">.</span><span class="n">from_config_class</span><span class="p">(</span><span class="n">module_cls</span><span class="o">.</span><span class="n">_config_cls</span><span class="p">)</span>
        <span class="n">pipeline_config</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">module_cls</span><span class="o">.</span><span class="n">_module_type_id</span> <span class="o">!=</span> <span class="s2">&quot;pipeline&quot;</span> <span class="ow">and</span> <span class="n">is_pipeline</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
            <span class="n">pipeline_config</span> <span class="o">=</span> <span class="n">module_cls</span><span class="o">.</span><span class="n">_base_pipeline_config</span>  <span class="c1"># type: ignore</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;type_name&quot;</span><span class="p">:</span> <span class="n">module_cls</span><span class="o">.</span><span class="n">_module_type_name</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="s2">&quot;type_id&quot;</span><span class="p">:</span> <span class="n">module_cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="s2">&quot;documentation&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">,</span>
            <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="n">origin_md</span><span class="p">,</span>
            <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="n">properties_md</span><span class="p">,</span>
            <span class="s2">&quot;python_class&quot;</span><span class="p">:</span> <span class="n">python_class</span><span class="p">,</span>
            <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="n">config</span><span class="p">,</span>
            <span class="s2">&quot;is_pipeline&quot;</span><span class="p">:</span> <span class="n">is_pipeline</span><span class="p">,</span>
            <span class="s2">&quot;pipeline_config&quot;</span><span class="p">:</span> <span class="n">pipeline_config</span><span class="p">,</span>
            <span class="s2">&quot;process_src&quot;</span><span class="p">:</span> <span class="n">proc_src</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="n">type_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The registered name for this module type.&quot;</span><span class="p">)</span>
    <span class="n">type_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The full type id.&quot;</span><span class="p">)</span>
    <span class="n">documentation</span><span class="p">:</span> <span class="n">DocumentationMetadataModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Documentation for the module.&quot;</span>
    <span class="p">)</span>
    <span class="n">origin</span><span class="p">:</span> <span class="n">OriginMetadataModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Information about authorship for the module type.&quot;</span>
    <span class="p">)</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">ContextMetadataModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic properties of this module (description, tags, labels, references, ...).&quot;</span>
    <span class="p">)</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">KiaraModuleConfigMetadata</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Details on how this module type can be configured.&quot;</span>
    <span class="p">)</span>
    <span class="n">is_pipeline</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the module type is a pipeline, or a core module.&quot;</span>
    <span class="p">)</span>
    <span class="n">pipeline_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">PipelineConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;If this module is a pipeline, this field contains the pipeline configuration.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">process_src</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The source code of the process method of the module.&quot;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_id</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">MODULE_TYPE_CATEGORY_ALIAS</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;documentation&quot;</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">validate_doc</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>

        <span class="k">return</span> <span class="n">DocumentationMetadataModel</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="n">include_config_schema</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_config_schema&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">include_src</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_src&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">include_doc</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_doc&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">,</span> <span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;property&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">include_doc</span><span class="p">:</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
                <span class="s2">&quot;Documentation&quot;</span><span class="p">,</span>
                <span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">(),</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Origin&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">())</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Context&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">include_config_schema</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">:</span>
                <span class="n">config_cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">python_class</span><span class="o">.</span><span class="n">get_class</span><span class="p">()</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Module config&quot;</span><span class="p">,</span> <span class="n">create_table_from_base_model</span><span class="p">(</span><span class="n">config_cls</span><span class="p">))</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Module config&quot;</span><span class="p">,</span> <span class="s2">&quot;-- no config --&quot;</span><span class="p">)</span>

        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Python class&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">python_class</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">include_src</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_pipeline</span><span class="p">:</span>
                <span class="n">json_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_config</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
                <span class="n">_config</span><span class="p">:</span> <span class="n">Syntax</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span><span class="n">json_str</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Pipeline config&quot;</span><span class="p">,</span> <span class="n">Panel</span><span class="p">(</span><span class="n">_config</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">HORIZONTALS</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_config</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">process_src</span><span class="p">,</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
                    <span class="s2">&quot;Processing source code&quot;</span><span class="p">,</span> <span class="n">Panel</span><span class="p">(</span><span class="n">_config</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">HORIZONTALS</span><span class="p">)</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">table</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.module_models.KiaraModuleTypeMetadata.config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config</span><span class="p">:</span> <span class="n">KiaraModuleConfigMetadata</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.module_models.KiaraModuleTypeMetadata.config" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Details on how this module type can be configured.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.module_models.KiaraModuleTypeMetadata.context" class="doc doc-heading">
<code class="highlight language-python"><span class="n">context</span><span class="p">:</span> <span class="n">ContextMetadataModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.module_models.KiaraModuleTypeMetadata.context" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Generic properties of this module (description, tags, labels, references, ...).</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.module_models.KiaraModuleTypeMetadata.documentation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">documentation</span><span class="p">:</span> <span class="n">DocumentationMetadataModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.module_models.KiaraModuleTypeMetadata.documentation" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Documentation for the module.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.module_models.KiaraModuleTypeMetadata.is_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_pipeline</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.module_models.KiaraModuleTypeMetadata.is_pipeline" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Whether the module type is a pipeline, or a core module.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.module_models.KiaraModuleTypeMetadata.origin" class="doc doc-heading">
<code class="highlight language-python"><span class="n">origin</span><span class="p">:</span> <span class="n">OriginMetadataModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.module_models.KiaraModuleTypeMetadata.origin" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Information about authorship for the module type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.module_models.KiaraModuleTypeMetadata.pipeline_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_config</span><span class="p">:</span> <span class="n">PipelineConfig</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.metadata.module_models.KiaraModuleTypeMetadata.pipeline_config" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>If this module is a pipeline, this field contains the pipeline configuration.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.module_models.KiaraModuleTypeMetadata.process_src" class="doc doc-heading">
<code class="highlight language-python"><span class="n">process_src</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.module_models.KiaraModuleTypeMetadata.process_src" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The source code of the process method of the module.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.module_models.KiaraModuleTypeMetadata.type_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">type_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.module_models.KiaraModuleTypeMetadata.type_id" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The full type id.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.module_models.KiaraModuleTypeMetadata.type_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">type_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.module_models.KiaraModuleTypeMetadata.type_name" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The registered name for this module type.</p>
    </div>

  </div>
















  </div>

    </div>

  </div>









  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.metadata.operation_models" class="doc doc-heading">
        <code>operation_models</code>



<a href="#kiara.metadata.operation_models" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.metadata.operation_models.OperationsMetadata" class="doc doc-heading">
        <code>
OperationsMetadata            (<a class="autorefs autorefs-internal" title="kiara.metadata.MetadataModel" href="../metadata/__init__/#kiara.metadata.MetadataModel">MetadataModel</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.operation_models.OperationsMetadata" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/metadata/operation_models.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">OperationsMetadata</span><span class="p">(</span><span class="n">MetadataModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_all</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;OperationsMetadata&quot;</span><span class="p">]:</span>

        <span class="n">op_types</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">operation_types</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">op_type</span> <span class="ow">in</span> <span class="n">op_types</span><span class="p">:</span>
            <span class="n">op_type_cls</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">get_operations</span><span class="p">(</span><span class="n">op_type</span><span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">op_type</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_operations_class</span><span class="p">(</span><span class="n">op_type_cls</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_operations_class</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">operation_type_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;OperationType&quot;</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;OperationsMetadata&quot;</span><span class="p">:</span>

        <span class="n">origin_md</span> <span class="o">=</span> <span class="n">OriginMetadataModel</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">operation_type_cls</span><span class="p">)</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">DocumentationMetadataModel</span><span class="o">.</span><span class="n">from_class_doc</span><span class="p">(</span><span class="n">operation_type_cls</span><span class="p">)</span>
        <span class="n">python_class</span> <span class="o">=</span> <span class="n">PythonClassMetadata</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">operation_type_cls</span><span class="p">)</span>
        <span class="n">properties_md</span> <span class="o">=</span> <span class="n">ContextMetadataModel</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">operation_type_cls</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">OperationsMetadata</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span>
            <span class="n">type_name</span><span class="o">=</span><span class="n">operation_type_cls</span><span class="o">.</span><span class="n">_operation_type_name</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="n">documentation</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span>
            <span class="n">origin</span><span class="o">=</span><span class="n">origin_md</span><span class="p">,</span>
            <span class="n">context</span><span class="o">=</span><span class="n">properties_md</span><span class="p">,</span>
            <span class="n">python_class</span><span class="o">=</span><span class="n">python_class</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">type_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The registered name for this value type.&quot;</span><span class="p">)</span>
    <span class="n">documentation</span><span class="p">:</span> <span class="n">DocumentationMetadataModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Documentation for the value type.&quot;</span>
    <span class="p">)</span>
    <span class="n">origin</span><span class="p">:</span> <span class="n">OriginMetadataModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Information about the creator of this value type.&quot;</span>
    <span class="p">)</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">ContextMetadataModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic properties of this value type.&quot;</span>
    <span class="p">)</span>
    <span class="n">python_class</span><span class="p">:</span> <span class="n">PythonClassMetadata</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The Python class for this value type.&quot;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">python_class</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">OPERATION_TYPE_CATEGORY_ALIAS</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.operation_models.OperationsMetadata.context" class="doc doc-heading">
<code class="highlight language-python"><span class="n">context</span><span class="p">:</span> <span class="n">ContextMetadataModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.operation_models.OperationsMetadata.context" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Generic properties of this value type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.operation_models.OperationsMetadata.documentation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">documentation</span><span class="p">:</span> <span class="n">DocumentationMetadataModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.operation_models.OperationsMetadata.documentation" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Documentation for the value type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.operation_models.OperationsMetadata.origin" class="doc doc-heading">
<code class="highlight language-python"><span class="n">origin</span><span class="p">:</span> <span class="n">OriginMetadataModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.operation_models.OperationsMetadata.origin" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Information about the creator of this value type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.operation_models.OperationsMetadata.python_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">python_class</span><span class="p">:</span> <span class="n">PythonClassMetadata</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.operation_models.OperationsMetadata.python_class" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The Python class for this value type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.operation_models.OperationsMetadata.type_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">type_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.operation_models.OperationsMetadata.type_name" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The registered name for this value type.</p>
    </div>

  </div>














  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.metadata.type_models" class="doc doc-heading">
        <code>type_models</code>



<a href="#kiara.metadata.type_models" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.metadata.type_models.ValueTypeMetadata" class="doc doc-heading">
        <code>
ValueTypeMetadata            (<a class="autorefs autorefs-internal" title="kiara.metadata.MetadataModel" href="../metadata/__init__/#kiara.metadata.MetadataModel">MetadataModel</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.metadata.type_models.ValueTypeMetadata" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/metadata/type_models.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueTypeMetadata</span><span class="p">(</span><span class="n">MetadataModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_all</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ValueTypeMetadata&quot;</span><span class="p">]:</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">vt</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">value_types</span><span class="p">:</span>
            <span class="n">t_cls</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">get_value_type_cls</span><span class="p">(</span><span class="n">vt</span><span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">vt</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_value_type_class</span><span class="p">(</span><span class="n">t_cls</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_value_type_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value_type_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;ValueType&quot;</span><span class="p">]):</span>

        <span class="n">origin_md</span> <span class="o">=</span> <span class="n">OriginMetadataModel</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">value_type_cls</span><span class="p">)</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">DocumentationMetadataModel</span><span class="o">.</span><span class="n">from_class_doc</span><span class="p">(</span><span class="n">value_type_cls</span><span class="p">)</span>
        <span class="n">python_class</span> <span class="o">=</span> <span class="n">PythonClassMetadata</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">value_type_cls</span><span class="p">)</span>
        <span class="n">properties_md</span> <span class="o">=</span> <span class="n">ContextMetadataModel</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">value_type_cls</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ValueTypeMetadata</span><span class="p">(</span>
            <span class="n">type_name</span><span class="o">=</span><span class="n">value_type_cls</span><span class="o">.</span><span class="n">_value_type_name</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="n">documentation</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span>
            <span class="n">origin</span><span class="o">=</span><span class="n">origin_md</span><span class="p">,</span>
            <span class="n">context</span><span class="o">=</span><span class="n">properties_md</span><span class="p">,</span>
            <span class="n">python_class</span><span class="o">=</span><span class="n">python_class</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">type_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The registered name for this value type.&quot;</span><span class="p">)</span>
    <span class="n">documentation</span><span class="p">:</span> <span class="n">DocumentationMetadataModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Documentation for the value type.&quot;</span>
    <span class="p">)</span>
    <span class="n">origin</span><span class="p">:</span> <span class="n">OriginMetadataModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Information about the creator of this value type.&quot;</span>
    <span class="p">)</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">ContextMetadataModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic properties of this value type.&quot;</span>
    <span class="p">)</span>
    <span class="n">python_class</span><span class="p">:</span> <span class="n">PythonClassMetadata</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The Python class for this value type.&quot;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_name</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">VALUE_TYPE_CATEGORY_ALIAS</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.type_models.ValueTypeMetadata.context" class="doc doc-heading">
<code class="highlight language-python"><span class="n">context</span><span class="p">:</span> <span class="n">ContextMetadataModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.type_models.ValueTypeMetadata.context" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Generic properties of this value type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.type_models.ValueTypeMetadata.documentation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">documentation</span><span class="p">:</span> <span class="n">DocumentationMetadataModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.type_models.ValueTypeMetadata.documentation" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Documentation for the value type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.type_models.ValueTypeMetadata.origin" class="doc doc-heading">
<code class="highlight language-python"><span class="n">origin</span><span class="p">:</span> <span class="n">OriginMetadataModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.type_models.ValueTypeMetadata.origin" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Information about the creator of this value type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.type_models.ValueTypeMetadata.python_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">python_class</span><span class="p">:</span> <span class="n">PythonClassMetadata</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.type_models.ValueTypeMetadata.python_class" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The Python class for this value type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.metadata.type_models.ValueTypeMetadata.type_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">type_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.metadata.type_models.ValueTypeMetadata.type_name" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The registered name for this value type.</p>
    </div>

  </div>














  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.module" class="doc doc-heading">
        <code>module</code>



<a href="#kiara.module" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h3 id="kiara.module.KiaraModule" class="doc doc-heading">
        <code>
KiaraModule            (<span title="typing.Generic">Generic</span>, <span title="abc.ABC">ABC</span>)
        </code>



<a href="#kiara.module.KiaraModule" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>The base class that every custom module in <em>Kiara</em> needs to inherit from.</p>
<p>The core of every <code>KiaraModule</code> is a <code>process</code> method, which should be a 'pure',
 idempotent function that creates one or several output values from the given input(s), and its purpose is to transfor
 a set of inputs into a set of outputs.</p>
<p>Every module can be configured. The module configuration schema can differ, but every one such configuration needs to
 subclass the <a class="autorefs autorefs-internal" href="../module_config/#kiara.module_config.ModuleTypeConfigSchema">ModuleTypeConfigSchema</a> class and set as the value to the
 <code>_config_cls</code> attribute of the module class. This is useful, because it allows for some modules to serve a much
 larger variety of use-cases than non-configurable modules would be, which would mean more code duplication because
 of very simlilar, but slightly different module types.</p>
<p>Each module class (type) has a unique -- within a <em>kiara</em> context -- module type id which can be accessed via the
 <code>_module_type_id</code> class attribute.</p>

<p><strong>Examples:</strong></p>
    <p>A simple example would be an 'addition' module, with <code>a</code> and <code>b</code> configured as inputs, and <code>z</code> as the output field name.</p>
<p>An implementing class would look something like this:</p>
<p>TODO</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>id</code></td>
        <td><code>str</code></td>
        <td><p>the id for this module (needs to be unique within a pipeline)</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>parent_id</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>the id of the parent, in case this module is part of a pipeline</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>module_config</code></td>
        <td><code>Any</code></td>
        <td><p>the configuation for this module</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>metadata</code></td>
        <td><code>Mapping[str, Any]</code></td>
        <td><p>metadata for this module (not implemented yet)</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KiaraModule</span><span class="p">(</span><span class="n">typing</span><span class="o">.</span><span class="n">Generic</span><span class="p">[</span><span class="n">KIARA_CONFIG</span><span class="p">],</span> <span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The base class that every custom module in *Kiara* needs to inherit from.</span>

<span class="sd">    The core of every ``KiaraModule`` is a ``process`` method, which should be a &#39;pure&#39;,</span>
<span class="sd">     idempotent function that creates one or several output values from the given input(s), and its purpose is to transfor</span>
<span class="sd">     a set of inputs into a set of outputs.</span>

<span class="sd">     Every module can be configured. The module configuration schema can differ, but every one such configuration needs to</span>
<span class="sd">     subclass the [ModuleTypeConfigSchema][kiara.module_config.ModuleTypeConfigSchema] class and set as the value to the</span>
<span class="sd">     ``_config_cls`` attribute of the module class. This is useful, because it allows for some modules to serve a much</span>
<span class="sd">     larger variety of use-cases than non-configurable modules would be, which would mean more code duplication because</span>
<span class="sd">     of very simlilar, but slightly different module types.</span>

<span class="sd">     Each module class (type) has a unique -- within a *kiara* context -- module type id which can be accessed via the</span>
<span class="sd">     ``_module_type_id`` class attribute.</span>

<span class="sd">    Examples:</span>

<span class="sd">        A simple example would be an &#39;addition&#39; module, with ``a`` and ``b`` configured as inputs, and ``z`` as the output field name.</span>

<span class="sd">        An implementing class would look something like this:</span>

<span class="sd">        TODO</span>

<span class="sd">    Arguments:</span>
<span class="sd">        id (str): the id for this module (needs to be unique within a pipeline)</span>
<span class="sd">        parent_id (typing.Optional[str]): the id of the parent, in case this module is part of a pipeline</span>
<span class="sd">        module_config (typing.Any): the configuation for this module</span>
<span class="sd">        metadata (typing.Mapping[str, typing.Any]): metadata for this module (not implemented yet)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># TODO: not quite sure about this generic type here, mypy doesn&#39;t seem to like it</span>
    <span class="n">_config_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">KIARA_CONFIG</span><span class="p">]</span> <span class="o">=</span> <span class="n">ModuleTypeConfigSchema</span>  <span class="c1"># type: ignore</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_instance</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">module_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KiaraModule&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Create an instance of a *kiara* module.</span>

<span class="sd">        This class method is overloaded in a way that you can either provide the `module_type` argument, in which case</span>
<span class="sd">        the relevant sub-class will be queried from the *kiara* context, or you can call this method directly on any of the</span>
<span class="sd">        inehreting sub-classes. You can&#39;t do both, though.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            module_type: must be None if called on the ``KiaraModule`` base class, otherwise the module or operation id</span>
<span class="sd">            module_config: the configuration of the module instance</span>
<span class="sd">            kiara: the *kiara* context</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">cls</span> <span class="o">==</span> <span class="n">KiaraModule</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">module_type</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="s2">&quot;This method must be either called on a subclass of KiaraModule, not KiaraModule itself, or it needs the &#39;module_type&#39; argument specified.&quot;</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">module_type</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="s2">&quot;This method must be either called without the &#39;module_type&#39; argument specified, or on a subclass of the KiaraModule class, but not both.&quot;</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="bp">cls</span> <span class="o">==</span> <span class="n">KiaraModule</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">module_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="n">module_conf</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="o">.</span><span class="n">create_module_config</span><span class="p">(</span>
                <span class="n">config</span><span class="o">=</span><span class="n">module_type</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">module_conf</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="o">.</span><span class="n">create_module_config</span><span class="p">(</span>
                <span class="n">config</span><span class="o">=</span><span class="bp">cls</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">module_conf</span><span class="o">.</span><span class="n">create_module</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Retrieve a collection of profiles (pre-set module configs) for this *kiara* module type.</span>

<span class="sd">        This is used to automatically create generally useful operations (incl. their ids).</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_type_metadata</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KiaraModuleTypeMetadata</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return all metadata associated with this module type.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">KiaraModuleTypeMetadata</span><span class="o">.</span><span class="n">from_module_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>

    <span class="c1"># @classmethod</span>
    <span class="c1"># def profiles(</span>
    <span class="c1">#     cls,</span>
    <span class="c1"># ) -&gt; typing.Optional[typing.Mapping[str, typing.Mapping[str, typing.Any]]]:</span>
    <span class="c1">#     &quot;&quot;&quot;Retrieve a collection of profiles (pre-set module configs) for this *kiara* module type.</span>
    <span class="c1">#</span>
    <span class="c1">#     This is used to automatically create generally useful operations (incl. their ids).</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     return None</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">is_pipeline</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Check whether this module type is a pipeline, or not.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parent_id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
            <span class="kc">None</span><span class="p">,</span> <span class="n">KIARA_CONFIG</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="k">if</span> <span class="nb">id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parent_id</span> <span class="o">=</span> <span class="n">parent_id</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span> <span class="o">=</span> <span class="n">kiara</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">module_config</span><span class="p">,</span> <span class="n">ModuleTypeConfigSchema</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span> <span class="n">KIARA_CONFIG</span> <span class="o">=</span> <span class="n">module_config</span>  <span class="c1"># type: ignore</span>
        <span class="k">elif</span> <span class="n">module_config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">_config_cls</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">module_config</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">_config_cls</span><span class="p">(</span><span class="o">**</span><span class="n">module_config</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">KiaraModuleConfigException</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Error creating module &#39;</span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2">&#39;. </span><span class="si">{</span><span class="n">ve</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span>
                    <span class="n">module_config</span><span class="p">,</span>
                    <span class="n">ve</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for module config: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">module_config</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_module_hash</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_info</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">KiaraModuleInstanceMetadata</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_input_schemas</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_constants</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_merged_input_schemas</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_output_schemas</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The id of this module.</span>

<span class="sd">        This is only unique within a pipeline.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">parent_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;The id of the parent of this module (if part of a pipeline).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">full_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The full id for this module.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_id</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">parent_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KIARA_CONFIG</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Retrieve the configuration object for this module.</span>

<span class="sd">        Returns:</span>
<span class="sd">            the module-class-specific config object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span>

    <span class="k">def</span> <span class="nf">input_required</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">input_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_schemas</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No input &#39;</span><span class="si">{</span><span class="n">input_name</span><span class="si">}</span><span class="s2">&#39; for module &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_schemas</span><span class="p">[</span><span class="n">input_name</span><span class="p">]</span><span class="o">.</span><span class="n">is_required</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">input_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_config_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Retrieve the value for a specific configuration option.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            key: the config key</span>

<span class="sd">        Returns:</span>
<span class="sd">            the value for the provided key</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Error accessing config value &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; in module </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">_module_type_id</span><span class="si">}</span><span class="s2">.&quot;</span>  <span class="c1"># type: ignore</span>
            <span class="p">)</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Abstract method to implement by child classes, returns a description of the input schema of this module.</span>

<span class="sd">        If returning a dictionary of dictionaries, the format of the return value is as follows (items with &#39;*&#39; are optional):</span>

<span class="sd">        ```</span>
<span class="sd">            {</span>
<span class="sd">              &quot;[input_field_name]: {</span>
<span class="sd">                  &quot;type&quot;: &quot;[value_type]&quot;,</span>
<span class="sd">                  &quot;doc*&quot;: &quot;[a description of this input]&quot;,</span>
<span class="sd">                  &quot;optional*&#39;: [boolean whether this input is optional or required (defaults to &#39;False&#39;)]</span>
<span class="sd">              &quot;[other_input_field_name]: {</span>
<span class="sd">                  &quot;type: ...</span>
<span class="sd">                  ...</span>
<span class="sd">              }</span>
<span class="sd">              ```</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Abstract method to implement by child classes, returns a description of the output schema of this module.</span>

<span class="sd">        If returning a dictionary of dictionaries, the format of the return value is as follows (items with &#39;*&#39; are optional):</span>

<span class="sd">        ```</span>
<span class="sd">            {</span>
<span class="sd">              &quot;[output_field_name]: {</span>
<span class="sd">                  &quot;type&quot;: &quot;[value_type]&quot;,</span>
<span class="sd">                  &quot;doc*&quot;: &quot;[a description of this output]&quot;</span>
<span class="sd">              &quot;[other_input_field_name]: {</span>
<span class="sd">                  &quot;type: ...</span>
<span class="sd">                  ...</span>
<span class="sd">              }</span>
<span class="sd">            ```</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">input_schemas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;The input schema for this module.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_schemas</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_create_input_schemas</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_schemas</span>  <span class="c1"># type: ignore</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">full_input_schemas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_merged_input_schemas</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_merged_input_schemas</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_merged_input_schemas</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input_schemas</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_merged_input_schemas</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">constants</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_merged_input_schemas</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">constants</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constants</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_create_input_schemas</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constants</span>  <span class="c1"># type: ignore</span>

    <span class="k">def</span> <span class="nf">_create_input_schemas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">_input_schemas_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_input_schema</span><span class="p">()</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">_input_schemas_data</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid module implementation for &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;: empty input schema&quot;</span>
                <span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">_input_schemas</span> <span class="o">=</span> <span class="n">create_schemas</span><span class="p">(</span>
                    <span class="n">schema_config</span><span class="o">=</span><span class="n">_input_schemas_data</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t create input schemas for module </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">full_id</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="n">defaults</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">defaults</span>
            <span class="n">constants</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">constants</span>

            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">defaults</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_input_schemas</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Can&#39;t create inputs for module &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_module_type_id</span><span class="si">}</span><span class="s2">&#39;, invalid default field name &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39;. Available field names: &#39;</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">_input_schemas</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&#39;&quot;</span>  <span class="c1"># type: ignore</span>
                    <span class="p">)</span>

            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">constants</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_input_schemas</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Can&#39;t create inputs for module &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_module_type_id</span><span class="si">}</span><span class="s2">&#39;, invalid constant field name &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39;. Available field names: &#39;</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">_input_schemas</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&#39;&quot;</span>  <span class="c1"># type: ignore</span>
                    <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_input_schemas</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constants</span> <span class="o">=</span> <span class="n">overlay_constants_and_defaults</span><span class="p">(</span>
                <span class="n">_input_schemas</span><span class="p">,</span> <span class="n">defaults</span><span class="o">=</span><span class="n">defaults</span><span class="p">,</span> <span class="n">constants</span><span class="o">=</span><span class="n">constants</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t create input schemas for module of type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">_module_type_id</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">output_schemas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;The output schema for this module.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_schemas</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_schemas</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">_output_schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_output_schema</span><span class="p">()</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">_output_schema</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid module implementation for &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;: empty output schema&quot;</span>
                <span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_output_schemas</span> <span class="o">=</span> <span class="n">create_schemas</span><span class="p">(</span>
                    <span class="n">schema_config</span><span class="o">=</span><span class="n">_output_schema</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t create output schemas for module </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">full_id</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_schemas</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t create output schemas for module of type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">_module_type_id</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">input_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;A list of input field names for this module.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_schemas</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">output_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;A list of output field names for this module.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_schemas</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">process_step</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">job_log</span><span class="p">:</span> <span class="n">JobLog</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Kick off processing for a specific set of input/outputs.</span>

<span class="sd">        This method calls the implemented [process][kiara.module.KiaraModule.process] method of the inheriting class,</span>
<span class="sd">        as well as wrapping input/output-data related functionality.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            inputs: the input value set</span>
<span class="sd">            outputs: the output value set</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">signature</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="k">if</span> <span class="s2">&quot;job_log&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">signature</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="n">outputs</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="kn">import</span> <span class="nn">traceback</span>

                        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                        <span class="k">pass</span>
                <span class="k">raise</span> <span class="n">e</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="n">outputs</span><span class="p">,</span> <span class="n">job_log</span><span class="o">=</span><span class="n">job_log</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="kn">import</span> <span class="nn">traceback</span>

                        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                        <span class="k">pass</span>
                <span class="k">raise</span> <span class="n">e</span>

    <span class="c1"># @typing.overload</span>
    <span class="c1"># def process(self, inputs: ValueSet, outputs: ValueSet) -&gt; None:</span>
    <span class="c1">#     &quot;&quot;&quot;Abstract method to implement by child classes, should be a pure, idempotent function that uses the values from ``inputs``, and stores results in the provided ``outputs`` object.</span>
    <span class="c1">#</span>
    <span class="c1">#     Arguments:</span>
    <span class="c1">#         inputs: the input value set</span>
    <span class="c1">#         outputs: the output value set</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     pass</span>
    <span class="c1">#</span>
    <span class="c1"># @typing.overload</span>
    <span class="c1"># def process(self, inputs: ValueSet, outputs: ValueSet, job_log: typing.Optional[JobLog]=None) -&gt; None:</span>
    <span class="c1">#     pass</span>
    <span class="c1">#</span>
    <span class="c1"># def process(self, inputs, outputs, job_log=None) -&gt; None:</span>
    <span class="c1">#     pass</span>

    <span class="k">def</span> <span class="nf">create_full_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">]:</span>

        <span class="c1"># TODO: find a generic way to do this kind of stuff</span>
        <span class="k">def</span> <span class="nf">clean_value</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="s2">&quot;as_py&quot;</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">v</span><span class="o">.</span><span class="n">as_py</span><span class="p">()</span>  <span class="c1"># type: ignore</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">v</span>

        <span class="n">resolved_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid input: value provided for constant &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
            <span class="n">inputs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">clean_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_schemas</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                    <span class="ow">and</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                <span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Invalid input name &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2"> for module </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_module_type_id</span><span class="si">}</span><span class="s2">. Not part of the schema, allowed input names: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># type: ignore</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_schemas</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_schemas</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_registry</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                        <span class="n">value_data</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">value_schema</span><span class="o">=</span><span class="n">schema</span>
                    <span class="p">)</span>
                    <span class="c1"># value = Value(</span>
                    <span class="c1">#     value_data=value,  # type: ignore</span>
                    <span class="c1">#     value_schema=schema,</span>
                    <span class="c1">#     is_constant=False,</span>
                    <span class="c1">#     registry=self._kiara.data_registry,  # type: ignore</span>
                    <span class="c1"># )</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">constants</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_registry</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                        <span class="n">value_data</span><span class="o">=</span><span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span>
                        <span class="n">value_schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="c1"># value = Value(</span>
                    <span class="c1">#     value_schema=schema,</span>
                    <span class="c1">#     is_constant=False,</span>
                    <span class="c1">#     kiara=self._kiara,  # type: ignore</span>
                    <span class="c1">#     registry=self._kiara.data_registry,  # type: ignore</span>
                    <span class="c1"># )</span>
            <span class="n">resolved_inputs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">return</span> <span class="n">resolved_inputs</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_attach_lineage</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Execute the module with the provided inputs directly.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            inputs: a map of the input values (as described by the input schema</span>
<span class="sd">        Returns:</span>
<span class="sd">            a map of the output values (as described by the output schema)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resolved_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_full_inputs</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>

        <span class="c1"># TODO: introduce a &#39;temp&#39; value set implementation and use that here</span>
        <span class="n">input_value_set</span> <span class="o">=</span> <span class="n">SlottedValueSet</span><span class="o">.</span><span class="n">from_schemas</span><span class="p">(</span>
            <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span>
            <span class="n">schemas</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">full_input_schemas</span><span class="p">,</span>
            <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">initial_values</span><span class="o">=</span><span class="n">resolved_inputs</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;module_inputs_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">input_value_set</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>

            <span class="n">invalid_details</span> <span class="o">=</span> <span class="n">input_value_set</span><span class="o">.</span><span class="n">check_invalid</span><span class="p">()</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t process module &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_module_type_name</span><span class="si">}</span><span class="s2">&#39;, input field(s) not valid: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">invalid_details</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># type: ignore</span>
            <span class="p">)</span>

        <span class="n">output_value_set</span> <span class="o">=</span> <span class="n">SlottedValueSet</span><span class="o">.</span><span class="n">from_schemas</span><span class="p">(</span>
            <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span>
            <span class="n">schemas</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">output_schemas</span><span class="p">,</span>
            <span class="n">read_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_module_type_name</span><span class="si">}</span><span class="s2">_module_outputs_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="n">default_value</span><span class="o">=</span><span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_value_set</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="n">output_value_set</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="n">result_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">MutableMapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">_attach_lineage</span><span class="p">:</span>
            <span class="n">input_infos</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">get_info</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">resolved_inputs</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
            <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">output</span> <span class="ow">in</span> <span class="n">output_value_set</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">value_lineage</span> <span class="o">=</span> <span class="n">ValueLineage</span><span class="o">.</span><span class="n">from_module_and_inputs</span><span class="p">(</span>
                    <span class="n">module</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_name</span><span class="o">=</span><span class="n">field_name</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="n">input_infos</span>
                <span class="p">)</span>
                <span class="c1"># value_lineage = None</span>
                <span class="n">output_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_registry</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                    <span class="n">value_data</span><span class="o">=</span><span class="n">output</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="n">value_lineage</span>
                <span class="p">)</span>
                <span class="n">result_outputs</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">output_val</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result_outputs</span> <span class="o">=</span> <span class="n">output_value_set</span>

        <span class="n">result_set</span> <span class="o">=</span> <span class="n">SlottedValueSet</span><span class="o">.</span><span class="n">from_schemas</span><span class="p">(</span>
            <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span>
            <span class="n">schemas</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">output_schemas</span><span class="p">,</span>
            <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">initial_values</span><span class="o">=</span><span class="n">result_outputs</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_module_type_name</span><span class="si">}</span><span class="s2">_module_outputs_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">result_set</span>

        <span class="c1"># result = output_value_set.get_all_value_objects()</span>
        <span class="c1"># return output_value_set</span>
        <span class="c1"># return ValueSetImpl(items=result, read_only=True)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">module_instance_doc</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return documentation for this instance of the module.</span>

<span class="sd">        If not overwritten, will return this class&#39; method ``doc()``.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># TODO: auto create instance doc?</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">full_doc</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">module_instance_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return this modules &#39;module_hash&#39;.</span>

<span class="sd">        If two module instances ``module_instance_hash`` values are the same, it is guaranteed that their ``process`` methods will</span>
<span class="sd">        return the same output, given the same inputs (except if that processing step uses randomness). It can also be</span>
<span class="sd">        assumed that the two instances have the same input and output fields, with the same schemas.</span>

<span class="sd">        !!! note</span>
<span class="sd">        This implementation is preliminary, since it&#39;s not yet 100% clear to me how much that will be needed, and</span>
<span class="sd">        in which situations. Also, module versioning needs to be implemented before this can work reliably. Also, for now</span>
<span class="sd">        it is assumed that a module configuration is not changed once set, this also might change in the future</span>

<span class="sd">        Returns:</span>
<span class="sd">            this modules &#39;module_instance_hash&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># TODO:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module_hash</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_d</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;module_cls&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0.0&quot;</span><span class="p">,</span>  <span class="c1"># TODO: implement module versioning, package name might also need to be included here</span>
                <span class="s2">&quot;config_hash&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">config_hash</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">hashes</span> <span class="o">=</span> <span class="n">deepdiff</span><span class="o">.</span><span class="n">DeepHash</span><span class="p">(</span><span class="n">_d</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_module_hash</span> <span class="o">=</span> <span class="n">hashes</span><span class="p">[</span><span class="n">_d</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module_hash</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KiaraModuleInstanceMetadata</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return an info wrapper class for this module.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_info</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_info</span> <span class="o">=</span> <span class="n">KiaraModuleInstanceMetadata</span><span class="o">.</span><span class="n">from_module_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_info</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">full_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">full_id</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> input_names=</span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input_names</span><span class="p">)</span><span class="si">}</span><span class="s2"> output_names=</span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_names</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="s2">&quot;_module_type_id&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Invalid model class, no &#39;_module_type_id&#39; attribute added. This is a bug&quot;</span>
            <span class="p">)</span>

        <span class="n">r_gro</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">md</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">md</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">()</span>
        <span class="n">r_gro</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>

        <span class="k">yield</span> <span class="n">Panel</span><span class="p">(</span>
            <span class="n">RenderGroup</span><span class="p">(</span><span class="o">*</span><span class="n">r_gro</span><span class="p">),</span>
            <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">ROUNDED</span><span class="p">,</span>
            <span class="n">title_align</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Module: [b]</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">[/b]&quot;</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.module.KiaraModule.config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config</span><span class="p">:</span> <span class="o">~</span><span class="n">KIARA_CONFIG</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.module.KiaraModule.config" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Retrieve the configuration object for this module.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>~KIARA_CONFIG</code></td>
      <td><p>the module-class-specific config object</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h4 id="kiara.module.KiaraModule.full_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">full_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.module.KiaraModule.full_id" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The full id for this module.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h4 id="kiara.module.KiaraModule.id" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.module.KiaraModule.id" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The id of this module.</p>
<p>This is only unique within a pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.module.KiaraModule.info" class="doc doc-heading">
<code class="highlight language-python"><span class="n">info</span><span class="p">:</span> <span class="n">KiaraModuleInstanceMetadata</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.module.KiaraModule.info" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return an info wrapper class for this module.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.module.KiaraModule.input_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">input_names</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.module.KiaraModule.input_names" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A list of input field names for this module.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.module.KiaraModule.input_schemas" class="doc doc-heading">
<code class="highlight language-python"><span class="n">input_schemas</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ValueSchema</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.module.KiaraModule.input_schemas" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The input schema for this module.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.module.KiaraModule.module_instance_doc" class="doc doc-heading">
<code class="highlight language-python"><span class="n">module_instance_doc</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.module.KiaraModule.module_instance_doc" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return documentation for this instance of the module.</p>
<p>If not overwritten, will return this class' method <code>doc()</code>.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.module.KiaraModule.module_instance_hash" class="doc doc-heading">
<code class="highlight language-python"><span class="n">module_instance_hash</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.module.KiaraModule.module_instance_hash" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return this modules 'module_hash'.</p>
<p>If two module instances <code>module_instance_hash</code> values are the same, it is guaranteed that their <code>process</code> methods will
return the same output, given the same inputs (except if that processing step uses randomness). It can also be
assumed that the two instances have the same input and output fields, with the same schemas.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
</div>
<p>This implementation is preliminary, since it's not yet 100% clear to me how much that will be needed, and
in which situations. Also, module versioning needs to be implemented before this can work reliably. Also, for now
it is assumed that a module configuration is not changed once set, this also might change in the future</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>int</code></td>
      <td><p>this modules 'module_instance_hash'</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.module.KiaraModule.output_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">output_names</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.module.KiaraModule.output_names" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A list of output field names for this module.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.module.KiaraModule.output_schemas" class="doc doc-heading">
<code class="highlight language-python"><span class="n">output_schemas</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ValueSchema</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.module.KiaraModule.output_schemas" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The output schema for this module.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.module.KiaraModule.parent_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parent_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.module.KiaraModule.parent_id" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The id of the parent of this module (if part of a pipeline).</p>
    </div>

  </div>












  <div class="doc doc-object doc-method">



<h4 id="kiara.module.KiaraModule.create_input_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.module.KiaraModule.create_input_schema" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the input schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[input_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this input]",
          "optional*': [boolean whether this input is optional or required (defaults to 'False')]
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Abstract method to implement by child classes, returns a description of the input schema of this module.</span>

<span class="sd">    If returning a dictionary of dictionaries, the format of the return value is as follows (items with &#39;*&#39; are optional):</span>

<span class="sd">    ```</span>
<span class="sd">        {</span>
<span class="sd">          &quot;[input_field_name]: {</span>
<span class="sd">              &quot;type&quot;: &quot;[value_type]&quot;,</span>
<span class="sd">              &quot;doc*&quot;: &quot;[a description of this input]&quot;,</span>
<span class="sd">              &quot;optional*&#39;: [boolean whether this input is optional or required (defaults to &#39;False&#39;)]</span>
<span class="sd">          &quot;[other_input_field_name]: {</span>
<span class="sd">              &quot;type: ...</span>
<span class="sd">              ...</span>
<span class="sd">          }</span>
<span class="sd">          ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.module.KiaraModule.create_instance" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_instance</span><span class="p">(</span><span class="n">module_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.module.KiaraModule.create_instance" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Create an instance of a <em>kiara</em> module.</p>
<p>This class method is overloaded in a way that you can either provide the <code>module_type</code> argument, in which case
the relevant sub-class will be queried from the <em>kiara</em> context, or you can call this method directly on any of the
inehreting sub-classes. You can't do both, though.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>module_type</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>must be None if called on the <code>KiaraModule</code> base class, otherwise the module or operation id</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>module_config</code></td>
        <td><code>Optional[Mapping[str, Any]]</code></td>
        <td><p>the configuration of the module instance</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>kiara</code></td>
        <td><code>Optional[Kiara]</code></td>
        <td><p>the <em>kiara</em> context</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">create_instance</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">module_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KiaraModule&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Create an instance of a *kiara* module.</span>

<span class="sd">    This class method is overloaded in a way that you can either provide the `module_type` argument, in which case</span>
<span class="sd">    the relevant sub-class will be queried from the *kiara* context, or you can call this method directly on any of the</span>
<span class="sd">    inehreting sub-classes. You can&#39;t do both, though.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        module_type: must be None if called on the ``KiaraModule`` base class, otherwise the module or operation id</span>
<span class="sd">        module_config: the configuration of the module instance</span>
<span class="sd">        kiara: the *kiara* context</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">cls</span> <span class="o">==</span> <span class="n">KiaraModule</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">module_type</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;This method must be either called on a subclass of KiaraModule, not KiaraModule itself, or it needs the &#39;module_type&#39; argument specified.&quot;</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">module_type</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;This method must be either called without the &#39;module_type&#39; argument specified, or on a subclass of the KiaraModule class, but not both.&quot;</span>
            <span class="p">)</span>

    <span class="k">if</span> <span class="bp">cls</span> <span class="o">==</span> <span class="n">KiaraModule</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">module_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="n">module_conf</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="o">.</span><span class="n">create_module_config</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">module_type</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">module_conf</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="o">.</span><span class="n">create_module_config</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="bp">cls</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">module_conf</span><span class="o">.</span><span class="n">create_module</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.module.KiaraModule.create_output_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.module.KiaraModule.create_output_schema" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the output schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[output_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this output]"
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Abstract method to implement by child classes, returns a description of the output schema of this module.</span>

<span class="sd">    If returning a dictionary of dictionaries, the format of the return value is as follows (items with &#39;*&#39; are optional):</span>

<span class="sd">    ```</span>
<span class="sd">        {</span>
<span class="sd">          &quot;[output_field_name]: {</span>
<span class="sd">              &quot;type&quot;: &quot;[value_type]&quot;,</span>
<span class="sd">              &quot;doc*&quot;: &quot;[a description of this output]&quot;</span>
<span class="sd">          &quot;[other_input_field_name]: {</span>
<span class="sd">              &quot;type: ...</span>
<span class="sd">              ...</span>
<span class="sd">          }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.module.KiaraModule.get_config_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_config_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></code>


<a href="#kiara.module.KiaraModule.get_config_value" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Retrieve the value for a specific configuration option.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>key</code></td>
        <td><code>str</code></td>
        <td><p>the config key</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>the value for the provided key</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_config_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Retrieve the value for a specific configuration option.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        key: the config key</span>

<span class="sd">    Returns:</span>
<span class="sd">        the value for the provided key</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Error accessing config value &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; in module </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">_module_type_id</span><span class="si">}</span><span class="s2">.&quot;</span>  <span class="c1"># type: ignore</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.module.KiaraModule.get_type_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_type_metadata</span><span class="p">()</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.module.KiaraModule.get_type_metadata" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return all metadata associated with this module type.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_type_metadata</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KiaraModuleTypeMetadata</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return all metadata associated with this module type.&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">KiaraModuleTypeMetadata</span><span class="o">.</span><span class="n">from_module_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h4 id="kiara.module.KiaraModule.is_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_pipeline</span><span class="p">()</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.module.KiaraModule.is_pipeline" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Check whether this module type is a pipeline, or not.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">is_pipeline</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Check whether this module type is a pipeline, or not.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.module.KiaraModule.process_step" class="doc doc-heading">
<code class="highlight language-python"><span class="n">process_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">,</span> <span class="n">job_log</span><span class="p">)</span></code>


<a href="#kiara.module.KiaraModule.process_step" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Kick off processing for a specific set of input/outputs.</p>
<p>This method calls the implemented [process][kiara.module.KiaraModule.process] method of the inheriting class,
as well as wrapping input/output-data related functionality.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>inputs</code></td>
        <td><code>ValueSet</code></td>
        <td><p>the input value set</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>outputs</code></td>
        <td><code>ValueSet</code></td>
        <td><p>the output value set</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">process_step</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">job_log</span><span class="p">:</span> <span class="n">JobLog</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Kick off processing for a specific set of input/outputs.</span>

<span class="sd">    This method calls the implemented [process][kiara.module.KiaraModule.process] method of the inheriting class,</span>
<span class="sd">    as well as wrapping input/output-data related functionality.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        inputs: the input value set</span>
<span class="sd">        outputs: the output value set</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">signature</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="k">if</span> <span class="s2">&quot;job_log&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">signature</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="n">outputs</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="kn">import</span> <span class="nn">traceback</span>

                    <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">raise</span> <span class="n">e</span>

    <span class="k">else</span><span class="p">:</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="n">outputs</span><span class="p">,</span> <span class="n">job_log</span><span class="o">=</span><span class="n">job_log</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="kn">import</span> <span class="nn">traceback</span>

                    <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">raise</span> <span class="n">e</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.module.KiaraModule.retrieve_module_profiles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">retrieve_module_profiles</span><span class="p">(</span><span class="n">kiara</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.module.KiaraModule.retrieve_module_profiles" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Retrieve a collection of profiles (pre-set module configs) for this <em>kiara</em> module type.</p>
<p>This is used to automatically create generally useful operations (incl. their ids).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Retrieve a collection of profiles (pre-set module configs) for this *kiara* module type.</span>

<span class="sd">    This is used to automatically create generally useful operations (incl. their ids).</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.module.KiaraModule.run" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_attach_lineage</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">inputs</span><span class="p">)</span></code>


<a href="#kiara.module.KiaraModule.run" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Execute the module with the provided inputs directly.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>inputs</code></td>
        <td><code>Any</code></td>
        <td><p>a map of the input values (as described by the input schema</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ValueSet</code></td>
      <td><p>a map of the output values (as described by the output schema)</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_attach_lineage</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Execute the module with the provided inputs directly.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        inputs: a map of the input values (as described by the input schema</span>
<span class="sd">    Returns:</span>
<span class="sd">        a map of the output values (as described by the output schema)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">resolved_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_full_inputs</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>

    <span class="c1"># TODO: introduce a &#39;temp&#39; value set implementation and use that here</span>
    <span class="n">input_value_set</span> <span class="o">=</span> <span class="n">SlottedValueSet</span><span class="o">.</span><span class="n">from_schemas</span><span class="p">(</span>
        <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span>
        <span class="n">schemas</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">full_input_schemas</span><span class="p">,</span>
        <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">initial_values</span><span class="o">=</span><span class="n">resolved_inputs</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;module_inputs_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">input_value_set</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>

        <span class="n">invalid_details</span> <span class="o">=</span> <span class="n">input_value_set</span><span class="o">.</span><span class="n">check_invalid</span><span class="p">()</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Can&#39;t process module &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_module_type_name</span><span class="si">}</span><span class="s2">&#39;, input field(s) not valid: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">invalid_details</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># type: ignore</span>
        <span class="p">)</span>

    <span class="n">output_value_set</span> <span class="o">=</span> <span class="n">SlottedValueSet</span><span class="o">.</span><span class="n">from_schemas</span><span class="p">(</span>
        <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span>
        <span class="n">schemas</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">output_schemas</span><span class="p">,</span>
        <span class="n">read_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_module_type_name</span><span class="si">}</span><span class="s2">_module_outputs_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
        <span class="n">default_value</span><span class="o">=</span><span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_value_set</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="n">output_value_set</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="n">result_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">MutableMapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">_attach_lineage</span><span class="p">:</span>
        <span class="n">input_infos</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">get_info</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">resolved_inputs</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">output</span> <span class="ow">in</span> <span class="n">output_value_set</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">value_lineage</span> <span class="o">=</span> <span class="n">ValueLineage</span><span class="o">.</span><span class="n">from_module_and_inputs</span><span class="p">(</span>
                <span class="n">module</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_name</span><span class="o">=</span><span class="n">field_name</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="n">input_infos</span>
            <span class="p">)</span>
            <span class="c1"># value_lineage = None</span>
            <span class="n">output_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_registry</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                <span class="n">value_data</span><span class="o">=</span><span class="n">output</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="n">value_lineage</span>
            <span class="p">)</span>
            <span class="n">result_outputs</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">output_val</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">result_outputs</span> <span class="o">=</span> <span class="n">output_value_set</span>

    <span class="n">result_set</span> <span class="o">=</span> <span class="n">SlottedValueSet</span><span class="o">.</span><span class="n">from_schemas</span><span class="p">(</span>
        <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span>
        <span class="n">schemas</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">output_schemas</span><span class="p">,</span>
        <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">initial_values</span><span class="o">=</span><span class="n">result_outputs</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_module_type_name</span><span class="si">}</span><span class="s2">_module_outputs_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">result_set</span>

    <span class="c1"># result = output_value_set.get_all_value_objects()</span>
    <span class="c1"># return output_value_set</span>
    <span class="c1"># return ValueSetImpl(items=result, read_only=True)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.module.StepInputs" class="doc doc-heading">
        <code>
StepInputs            (<a class="autorefs autorefs-internal" title="kiara.data.values.value_set.ValueSet" href="../data/values/value_set/#kiara.data.values.value_set.ValueSet">ValueSet</a>)
        </code>



<a href="#kiara.module.StepInputs" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Wrapper class to hold a set of inputs for a pipeline processing step.</p>
<p>This is necessary because we can't assume the processing will be done on the same machine (or in the same process)
as the pipeline controller. By disconnecting the value from the processing code, we can react appropriately to
those circumstances.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>inputs</code></td>
        <td><code>ValueSet</code></td>
        <td><p>the input values of a pipeline step</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StepInputs</span><span class="p">(</span><span class="n">ValueSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Wrapper class to hold a set of inputs for a pipeline processing step.</span>

<span class="sd">    This is necessary because we can&#39;t assume the processing will be done on the same machine (or in the same process)</span>
<span class="sd">    as the pipeline controller. By disconnecting the value from the processing code, we can react appropriately to</span>
<span class="sd">    those circumstances.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        inputs (ValueSet): the input values of a pipeline step</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">],</span>
        <span class="n">title</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="n">inputs</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_all_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;All field names included in this ValueSet.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_get_value_obj</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">ensure_metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Retrieve the value object for the specified field.&quot;&quot;&quot;</span>

        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inputs</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ensure_metadata</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ensure_metadata</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
                <span class="n">value</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ensure_metadata</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">value</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">ensure_metadata</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ensure_metadata</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">):</span>
                <span class="n">value</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="o">*</span><span class="n">ensure_metadata</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">ensure_metadata</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; for &#39;ensure_metadata&#39; argument.&quot;</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_set_values</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Inputs are read-only.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h4 id="kiara.module.StepInputs.get_all_field_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_all_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.module.StepInputs.get_all_field_names" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>All field names included in this ValueSet.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_all_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;All field names included in this ValueSet.&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.module.StepOutputs" class="doc doc-heading">
        <code>
StepOutputs            (<a class="autorefs autorefs-internal" title="kiara.data.values.value_set.ValueSet" href="../data/values/value_set/#kiara.data.values.value_set.ValueSet">ValueSet</a>)
        </code>



<a href="#kiara.module.StepOutputs" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Wrapper class to hold a set of outputs for a pipeline processing step.</p>
<p>This is necessary because we can't assume the processing will be done on the same machine (or in the same process)
as the pipeline controller. By disconnecting the value from the processing code, we can react appropriately to
those circumstances.</p>
<p>Internally, this class stores two sets of its values: the 'actual', up-to-date values, and the referenced (original)
ones that were used when creating an object of this class. It's not a good idea to keep both synced all the time,
because that could potentially involve unnecessary data transfer and I/O.</p>
<p>Also, in some cases a developer might want to avoid events that could be triggered by a changed value.</p>
<p>Both value sets can be synced manually using the 'sync()' method.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>outputs</code></td>
        <td><code>ValueSet</code></td>
        <td><p>the output values of a pipeline step</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StepOutputs</span><span class="p">(</span><span class="n">ValueSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Wrapper class to hold a set of outputs for a pipeline processing step.</span>

<span class="sd">    This is necessary because we can&#39;t assume the processing will be done on the same machine (or in the same process)</span>
<span class="sd">    as the pipeline controller. By disconnecting the value from the processing code, we can react appropriately to</span>
<span class="sd">    those circumstances.</span>

<span class="sd">    Internally, this class stores two sets of its values: the &#39;actual&#39;, up-to-date values, and the referenced (original)</span>
<span class="sd">    ones that were used when creating an object of this class. It&#39;s not a good idea to keep both synced all the time,</span>
<span class="sd">    because that could potentially involve unnecessary data transfer and I/O.</span>

<span class="sd">    Also, in some cases a developer might want to avoid events that could be triggered by a changed value.</span>

<span class="sd">    Both value sets can be synced manually using the &#39;sync()&#39; method.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        outputs (ValueSet): the output values of a pipeline step</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_staging</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span><span class="p">:</span> <span class="n">ValueSet</span> <span class="o">=</span> <span class="n">outputs</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">read_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_all_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;All field names included in this ValueSet.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_set_values</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]:</span>

        <span class="n">wrong</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>  <span class="c1"># type: ignore</span>
                <span class="n">wrong</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">wrong</span><span class="p">:</span>
            <span class="n">av</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>  <span class="c1"># type: ignore</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t set output value(s), invalid key name(s): </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">wrong</span><span class="p">)</span><span class="si">}</span><span class="s2">. Available: </span><span class="si">{</span><span class="n">av</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">metadata</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">lineage</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">output_name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># value_obj = self._outputs.get_value_obj(output_name)</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">output_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_staging</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>  <span class="c1"># type: ignore</span>
                <span class="ow">or</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_staging</span><span class="p">[</span><span class="n">output_name</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
            <span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_staging</span><span class="p">[</span><span class="n">output_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>  <span class="c1"># type: ignore</span>
                <span class="n">result</span><span class="p">[</span><span class="n">output_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">output_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">_get_value_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve the value object for the specified field.&quot;&quot;&quot;</span>

        <span class="c1"># self.sync()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">sync</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">metadata</span><span class="p">:</span> <span class="n">MetadataModel</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sync this value sets &#39;shadow&#39; values with the ones a user would retrieve.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_outputs_staging</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_staging</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>  <span class="c1"># type: ignore</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h4 id="kiara.module.StepOutputs.get_all_field_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_all_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.module.StepOutputs.get_all_field_names" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>All field names included in this ValueSet.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_all_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;All field names included in this ValueSet.&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.module.StepOutputs.sync" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sync</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">metadata</span><span class="p">)</span></code>


<a href="#kiara.module.StepOutputs.sync" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Sync this value sets 'shadow' values with the ones a user would retrieve.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">sync</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">metadata</span><span class="p">:</span> <span class="n">MetadataModel</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sync this value sets &#39;shadow&#39; values with the ones a user would retrieve.&quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_outputs_staging</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_staging</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>  <span class="c1"># type: ignore</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.module_config" class="doc doc-heading">
        <code>module_config</code>



<a href="#kiara.module_config" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Module-related configuration models for the <em>Kiara</em> package.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h3 id="kiara.module_config.ModuleConfig" class="doc doc-heading">
        <code>
ModuleConfig            (<span title="kiara.info.KiaraInfoModel">KiaraInfoModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.module_config.ModuleConfig" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>A class to hold the type and configuration for a module instance.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/module_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ModuleConfig</span><span class="p">(</span><span class="n">KiaraInfoModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A class to hold the type and configuration for a module instance.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_module_config</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
            <span class="s2">&quot;ModuleConfig&quot;</span><span class="p">,</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">,</span>
            <span class="nb">str</span><span class="p">,</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">],</span>
            <span class="s2">&quot;PipelineConfig&quot;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ModuleConfig&quot;</span><span class="p">:</span>

        <span class="n">conf</span> <span class="o">=</span> <span class="n">parse_and_create_module_config</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">conf</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_renderable_from_module_instance_configs</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">configs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ModuleConfig&quot;</span><span class="p">],</span>
        <span class="o">**</span><span class="n">render_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convenience method to create a renderable for this module configuration, to be printed to terminal.&quot;&quot;&quot;</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Id&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="n">no_wrap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">render_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;omit_config&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Configuration&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">config</span> <span class="ow">in</span> <span class="n">configs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">doc</span><span class="p">:</span>
                <span class="n">doc</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">description</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">doc</span> <span class="o">=</span> <span class="n">DEFAULT_NO_DESC_VALUE</span>

            <span class="n">row</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">RenderableType</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">id</span><span class="p">,</span> <span class="n">doc</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">render_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;omit_config&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                <span class="n">conf</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;doc&quot;</span><span class="p">},</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
                <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Syntax</span><span class="p">(</span><span class="n">conf</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">))</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="o">*</span><span class="n">row</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">table</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>
        <span class="n">validate_all</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">_module</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">_hash_cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The module type.&quot;</span><span class="p">)</span>
    <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The configuration for the module.&quot;</span>
    <span class="p">)</span>
    <span class="n">doc</span><span class="p">:</span> <span class="n">DocumentationMetadataModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Documentation for this operation.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">module_config_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span>

        <span class="n">hash_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="p">,</span>
            <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_config</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">DeepHash</span><span class="p">(</span><span class="n">hash_dict</span><span class="p">,</span> <span class="n">hasher</span><span class="o">=</span><span class="n">KIARA_HASH_FUNCTION</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span> <span class="o">=</span> <span class="n">h</span><span class="p">[</span><span class="n">hash_dict</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hash_cache</span>

    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_config_hash</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;module_config.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;doc&quot;</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">create_doc</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">DocumentationMetadataModel</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_module</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">module_id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KiaraModule&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Create a module instance from this configuration.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">module_id</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">module_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid type, module_id must be a string, not: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">module_id</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara.kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_module</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">create_module</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">module_id</span><span class="p">,</span>
                <span class="n">module_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="p">,</span>
                <span class="n">module_config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">module_config</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Create a renderable for this module configuration.&quot;&quot;&quot;</span>

        <span class="n">conf</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
            <span class="s2">&quot;json&quot;</span><span class="p">,</span>
            <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">conf</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h4 id="kiara.module_config.ModuleConfig.doc" class="doc doc-heading">
<code class="highlight language-python"><span class="n">doc</span><span class="p">:</span> <span class="n">DocumentationMetadataModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.module_config.ModuleConfig.doc" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Documentation for this operation.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.module_config.ModuleConfig.module_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">module_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.module_config.ModuleConfig.module_config" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The configuration for the module.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h4 id="kiara.module_config.ModuleConfig.module_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.module_config.ModuleConfig.module_type" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The module type.</p>
    </div>

  </div>










  <div class="doc doc-object doc-method">



<h4 id="kiara.module_config.ModuleConfig.create_module" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_module</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">module_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#kiara.module_config.ModuleConfig.create_module" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Create a module instance from this configuration.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/module_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_module</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">module_id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KiaraModule&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Create a module instance from this configuration.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">module_id</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">module_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid type, module_id must be a string, not: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">module_id</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">kiara.kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

        <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_module</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">create_module</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">module_id</span><span class="p">,</span>
            <span class="n">module_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="p">,</span>
            <span class="n">module_config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">module_config</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h4 id="kiara.module_config.ModuleConfig.create_renderable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">)</span></code>


<a href="#kiara.module_config.ModuleConfig.create_renderable" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Create a renderable for this module configuration.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/module_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Create a renderable for this module configuration.&quot;&quot;&quot;</span>

    <span class="n">conf</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
        <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">conf</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.module_config.ModuleConfig.create_renderable_from_module_instance_configs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_renderable_from_module_instance_configs</span><span class="p">(</span><span class="n">configs</span><span class="p">,</span> <span class="o">**</span><span class="n">render_config</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.module_config.ModuleConfig.create_renderable_from_module_instance_configs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Convenience method to create a renderable for this module configuration, to be printed to terminal.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/module_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">create_renderable_from_module_instance_configs</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">configs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ModuleConfig&quot;</span><span class="p">],</span>
    <span class="o">**</span><span class="n">render_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convenience method to create a renderable for this module configuration, to be printed to terminal.&quot;&quot;&quot;</span>

    <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Id&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="n">no_wrap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">render_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;omit_config&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Configuration&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">config</span> <span class="ow">in</span> <span class="n">configs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">doc</span><span class="p">:</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">description</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="n">DEFAULT_NO_DESC_VALUE</span>

        <span class="n">row</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">RenderableType</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">id</span><span class="p">,</span> <span class="n">doc</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">render_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;omit_config&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
            <span class="n">conf</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;doc&quot;</span><span class="p">},</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Syntax</span><span class="p">(</span><span class="n">conf</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">))</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="o">*</span><span class="n">row</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">table</span>
</code></pre></div>
        </details>
    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.module_config.ModuleTypeConfigSchema" class="doc doc-heading">
        <code>
ModuleTypeConfigSchema            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.module_config.ModuleTypeConfigSchema" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Base class that describes the configuration a <a class="autorefs autorefs-internal" href="../module/#kiara.module.KiaraModule"><code>KiaraModule</code></a> class accepts.</p>
<p>This is stored in the <code>_config_cls</code> class attribute in each <code>KiaraModule</code> class.</p>
<p>There are two config options every <code>KiaraModule</code> supports:</p>
<ul>
<li><code>constants</code>, and</li>
<li><code>defaults</code></li>
</ul>
<p>Constants are pre-set inputs, and users can't change them and an error is thrown if they try. Defaults are default
 values that override the schema defaults, and those can be overwritten by users. If both a constant and a default
 value is set for an input field, an error is thrown.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/module_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ModuleTypeConfigSchema</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class that describes the configuration a [``KiaraModule``][kiara.module.KiaraModule] class accepts.</span>

<span class="sd">    This is stored in the ``_config_cls`` class attribute in each ``KiaraModule`` class.</span>

<span class="sd">    There are two config options every ``KiaraModule`` supports:</span>

<span class="sd">     - ``constants``, and</span>
<span class="sd">     - ``defaults``</span>

<span class="sd">     Constants are pre-set inputs, and users can&#39;t change them and an error is thrown if they try. Defaults are default</span>
<span class="sd">     values that override the schema defaults, and those can be overwritten by users. If both a constant and a default</span>
<span class="sd">     value is set for an input field, an error is thrown.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">requires_config</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return whether this class can be used as-is, or requires configuration before an instance can be created.&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">required</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">default</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">config</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">return</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="n">_config_hash</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">constants</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Value constants for this module.&quot;</span>
    <span class="p">)</span>
    <span class="n">defaults</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Value defaults for this module.&quot;</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>
        <span class="n">validate_assignment</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the value for the specified configuation key.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fields__</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No config value &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; in module config class &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config_hash</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
            <span class="n">hashes</span> <span class="o">=</span> <span class="n">deepdiff</span><span class="o">.</span><span class="n">DeepHash</span><span class="p">(</span><span class="n">_d</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_config_hash</span> <span class="o">=</span> <span class="n">hashes</span><span class="p">[</span><span class="n">_d</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config_hash</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_hash</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="n">my_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">MINIMAL</span><span class="p">,</span> <span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">my_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Field name&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">my_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fields__</span><span class="p">:</span>
            <span class="n">my_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">))</span>

        <span class="k">yield</span> <span class="n">my_table</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h4 id="kiara.module_config.ModuleTypeConfigSchema.constants" class="doc doc-heading">
<code class="highlight language-python"><span class="n">constants</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.module_config.ModuleTypeConfigSchema.constants" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Value constants for this module.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.module_config.ModuleTypeConfigSchema.defaults" class="doc doc-heading">
<code class="highlight language-python"><span class="n">defaults</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.module_config.ModuleTypeConfigSchema.defaults" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Value defaults for this module.</p>
    </div>

  </div>








  <div class="doc doc-object doc-method">



<h4 id="kiara.module_config.ModuleTypeConfigSchema.__eq__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.module_config.ModuleTypeConfigSchema.__eq__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return self==value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/module_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.module_config.ModuleTypeConfigSchema.__hash__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.module_config.ModuleTypeConfigSchema.__hash__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return hash(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/module_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_hash</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h4 id="kiara.module_config.ModuleTypeConfigSchema.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></code>


<a href="#kiara.module_config.ModuleTypeConfigSchema.get" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Get the value for the specified configuation key.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/module_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Get the value for the specified configuation key.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fields__</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No config value &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; in module config class &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.module_config.ModuleTypeConfigSchema.requires_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">requires_config</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.module_config.ModuleTypeConfigSchema.requires_config" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return whether this class can be used as-is, or requires configuration before an instance can be created.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/module_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">requires_config</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return whether this class can be used as-is, or requires configuration before an instance can be created.&quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">required</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">default</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">config</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h3 id="kiara.module_config.parse_and_create_module_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_and_create_module_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#kiara.module_config.parse_and_create_module_config" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Utility method to create a <code>ModuleConfig</code> object from different input types.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>config</code></td>
        <td><code>Union[ModuleConfig, Mapping, str, Type[KiaraModule], PipelineConfig]</code></td>
        <td><p>the 'main' configuation</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>module_config</code></td>
        <td><code>Optional[Mapping[str, Any]]</code></td>
        <td><p>if the 'main' configuration value is an (unconfigured) module type, this argument can contain the configuration for the module instance</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>kiara</code></td>
        <td><code>Optional[Kiara]</code></td>
        <td><p>the <em>kiara</em> context</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/module_config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_and_create_module_config</span><span class="p">(</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
        <span class="s2">&quot;ModuleConfig&quot;</span><span class="p">,</span>
        <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">,</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">],</span>
        <span class="s2">&quot;PipelineConfig&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ModuleConfig&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Utility method to create a `ModuleConfig` object from different input types.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        config: the &#39;main&#39; configuation</span>
<span class="sd">        module_config: if the &#39;main&#39; configuration value is an (unconfigured) module type, this argument can contain the configuration for the module instance</span>
<span class="sd">        kiara: the *kiara* context</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">kiara.kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

        <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">kiara.module</span> <span class="kn">import</span> <span class="n">KiaraModule</span>

        <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">KiaraModule</span><span class="p">):</span>
            <span class="c1"># this basically makes sure the class is augmented with the &#39;_module_type_id` attribute</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s2">&quot;_module_type_id&quot;</span><span class="p">):</span>
                <span class="n">match</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">for</span> <span class="n">mod_name</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">available_module_types</span><span class="p">:</span>
                    <span class="n">mod_cls</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">get_module_class</span><span class="p">(</span><span class="n">mod_name</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">mod_cls</span> <span class="o">==</span> <span class="n">config</span><span class="p">:</span>
                        <span class="n">match</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">break</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Class &#39;</span><span class="si">{</span><span class="n">config</span><span class="si">}</span><span class="s2">&#39; not a valid kiara module.&quot;</span><span class="p">)</span>

            <span class="n">config</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">_module_type_id</span>  <span class="c1"># type: ignore</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; for module configuration.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">module_config</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

        <span class="n">module_instance_config</span><span class="p">:</span> <span class="n">ModuleConfig</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">config</span> <span class="o">==</span> <span class="s2">&quot;pipeline&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">module_config</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="s2">&quot;Can&#39;t create module from &#39;pipeline&#39; module type without further configuration.&quot;</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">module_config</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
                <span class="n">module_instance_config</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="p">(</span>
                    <span class="n">module_type</span><span class="o">=</span><span class="s2">&quot;pipeline&quot;</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="kn">from</span> <span class="nn">kiara.pipeline.config</span> <span class="kn">import</span> <span class="n">PipelineConfig</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">PipelineConfig</span><span class="p">):</span>
                    <span class="n">module_instance_config</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="p">(</span>
                        <span class="n">module_type</span><span class="o">=</span><span class="s2">&quot;pipeline&quot;</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Can&#39;t create module config, invalid type for &#39;module_config&#39; parameter: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">module_config</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>

        <span class="k">elif</span> <span class="n">config</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">available_module_types</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">module_config</span><span class="p">:</span>
                <span class="n">module_instance_config</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="p">(</span>
                    <span class="n">module_type</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">module_instance_config</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="p">(</span><span class="n">module_type</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">config</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">profiles</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">module_instance_config</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">profiles</span><span class="p">[</span><span class="n">config</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">)):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
            <span class="n">module_config_data</span> <span class="o">=</span> <span class="n">get_data_from_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">module_config</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">module_config_data</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid module/pipeline config, must be a mapping type: </span><span class="si">{</span><span class="n">module_config_data</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="s2">&quot;steps&quot;</span> <span class="ow">in</span> <span class="n">module_config_data</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">module_type</span> <span class="o">=</span> <span class="s2">&quot;pipeline&quot;</span>
                <span class="n">module_instance_config</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="p">(</span>
                    <span class="n">module_type</span><span class="o">=</span><span class="n">module_type</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config_data</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="s2">&quot;module_type&quot;</span> <span class="ow">in</span> <span class="n">module_config_data</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">module_instance_config</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="p">(</span><span class="o">**</span><span class="n">module_config_data</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t create module config from string &#39;</span><span class="si">{</span><span class="n">config</span><span class="si">}</span><span class="s2">&#39;. Value must be path to a file, or one of: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">kiara</span><span class="o">.</span><span class="n">available_module_types</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">ModuleConfig</span><span class="p">):</span>
        <span class="n">module_instance_config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="k">if</span> <span class="n">module_config</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>

        <span class="kn">from</span> <span class="nn">kiara.pipeline.config</span> <span class="kn">import</span> <span class="n">PipelineConfig</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">PipelineConfig</span><span class="p">):</span>
            <span class="n">module_instance_config</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="p">(</span>
                <span class="n">module_type</span><span class="o">=</span><span class="s2">&quot;pipeline&quot;</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; for module configuration.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">module_instance_config</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.module_mgmt" class="doc doc-heading">
        <code>module_mgmt</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.module_mgmt" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Base module for code that handles the import and management of <a class="autorefs autorefs-internal" href="../module/#kiara.module.KiaraModule">KiaraModule</a> sub-classes.</p>



  <div class="doc doc-children">













  <div class="doc doc-object doc-module">



<h3 id="kiara.module_mgmt.merged" class="doc doc-heading">
        <code>merged</code>



<a href="#kiara.module_mgmt.merged" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="kiara.module_mgmt.merged.MergedModuleManager" class="doc doc-heading">
        <code>
MergedModuleManager            (<span title="kiara.module_mgmt.ModuleManager">ModuleManager</span>)
        </code>



<a href="#kiara.module_mgmt.merged.MergedModuleManager" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/module_mgmt/merged.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">MergedModuleManager</span><span class="p">(</span><span class="n">ModuleManager</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">module_managers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span>
                <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">PythonModuleManagerConfig</span><span class="p">,</span> <span class="n">PipelineModuleManagerConfig</span><span class="p">]</span>
            <span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">extra_pipeline_folders</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ignore_errors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_modules</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ModuleManager</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_module_cls_cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">KiaraModule</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_default_python_mgr</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">PythonModuleManager</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_pipeline_mgr</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">PipelineModuleManager</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_custom_pipelines_mgr</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">PipelineModuleManager</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">extra_pipeline_folders</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">extra_pipeline_folders</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_extra_pipeline_folders</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">extra_pipeline_folders</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ignore_errors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">ignore_errors</span>

        <span class="k">if</span> <span class="n">module_managers</span><span class="p">:</span>

            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
            <span class="c1"># for mmc in module_managers:</span>
            <span class="c1">#     mm = ModuleManager.from_config(mmc)</span>
            <span class="c1">#     _mms.append(mm)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgrs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ModuleManager</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">module_managers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">ModuleManager</span><span class="p">]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgrs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgrs</span>

        <span class="n">_mms</span> <span class="o">=</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_python_module_manager</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_pipeline_module_manager</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_custom_pipelines_manager</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgrs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_modules</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">mm</span> <span class="ow">in</span> <span class="n">_mms</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_module_manager</span><span class="p">(</span><span class="n">mm</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgrs</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">module_map</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">MutableMapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ModuleManager</span><span class="p">]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modules</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modules</span>

        <span class="c1"># make sure module managers are initialized before this</span>
        <span class="c1"># this will also initialize the _modules attribute</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module_managers</span>  <span class="c1"># noqa</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modules</span>  <span class="c1"># type: ignore</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default_python_module_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PythonModuleManager</span><span class="p">:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_python_mgr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_default_python_mgr</span> <span class="o">=</span> <span class="n">PythonModuleManager</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_python_mgr</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default_pipeline_module_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineModuleManager</span><span class="p">:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_pipeline_mgr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_default_pipeline_mgr</span> <span class="o">=</span> <span class="n">PipelineModuleManager</span><span class="p">(</span>
                <span class="n">folders</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_ignore_errors</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_pipeline_mgr</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default_custom_pipelines_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineModuleManager</span><span class="p">:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_custom_pipelines_mgr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extra_pipeline_folders</span><span class="p">:</span>
                <span class="n">folders</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;extra&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extra_pipeline_folders</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">folders</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_custom_pipelines_mgr</span> <span class="o">=</span> <span class="n">PipelineModuleManager</span><span class="p">(</span>
                <span class="n">folders</span><span class="o">=</span><span class="n">folders</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_ignore_errors</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_custom_pipelines_mgr</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">available_module_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return the names of all available modules&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module_map</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">available_non_pipeline_module_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return the names of all available pipeline-type modules.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">[</span>
            <span class="n">module_type</span>
            <span class="k">for</span> <span class="n">module_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_module_types</span>
            <span class="k">if</span> <span class="n">module_type</span> <span class="o">!=</span> <span class="s2">&quot;pipeline&quot;</span>
            <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_module_class</span><span class="p">(</span><span class="n">module_type</span><span class="p">)</span><span class="o">.</span><span class="n">is_pipeline</span><span class="p">()</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">available_pipeline_module_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return the names of all available pipeline-type modules.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">[</span>
            <span class="n">module_type</span>
            <span class="k">for</span> <span class="n">module_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_module_types</span>
            <span class="k">if</span> <span class="n">module_type</span> <span class="o">!=</span> <span class="s2">&quot;pipeline&quot;</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_module_class</span><span class="p">(</span><span class="n">module_type</span><span class="p">)</span><span class="o">.</span><span class="n">is_pipeline</span><span class="p">()</span>
        <span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_module_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_module_types</span>

    <span class="k">def</span> <span class="nf">is_pipeline_module</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>

        <span class="bp">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_module_class</span><span class="p">(</span><span class="n">module_type</span><span class="o">=</span><span class="n">module_type</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">is_pipeline</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">add_module_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module_manager</span><span class="p">:</span> <span class="n">ModuleManager</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgrs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">module_managers</span>  <span class="c1"># noqa</span>

        <span class="k">for</span> <span class="n">module_type</span> <span class="ow">in</span> <span class="n">module_manager</span><span class="o">.</span><span class="n">get_module_types</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">module_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_map</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Duplicate module name &#39;</span><span class="si">{</span><span class="n">module_type</span><span class="si">}</span><span class="s2">&#39;. Ignoring all but the first.&quot;</span>
                <span class="p">)</span>
                <span class="k">continue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">module_map</span><span class="p">[</span><span class="n">module_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">module_manager</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_module_mgrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">module_manager</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_types</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">register_pipeline_description</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]],</span>
        <span class="n">module_type_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">namespace</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">raise_exception</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="c1"># making sure the module_map attribute is populated</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module_map</span>  <span class="c1"># noqa</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_custom_pipelines_manager</span><span class="o">.</span><span class="n">register_pipeline</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">module_type_name</span><span class="o">=</span><span class="n">module_type_name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="n">namespace</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_map</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">raise_exception</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicate module name: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicate module name &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;. Ignoring all but the first.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">module_map</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_custom_pipelines_manager</span>

            <span class="k">return</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">get_module_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">]:</span>

        <span class="k">if</span> <span class="n">module_type</span> <span class="o">==</span> <span class="s2">&quot;pipeline&quot;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara</span> <span class="kn">import</span> <span class="n">PipelineModule</span>

            <span class="k">return</span> <span class="n">PipelineModule</span>

        <span class="n">mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">module_type</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No module &#39;</span><span class="si">{</span><span class="n">module_type</span><span class="si">}</span><span class="s2">&#39; available.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">module_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module_cls_cache</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module_cls_cache</span><span class="p">[</span><span class="n">module_type</span><span class="p">]</span>

        <span class="bp">cls</span> <span class="o">=</span> <span class="n">mm</span><span class="o">.</span><span class="n">get_module_class</span><span class="p">(</span><span class="n">module_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s2">&quot;_module_type_name&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Class does not have a &#39;_module_type_name&#39; attribute: </span><span class="si">{</span><span class="bp">cls</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">assert</span> <span class="n">module_type</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_name</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s2">&quot;_module_type_id&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span> <span class="o">!=</span> <span class="s2">&quot;pipeline&quot;</span> <span class="ow">and</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span> <span class="o">!=</span> <span class="n">module_type</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t create module class &#39;</span><span class="si">{</span><span class="bp">cls</span><span class="si">}</span><span class="s2">&#39;, it already has a _module_type_id attribute and it&#39;s different to the module name &#39;</span><span class="si">{</span><span class="n">module_type</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># type: ignore</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_module_cls_cache</span><span class="p">[</span><span class="n">module_type</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s2">&quot;_module_type_id&quot;</span><span class="p">,</span> <span class="n">module_type</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span>

    <span class="k">def</span> <span class="nf">create_module</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parent_id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KiaraModule&quot;</span><span class="p">:</span>

        <span class="n">mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">module_type</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mm</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No module &#39;</span><span class="si">{</span><span class="n">module_type</span><span class="si">}</span><span class="s2">&#39; registered. Available modules: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">available_module_types</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_module_class</span><span class="p">(</span>
            <span class="n">module_type</span>
        <span class="p">)</span>  <span class="c1"># just to make sure the _module_type_id attribute is added</span>

        <span class="k">return</span> <span class="n">mm</span><span class="o">.</span><span class="n">create_module</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
            <span class="n">parent_id</span><span class="o">=</span><span class="n">parent_id</span><span class="p">,</span>
            <span class="n">module_type</span><span class="o">=</span><span class="n">module_type</span><span class="p">,</span>
            <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">find_modules_for_package</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">package_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">include_core_modules</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">include_pipelines</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">]]:</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">module_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">available_module_types</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">module_type</span> <span class="o">==</span> <span class="s2">&quot;pipeline&quot;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">module_cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_module_class</span><span class="p">(</span><span class="n">module_type</span><span class="p">)</span>

            <span class="n">module_package</span> <span class="o">=</span> <span class="n">module_cls</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="s2">&quot;package&quot;</span><span class="p">,</span> <span class="kc">None</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">module_package</span> <span class="o">!=</span> <span class="n">package_name</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">module_cls</span><span class="o">.</span><span class="n">is_pipeline</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">include_pipelines</span><span class="p">:</span>
                    <span class="n">result</span><span class="p">[</span><span class="n">module_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">module_cls</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">include_core_modules</span><span class="p">:</span>
                    <span class="n">result</span><span class="p">[</span><span class="n">module_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">module_cls</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.module_mgmt.merged.MergedModuleManager.available_module_types" class="doc doc-heading">
<code class="highlight language-python"><span class="n">available_module_types</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.module_mgmt.merged.MergedModuleManager.available_module_types" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return the names of all available modules</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.module_mgmt.merged.MergedModuleManager.available_non_pipeline_module_types" class="doc doc-heading">
<code class="highlight language-python"><span class="n">available_non_pipeline_module_types</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.module_mgmt.merged.MergedModuleManager.available_non_pipeline_module_types" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return the names of all available pipeline-type modules.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.module_mgmt.merged.MergedModuleManager.available_pipeline_module_types" class="doc doc-heading">
<code class="highlight language-python"><span class="n">available_pipeline_module_types</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.module_mgmt.merged.MergedModuleManager.available_pipeline_module_types" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return the names of all available pipeline-type modules.</p>
    </div>

  </div>





















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.module_mgmt.merged.MergedModuleManagerConfig" class="doc doc-heading">
        <code>
MergedModuleManagerConfig            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.module_mgmt.merged.MergedModuleManagerConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/module_mgmt/merged.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">MergedModuleManagerConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>

    <span class="n">module_manager_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;pipeline&quot;</span><span class="p">]</span>
    <span class="n">folders</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A list of folders that contain pipeline descriptions.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;folders&quot;</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_validate_folders</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">]</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.module_mgmt.merged.MergedModuleManagerConfig.folders" class="doc doc-heading">
<code class="highlight language-python"><span class="n">folders</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.module_mgmt.merged.MergedModuleManagerConfig.folders" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A list of folders that contain pipeline descriptions.</p>
    </div>

  </div>











  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.module_mgmt.pipelines" class="doc doc-heading">
        <code>pipelines</code>



<a href="#kiara.module_mgmt.pipelines" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.module_mgmt.pipelines.PipelineModuleManager" class="doc doc-heading">
        <code>
PipelineModuleManager            (<span title="kiara.module_mgmt.ModuleManager">ModuleManager</span>)
        </code>



<a href="#kiara.module_mgmt.pipelines.PipelineModuleManager" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Module manager that discovers pipeline descriptions, and create modules out of them.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>folders</code></td>
        <td><code>Optional[Mapping[str, Union[str, pathlib.Path, Iterable[Union[str, pathlib.Path]]]]]</code></td>
        <td><p>a list of folders to search for pipeline descriptions, if 'None', 'kiara.pipelines' entrypoints are searched, as well as the user config</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>ignore_errors</code></td>
        <td><code>bool</code></td>
        <td><p>ignore any errors that occur during pipeline discovery (as much as that is possible)</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/module_mgmt/pipelines.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineModuleManager</span><span class="p">(</span><span class="n">ModuleManager</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Module manager that discovers pipeline descriptions, and create modules out of them.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        folders: a list of folders to search for pipeline descriptions, if &#39;None&#39;, &#39;kiara.pipelines&#39; entrypoints are searched, as well as the user config</span>
<span class="sd">        ignore_errors: ignore any errors that occur during pipeline discovery (as much as that is possible)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">folders</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
                <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]]]</span>
            <span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ignore_errors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="k">if</span> <span class="n">folders</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara.utils.class_loading</span> <span class="kn">import</span> <span class="n">find_all_kiara_pipeline_paths</span>

            <span class="n">folders_map</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
                <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]]</span>
            <span class="p">]</span> <span class="o">=</span> <span class="n">find_all_kiara_pipeline_paths</span><span class="p">(</span><span class="n">skip_errors</span><span class="o">=</span><span class="n">ignore_errors</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">USER_PIPELINES_FOLDER</span><span class="p">):</span>
                <span class="n">folders_map</span><span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[(</span><span class="kc">None</span><span class="p">,</span> <span class="n">USER_PIPELINES_FOLDER</span><span class="p">)]</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">folders</span><span class="p">:</span>
            <span class="n">folders_map</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">folders</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">)</span>
            <span class="k">assert</span> <span class="s2">&quot;user&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">folders</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="n">folders_map</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">_folders</span> <span class="ow">in</span> <span class="n">folders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_folders</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
                    <span class="n">_folders</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span>
                <span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Invalid folder configuration (must be an iterable): </span><span class="si">{</span><span class="n">_folders</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                <span class="k">for</span> <span class="n">_f</span> <span class="ow">in</span> <span class="n">_folders</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_f</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
                        <span class="n">_f</span> <span class="o">=</span> <span class="n">_f</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span>
                    <span class="n">folders_map</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="n">_f</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_desc_folders</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_descs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cached_classes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">PipelineModule</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">ns</span><span class="p">,</span> <span class="n">paths</span> <span class="ow">in</span> <span class="n">folders_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_pipelines_path</span><span class="p">(</span><span class="n">ns</span><span class="p">,</span> <span class="n">path</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">register_pipeline</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]],</span>
        <span class="n">module_type_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">namespace</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Register a pipeline description to the pipeline pool.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            data: the pipeline data (a dict, or a path to a file)</span>
<span class="sd">            module_type_name: the type name this pipeline should be registered as</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># TODO: verify that there is no conflict with module_type_name</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
            <span class="n">_name</span><span class="p">,</span> <span class="n">_data</span> <span class="o">=</span> <span class="n">get_pipeline_details_from_path</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="n">_data</span> <span class="o">=</span> <span class="n">check_doc_sidecar</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">_data</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">module_type_name</span><span class="p">:</span>
                <span class="n">_name</span> <span class="o">=</span> <span class="n">module_type_name</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="n">_data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">module_type_name</span><span class="p">:</span>
                <span class="n">_data</span><span class="p">[</span><span class="n">MODULE_TYPE_NAME_KEY</span><span class="p">]</span> <span class="o">=</span> <span class="n">module_type_name</span>

            <span class="n">_name</span> <span class="o">=</span> <span class="n">_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">MODULE_TYPE_NAME_KEY</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">_name</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t register pipeline, no module type name available: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="n">_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">_data</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="s2">&quot;source_type&quot;</span><span class="p">:</span> <span class="s2">&quot;dict&quot;</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t register pipeline, must be dict-like data, not </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">_name</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No pipeline name set.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">namespace</span><span class="p">:</span>
            <span class="n">full_name</span> <span class="o">=</span> <span class="n">_name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">full_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">namespace</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">_name</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="n">full_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;core.&quot;</span><span class="p">):</span>
            <span class="n">full_name</span> <span class="o">=</span> <span class="n">full_name</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span>
        <span class="k">if</span> <span class="n">full_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_descs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t register pipeline: duplicate workflow name &#39;</span><span class="si">{</span><span class="n">_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_descs</span><span class="p">[</span><span class="n">full_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">_data</span>

        <span class="k">return</span> <span class="n">full_name</span>

    <span class="k">def</span> <span class="nf">add_pipelines_path</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">namespace</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">path</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">],</span>
        <span class="n">base_module</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Add a pipeline description file or folder containing some to this manager.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            namespace: the namespace the pipeline modules found under this path will be part of, if it starts with &#39;_&#39; it will be omitted</span>
<span class="sd">            path: the path to a pipeline description file, or folder which contains some</span>
<span class="sd">            base_module: the base module the assembled pipeline modules under this path will be located at in the Python namespace</span>
<span class="sd">        Returns:</span>
<span class="sd">            a list of module type names that were added</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for path: </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t add pipeline path &#39;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&#39;: path does not exist&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">elif</span> <span class="n">path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>

            <span class="n">files</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirnames</span><span class="p">,</span> <span class="n">filenames</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">topdown</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>

                <span class="n">dirnames</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dirnames</span> <span class="k">if</span> <span class="n">d</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">DEFAULT_EXCLUDE_DIRS</span><span class="p">]</span>

                <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="p">[</span>
                    <span class="n">f</span>
                    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">filenames</span>
                    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">f</span><span class="p">))</span>
                    <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span> <span class="k">for</span> <span class="n">ext</span> <span class="ow">in</span> <span class="n">VALID_PIPELINE_FILE_EXTENSIONS</span><span class="p">)</span>
                <span class="p">]:</span>

                    <span class="k">try</span><span class="p">:</span>

                        <span class="n">full_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

                        <span class="n">name</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">get_pipeline_details_from_path</span><span class="p">(</span>
                            <span class="n">path</span><span class="o">=</span><span class="n">full_path</span><span class="p">,</span> <span class="n">base_module</span><span class="o">=</span><span class="n">base_module</span>
                        <span class="p">)</span>
                        <span class="n">data</span> <span class="o">=</span> <span class="n">check_doc_sidecar</span><span class="p">(</span><span class="n">full_path</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
                        <span class="n">rel_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">full_path</span><span class="p">),</span> <span class="n">path</span><span class="p">)</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">rel_path</span> <span class="ow">or</span> <span class="n">rel_path</span> <span class="o">==</span> <span class="s2">&quot;.&quot;</span><span class="p">:</span>
                            <span class="n">ns_name</span> <span class="o">=</span> <span class="n">name</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">_rel_path</span> <span class="o">=</span> <span class="n">rel_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
                            <span class="n">ns_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_rel_path</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">ns_name</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;Could not determine namespace for pipeline file &#39;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
                            <span class="p">)</span>
                        <span class="k">if</span> <span class="n">ns_name</span> <span class="ow">in</span> <span class="n">files</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;Duplicate workflow name in namespace &#39;</span><span class="si">{</span><span class="n">namespace</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">ns_name</span><span class="si">}</span><span class="s2">&quot;</span>
                            <span class="p">)</span>
                        <span class="n">files</span><span class="p">[</span><span class="n">ns_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Ignoring invalid pipeline file &#39;</span><span class="si">{</span><span class="n">full_path</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
        <span class="k">elif</span> <span class="n">path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">get_pipeline_details_from_path</span><span class="p">(</span>
                <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">base_module</span><span class="o">=</span><span class="n">base_module</span>
            <span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">check_doc_sidecar</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not determine pipeline name for: </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">data</span><span class="p">}</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">files</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="k">if</span> <span class="n">namespace</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">):</span>
                <span class="n">tokens</span> <span class="o">=</span> <span class="n">namespace</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">_namespace</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">_namespace</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_namespace</span> <span class="o">=</span> <span class="n">namespace</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">_namespace</span><span class="p">:</span>
                <span class="n">full_name</span> <span class="o">=</span> <span class="n">k</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">full_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_namespace</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span>

            <span class="k">if</span> <span class="n">full_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;core.&quot;</span><span class="p">):</span>
                <span class="n">full_name</span> <span class="o">=</span> <span class="n">full_name</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span>
            <span class="k">if</span> <span class="n">full_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_descs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicate workflow name: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">full_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_descs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline_descs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_descs</span>

    <span class="k">def</span> <span class="nf">get_module_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;PipelineModule&quot;</span><span class="p">]:</span>

        <span class="k">if</span> <span class="n">module_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cached_classes</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cached_classes</span><span class="p">[</span><span class="n">module_type</span><span class="p">]</span>

        <span class="n">desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_descs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">module_type</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">desc</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No pipeline with name &#39;</span><span class="si">{</span><span class="n">module_type</span><span class="si">}</span><span class="s2">&#39; available.&quot;</span><span class="p">)</span>

        <span class="n">tokens</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\.|_&quot;</span><span class="p">,</span> <span class="n">module_type</span><span class="p">)</span>
        <span class="n">cls_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="ow">or</span> <span class="s2">&quot;_&quot;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">full_name</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">cls_name</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">full_name</span> <span class="o">=</span> <span class="n">cls_name</span>

        <span class="n">base_module</span> <span class="o">=</span> <span class="n">desc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;base_module&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="n">create_pipeline_class</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cls_name</span><span class="si">}</span><span class="s2">PipelineModule&quot;</span><span class="p">,</span>
            <span class="n">full_name</span><span class="p">,</span>
            <span class="n">desc</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">],</span>
            <span class="n">base_module</span><span class="o">=</span><span class="n">base_module</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s2">&quot;_module_type_name&quot;</span><span class="p">,</span> <span class="n">module_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cached_classes</span><span class="p">[</span><span class="n">module_type</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cached_classes</span><span class="p">[</span><span class="n">module_type</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_module_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_descs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">











  <div class="doc doc-object doc-method">



<h5 id="kiara.module_mgmt.pipelines.PipelineModuleManager.add_pipelines_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_pipelines_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">base_module</span><span class="p">)</span></code>


<a href="#kiara.module_mgmt.pipelines.PipelineModuleManager.add_pipelines_path" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Add a pipeline description file or folder containing some to this manager.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>namespace</code></td>
        <td><code>str</code></td>
        <td><p>the namespace the pipeline modules found under this path will be part of, if it starts with '_' it will be omitted</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>path</code></td>
        <td><code>Union[str, pathlib.Path]</code></td>
        <td><p>the path to a pipeline description file, or folder which contains some</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>base_module</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>the base module the assembled pipeline modules under this path will be located at in the Python namespace</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Iterable[str]</code></td>
      <td><p>a list of module type names that were added</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/module_mgmt/pipelines.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_pipelines_path</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">namespace</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">path</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">],</span>
    <span class="n">base_module</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Add a pipeline description file or folder containing some to this manager.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        namespace: the namespace the pipeline modules found under this path will be part of, if it starts with &#39;_&#39; it will be omitted</span>
<span class="sd">        path: the path to a pipeline description file, or folder which contains some</span>
<span class="sd">        base_module: the base module the assembled pipeline modules under this path will be located at in the Python namespace</span>
<span class="sd">    Returns:</span>
<span class="sd">        a list of module type names that were added</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for path: </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t add pipeline path &#39;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&#39;: path does not exist&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="k">elif</span> <span class="n">path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>

        <span class="n">files</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirnames</span><span class="p">,</span> <span class="n">filenames</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">topdown</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>

            <span class="n">dirnames</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dirnames</span> <span class="k">if</span> <span class="n">d</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">DEFAULT_EXCLUDE_DIRS</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="n">f</span>
                <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">filenames</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">f</span><span class="p">))</span>
                <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span> <span class="k">for</span> <span class="n">ext</span> <span class="ow">in</span> <span class="n">VALID_PIPELINE_FILE_EXTENSIONS</span><span class="p">)</span>
            <span class="p">]:</span>

                <span class="k">try</span><span class="p">:</span>

                    <span class="n">full_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

                    <span class="n">name</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">get_pipeline_details_from_path</span><span class="p">(</span>
                        <span class="n">path</span><span class="o">=</span><span class="n">full_path</span><span class="p">,</span> <span class="n">base_module</span><span class="o">=</span><span class="n">base_module</span>
                    <span class="p">)</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">check_doc_sidecar</span><span class="p">(</span><span class="n">full_path</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
                    <span class="n">rel_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">full_path</span><span class="p">),</span> <span class="n">path</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">rel_path</span> <span class="ow">or</span> <span class="n">rel_path</span> <span class="o">==</span> <span class="s2">&quot;.&quot;</span><span class="p">:</span>
                        <span class="n">ns_name</span> <span class="o">=</span> <span class="n">name</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">_rel_path</span> <span class="o">=</span> <span class="n">rel_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
                        <span class="n">ns_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_rel_path</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">ns_name</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Could not determine namespace for pipeline file &#39;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
                        <span class="p">)</span>
                    <span class="k">if</span> <span class="n">ns_name</span> <span class="ow">in</span> <span class="n">files</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Duplicate workflow name in namespace &#39;</span><span class="si">{</span><span class="n">namespace</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">ns_name</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                    <span class="n">files</span><span class="p">[</span><span class="n">ns_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Ignoring invalid pipeline file &#39;</span><span class="si">{</span><span class="n">full_path</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
    <span class="k">elif</span> <span class="n">path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
        <span class="n">name</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">get_pipeline_details_from_path</span><span class="p">(</span>
            <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">base_module</span><span class="o">=</span><span class="n">base_module</span>
        <span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">check_doc_sidecar</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not determine pipeline name for: </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">data</span><span class="p">}</span>

    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">files</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

        <span class="k">if</span> <span class="n">namespace</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">):</span>
            <span class="n">tokens</span> <span class="o">=</span> <span class="n">namespace</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">_namespace</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_namespace</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_namespace</span> <span class="o">=</span> <span class="n">namespace</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">_namespace</span><span class="p">:</span>
            <span class="n">full_name</span> <span class="o">=</span> <span class="n">k</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">full_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_namespace</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="n">full_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;core.&quot;</span><span class="p">):</span>
            <span class="n">full_name</span> <span class="o">=</span> <span class="n">full_name</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span>
        <span class="k">if</span> <span class="n">full_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_descs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicate workflow name: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">result</span><span class="p">[</span><span class="n">full_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_descs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h5 id="kiara.module_mgmt.pipelines.PipelineModuleManager.register_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">register_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">module_type_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#kiara.module_mgmt.pipelines.PipelineModuleManager.register_pipeline" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Register a pipeline description to the pipeline pool.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>Union[str, pathlib.Path, Mapping[str, Any]]</code></td>
        <td><p>the pipeline data (a dict, or a path to a file)</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>module_type_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>the type name this pipeline should be registered as</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/module_mgmt/pipelines.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">register_pipeline</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]],</span>
    <span class="n">module_type_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">namespace</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Register a pipeline description to the pipeline pool.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        data: the pipeline data (a dict, or a path to a file)</span>
<span class="sd">        module_type_name: the type name this pipeline should be registered as</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># TODO: verify that there is no conflict with module_type_name</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
        <span class="n">_name</span><span class="p">,</span> <span class="n">_data</span> <span class="o">=</span> <span class="n">get_pipeline_details_from_path</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">_data</span> <span class="o">=</span> <span class="n">check_doc_sidecar</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">_data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">module_type_name</span><span class="p">:</span>
            <span class="n">_name</span> <span class="o">=</span> <span class="n">module_type_name</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
        <span class="n">_data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">module_type_name</span><span class="p">:</span>
            <span class="n">_data</span><span class="p">[</span><span class="n">MODULE_TYPE_NAME_KEY</span><span class="p">]</span> <span class="o">=</span> <span class="n">module_type_name</span>

        <span class="n">_name</span> <span class="o">=</span> <span class="n">_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">MODULE_TYPE_NAME_KEY</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">_name</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t register pipeline, no module type name available: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">_data</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="s2">&quot;source_type&quot;</span><span class="p">:</span> <span class="s2">&quot;dict&quot;</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Can&#39;t register pipeline, must be dict-like data, not </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">_name</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No pipeline name set.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">namespace</span><span class="p">:</span>
        <span class="n">full_name</span> <span class="o">=</span> <span class="n">_name</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">full_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">namespace</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">_name</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">if</span> <span class="n">full_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;core.&quot;</span><span class="p">):</span>
        <span class="n">full_name</span> <span class="o">=</span> <span class="n">full_name</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span>
    <span class="k">if</span> <span class="n">full_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_descs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Can&#39;t register pipeline: duplicate workflow name &#39;</span><span class="si">{</span><span class="n">_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_descs</span><span class="p">[</span><span class="n">full_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">_data</span>

    <span class="k">return</span> <span class="n">full_name</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.module_mgmt.pipelines.PipelineModuleManagerConfig" class="doc doc-heading">
        <code>
PipelineModuleManagerConfig            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.module_mgmt.pipelines.PipelineModuleManagerConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/module_mgmt/pipelines.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineModuleManagerConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>

    <span class="n">module_manager_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;pipeline&quot;</span><span class="p">]</span>
    <span class="n">folders</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A list of folders that contain pipeline descriptions.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;folders&quot;</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_validate_folders</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">]</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.module_mgmt.pipelines.PipelineModuleManagerConfig.folders" class="doc doc-heading">
<code class="highlight language-python"><span class="n">folders</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.module_mgmt.pipelines.PipelineModuleManagerConfig.folders" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A list of folders that contain pipeline descriptions.</p>
    </div>

  </div>











  </div>

    </div>

  </div>





  <div class="doc doc-object doc-function">



<h4 id="kiara.module_mgmt.pipelines.get_pipeline_details_from_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_pipeline_details_from_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">module_type_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">base_module</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#kiara.module_mgmt.pipelines.get_pipeline_details_from_path" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Load a pipeline description, save it's content, and determine it the pipeline base name.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>path</code></td>
        <td><code>Union[str, pathlib.Path]</code></td>
        <td><p>the path to the pipeline file</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>module_type_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>if specifies, overwrites any auto-detected or assigned pipeline name</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>base_module</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>overrides the base module the assembled pipeline module will be located in the python hierarchy</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/module_mgmt/pipelines.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_pipeline_details_from_path</span><span class="p">(</span>
    <span class="n">path</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">],</span>
    <span class="n">module_type_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">base_module</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Load a pipeline description, save it&#39;s content, and determine it the pipeline base name.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        path: the path to the pipeline file</span>
<span class="sd">        module_type_name: if specifies, overwrites any auto-detected or assigned pipeline name</span>
<span class="sd">        base_module: overrides the base module the assembled pipeline module will be located in the python hierarchy</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Can&#39;t add pipeline description &#39;</span><span class="si">{</span><span class="n">path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39;: not a file&quot;</span>
        <span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">get_data_from_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Can&#39;t register pipeline file &#39;</span><span class="si">{</span><span class="n">path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39;: no content.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">module_type_name</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="n">MODULE_TYPE_NAME_KEY</span><span class="p">]</span> <span class="o">=</span> <span class="n">module_type_name</span>

    <span class="n">filename</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">name</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not a dictionary type.&quot;</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">MODULE_TYPE_NAME_KEY</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span> <span class="s2">&quot;source_type&quot;</span><span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">base_module</span><span class="p">:</span>
        <span class="n">result</span><span class="p">[</span><span class="s2">&quot;base_module&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">base_module</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.module_mgmt.python_classes" class="doc doc-heading">
        <code>python_classes</code>



<a href="#kiara.module_mgmt.python_classes" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="kiara.module_mgmt.python_classes.PythonModuleManagerConfig" class="doc doc-heading">
        <code>
PythonModuleManagerConfig            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.module_mgmt.python_classes.PythonModuleManagerConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/module_mgmt/python_classes.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PythonModuleManagerConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>

    <span class="n">module_manager_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">]</span>
    <span class="n">module_classes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The module classes this manager should hold.&quot;</span>
    <span class="p">)</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;module_classes&quot;</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_ensure_module_class_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>

        <span class="n">_classes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_cls</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_cls</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">module_name</span><span class="p">,</span> <span class="n">cls_name</span> <span class="o">=</span> <span class="n">_cls</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                        <span class="n">module</span> <span class="o">=</span> <span class="nb">__import__</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
                        <span class="n">_cls</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">cls_name</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Can&#39;t parse value &#39;</span><span class="si">{</span><span class="n">_cls</span><span class="si">}</span><span class="s2">&#39; into KiaraModule class.&quot;</span>
                        <span class="p">)</span>

                <span class="kn">from</span> <span class="nn">kiara</span> <span class="kn">import</span> <span class="n">KiaraModule</span>  <span class="c1"># noqa</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">_cls</span><span class="p">,</span> <span class="n">KiaraModule</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Not a KiaraModule sub-class: </span><span class="si">{</span><span class="n">_cls</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">_classes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_cls</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_classes</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.module_mgmt.python_classes.PythonModuleManagerConfig.module_classes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">module_classes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">KiaraModule</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.module_mgmt.python_classes.PythonModuleManagerConfig.module_classes" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The module classes this manager should hold.</p>
    </div>

  </div>











  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.modules" class="doc doc-heading">
        <code>modules</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.modules" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Base module under which the 'official' <a class="autorefs autorefs-internal" href="../module/#kiara.module.KiaraModule">KiaraModule</a> implementations live.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h3 id="kiara.modules.metadata" class="doc doc-heading">
        <code>metadata</code>



<a href="#kiara.modules.metadata" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.modules.metadata.ExtractPythonClass" class="doc doc-heading">
        <code>
ExtractPythonClass            (<a class="autorefs autorefs-internal" title="kiara.operations.extract_metadata.ExtractMetadataModule" href="../operations/extract_metadata/#kiara.operations.extract_metadata.ExtractMetadataModule">ExtractMetadataModule</a>)
        </code>



<a href="#kiara.modules.metadata.ExtractPythonClass" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Extract metadata about the Python type of a value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/modules/metadata.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ExtractPythonClass</span><span class="p">(</span><span class="n">ExtractMetadataModule</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Extract metadata about the Python type of a value.&quot;&quot;&quot;</span>

    <span class="n">_module_type_name</span> <span class="o">=</span> <span class="s2">&quot;metadata.python_class&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_get_supported_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="s2">&quot;*&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_metadata_key</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;python_class&quot;</span>

    <span class="k">def</span> <span class="nf">_get_metadata_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]]:</span>

        <span class="k">return</span> <span class="n">PythonClassMetadata</span>

    <span class="k">def</span> <span class="nf">extract_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="n">item</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="vm">__class__</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;class_name&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="s2">&quot;module_name&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span>
            <span class="s2">&quot;full_name&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">}</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">













  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.modules.pipelines" class="doc doc-heading">
        <code>pipelines</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.modules.pipelines" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Base module that holds <a class="autorefs autorefs-internal" href="../pipeline/module/#kiara.pipeline.module.PipelineModule">PipelineModule</a> classes that are auto-generated
from pipeline descriptions in the <code>pipelines</code> folder.</p>



  <div class="doc doc-children">












  </div>

    </div>

  </div>




  <div class="doc doc-object doc-module">



<h3 id="kiara.modules.type_conversion" class="doc doc-heading">
        <code>type_conversion</code>



<a href="#kiara.modules.type_conversion" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.modules.type_conversion.OldTypeConversionModule" class="doc doc-heading">
        <code>
OldTypeConversionModule            (<a class="autorefs autorefs-internal" title="kiara.module.KiaraModule" href="../module/#kiara.module.KiaraModule">KiaraModule</a>)
        </code>



<a href="#kiara.modules.type_conversion.OldTypeConversionModule" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/modules/type_conversion.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">OldTypeConversionModule</span><span class="p">(</span><span class="n">KiaraModule</span><span class="p">):</span>

    <span class="n">_config_cls</span> <span class="o">=</span> <span class="n">TypeConversionModuleConfig</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_supported_source_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">pass</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_target_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">pass</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_supported_source_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="n">_types</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_supported_source_types</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_types</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">_types</span> <span class="o">=</span> <span class="p">[</span><span class="n">_types</span><span class="p">]</span>

        <span class="k">if</span> <span class="s2">&quot;config&quot;</span> <span class="ow">in</span> <span class="n">_types</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid source type, type name &#39;config&#39; is invalid.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">_types</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_supported_target_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="n">_types</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_target_types</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_types</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">_types</span> <span class="o">=</span> <span class="p">[</span><span class="n">_types</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">_types</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">source_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">data_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;source_type&quot;</span><span class="p">)</span>
        <span class="n">supported</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_supported_source_types</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;*&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">supported</span> <span class="ow">and</span> <span class="n">data_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">supported</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid module configuration, source type &#39;</span><span class="si">{</span><span class="n">data_type</span><span class="si">}</span><span class="s2">&#39; not supported. Supported types: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_supported_source_types</span><span class="p">())</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">data_type</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">target_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">data_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;target_type&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">data_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_supported_target_types</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid module configuration, target type &#39;</span><span class="si">{</span><span class="n">data_type</span><span class="si">}</span><span class="s2">&#39; not supported. Supported types: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_supported_target_types</span><span class="p">())</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">data_type</span>

    <span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;source_value&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_type</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;A value of type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dict&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The configuration for the transformation.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;optional&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">inputs</span>

    <span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>
        <span class="n">outputs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;target_value&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_type</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;A value of type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">outputs</span>

    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">value</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="s2">&quot;source_value&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_type</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KiaraProcessingException</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t convert value of source type &#39;</span><span class="si">{</span><span class="n">value</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&#39;. Expected type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
            <span class="p">)</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">config</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">target_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
        <span class="c1"># TODO: validate value?</span>
        <span class="n">outputs</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="s2">&quot;target_value&quot;</span><span class="p">,</span> <span class="n">target_value</span><span class="p">)</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="k">pass</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">













  <div class="doc doc-object doc-method">



<h5 id="kiara.modules.type_conversion.OldTypeConversionModule.create_input_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.modules.type_conversion.OldTypeConversionModule.create_input_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the input schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[input_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this input]",
          "optional*': [boolean whether this input is optional or required (defaults to 'False')]
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/modules/type_conversion.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;source_value&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_type</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;A value of type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dict&quot;</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The configuration for the transformation.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;optional&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">inputs</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.modules.type_conversion.OldTypeConversionModule.create_output_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.modules.type_conversion.OldTypeConversionModule.create_output_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the output schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[output_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this output]"
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/modules/type_conversion.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>
    <span class="n">outputs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;target_value&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_type</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;A value of type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">outputs</span>
</code></pre></div>
        </details>
    </div>

  </div>








  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.modules.type_conversion.TypeConversionModuleConfig" class="doc doc-heading">
        <code>
TypeConversionModuleConfig            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleTypeConfigSchema" href="../module_config/#kiara.module_config.ModuleTypeConfigSchema">ModuleTypeConfigSchema</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.modules.type_conversion.TypeConversionModuleConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/modules/type_conversion.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">TypeConversionModuleConfig</span><span class="p">(</span><span class="n">ModuleTypeConfigSchema</span><span class="p">):</span>

    <span class="n">source_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The source type.&quot;</span><span class="p">)</span>
    <span class="n">target_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The target type.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.modules.type_conversion.TypeConversionModuleConfig.source_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">source_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.modules.type_conversion.TypeConversionModuleConfig.source_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The source type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.modules.type_conversion.TypeConversionModuleConfig.target_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">target_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.modules.type_conversion.TypeConversionModuleConfig.target_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The target type.</p>
    </div>

  </div>











  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.operations" class="doc doc-heading">
        <code>operations</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.operations" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h3 id="kiara.operations.Operation" class="doc doc-heading">
        <code>
Operation            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleConfig" href="../module_config/#kiara.module_config.ModuleConfig">ModuleConfig</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.operations.Operation" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/operations/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Operation</span><span class="p">(</span><span class="n">ModuleConfig</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_operation</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">,</span>
        <span class="n">operation_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;ModuleConfig&quot;</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Operation&quot;</span><span class="p">:</span>

        <span class="n">_config</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="o">.</span><span class="n">create_module_config</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span>
        <span class="p">)</span>
        <span class="n">_config_dict</span> <span class="o">=</span> <span class="n">_config</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
        <span class="n">_config_dict</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">operation_id</span>
        <span class="n">op_config</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">_config_dict</span><span class="p">)</span>
        <span class="n">op_config</span><span class="o">.</span><span class="n">_kiara</span> <span class="o">=</span> <span class="n">kiara</span>
        <span class="k">return</span> <span class="n">op_config</span>

    <span class="n">_kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">_module</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">]</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The operation id.&quot;</span><span class="p">)</span>
    <span class="n">type_category</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The operation category this belongs to.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">kiara</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Kiara context not set for operation.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">module</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KiaraModule&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_module</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_module</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">kiara</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">input_schemas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">input_schemas</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">output_schemas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">output_schemas</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">module_cls</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">kiara</span><span class="o">.</span><span class="n">get_module_class</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_attach_lineage</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">_attach_lineage</span><span class="o">=</span><span class="n">_attach_lineage</span><span class="p">,</span> <span class="o">**</span><span class="n">inputs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Create a printable overview of this operations details.</span>

<span class="sd">        Available config options:</span>
<span class="sd">          - &#39;include_full_doc&#39; (default: True): whether to include the full documentation, or just a description</span>
<span class="sd">          - &#39;include_src&#39; (default: False): whether to include the module source code</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">include_full_doc</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_full_doc&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">,</span> <span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">show_lines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Property&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">include_full_doc</span><span class="p">:</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Documentation&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">full_doc</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>

        <span class="n">module_type_md</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span>

        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Module type&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="p">)</span>
        <span class="n">conf</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module_config</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;default&quot;</span>
        <span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Module config&quot;</span><span class="p">,</span> <span class="n">conf</span><span class="p">)</span>

        <span class="n">constants</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;constants&quot;</span><span class="p">)</span>
        <span class="n">inputs_table</span> <span class="o">=</span> <span class="n">create_table_from_field_schemas</span><span class="p">(</span>
            <span class="n">_add_required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">_add_default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">_show_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">_constants</span><span class="o">=</span><span class="n">constants</span><span class="p">,</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">input_schemas</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Inputs&quot;</span><span class="p">,</span> <span class="n">inputs_table</span><span class="p">)</span>
        <span class="n">outputs_table</span> <span class="o">=</span> <span class="n">create_table_from_field_schemas</span><span class="p">(</span>
            <span class="n">_add_required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">_add_default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">_show_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">_constants</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">output_schemas</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Outputs&quot;</span><span class="p">,</span> <span class="n">outputs_table</span><span class="p">)</span>

        <span class="n">m_md_o</span> <span class="o">=</span> <span class="n">module_type_md</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">()</span>
        <span class="n">m_md_c</span> <span class="o">=</span> <span class="n">module_type_md</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">()</span>
        <span class="n">m_md</span> <span class="o">=</span> <span class="n">RenderGroup</span><span class="p">(</span><span class="n">m_md_o</span><span class="p">,</span> <span class="n">m_md_c</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Module metadata&quot;</span><span class="p">,</span> <span class="n">m_md</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_src&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Source code&quot;</span><span class="p">,</span> <span class="n">module_type_md</span><span class="o">.</span><span class="n">process_src</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">table</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h4 id="kiara.operations.Operation.id" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.operations.Operation.id" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The operation id.</p>
    </div>

  </div>








  <div class="doc doc-object doc-attribute">



<h4 id="kiara.operations.Operation.type_category" class="doc doc-heading">
<code class="highlight language-python"><span class="n">type_category</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.operations.Operation.type_category" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The operation category this belongs to.</p>
    </div>

  </div>









  <div class="doc doc-object doc-method">



<h4 id="kiara.operations.Operation.create_renderable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">)</span></code>


<a href="#kiara.operations.Operation.create_renderable" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Create a printable overview of this operations details.</p>
<p>Available config options:
  - 'include_full_doc' (default: True): whether to include the full documentation, or just a description
  - 'include_src' (default: False): whether to include the module source code</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Create a printable overview of this operations details.</span>

<span class="sd">    Available config options:</span>
<span class="sd">      - &#39;include_full_doc&#39; (default: True): whether to include the full documentation, or just a description</span>
<span class="sd">      - &#39;include_src&#39; (default: False): whether to include the module source code</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">include_full_doc</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_full_doc&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

    <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">,</span> <span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">show_lines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Property&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">include_full_doc</span><span class="p">:</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Documentation&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">full_doc</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>

    <span class="n">module_type_md</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span>

    <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Module type&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="p">)</span>
    <span class="n">conf</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module_config</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;default&quot;</span>
    <span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Module config&quot;</span><span class="p">,</span> <span class="n">conf</span><span class="p">)</span>

    <span class="n">constants</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;constants&quot;</span><span class="p">)</span>
    <span class="n">inputs_table</span> <span class="o">=</span> <span class="n">create_table_from_field_schemas</span><span class="p">(</span>
        <span class="n">_add_required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">_add_default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">_show_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">_constants</span><span class="o">=</span><span class="n">constants</span><span class="p">,</span>
        <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">input_schemas</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Inputs&quot;</span><span class="p">,</span> <span class="n">inputs_table</span><span class="p">)</span>
    <span class="n">outputs_table</span> <span class="o">=</span> <span class="n">create_table_from_field_schemas</span><span class="p">(</span>
        <span class="n">_add_required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">_add_default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">_show_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">_constants</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">output_schemas</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Outputs&quot;</span><span class="p">,</span> <span class="n">outputs_table</span><span class="p">)</span>

    <span class="n">m_md_o</span> <span class="o">=</span> <span class="n">module_type_md</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">()</span>
    <span class="n">m_md_c</span> <span class="o">=</span> <span class="n">module_type_md</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">()</span>
    <span class="n">m_md</span> <span class="o">=</span> <span class="n">RenderGroup</span><span class="p">(</span><span class="n">m_md_o</span><span class="p">,</span> <span class="n">m_md_c</span><span class="p">)</span>
    <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Module metadata&quot;</span><span class="p">,</span> <span class="n">m_md</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_src&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;Source code&quot;</span><span class="p">,</span> <span class="n">module_type_md</span><span class="o">.</span><span class="n">process_src</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">table</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>








  <div class="doc doc-object doc-module">



<h3 id="kiara.operations.calculate_hash" class="doc doc-heading">
        <code>calculate_hash</code>



<a href="#kiara.operations.calculate_hash" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.calculate_hash.CalculateHashOperationType" class="doc doc-heading">
        <code>
CalculateHashOperationType            (<span title="kiara.operations.OperationType">OperationType</span>)
        </code>



<a href="#kiara.operations.calculate_hash.CalculateHashOperationType" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Operation type to calculate hash(es) for data.</p>
<p>This is mostly used internally, so users usually won't be exposed to operations of this type.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/calculate_hash.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">CalculateHashOperationType</span><span class="p">(</span><span class="n">OperationType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Operation type to calculate hash(es) for data.</span>

<span class="sd">    This is mostly used internally, so users usually won&#39;t be exposed to operations of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">is_matching_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op_config</span><span class="p">:</span> <span class="n">Operation</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="k">return</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_cls</span> <span class="o">==</span> <span class="n">CalculateValueHashModule</span>

    <span class="k">def</span> <span class="nf">get_hash_operations_for_type</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]:</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">op_config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;value_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">value_type</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">op_config</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;hash_type&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">op_config</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">













  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.calculate_hash.CalculateValueHashModule" class="doc doc-heading">
        <code>
CalculateValueHashModule            (<a class="autorefs autorefs-internal" title="kiara.module.KiaraModule" href="../module/#kiara.module.KiaraModule">KiaraModule</a>)
        </code>



<a href="#kiara.operations.calculate_hash.CalculateValueHashModule" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Calculate the hash of a value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/calculate_hash.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">CalculateValueHashModule</span><span class="p">(</span><span class="n">KiaraModule</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Calculate the hash of a value.&quot;&quot;&quot;</span>

    <span class="n">_module_type_name</span> <span class="o">=</span> <span class="s2">&quot;value.hash&quot;</span>
    <span class="n">_config_cls</span> <span class="o">=</span> <span class="n">CalculateValueHashesConfig</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

        <span class="n">all_metadata_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">value_type_name</span><span class="p">,</span> <span class="n">value_type</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">hash_types</span> <span class="o">=</span> <span class="n">value_type</span><span class="o">.</span><span class="n">get_supported_hash_types</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">ht</span> <span class="ow">in</span> <span class="n">hash_types</span><span class="p">:</span>
                <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                    <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value_type&quot;</span><span class="p">:</span> <span class="n">value_type_name</span><span class="p">,</span> <span class="s2">&quot;hash_type&quot;</span><span class="p">:</span> <span class="n">ht</span><span class="p">},</span>
                    <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Calculate &#39;</span><span class="si">{</span><span class="n">ht</span><span class="si">}</span><span class="s2">&#39; hash for value type &#39;</span><span class="si">{</span><span class="n">value_type_name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
                <span class="p">}</span>
                <span class="n">all_metadata_profiles</span><span class="p">[</span>
                    <span class="sa">f</span><span class="s2">&quot;calculate_hash.</span><span class="si">{</span><span class="n">ht</span><span class="si">}</span><span class="s2">.for.</span><span class="si">{</span><span class="n">value_type_name</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

        <span class="k">return</span> <span class="n">all_metadata_profiles</span>

    <span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="n">input_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">input_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
            <span class="n">input_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="n">input_name</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">),</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;A value of type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s1">&#39;value_type&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;hash&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The hash string.&quot;</span><span class="p">}}</span>

    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">input_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">input_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
            <span class="n">input_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">input_name</span><span class="p">)</span>

        <span class="n">value_hash</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_hash</span><span class="p">(</span><span class="n">hash_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;hash_type&quot;</span><span class="p">))</span>
        <span class="n">outputs</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="s2">&quot;hash&quot;</span><span class="p">,</span> <span class="n">value_hash</span><span class="o">.</span><span class="n">hash</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.calculate_hash.CalculateValueHashModule.create_input_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.calculate_hash.CalculateValueHashModule.create_input_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the input schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[input_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this input]",
          "optional*': [boolean whether this input is optional or required (defaults to 'False')]
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/calculate_hash.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="n">input_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">input_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
        <span class="n">input_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="n">input_name</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">),</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;A value of type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s1">&#39;value_type&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.calculate_hash.CalculateValueHashModule.create_output_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.calculate_hash.CalculateValueHashModule.create_output_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the output schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[output_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this output]"
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/calculate_hash.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;hash&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The hash string.&quot;</span><span class="p">}}</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.calculate_hash.CalculateValueHashModule.retrieve_module_profiles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">retrieve_module_profiles</span><span class="p">(</span><span class="n">kiara</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.operations.calculate_hash.CalculateValueHashModule.retrieve_module_profiles" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Retrieve a collection of profiles (pre-set module configs) for this <em>kiara</em> module type.</p>
<p>This is used to automatically create generally useful operations (incl. their ids).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/calculate_hash.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

    <span class="n">all_metadata_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">value_type_name</span><span class="p">,</span> <span class="n">value_type</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

        <span class="n">hash_types</span> <span class="o">=</span> <span class="n">value_type</span><span class="o">.</span><span class="n">get_supported_hash_types</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">ht</span> <span class="ow">in</span> <span class="n">hash_types</span><span class="p">:</span>
            <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value_type&quot;</span><span class="p">:</span> <span class="n">value_type_name</span><span class="p">,</span> <span class="s2">&quot;hash_type&quot;</span><span class="p">:</span> <span class="n">ht</span><span class="p">},</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Calculate &#39;</span><span class="si">{</span><span class="n">ht</span><span class="si">}</span><span class="s2">&#39; hash for value type &#39;</span><span class="si">{</span><span class="n">value_type_name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">all_metadata_profiles</span><span class="p">[</span>
                <span class="sa">f</span><span class="s2">&quot;calculate_hash.</span><span class="si">{</span><span class="n">ht</span><span class="si">}</span><span class="s2">.for.</span><span class="si">{</span><span class="n">value_type_name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

    <span class="k">return</span> <span class="n">all_metadata_profiles</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.calculate_hash.CalculateValueHashesConfig" class="doc doc-heading">
        <code>
CalculateValueHashesConfig            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleTypeConfigSchema" href="../module_config/#kiara.module_config.ModuleTypeConfigSchema">ModuleTypeConfigSchema</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.operations.calculate_hash.CalculateValueHashesConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/operations/calculate_hash.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">CalculateValueHashesConfig</span><span class="p">(</span><span class="n">ModuleTypeConfigSchema</span><span class="p">):</span>

    <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The type of the value to calculate the hash for.&quot;</span>
    <span class="p">)</span>
    <span class="n">hash_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The hash type.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.calculate_hash.CalculateValueHashesConfig.hash_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">hash_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.operations.calculate_hash.CalculateValueHashesConfig.hash_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The hash type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.calculate_hash.CalculateValueHashesConfig.value_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.operations.calculate_hash.CalculateValueHashesConfig.value_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The type of the value to calculate the hash for.</p>
    </div>

  </div>











  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.operations.create_value" class="doc doc-heading">
        <code>create_value</code>



<a href="#kiara.operations.create_value" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.create_value.CreateValueModule" class="doc doc-heading">
        <code>
CreateValueModule            (<a class="autorefs autorefs-internal" title="kiara.module.KiaraModule" href="../module/#kiara.module.KiaraModule">KiaraModule</a>)
        </code>



<a href="#kiara.operations.create_value.CreateValueModule" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Base class for 'create' value type operations.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/create_value.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">CreateValueModule</span><span class="p">(</span><span class="n">KiaraModule</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for &#39;create&#39; value type operations.&quot;&quot;&quot;</span>

    <span class="n">_config_cls</span> <span class="o">=</span> <span class="n">CreateValueModuleConfig</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

        <span class="n">all_metadata_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># value_types: typing.Iterable[str] = cls.get_supported_value_types()</span>
        <span class="c1"># if &quot;*&quot; in value_types:</span>
        <span class="c1">#     value_types = kiara.type_mgmt.value_type_names</span>
        <span class="c1">#</span>
        <span class="c1"># for value_type in value_types:</span>

        <span class="n">target_type</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_target_value_type</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">target_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t assemble type convert operations for target type &#39;</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&#39;: type not available&quot;</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="n">source_profile</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_source_value_profiles</span><span class="p">():</span>

            <span class="n">mod_conf</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;source_profile&quot;</span><span class="p">:</span> <span class="n">source_profile</span><span class="p">,</span>
                <span class="s2">&quot;target_type&quot;</span><span class="p">:</span> <span class="n">target_type</span><span class="p">,</span>
            <span class="p">}</span>

            <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="n">mod_conf</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Create a &#39;</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&#39; value from a &#39;</span><span class="si">{</span><span class="n">source_profile</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="c1"># key = f&quot;{value_type}.convert_from.{target_type}&quot;   # type: ignore</span>
            <span class="c1"># if key in all_metadata_profiles.keys():</span>
            <span class="c1">#     raise Exception(f&quot;Duplicate profile key: {key}&quot;)</span>
            <span class="c1"># all_metadata_profiles[key] = op_config</span>
            <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;create.</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">.from.</span><span class="si">{</span><span class="n">source_profile</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">all_metadata_profiles</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicate profile key: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">all_metadata_profiles</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

        <span class="k">return</span> <span class="n">all_metadata_profiles</span>

    <span class="c1"># @classmethod</span>
    <span class="c1"># def get_supported_value_types(cls) -&gt; typing.Set[str]:</span>
    <span class="c1">#</span>
    <span class="c1">#     _types = cls._get_supported_value_types()</span>
    <span class="c1">#     if isinstance(_types, str):</span>
    <span class="c1">#         _types = [_types]</span>
    <span class="c1">#</span>
    <span class="c1">#     return set(_types)</span>
    <span class="c1">#</span>
    <span class="nd">@classmethod</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_target_value_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_source_value_profiles</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="c1"># supported = cls.get_supported_value_types()</span>

        <span class="n">types</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="k">if</span> <span class="n">attr_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;from_&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">callable</span><span class="p">(</span><span class="n">attr</span><span class="p">):</span>
                <span class="n">v_type</span> <span class="o">=</span> <span class="n">attr_name</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span>
                <span class="c1"># if v_type in supported:</span>
                <span class="c1">#     raise Exception(</span>
                <span class="c1">#         f&quot;Invalid configuration for type conversion module class {cls.__name__}: conversion source type can&#39;t be &#39;{v_type}&#39; because this is already registered as a supported type of the class.&quot;</span>
                <span class="c1">#     )</span>
                <span class="n">types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v_type</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">types</span>

    <span class="c1"># @classmethod</span>
    <span class="c1"># def get_target_value_type(cls) -&gt; str:</span>
    <span class="c1">#</span>
    <span class="c1">#     supported = cls.get_supported_value_types()</span>
    <span class="c1">#</span>
    <span class="c1">#     types = []</span>
    <span class="c1">#     for attr_name, attr in cls.__dict__.items():</span>
    <span class="c1">#</span>
    <span class="c1">#         if attr_name.startswith(&quot;to_&quot;) and callable(attr):</span>
    <span class="c1">#             v_type = attr_name[3:]</span>
    <span class="c1">#             if v_type in supported:</span>
    <span class="c1">#                 raise Exception(</span>
    <span class="c1">#                     f&quot;Invalid configuration for type conversion module class {cls.__name__}: conversion target type can&#39;t be &#39;{v_type}&#39; because this is already registered as a supported type of the class.&quot;</span>
    <span class="c1">#                 )</span>
    <span class="c1">#             types.append(attr_name[3:])</span>
    <span class="c1">#</span>
    <span class="c1">#     return types</span>

    <span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="n">source_profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;source_profile&quot;</span><span class="p">)</span>

        <span class="n">source_config</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">get_type_config_for_data_profile</span><span class="p">(</span><span class="n">source_profile</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">source_config</span><span class="p">[</span><span class="s2">&quot;doc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;The &#39;</span><span class="si">{</span><span class="n">source_profile</span><span class="si">}</span><span class="s2">&#39; value to be converted.&quot;</span>

        <span class="n">schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">source_profile</span><span class="p">:</span> <span class="n">source_config</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;allow_none_input&quot;</span><span class="p">):</span>
            <span class="n">schema</span><span class="p">[</span><span class="n">source_config</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]][</span><span class="s2">&quot;optional&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="n">schema</span>

    <span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="n">source_profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;source_profile&quot;</span><span class="p">)</span>

        <span class="n">target_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;target_type&quot;</span><span class="p">)</span>

        <span class="n">schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">target_type</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">target_type</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;The converted &#39;</span><span class="si">{</span><span class="n">source_profile</span><span class="si">}</span><span class="s2">&#39; value as &#39;</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;allow_none_input&quot;</span><span class="p">):</span>
            <span class="n">schema</span><span class="p">[</span><span class="n">target_type</span><span class="p">][</span><span class="s2">&quot;optional&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="n">schema</span>

    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">source_profile</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;source_profile&quot;</span><span class="p">)</span>
        <span class="n">source_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">get_type_config_for_data_profile</span><span class="p">(</span><span class="n">source_profile</span><span class="p">)</span>
        <span class="n">source_type</span> <span class="o">=</span> <span class="n">source_config</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>

        <span class="n">target_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;target_type&quot;</span><span class="p">)</span>

        <span class="n">allow_none</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;allow_none_input&quot;</span><span class="p">)</span>

        <span class="n">source</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">source_profile</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">source_type</span> <span class="o">!=</span> <span class="n">source</span><span class="o">.</span><span class="n">type_name</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KiaraProcessingException</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid type (</span><span class="si">{</span><span class="n">source</span><span class="o">.</span><span class="n">type_name</span><span class="si">}</span><span class="s2">) of source value: expected &#39;</span><span class="si">{</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&#39; (source profile name: </span><span class="si">{</span><span class="n">source_profile</span><span class="si">}</span><span class="s2">).&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">source</span><span class="o">.</span><span class="n">is_set</span> <span class="ow">or</span> <span class="n">source</span><span class="o">.</span><span class="n">is_none</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">allow_none</span><span class="p">:</span>
                <span class="n">outputs</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="s2">&quot;value_item&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">KiaraProcessingException</span><span class="p">(</span><span class="s2">&quot;No source value set.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;from_</span><span class="si">{</span><span class="n">source_profile</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Module &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_module_type_id</span><span class="si">}</span><span class="s2">&#39; can&#39;t convert &#39;</span><span class="si">{</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&#39; into &#39;</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&#39;: missing method &#39;from_</span><span class="si">{</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&#39;. This is a bug.&quot;</span>  <span class="c1"># type: ignore</span>
            <span class="p">)</span>

        <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;from_</span><span class="si">{</span><span class="n">source_profile</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">converted</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
        <span class="n">outputs</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">target_type</span><span class="p">,</span> <span class="n">converted</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.create_value.CreateValueModule.create_input_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.create_value.CreateValueModule.create_input_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the input schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[input_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this input]",
          "optional*': [boolean whether this input is optional or required (defaults to 'False')]
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/create_value.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="n">source_profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;source_profile&quot;</span><span class="p">)</span>

    <span class="n">source_config</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">get_type_config_for_data_profile</span><span class="p">(</span><span class="n">source_profile</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">source_config</span><span class="p">[</span><span class="s2">&quot;doc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;The &#39;</span><span class="si">{</span><span class="n">source_profile</span><span class="si">}</span><span class="s2">&#39; value to be converted.&quot;</span>

    <span class="n">schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">source_profile</span><span class="p">:</span> <span class="n">source_config</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;allow_none_input&quot;</span><span class="p">):</span>
        <span class="n">schema</span><span class="p">[</span><span class="n">source_config</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]][</span><span class="s2">&quot;optional&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">return</span> <span class="n">schema</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.create_value.CreateValueModule.create_output_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.create_value.CreateValueModule.create_output_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the output schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[output_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this output]"
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/create_value.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="n">source_profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;source_profile&quot;</span><span class="p">)</span>

    <span class="n">target_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;target_type&quot;</span><span class="p">)</span>

    <span class="n">schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">target_type</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">target_type</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;The converted &#39;</span><span class="si">{</span><span class="n">source_profile</span><span class="si">}</span><span class="s2">&#39; value as &#39;</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;allow_none_input&quot;</span><span class="p">):</span>
        <span class="n">schema</span><span class="p">[</span><span class="n">target_type</span><span class="p">][</span><span class="s2">&quot;optional&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">return</span> <span class="n">schema</span>
</code></pre></div>
        </details>
    </div>

  </div>






  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.create_value.CreateValueModule.retrieve_module_profiles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">retrieve_module_profiles</span><span class="p">(</span><span class="n">kiara</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.operations.create_value.CreateValueModule.retrieve_module_profiles" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Retrieve a collection of profiles (pre-set module configs) for this <em>kiara</em> module type.</p>
<p>This is used to automatically create generally useful operations (incl. their ids).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/create_value.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

    <span class="n">all_metadata_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># value_types: typing.Iterable[str] = cls.get_supported_value_types()</span>
    <span class="c1"># if &quot;*&quot; in value_types:</span>
    <span class="c1">#     value_types = kiara.type_mgmt.value_type_names</span>
    <span class="c1">#</span>
    <span class="c1"># for value_type in value_types:</span>

    <span class="n">target_type</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_target_value_type</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">target_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Can&#39;t assemble type convert operations for target type &#39;</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&#39;: type not available&quot;</span>
        <span class="p">)</span>

    <span class="k">for</span> <span class="n">source_profile</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_source_value_profiles</span><span class="p">():</span>

        <span class="n">mod_conf</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;source_profile&quot;</span><span class="p">:</span> <span class="n">source_profile</span><span class="p">,</span>
            <span class="s2">&quot;target_type&quot;</span><span class="p">:</span> <span class="n">target_type</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="n">mod_conf</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Create a &#39;</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&#39; value from a &#39;</span><span class="si">{</span><span class="n">source_profile</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="c1"># key = f&quot;{value_type}.convert_from.{target_type}&quot;   # type: ignore</span>
        <span class="c1"># if key in all_metadata_profiles.keys():</span>
        <span class="c1">#     raise Exception(f&quot;Duplicate profile key: {key}&quot;)</span>
        <span class="c1"># all_metadata_profiles[key] = op_config</span>
        <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;create.</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">.from.</span><span class="si">{</span><span class="n">source_profile</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">all_metadata_profiles</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicate profile key: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">all_metadata_profiles</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

    <span class="k">return</span> <span class="n">all_metadata_profiles</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.create_value.CreateValueModuleConfig" class="doc doc-heading">
        <code>
CreateValueModuleConfig            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleTypeConfigSchema" href="../module_config/#kiara.module_config.ModuleTypeConfigSchema">ModuleTypeConfigSchema</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.operations.create_value.CreateValueModuleConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/operations/create_value.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">CreateValueModuleConfig</span><span class="p">(</span><span class="n">ModuleTypeConfigSchema</span><span class="p">):</span>

    <span class="n">source_profile</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The profile of the source value.&quot;</span><span class="p">)</span>
    <span class="n">target_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The type of the value to convert to.&quot;</span><span class="p">)</span>
    <span class="n">allow_none_input</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to allow &#39;none&#39; source values, if one is encountered &#39;none&#39; is returned.&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.create_value.CreateValueModuleConfig.allow_none_input" class="doc doc-heading">
<code class="highlight language-python"><span class="n">allow_none_input</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.operations.create_value.CreateValueModuleConfig.allow_none_input" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Whether to allow 'none' source values, if one is encountered 'none' is returned.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.create_value.CreateValueModuleConfig.source_profile" class="doc doc-heading">
<code class="highlight language-python"><span class="n">source_profile</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.operations.create_value.CreateValueModuleConfig.source_profile" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The profile of the source value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.create_value.CreateValueModuleConfig.target_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">target_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.operations.create_value.CreateValueModuleConfig.target_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The type of the value to convert to.</p>
    </div>

  </div>











  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.create_value.CreateValueOperationType" class="doc doc-heading">
        <code>
CreateValueOperationType            (<span title="kiara.operations.OperationType">OperationType</span>)
        </code>



<a href="#kiara.operations.create_value.CreateValueOperationType" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Operations that create values of specific types from values of certain value profiles.</p>
<p>In most cases, source profiles will be 'file' or 'file_bundle' values of some sort, and the created values will exhibit more inherent structure and stricter specs than their sources.</p>
<p>The 'create' operation type differs from 'import' in that it expects values that are already onboarded and are all information in the value is stored in a <em>kiara</em> data registry (in most cases the <em>kiara data store</em>).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/create_value.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">CreateValueOperationType</span><span class="p">(</span><span class="n">OperationType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Operations that create values of specific types from values of certain value profiles.</span>

<span class="sd">    In most cases, source profiles will be &#39;file&#39; or &#39;file_bundle&#39; values of some sort, and the created values will exhibit more inherent structure and stricter specs than their sources.</span>

<span class="sd">    The &#39;create&#39; operation type differs from &#39;import&#39; in that it expects values that are already onboarded and are all information in the value is stored in a *kiara* data registry (in most cases the *kiara data store*).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">is_matching_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op_config</span><span class="p">:</span> <span class="n">Operation</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="k">return</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">op_config</span><span class="o">.</span><span class="n">module_cls</span><span class="p">,</span> <span class="n">CreateValueModule</span><span class="p">)</span>

    <span class="c1"># def get_operations_for_source_type(</span>
    <span class="c1">#     self, value_type: str</span>
    <span class="c1"># ) -&gt; typing.Dict[str, Operation]:</span>
    <span class="c1">#     &quot;&quot;&quot;Find all operations that transform from the specified type.</span>
    <span class="c1">#</span>
    <span class="c1">#     The result dict uses the target type of the conversion as key, and the operation itself as value.</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#</span>
    <span class="c1">#     result: typing.Dict[str, Operation] = {}</span>
    <span class="c1">#     for o_id, op in self.operations.items():</span>
    <span class="c1">#         source_type = op.module_config[&quot;source_type&quot;]</span>
    <span class="c1">#         if source_type == value_type:</span>
    <span class="c1">#             target_type = op.module_config[&quot;target_type&quot;]</span>
    <span class="c1">#             if target_type in result.keys():</span>
    <span class="c1">#                 raise Exception(</span>
    <span class="c1">#                     f&quot;Multiple operations to transform from &#39;{source_type}&#39; to {target_type}&quot;</span>
    <span class="c1">#                 )</span>
    <span class="c1">#             result[target_type] = op</span>
    <span class="c1">#</span>
    <span class="c1">#     return result</span>

    <span class="k">def</span> <span class="nf">get_operations_for_target_type</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Find all operations that transform to the specified type.</span>

<span class="sd">        The result dict uses the source type of the conversion as key, and the operation itself as value.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">o_id</span><span class="p">,</span> <span class="n">op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">target_type</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;target_type&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">value_type</span><span class="p">:</span>
                <span class="n">source_type</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;source_type&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">source_type</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Multiple operations to transform from &#39;</span><span class="si">{</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&#39; to </span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                <span class="n">result</span><span class="p">[</span><span class="n">source_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">op</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.create_value.CreateValueOperationType.get_operations_for_target_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_operations_for_target_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">)</span></code>


<a href="#kiara.operations.create_value.CreateValueOperationType.get_operations_for_target_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Find all operations that transform to the specified type.</p>
<p>The result dict uses the source type of the conversion as key, and the operation itself as value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/create_value.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_operations_for_target_type</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Find all operations that transform to the specified type.</span>

<span class="sd">    The result dict uses the source type of the conversion as key, and the operation itself as value.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">o_id</span><span class="p">,</span> <span class="n">op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">target_type</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;target_type&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">value_type</span><span class="p">:</span>
            <span class="n">source_type</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;source_type&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">source_type</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Multiple operations to transform from &#39;</span><span class="si">{</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&#39; to </span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">source_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">op</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.operations.data_export" class="doc doc-heading">
        <code>data_export</code>



<a href="#kiara.operations.data_export" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.data_export.DataExportModule" class="doc doc-heading">
        <code>
DataExportModule            (<a class="autorefs autorefs-internal" title="kiara.module.KiaraModule" href="../module/#kiara.module.KiaraModule">KiaraModule</a>)
        </code>



<a href="#kiara.operations.data_export.DataExportModule" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_export.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DataExportModule</span><span class="p">(</span><span class="n">KiaraModule</span><span class="p">):</span>

    <span class="n">_config_cls</span> <span class="o">=</span> <span class="n">DataExportModuleConfig</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_source_value_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="n">Kiara</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

        <span class="n">all_metadata_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">sup_type</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_source_value_type</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">sup_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
            <span class="n">log_message</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Ignoring data export operation for type &#39;</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">&#39;: type not available&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;export_as__&quot;</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="n">target_profile</span> <span class="o">=</span> <span class="n">attr</span><span class="p">[</span><span class="mi">11</span><span class="p">:]</span>

            <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;source_type&quot;</span><span class="p">:</span> <span class="n">sup_type</span><span class="p">,</span>
                    <span class="s2">&quot;target_profile&quot;</span><span class="p">:</span> <span class="n">target_profile</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Export data of type &#39;</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">&#39; as: </span><span class="si">{</span><span class="n">target_profile</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">all_metadata_profiles</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;export.</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">.as.</span><span class="si">{</span><span class="n">target_profile</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

        <span class="k">return</span> <span class="n">all_metadata_profiles</span>

    <span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="n">source_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;source_type&quot;</span><span class="p">)</span>
        <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">source_type</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">source_type</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;A value of type &#39;</span><span class="si">{</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;base_path&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The directory to export the file(s) to.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;optional&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The (base) name of the exported file(s).&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">inputs</span>

    <span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="n">outputs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;export_details&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dict&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;Details about the exported files/folders.&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">outputs</span>

    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">target_profile</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;target_profile&quot;</span><span class="p">)</span>
        <span class="n">source_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;source_type&quot;</span><span class="p">)</span>

        <span class="n">source</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(</span><span class="n">source_type</span><span class="p">)</span>

        <span class="n">func_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;export_as__</span><span class="si">{</span><span class="n">target_profile</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func_name</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t export &#39;</span><span class="si">{</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&#39; value: missing function &#39;</span><span class="si">{</span><span class="n">func_name</span><span class="si">}</span><span class="s2">&#39; in class &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;. Please check this modules documentation or source code to determine which source types and profiles are supported.&quot;</span>
            <span class="p">)</span>

        <span class="n">base_path</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(</span><span class="s2">&quot;base_path&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">base_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">base_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

        <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
        <span class="c1"># TODO: check signature?</span>

        <span class="n">base_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">base_path</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">base_path</span><span class="o">=</span><span class="n">base_path</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="c1"># schema = ValueSchema(type=self.get_target_value_type(), doc=&quot;Imported dataset.&quot;)</span>

        <span class="c1"># value_lineage = ValueLineage.from_module_and_inputs(</span>
        <span class="c1">#     module=self, output_name=output_key, inputs=inputs</span>
        <span class="c1"># )</span>
        <span class="c1"># value: Value = self._kiara.data_registry.register_data(</span>
        <span class="c1">#     value_data=result, value_schema=schema, lineage=None</span>
        <span class="c1"># )</span>

        <span class="n">outputs</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="s2">&quot;export_details&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.data_export.DataExportModule.create_input_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.data_export.DataExportModule.create_input_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the input schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[input_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this input]",
          "optional*': [boolean whether this input is optional or required (defaults to 'False')]
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_export.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="n">source_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;source_type&quot;</span><span class="p">)</span>
    <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">source_type</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">source_type</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;A value of type &#39;</span><span class="si">{</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;base_path&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The directory to export the file(s) to.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;optional&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The (base) name of the exported file(s).&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">inputs</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.data_export.DataExportModule.create_output_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.data_export.DataExportModule.create_output_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the output schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[output_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this output]"
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_export.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="n">outputs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;export_details&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dict&quot;</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;Details about the exported files/folders.&quot;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">outputs</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.data_export.DataExportModule.retrieve_module_profiles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">retrieve_module_profiles</span><span class="p">(</span><span class="n">kiara</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.operations.data_export.DataExportModule.retrieve_module_profiles" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Retrieve a collection of profiles (pre-set module configs) for this <em>kiara</em> module type.</p>
<p>This is used to automatically create generally useful operations (incl. their ids).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_export.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="n">Kiara</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

    <span class="n">all_metadata_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">sup_type</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_source_value_type</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">sup_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
        <span class="n">log_message</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Ignoring data export operation for type &#39;</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">&#39;: type not available&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;export_as__&quot;</span><span class="p">):</span>
            <span class="k">continue</span>

        <span class="n">target_profile</span> <span class="o">=</span> <span class="n">attr</span><span class="p">[</span><span class="mi">11</span><span class="p">:]</span>

        <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;source_type&quot;</span><span class="p">:</span> <span class="n">sup_type</span><span class="p">,</span>
                <span class="s2">&quot;target_profile&quot;</span><span class="p">:</span> <span class="n">target_profile</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Export data of type &#39;</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">&#39; as: </span><span class="si">{</span><span class="n">target_profile</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">all_metadata_profiles</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;export.</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">.as.</span><span class="si">{</span><span class="n">target_profile</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

    <span class="k">return</span> <span class="n">all_metadata_profiles</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.data_export.DataExportModuleConfig" class="doc doc-heading">
        <code>
DataExportModuleConfig            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleTypeConfigSchema" href="../module_config/#kiara.module_config.ModuleTypeConfigSchema">ModuleTypeConfigSchema</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.operations.data_export.DataExportModuleConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_export.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DataExportModuleConfig</span><span class="p">(</span><span class="n">ModuleTypeConfigSchema</span><span class="p">):</span>

    <span class="n">target_profile</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name of the target profile. Used to distinguish different target formats for the same data type.&quot;</span>
    <span class="p">)</span>
    <span class="n">source_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The type of the source data that is going to be exported.&quot;</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.data_export.DataExportModuleConfig.source_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">source_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.operations.data_export.DataExportModuleConfig.source_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The type of the source data that is going to be exported.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.data_export.DataExportModuleConfig.target_profile" class="doc doc-heading">
<code class="highlight language-python"><span class="n">target_profile</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.operations.data_export.DataExportModuleConfig.target_profile" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The name of the target profile. Used to distinguish different target formats for the same data type.</p>
    </div>

  </div>











  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.data_export.ExportDataOperationType" class="doc doc-heading">
        <code>
ExportDataOperationType            (<span title="kiara.operations.OperationType">OperationType</span>)
        </code>



<a href="#kiara.operations.data_export.ExportDataOperationType" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Export data from <em>kiara</em>.</p>
<p>Operations of this type use internally handled datasets, and export it to the local file system.</p>
<p>Export operations are created by implementing a class that inherits from <a href="http://dharpa.org/kiara/latest/api_reference/kiara.operations.data_export/#kiara.operations.data_export.DataExportModule">DataExportModule</a>, <em>kiara</em> will
register it under an operation id following this template:</p>
<div class="highlight"><pre><span></span><code>&lt;SOURCE_DATA_TYPE&gt;.export_as.&lt;EXPORT_PROFILE&gt;
</code></pre></div>
<p>The meaning of the templated fields is:</p>
<ul>
<li><code>EXPORTED_DATA_TYPE</code>: the data type of the value to export</li>
<li><code>EXPORT_PROFILE</code>: a short, free-form description of the format the data will be exported as</li>
</ul>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_export.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ExportDataOperationType</span><span class="p">(</span><span class="n">OperationType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Export data from *kiara*.</span>

<span class="sd">    Operations of this type use internally handled datasets, and export it to the local file system.</span>

<span class="sd">    Export operations are created by implementing a class that inherits from [DataExportModule](http://dharpa.org/kiara/latest/api_reference/kiara.operations.data_export/#kiara.operations.data_export.DataExportModule), *kiara* will</span>
<span class="sd">    register it under an operation id following this template:</span>

<span class="sd">    ```</span>
<span class="sd">    &lt;SOURCE_DATA_TYPE&gt;.export_as.&lt;EXPORT_PROFILE&gt;</span>
<span class="sd">    ```</span>

<span class="sd">    The meaning of the templated fields is:</span>

<span class="sd">    - `EXPORTED_DATA_TYPE`: the data type of the value to export</span>
<span class="sd">    - `EXPORT_PROFILE`: a short, free-form description of the format the data will be exported as</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">is_matching_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op_config</span><span class="p">:</span> <span class="n">Operation</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="n">match</span> <span class="o">=</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">op_config</span><span class="o">.</span><span class="n">module_cls</span><span class="p">,</span> <span class="n">DataExportModule</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">match</span>

    <span class="k">def</span> <span class="nf">get_export_operations_per_source_type</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]]]:</span>
        <span class="sd">&quot;&quot;&quot;Return all available import operations per value type.</span>

<span class="sd">        The result dictionary uses the source type as first level key, a source name/description as 2nd level key,</span>
<span class="sd">        and the Operation object as value.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">op_config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>

            <span class="n">target_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_cls</span><span class="o">.</span><span class="n">get_source_value_type</span><span class="p">()</span>  <span class="c1"># type: ignore</span>

            <span class="n">source_type</span> <span class="o">=</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;source_type&quot;</span><span class="p">]</span>
            <span class="n">target_profile</span> <span class="o">=</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;target_profile&quot;</span><span class="p">]</span>

            <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">target_type</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">source_type</span><span class="p">,</span> <span class="p">{})[</span>
                <span class="n">target_profile</span>
            <span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">get_export_operations_for_source_type</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Return all available import operations that produce data of the specified type.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_export_operations_per_source_type</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">value_type</span><span class="p">,</span> <span class="p">{})</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.data_export.ExportDataOperationType.get_export_operations_for_source_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_export_operations_for_source_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">)</span></code>


<a href="#kiara.operations.data_export.ExportDataOperationType.get_export_operations_for_source_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return all available import operations that produce data of the specified type.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_export.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_export_operations_for_source_type</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return all available import operations that produce data of the specified type.&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_export_operations_per_source_type</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">value_type</span><span class="p">,</span> <span class="p">{})</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.data_export.ExportDataOperationType.get_export_operations_per_source_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_export_operations_per_source_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.data_export.ExportDataOperationType.get_export_operations_per_source_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return all available import operations per value type.</p>
<p>The result dictionary uses the source type as first level key, a source name/description as 2nd level key,
and the Operation object as value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_export.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_export_operations_per_source_type</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]]]:</span>
    <span class="sd">&quot;&quot;&quot;Return all available import operations per value type.</span>

<span class="sd">    The result dictionary uses the source type as first level key, a source name/description as 2nd level key,</span>
<span class="sd">    and the Operation object as value.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">op_config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>

        <span class="n">target_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_cls</span><span class="o">.</span><span class="n">get_source_value_type</span><span class="p">()</span>  <span class="c1"># type: ignore</span>

        <span class="n">source_type</span> <span class="o">=</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;source_type&quot;</span><span class="p">]</span>
        <span class="n">target_profile</span> <span class="o">=</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;target_profile&quot;</span><span class="p">]</span>

        <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">target_type</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">source_type</span><span class="p">,</span> <span class="p">{})[</span>
            <span class="n">target_profile</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.data_export.FileBundleImportModule" class="doc doc-heading">
        <code>
FileBundleImportModule            (<a class="autorefs autorefs-internal" title="kiara.operations.data_export.DataExportModule" href="../operations/data_export/#kiara.operations.data_export.DataExportModule">DataExportModule</a>)
        </code>



<a href="#kiara.operations.data_export.FileBundleImportModule" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Import a file, optionally saving it to the data store.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_export.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">FileBundleImportModule</span><span class="p">(</span><span class="n">DataExportModule</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Import a file, optionally saving it to the data store.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_target_value_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;file_bundle&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.data_export.FileExportModule" class="doc doc-heading">
        <code>
FileExportModule            (<a class="autorefs autorefs-internal" title="kiara.operations.data_export.DataExportModule" href="../operations/data_export/#kiara.operations.data_export.DataExportModule">DataExportModule</a>)
        </code>



<a href="#kiara.operations.data_export.FileExportModule" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Import a file, optionally saving it to the data store.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_export.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">FileExportModule</span><span class="p">(</span><span class="n">DataExportModule</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Import a file, optionally saving it to the data store.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_target_value_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;file&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">












  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.operations.data_import" class="doc doc-heading">
        <code>data_import</code>



<a href="#kiara.operations.data_import" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.data_import.DataImportModule" class="doc doc-heading">
        <code>
DataImportModule            (<a class="autorefs autorefs-internal" title="kiara.module.KiaraModule" href="../module/#kiara.module.KiaraModule">KiaraModule</a>)
        </code>



<a href="#kiara.operations.data_import.DataImportModule" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_import.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DataImportModule</span><span class="p">(</span><span class="n">KiaraModule</span><span class="p">):</span>

    <span class="n">_config_cls</span> <span class="o">=</span> <span class="n">DataImportModuleConfig</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_target_value_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="n">Kiara</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

        <span class="n">all_metadata_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">sup_type</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_target_value_type</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">sup_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
            <span class="n">log_message</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Ignoring data import operation for type &#39;</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">&#39;: type not available&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;import_from__&quot;</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="n">tokens</span> <span class="o">=</span> <span class="n">attr</span><span class="p">[</span><span class="mi">13</span><span class="p">:]</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">log_message</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t determine source name and type from string in module </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="si">}</span><span class="s2">, ignoring method: </span><span class="si">{</span><span class="n">attr</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># type: ignore</span>
                <span class="p">)</span>

            <span class="n">source_profile</span><span class="p">,</span> <span class="n">source_type</span> <span class="o">=</span> <span class="n">tokens</span>

            <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;source_profile&quot;</span><span class="p">:</span> <span class="n">source_profile</span><span class="p">,</span>
                    <span class="s2">&quot;source_type&quot;</span><span class="p">:</span> <span class="n">source_type</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Import data of type &#39;</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">&#39; from a </span><span class="si">{</span><span class="n">source_profile</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">source_type</span><span class="si">}</span><span class="s2"> and save it to the kiara data store.&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">all_metadata_profiles</span><span class="p">[</span>
                <span class="sa">f</span><span class="s2">&quot;import.</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">.from.</span><span class="si">{</span><span class="n">source_profile</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

        <span class="k">return</span> <span class="n">all_metadata_profiles</span>

    <span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="n">input_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;source_profile&quot;</span><span class="p">)</span>
        <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">input_name</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;source_type&quot;</span><span class="p">),</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;A </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s1">&#39;source_profile&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s1">&#39;source_type&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; value.&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="c1"># allow_save = self.get_config_value(&quot;allow_save_input&quot;)</span>
        <span class="c1"># save_default = self.get_config_value(&quot;save_default&quot;)</span>
        <span class="c1"># if allow_save:</span>
        <span class="c1">#     inputs[&quot;save&quot;] = {</span>
        <span class="c1">#         &quot;type&quot;: &quot;boolean&quot;,</span>
        <span class="c1">#         &quot;doc&quot;: &quot;Whether to save the imported value, or not.&quot;,</span>
        <span class="c1">#         &quot;default&quot;: save_default,</span>
        <span class="c1">#     }</span>
        <span class="c1">#</span>
        <span class="c1"># allow_aliases: typing.Optional[bool] = self.get_config_value(</span>
        <span class="c1">#     &quot;allow_aliases_input&quot;</span>
        <span class="c1"># )</span>
        <span class="c1"># if allow_aliases is None:</span>
        <span class="c1">#     allow_aliases = allow_save</span>
        <span class="c1">#</span>
        <span class="c1"># if allow_aliases and not allow_save and not save_default:</span>
        <span class="c1">#     raise Exception(</span>
        <span class="c1">#         &quot;Invalid module configuration: allowing aliases input does not make sense if save is disabled.&quot;</span>
        <span class="c1">#     )</span>
        <span class="c1">#</span>
        <span class="c1"># if allow_aliases:</span>
        <span class="c1">#     default_aliases = self.get_config_value(&quot;aliases_default&quot;)</span>
        <span class="c1">#     inputs[&quot;aliases&quot;] = {</span>
        <span class="c1">#         &quot;type&quot;: &quot;list&quot;,</span>
        <span class="c1">#         &quot;doc&quot;: &quot;A list of aliases to use when storing the value (only applicable if &#39;save&#39; is set).&quot;,</span>
        <span class="c1">#         &quot;default&quot;: default_aliases,</span>
        <span class="c1">#     }</span>

        <span class="k">return</span> <span class="n">inputs</span>

    <span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="n">output_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_value_type</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">output_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
            <span class="n">output_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>

        <span class="n">outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">output_name</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_value_type</span><span class="p">(),</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;The imported </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_target_value_type</span><span class="p">()</span><span class="si">}</span><span class="s2"> value.&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">outputs</span>

    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">source_profile</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;source_profile&quot;</span><span class="p">)</span>
        <span class="n">source_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;source_type&quot;</span><span class="p">)</span>

        <span class="n">source</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(</span><span class="n">source_profile</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_value_type</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
            <span class="n">output_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">output_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_value_type</span><span class="p">()</span>

        <span class="n">func_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;import_from__</span><span class="si">{</span><span class="n">source_profile</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func_name</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t import &#39;</span><span class="si">{</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&#39; value: missing function &#39;</span><span class="si">{</span><span class="n">func_name</span><span class="si">}</span><span class="s2">&#39; in class &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;. Please check this modules documentation or source code to determine which source types and profiles are supported.&quot;</span>
            <span class="p">)</span>

        <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
        <span class="c1"># TODO: check signature?</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
        <span class="c1"># schema = ValueSchema(type=self.get_target_value_type(), doc=&quot;Imported dataset.&quot;)</span>

        <span class="c1"># value_lineage = ValueLineage.from_module_and_inputs(</span>
        <span class="c1">#     module=self, output_name=output_key, inputs=inputs</span>
        <span class="c1"># )</span>
        <span class="c1"># value: Value = self._kiara.data_registry.register_data(</span>
        <span class="c1">#     value_data=result, value_schema=schema, lineage=None</span>
        <span class="c1"># )</span>

        <span class="n">outputs</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">output_key</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.data_import.DataImportModule.create_input_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.data_import.DataImportModule.create_input_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the input schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[input_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this input]",
          "optional*': [boolean whether this input is optional or required (defaults to 'False')]
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_import.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="n">input_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;source_profile&quot;</span><span class="p">)</span>
    <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">input_name</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;source_type&quot;</span><span class="p">),</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;A </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s1">&#39;source_profile&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s1">&#39;source_type&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; value.&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>

    <span class="c1"># allow_save = self.get_config_value(&quot;allow_save_input&quot;)</span>
    <span class="c1"># save_default = self.get_config_value(&quot;save_default&quot;)</span>
    <span class="c1"># if allow_save:</span>
    <span class="c1">#     inputs[&quot;save&quot;] = {</span>
    <span class="c1">#         &quot;type&quot;: &quot;boolean&quot;,</span>
    <span class="c1">#         &quot;doc&quot;: &quot;Whether to save the imported value, or not.&quot;,</span>
    <span class="c1">#         &quot;default&quot;: save_default,</span>
    <span class="c1">#     }</span>
    <span class="c1">#</span>
    <span class="c1"># allow_aliases: typing.Optional[bool] = self.get_config_value(</span>
    <span class="c1">#     &quot;allow_aliases_input&quot;</span>
    <span class="c1"># )</span>
    <span class="c1"># if allow_aliases is None:</span>
    <span class="c1">#     allow_aliases = allow_save</span>
    <span class="c1">#</span>
    <span class="c1"># if allow_aliases and not allow_save and not save_default:</span>
    <span class="c1">#     raise Exception(</span>
    <span class="c1">#         &quot;Invalid module configuration: allowing aliases input does not make sense if save is disabled.&quot;</span>
    <span class="c1">#     )</span>
    <span class="c1">#</span>
    <span class="c1"># if allow_aliases:</span>
    <span class="c1">#     default_aliases = self.get_config_value(&quot;aliases_default&quot;)</span>
    <span class="c1">#     inputs[&quot;aliases&quot;] = {</span>
    <span class="c1">#         &quot;type&quot;: &quot;list&quot;,</span>
    <span class="c1">#         &quot;doc&quot;: &quot;A list of aliases to use when storing the value (only applicable if &#39;save&#39; is set).&quot;,</span>
    <span class="c1">#         &quot;default&quot;: default_aliases,</span>
    <span class="c1">#     }</span>

    <span class="k">return</span> <span class="n">inputs</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.data_import.DataImportModule.create_output_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.data_import.DataImportModule.create_output_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the output schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[output_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this output]"
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_import.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="n">output_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_value_type</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">output_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
        <span class="n">output_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>

    <span class="n">outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">output_name</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_value_type</span><span class="p">(),</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;The imported </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_target_value_type</span><span class="p">()</span><span class="si">}</span><span class="s2"> value.&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">outputs</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.data_import.DataImportModule.retrieve_module_profiles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">retrieve_module_profiles</span><span class="p">(</span><span class="n">kiara</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.operations.data_import.DataImportModule.retrieve_module_profiles" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Retrieve a collection of profiles (pre-set module configs) for this <em>kiara</em> module type.</p>
<p>This is used to automatically create generally useful operations (incl. their ids).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_import.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="n">Kiara</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

    <span class="n">all_metadata_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">sup_type</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_target_value_type</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">sup_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
        <span class="n">log_message</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Ignoring data import operation for type &#39;</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">&#39;: type not available&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;import_from__&quot;</span><span class="p">):</span>
            <span class="k">continue</span>

        <span class="n">tokens</span> <span class="o">=</span> <span class="n">attr</span><span class="p">[</span><span class="mi">13</span><span class="p">:]</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">log_message</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t determine source name and type from string in module </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="si">}</span><span class="s2">, ignoring method: </span><span class="si">{</span><span class="n">attr</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># type: ignore</span>
            <span class="p">)</span>

        <span class="n">source_profile</span><span class="p">,</span> <span class="n">source_type</span> <span class="o">=</span> <span class="n">tokens</span>

        <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;source_profile&quot;</span><span class="p">:</span> <span class="n">source_profile</span><span class="p">,</span>
                <span class="s2">&quot;source_type&quot;</span><span class="p">:</span> <span class="n">source_type</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Import data of type &#39;</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">&#39; from a </span><span class="si">{</span><span class="n">source_profile</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">source_type</span><span class="si">}</span><span class="s2"> and save it to the kiara data store.&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">all_metadata_profiles</span><span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;import.</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">.from.</span><span class="si">{</span><span class="n">source_profile</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

    <span class="k">return</span> <span class="n">all_metadata_profiles</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.data_import.DataImportModuleConfig" class="doc doc-heading">
        <code>
DataImportModuleConfig            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleTypeConfigSchema" href="../module_config/#kiara.module_config.ModuleTypeConfigSchema">ModuleTypeConfigSchema</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.operations.data_import.DataImportModuleConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_import.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DataImportModuleConfig</span><span class="p">(</span><span class="n">ModuleTypeConfigSchema</span><span class="p">):</span>

    <span class="c1"># value_type: str = Field(description=&quot;The type of the value to be imported.&quot;)</span>
    <span class="n">source_profile</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name of the source profile. Used to distinguish different input categories for the same input type.&quot;</span>
    <span class="p">)</span>
    <span class="n">source_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The type of the source to import from.&quot;</span><span class="p">)</span>
    <span class="c1"># allow_save_input: bool = Field(</span>
    <span class="c1">#     description=&quot;Allow the user to choose whether to save the imported item or not.&quot;,</span>
    <span class="c1">#     default=True,</span>
    <span class="c1"># )</span>
    <span class="c1"># save_default: bool = Field(</span>
    <span class="c1">#     description=&quot;The default of the &#39;save&#39; input if not specified by the user.&quot;,</span>
    <span class="c1">#     default=False,</span>
    <span class="c1"># )</span>
    <span class="c1"># allow_aliases_input: typing.Optional[bool] = Field(</span>
    <span class="c1">#     description=&quot;Allow the user to choose aliases for the saved value.&quot;,</span>
    <span class="c1">#     default=None,</span>
    <span class="c1"># )</span>
    <span class="c1"># aliases_default: typing.List[str] = Field(</span>
    <span class="c1">#     description=&quot;Default value for aliases.&quot;, default_factory=list</span>
    <span class="c1"># )</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.data_import.DataImportModuleConfig.source_profile" class="doc doc-heading">
<code class="highlight language-python"><span class="n">source_profile</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.operations.data_import.DataImportModuleConfig.source_profile" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The name of the source profile. Used to distinguish different input categories for the same input type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.data_import.DataImportModuleConfig.source_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">source_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.operations.data_import.DataImportModuleConfig.source_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The type of the source to import from.</p>
    </div>

  </div>











  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.data_import.FileBundleImportModule" class="doc doc-heading">
        <code>
FileBundleImportModule            (<a class="autorefs autorefs-internal" title="kiara.operations.data_import.DataImportModule" href="../operations/data_import/#kiara.operations.data_import.DataImportModule">DataImportModule</a>)
        </code>



<a href="#kiara.operations.data_import.FileBundleImportModule" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Import a file, optionally saving it to the data store.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_import.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">FileBundleImportModule</span><span class="p">(</span><span class="n">DataImportModule</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Import a file, optionally saving it to the data store.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_target_value_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;file_bundle&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.data_import.FileImportModule" class="doc doc-heading">
        <code>
FileImportModule            (<a class="autorefs autorefs-internal" title="kiara.operations.data_import.DataImportModule" href="../operations/data_import/#kiara.operations.data_import.DataImportModule">DataImportModule</a>)
        </code>



<a href="#kiara.operations.data_import.FileImportModule" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Import a file, optionally saving it to the data store.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_import.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">FileImportModule</span><span class="p">(</span><span class="n">DataImportModule</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Import a file, optionally saving it to the data store.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_target_value_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;file&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.data_import.ImportDataOperationType" class="doc doc-heading">
        <code>
ImportDataOperationType            (<span title="kiara.operations.OperationType">OperationType</span>)
        </code>



<a href="#kiara.operations.data_import.ImportDataOperationType" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Import data into <em>kiara</em>.</p>
<p>Operations of this type take external data, and register it into <em>kiara</em>. External data is different in that it usually
does not come with any metadata on how it was created, who created it, when, etc.</p>
<p>Import operations are created by implementing a class that inherits from <a href="http://dharpa.org/kiara/latest/api_reference/kiara.operations.data_import/#kiara.operations.data_import.DataImportModule">DataImportModule</a>, <em>kiara</em> will
register it under an operation id following this template:</p>
<div class="highlight"><pre><span></span><code>&lt;IMPORTED_DATA_TYPE&gt;.import_from.&lt;IMPORT_PROFILE&gt;.&lt;INPUT_TYPE&gt;
</code></pre></div>
<p>The meaning of the templated fields is:</p>
<ul>
<li><code>IMPORTED_DATA_TYPE</code>: the data type of the imported value</li>
<li><code>IMPORT_PROFILE</code>: a short, free-form description of where from (or how) the data is imported</li>
<li><code>INPUT_TYPE</code>: the data type of the user input that points to the data (like a file path, url, query, etc.) -- in most cases this will be some form of a string or uri</li>
</ul>
<p>There are two main scenarios when an operation of this type is used:</p>
<ul>
<li>'onboard' data that was created by a 3rd party, or using external processes</li>
<li>'re-import' data that as created in <em>kiara</em>, then exported to be transformed in an external process, and then imported again into <em>kiara</em></li>
</ul>
<p>In both of those scenarios, we'll need to have a way to add metadata to fill out 'holes' in the metadata 'chold chain'. We don't have a concept
yet as to how to do that, but that is planned for the future.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_import.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ImportDataOperationType</span><span class="p">(</span><span class="n">OperationType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Import data into *kiara*.</span>

<span class="sd">    Operations of this type take external data, and register it into *kiara*. External data is different in that it usually</span>
<span class="sd">    does not come with any metadata on how it was created, who created it, when, etc.</span>

<span class="sd">    Import operations are created by implementing a class that inherits from [DataImportModule](http://dharpa.org/kiara/latest/api_reference/kiara.operations.data_import/#kiara.operations.data_import.DataImportModule), *kiara* will</span>
<span class="sd">    register it under an operation id following this template:</span>

<span class="sd">    ```</span>
<span class="sd">    &lt;IMPORTED_DATA_TYPE&gt;.import_from.&lt;IMPORT_PROFILE&gt;.&lt;INPUT_TYPE&gt;</span>
<span class="sd">    ```</span>

<span class="sd">    The meaning of the templated fields is:</span>

<span class="sd">    - `IMPORTED_DATA_TYPE`: the data type of the imported value</span>
<span class="sd">    - `IMPORT_PROFILE`: a short, free-form description of where from (or how) the data is imported</span>
<span class="sd">    - `INPUT_TYPE`: the data type of the user input that points to the data (like a file path, url, query, etc.) -- in most cases this will be some form of a string or uri</span>

<span class="sd">    There are two main scenarios when an operation of this type is used:</span>

<span class="sd">    - &#39;onboard&#39; data that was created by a 3rd party, or using external processes</span>
<span class="sd">    - &#39;re-import&#39; data that as created in *kiara*, then exported to be transformed in an external process, and then imported again into *kiara*</span>

<span class="sd">    In both of those scenarios, we&#39;ll need to have a way to add metadata to fill out &#39;holes&#39; in the metadata &#39;chold chain&#39;. We don&#39;t have a concept</span>
<span class="sd">    yet as to how to do that, but that is planned for the future.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">is_matching_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op_config</span><span class="p">:</span> <span class="n">Operation</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="k">return</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">op_config</span><span class="o">.</span><span class="n">module_cls</span><span class="p">,</span> <span class="n">DataImportModule</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_import_operations_per_target_type</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]]]:</span>
        <span class="sd">&quot;&quot;&quot;Return all available import operations per value type.</span>

<span class="sd">        The result dictionary uses the source type as first level key, a source name/description as 2nd level key,</span>
<span class="sd">        and the Operation object as value.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">op_config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>

            <span class="n">target_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_cls</span><span class="o">.</span><span class="n">get_target_value_type</span><span class="p">()</span>  <span class="c1"># type: ignore</span>

            <span class="n">source_type</span> <span class="o">=</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;source_type&quot;</span><span class="p">]</span>
            <span class="n">source_profile</span> <span class="o">=</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;source_profile&quot;</span><span class="p">]</span>

            <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">target_type</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">source_type</span><span class="p">,</span> <span class="p">{})[</span>
                <span class="n">source_profile</span>
            <span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">get_import_operations_for_target_type</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Return all available import operations that produce data of the specified type.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_import_operations_per_target_type</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">value_type</span><span class="p">,</span> <span class="p">{})</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.data_import.ImportDataOperationType.get_import_operations_for_target_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_import_operations_for_target_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">)</span></code>


<a href="#kiara.operations.data_import.ImportDataOperationType.get_import_operations_for_target_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return all available import operations that produce data of the specified type.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_import.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_import_operations_for_target_type</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return all available import operations that produce data of the specified type.&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_import_operations_per_target_type</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">value_type</span><span class="p">,</span> <span class="p">{})</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.data_import.ImportDataOperationType.get_import_operations_per_target_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_import_operations_per_target_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.data_import.ImportDataOperationType.get_import_operations_per_target_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return all available import operations per value type.</p>
<p>The result dictionary uses the source type as first level key, a source name/description as 2nd level key,
and the Operation object as value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/data_import.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_import_operations_per_target_type</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]]]:</span>
    <span class="sd">&quot;&quot;&quot;Return all available import operations per value type.</span>

<span class="sd">    The result dictionary uses the source type as first level key, a source name/description as 2nd level key,</span>
<span class="sd">    and the Operation object as value.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">op_config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>

        <span class="n">target_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_cls</span><span class="o">.</span><span class="n">get_target_value_type</span><span class="p">()</span>  <span class="c1"># type: ignore</span>

        <span class="n">source_type</span> <span class="o">=</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;source_type&quot;</span><span class="p">]</span>
        <span class="n">source_profile</span> <span class="o">=</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;source_profile&quot;</span><span class="p">]</span>

        <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">target_type</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">source_type</span><span class="p">,</span> <span class="p">{})[</span>
            <span class="n">source_profile</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.operations.extract_metadata" class="doc doc-heading">
        <code>extract_metadata</code>



<a href="#kiara.operations.extract_metadata" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.extract_metadata.ExtractMetadataModule" class="doc doc-heading">
        <code>
ExtractMetadataModule            (<a class="autorefs autorefs-internal" title="kiara.module.KiaraModule" href="../module/#kiara.module.KiaraModule">KiaraModule</a>)
        </code>



<a href="#kiara.operations.extract_metadata.ExtractMetadataModule" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Base class to use when writing a module to extract metadata from a file.</p>
<p>It's possible to use any arbitrary <em>kiara</em> module for this purpose, but sub-classing this makes it easier.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/extract_metadata.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ExtractMetadataModule</span><span class="p">(</span><span class="n">KiaraModule</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class to use when writing a module to extract metadata from a file.</span>

<span class="sd">    It&#39;s possible to use any arbitrary *kiara* module for this purpose, but sub-classing this makes it easier.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_config_cls</span> <span class="o">=</span> <span class="n">MetadataModuleConfig</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

        <span class="n">all_metadata_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">value_types</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_supported_value_types</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;*&quot;</span> <span class="ow">in</span> <span class="n">value_types</span><span class="p">:</span>
            <span class="n">value_types</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span>

        <span class="n">metadata_key</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_metadata_key</span><span class="p">()</span>
        <span class="n">all_value_types</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">value_type</span> <span class="ow">in</span> <span class="n">value_types</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">value_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
                <span class="n">log_message</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Ignoring metadata-extract operation (metadata key: </span><span class="si">{</span><span class="n">metadata_key</span><span class="si">}</span><span class="s2">) for type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;: type not available&quot;</span>
                <span class="p">)</span>
                <span class="k">continue</span>

            <span class="n">all_value_types</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">value_type</span><span class="p">)</span>
            <span class="n">sub_types</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">get_sub_types</span><span class="p">(</span><span class="n">value_type</span><span class="p">)</span>
            <span class="n">all_value_types</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">sub_types</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">value_type</span> <span class="ow">in</span> <span class="n">all_value_types</span><span class="p">:</span>

            <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value_type&quot;</span><span class="p">:</span> <span class="n">value_type</span><span class="p">},</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Extract &#39;</span><span class="si">{</span><span class="n">metadata_key</span><span class="si">}</span><span class="s2">&#39; metadata for value of type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
            <span class="p">}</span>

            <span class="n">all_metadata_profiles</span><span class="p">[</span>
                <span class="sa">f</span><span class="s2">&quot;extract.</span><span class="si">{</span><span class="n">metadata_key</span><span class="si">}</span><span class="s2">.metadata.from.</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

        <span class="k">return</span> <span class="n">all_metadata_profiles</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_supported_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
        <span class="k">pass</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_metadata_key</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_name</span>  <span class="c1"># type: ignore</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_supported_value_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">_types</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_get_supported_types</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_types</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">_types</span> <span class="o">=</span> <span class="p">[</span><span class="n">_types</span><span class="p">]</span>

        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">_types</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_metadata_schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">data_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">)</span>
        <span class="n">sup_types</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_supported_value_types</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;*&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sup_types</span> <span class="ow">and</span> <span class="n">data_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sup_types</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">sup_type</span> <span class="ow">in</span> <span class="n">sup_types</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">sub_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">get_sub_types</span><span class="p">(</span><span class="n">sup_type</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">sub_type</span> <span class="o">==</span> <span class="n">data_type</span><span class="p">:</span>
                        <span class="n">match</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">break</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid module configuration, type &#39;</span><span class="si">{</span><span class="n">data_type</span><span class="si">}</span><span class="s2">&#39; not supported. Supported types: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_supported_value_types</span><span class="p">())</span><span class="si">}</span><span class="s2">.&quot;</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">data_type</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">metadata_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata_schema</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata_schema</span>

        <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_metadata_schema</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">value_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">schema_json</span><span class="p">()</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for metadata schema: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_metadata_schema</span> <span class="o">=</span> <span class="n">schema</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata_schema</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_metadata_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Create the metadata schema for the configured type.&quot;&quot;&quot;</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">extract_metadata</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">BaseModel</span><span class="p">]:</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="n">input_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_type</span>
        <span class="k">if</span> <span class="n">input_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
            <span class="n">input_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>

        <span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">input_name</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_type</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;A value of type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
                <span class="s2">&quot;optional&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">inputs</span>

    <span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>
        <span class="n">outputs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;metadata_item&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dict&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The metadata for the provided value.&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;metadata_item_schema&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The (json) schema for the metadata.&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">outputs</span>

    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">input_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_type</span>
        <span class="k">if</span> <span class="n">input_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
            <span class="n">input_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>

        <span class="n">value</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">input_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_type</span> <span class="o">!=</span> <span class="s2">&quot;any&quot;</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">type_name</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_type</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KiaraProcessingException</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t extract metadata for value of type &#39;</span><span class="si">{</span><span class="n">value</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&#39;. Expected type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># TODO: if type &#39;any&#39;, validate that the data is actually of the right type?</span>

        <span class="n">outputs</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="s2">&quot;metadata_item_schema&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_schema</span><span class="p">)</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_metadata</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># TODO: validate metadata?</span>
        <span class="n">outputs</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="s2">&quot;metadata_item&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">












  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.extract_metadata.ExtractMetadataModule.create_input_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.extract_metadata.ExtractMetadataModule.create_input_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the input schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[input_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this input]",
          "optional*': [boolean whether this input is optional or required (defaults to 'False')]
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/extract_metadata.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="n">input_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_type</span>
    <span class="k">if</span> <span class="n">input_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
        <span class="n">input_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>

    <span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">input_name</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_type</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;A value of type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;optional&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">inputs</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.extract_metadata.ExtractMetadataModule.create_output_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.extract_metadata.ExtractMetadataModule.create_output_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the output schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[output_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this output]"
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/extract_metadata.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>
    <span class="n">outputs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;metadata_item&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dict&quot;</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The metadata for the provided value.&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;metadata_item_schema&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The (json) schema for the metadata.&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">outputs</span>
</code></pre></div>
        </details>
    </div>

  </div>







  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.extract_metadata.ExtractMetadataModule.retrieve_module_profiles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">retrieve_module_profiles</span><span class="p">(</span><span class="n">kiara</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.operations.extract_metadata.ExtractMetadataModule.retrieve_module_profiles" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Retrieve a collection of profiles (pre-set module configs) for this <em>kiara</em> module type.</p>
<p>This is used to automatically create generally useful operations (incl. their ids).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/extract_metadata.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

    <span class="n">all_metadata_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">value_types</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_supported_value_types</span><span class="p">()</span>
    <span class="k">if</span> <span class="s2">&quot;*&quot;</span> <span class="ow">in</span> <span class="n">value_types</span><span class="p">:</span>
        <span class="n">value_types</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span>

    <span class="n">metadata_key</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_metadata_key</span><span class="p">()</span>
    <span class="n">all_value_types</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">value_type</span> <span class="ow">in</span> <span class="n">value_types</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">value_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
            <span class="n">log_message</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Ignoring metadata-extract operation (metadata key: </span><span class="si">{</span><span class="n">metadata_key</span><span class="si">}</span><span class="s2">) for type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;: type not available&quot;</span>
            <span class="p">)</span>
            <span class="k">continue</span>

        <span class="n">all_value_types</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">value_type</span><span class="p">)</span>
        <span class="n">sub_types</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">get_sub_types</span><span class="p">(</span><span class="n">value_type</span><span class="p">)</span>
        <span class="n">all_value_types</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">sub_types</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">value_type</span> <span class="ow">in</span> <span class="n">all_value_types</span><span class="p">:</span>

        <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value_type&quot;</span><span class="p">:</span> <span class="n">value_type</span><span class="p">},</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Extract &#39;</span><span class="si">{</span><span class="n">metadata_key</span><span class="si">}</span><span class="s2">&#39; metadata for value of type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">all_metadata_profiles</span><span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;extract.</span><span class="si">{</span><span class="n">metadata_key</span><span class="si">}</span><span class="s2">.metadata.from.</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

    <span class="k">return</span> <span class="n">all_metadata_profiles</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.extract_metadata.ExtractMetadataOperationType" class="doc doc-heading">
        <code>
ExtractMetadataOperationType            (<span title="kiara.operations.OperationType">OperationType</span>)
        </code>



<a href="#kiara.operations.extract_metadata.ExtractMetadataOperationType" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Extract metadata from a dataset.</p>
<p>The purpose of this operation type is to be able to extract arbitrary, type-specific metadata from value data. In general,
<em>kiara</em> wants to collect (and store along the value) as much metadata related to data as possible, but the extraction
process should not take a lot of processing time (since this is done whenever a value is registered into a data registry).</p>
<p>As its hard to predict all the types of metadata of a specific type that could be interesting in specific scenarios, <em>kiara</em>
supports a pluggable mechanism to add new metadata extraction processes by extending the base class <a href="http://dharpa.org/kiara/latest/api_reference/kiara.operations.extract_metadata/#kiara.operations.extract_metadata.ExtractMetadataModule"><code>ExtractMetadataModule</code></a>
and adding that implementation somewhere <em>kiara</em> can find it. Once that is done, <em>kiara</em> will automatically add a new
operation with an id that follows this template: <code>&lt;VALUE_TYPE&gt;.extract_metadata.&lt;METADATA_KEY&gt;</code>, where <code>METADATA_KEY</code> is a name
under which the metadata will be stored within the value object.</p>
<p>By default, every value type should have at least one metadata extraction module where the <code>METADATA_KEY</code> is the same
as the value type name, and which contains basic, type-specific metadata (e.g. for a 'table', that would be number of rows,
column names, column types, etc.).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/extract_metadata.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ExtractMetadataOperationType</span><span class="p">(</span><span class="n">OperationType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Extract metadata from a dataset.</span>

<span class="sd">    The purpose of this operation type is to be able to extract arbitrary, type-specific metadata from value data. In general,</span>
<span class="sd">    *kiara* wants to collect (and store along the value) as much metadata related to data as possible, but the extraction</span>
<span class="sd">    process should not take a lot of processing time (since this is done whenever a value is registered into a data registry).</span>

<span class="sd">    As its hard to predict all the types of metadata of a specific type that could be interesting in specific scenarios, *kiara*</span>
<span class="sd">    supports a pluggable mechanism to add new metadata extraction processes by extending the base class [`ExtractMetadataModule`](http://dharpa.org/kiara/latest/api_reference/kiara.operations.extract_metadata/#kiara.operations.extract_metadata.ExtractMetadataModule)</span>
<span class="sd">    and adding that implementation somewhere *kiara* can find it. Once that is done, *kiara* will automatically add a new</span>
<span class="sd">    operation with an id that follows this template: `&lt;VALUE_TYPE&gt;.extract_metadata.&lt;METADATA_KEY&gt;`, where `METADATA_KEY` is a name</span>
<span class="sd">    under which the metadata will be stored within the value object.</span>

<span class="sd">    By default, every value type should have at least one metadata extraction module where the `METADATA_KEY` is the same</span>
<span class="sd">    as the value type name, and which contains basic, type-specific metadata (e.g. for a &#39;table&#39;, that would be number of rows,</span>
<span class="sd">    column names, column types, etc.).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">is_matching_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op_config</span><span class="p">:</span> <span class="n">Operation</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">op_config</span><span class="o">.</span><span class="n">module_cls</span><span class="p">,</span> <span class="n">ExtractMetadataModule</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_all_operations_for_type</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]:</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">op_config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">v_t</span> <span class="o">=</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;value_type&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">v_t</span> <span class="o">!=</span> <span class="n">value_type</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">module_cls</span><span class="p">:</span> <span class="n">ExtractMetadataModule</span> <span class="o">=</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_cls</span>  <span class="c1"># type: ignore</span>
            <span class="n">md_key</span> <span class="o">=</span> <span class="n">module_cls</span><span class="o">.</span><span class="n">get_metadata_key</span><span class="p">()</span>
            <span class="n">result</span><span class="p">[</span><span class="n">md_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">













  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.extract_metadata.MetadataModuleConfig" class="doc doc-heading">
        <code>
MetadataModuleConfig            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleTypeConfigSchema" href="../module_config/#kiara.module_config.ModuleTypeConfigSchema">ModuleTypeConfigSchema</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.operations.extract_metadata.MetadataModuleConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/operations/extract_metadata.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">MetadataModuleConfig</span><span class="p">(</span><span class="n">ModuleTypeConfigSchema</span><span class="p">):</span>

    <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The data type this module will be used for.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.extract_metadata.MetadataModuleConfig.value_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.operations.extract_metadata.MetadataModuleConfig.value_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The data type this module will be used for.</p>
    </div>

  </div>











  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.operations.merge_values" class="doc doc-heading">
        <code>merge_values</code>



<a href="#kiara.operations.merge_values" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.merge_values.ValueMergeModule" class="doc doc-heading">
        <code>
ValueMergeModule            (<a class="autorefs autorefs-internal" title="kiara.module.KiaraModule" href="../module/#kiara.module.KiaraModule">KiaraModule</a>)
        </code>



<a href="#kiara.operations.merge_values.ValueMergeModule" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Base class for operations that merge several values into one.</p>
<p>NOT USED YET.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/merge_values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueMergeModule</span><span class="p">(</span><span class="n">KiaraModule</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for operations that merge several values into one.</span>

<span class="sd">    NOT USED YET.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="n">input_schema_dicts</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;input_schemas&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">input_schema_dicts</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No input schemas provided.&quot;</span><span class="p">)</span>

        <span class="n">input_schemas</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">input_schema_dicts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">input_schemas</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">ValueSchema</span><span class="p">(</span><span class="o">**</span><span class="n">v</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">input_schemas</span>

    <span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;merged_value&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;output_type&quot;</span><span class="p">)}}</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.merge_values.ValueMergeModule.create_input_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.merge_values.ValueMergeModule.create_input_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the input schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[input_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this input]",
          "optional*': [boolean whether this input is optional or required (defaults to 'False')]
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/merge_values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="n">input_schema_dicts</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;input_schemas&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">input_schema_dicts</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No input schemas provided.&quot;</span><span class="p">)</span>

    <span class="n">input_schemas</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">input_schema_dicts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">input_schemas</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">ValueSchema</span><span class="p">(</span><span class="o">**</span><span class="n">v</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">input_schemas</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.merge_values.ValueMergeModule.create_output_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.merge_values.ValueMergeModule.create_output_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the output schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[output_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this output]"
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/merge_values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;merged_value&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;output_type&quot;</span><span class="p">)}}</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.merge_values.ValueMergeModuleConfig" class="doc doc-heading">
        <code>
ValueMergeModuleConfig            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleTypeConfigSchema" href="../module_config/#kiara.module_config.ModuleTypeConfigSchema">ModuleTypeConfigSchema</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.operations.merge_values.ValueMergeModuleConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/operations/merge_values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueMergeModuleConfig</span><span class="p">(</span><span class="n">ModuleTypeConfigSchema</span><span class="p">):</span>

    <span class="n">input_schemas</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The schemas for all of the expected inputs.&quot;</span>
    <span class="p">)</span>
    <span class="n">output_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The result type of the merged value.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.merge_values.ValueMergeModuleConfig.input_schemas" class="doc doc-heading">
<code class="highlight language-python"><span class="n">input_schemas</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.operations.merge_values.ValueMergeModuleConfig.input_schemas" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The schemas for all of the expected inputs.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.merge_values.ValueMergeModuleConfig.output_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">output_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.operations.merge_values.ValueMergeModuleConfig.output_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The result type of the merged value.</p>
    </div>

  </div>











  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.operations.pretty_print" class="doc doc-heading">
        <code>pretty_print</code>



<a href="#kiara.operations.pretty_print" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.pretty_print.PrettyPrintModuleConfig" class="doc doc-heading">
        <code>
PrettyPrintModuleConfig            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleTypeConfigSchema" href="../module_config/#kiara.module_config.ModuleTypeConfigSchema">ModuleTypeConfigSchema</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.operations.pretty_print.PrettyPrintModuleConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/operations/pretty_print.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PrettyPrintModuleConfig</span><span class="p">(</span><span class="n">ModuleTypeConfigSchema</span><span class="p">):</span>

    <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The type of the value to save.&quot;</span><span class="p">)</span>
    <span class="n">target_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The target to print the value to.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;string&quot;</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.pretty_print.PrettyPrintModuleConfig.target_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">target_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.operations.pretty_print.PrettyPrintModuleConfig.target_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The target to print the value to.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.pretty_print.PrettyPrintModuleConfig.value_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.operations.pretty_print.PrettyPrintModuleConfig.value_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The type of the value to save.</p>
    </div>

  </div>











  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.pretty_print.PrettyPrintOperationType" class="doc doc-heading">
        <code>
PrettyPrintOperationType            (<span title="kiara.operations.OperationType">OperationType</span>)
        </code>



<a href="#kiara.operations.pretty_print.PrettyPrintOperationType" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>This operation type renders values of any type into human readable output for different targets (e.g. terminal, html, ...).</p>
<p>The main purpose of this operation type is to show the user as much content of the data as possible for the specific
rendering target, without giving any guarantees that all information contained in the data is shown. It may print
out the whole content (if the content is small, or the available space large enough), or
just a few bits and pieces from the start and/or end of the data, whatever makes most sense for the data itself. For example,
for large tables it might be a good idea to print out the first and last 30 rows, so users can see which columns are available,
and get a rough overview of the content itself. For network graphs it might make sense to print out some graph properties
(number of nodes, edges, available attributes, ...) on the terminal, but render the graph itself when using html as target.</p>
<p>Currently, it is only possible to implement a <code>pretty_print</code> renderer if you have access to the source code of the value
type you want to render. To add a new render method, add a new instance method to the <code>ValueType</code> class in question,
in the format:</p>
<div class="highlight"><pre><span></span><code>def pretty_print_as_&lt;TARGET_TYPE&gt;(value: Value, print_config: typing.Mapping[str, typing.Any]) -&gt; typing.Any:
   ...
   ...
</code></pre></div>
<p><em>kiara</em> will look at all available <code>ValueType</code> classes for methods that match this signature, and auto-generate
operations following this naming template: <code>&lt;SOURCE_TYPE&gt;.pretty_print_as.&lt;TARGET_TYPE&gt;</code>.</p>
<p>Currently, only the type <code>renderables</code> is implemented as target type (for printing out to the terminal). It is planned to
add output suitable for use in Jupyter notebooks in the near future.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/pretty_print.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PrettyPrintOperationType</span><span class="p">(</span><span class="n">OperationType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This operation type renders values of any type into human readable output for different targets (e.g. terminal, html, ...).</span>

<span class="sd">    The main purpose of this operation type is to show the user as much content of the data as possible for the specific</span>
<span class="sd">    rendering target, without giving any guarantees that all information contained in the data is shown. It may print</span>
<span class="sd">    out the whole content (if the content is small, or the available space large enough), or</span>
<span class="sd">    just a few bits and pieces from the start and/or end of the data, whatever makes most sense for the data itself. For example,</span>
<span class="sd">    for large tables it might be a good idea to print out the first and last 30 rows, so users can see which columns are available,</span>
<span class="sd">    and get a rough overview of the content itself. For network graphs it might make sense to print out some graph properties</span>
<span class="sd">    (number of nodes, edges, available attributes, ...) on the terminal, but render the graph itself when using html as target.</span>

<span class="sd">    Currently, it is only possible to implement a `pretty_print` renderer if you have access to the source code of the value</span>
<span class="sd">    type you want to render. To add a new render method, add a new instance method to the `ValueType` class in question,</span>
<span class="sd">    in the format:</span>

<span class="sd">    ```</span>
<span class="sd">    def pretty_print_as_&lt;TARGET_TYPE&gt;(value: Value, print_config: typing.Mapping[str, typing.Any]) -&gt; typing.Any:</span>
<span class="sd">       ...</span>
<span class="sd">       ...</span>
<span class="sd">    ```</span>

<span class="sd">    *kiara* will look at all available `ValueType` classes for methods that match this signature, and auto-generate</span>
<span class="sd">    operations following this naming template: `&lt;SOURCE_TYPE&gt;.pretty_print_as.&lt;TARGET_TYPE&gt;`.</span>

<span class="sd">    Currently, only the type `renderables` is implemented as target type (for printing out to the terminal). It is planned to</span>
<span class="sd">    add output suitable for use in Jupyter notebooks in the near future.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">is_matching_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op_config</span><span class="p">:</span> <span class="n">Operation</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="k">return</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">op_config</span><span class="o">.</span><span class="n">module_cls</span><span class="p">,</span> <span class="n">PrettyPrintValueModule</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_pretty_print_operation</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">target_type</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Operation</span><span class="p">:</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">op_config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;value_type&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">value_type</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;target_type&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">target_type</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">op_config</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No pretty print operation for value type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; and output &#39;</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&#39; registered.&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Multiple pretty print operations for value type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; and output &#39;</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&#39; registered.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">pretty_print</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span>
        <span class="n">target_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">print_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="n">ops_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pretty_print_operation</span><span class="p">(</span>
            <span class="n">value_type</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">type_name</span><span class="p">,</span> <span class="n">target_type</span><span class="o">=</span><span class="n">target_type</span>
        <span class="p">)</span>
        <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">value</span><span class="o">.</span><span class="n">type_name</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span>
            <span class="s2">&quot;print_config&quot;</span><span class="p">:</span> <span class="n">print_config</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">ops_config</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>
        <span class="n">printed</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(</span><span class="s2">&quot;printed&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">printed</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">














  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.pretty_print.PrettyPrintValueModule" class="doc doc-heading">
        <code>
PrettyPrintValueModule            (<a class="autorefs autorefs-internal" title="kiara.module.KiaraModule" href="../module/#kiara.module.KiaraModule">KiaraModule</a>)
        </code>



<a href="#kiara.operations.pretty_print.PrettyPrintValueModule" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/operations/pretty_print.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PrettyPrintValueModule</span><span class="p">(</span><span class="n">KiaraModule</span><span class="p">):</span>

    <span class="n">_config_cls</span> <span class="o">=</span> <span class="n">PrettyPrintModuleConfig</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="n">Kiara</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

        <span class="n">all_metadata_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">value_type_name</span><span class="p">,</span> <span class="n">value_type_cls</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">value_type_cls</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;pretty_print_as_&quot;</span><span class="p">):</span>
                    <span class="k">continue</span>

                <span class="n">target_type</span> <span class="o">=</span> <span class="n">attr</span><span class="p">[</span><span class="mi">16</span><span class="p">:]</span>
                <span class="k">if</span> <span class="n">target_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
                    <span class="n">log_message</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Pretty print target type &#39;</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&#39; for source type &#39;</span><span class="si">{</span><span class="n">value_type_name</span><span class="si">}</span><span class="s2">&#39; not valid, ignoring.&quot;</span>
                    <span class="p">)</span>
                    <span class="k">continue</span>

                <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                    <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;value_type&quot;</span><span class="p">:</span> <span class="n">value_type_name</span><span class="p">,</span>
                        <span class="s2">&quot;target_type&quot;</span><span class="p">:</span> <span class="n">target_type</span><span class="p">,</span>
                    <span class="p">},</span>
                    <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Pretty print a value of type &#39;</span><span class="si">{</span><span class="n">value_type_name</span><span class="si">}</span><span class="s2">&#39; as &#39;</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
                <span class="p">}</span>
                <span class="n">all_metadata_profiles</span><span class="p">[</span>
                    <span class="sa">f</span><span class="s2">&quot;pretty_print.</span><span class="si">{</span><span class="n">value_type_name</span><span class="si">}</span><span class="s2">.as.</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

        <span class="k">return</span> <span class="n">all_metadata_profiles</span>

    <span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="n">value_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
            <span class="n">input_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="s2">&quot;A value of any type.&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">input_name</span> <span class="o">=</span> <span class="n">value_type</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;A value of type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>

        <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">input_name</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">value_type</span><span class="p">,</span> <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">},</span>
            <span class="s2">&quot;print_config&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dict&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;Optional print configuration.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;optional&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">inputs</span>

    <span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="n">outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;printed&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;target_type&quot;</span><span class="p">),</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;The printed value as &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s1">&#39;target_type&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">outputs</span>

    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">)</span>
        <span class="n">target_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;target_type&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
            <span class="n">input_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">input_name</span> <span class="o">=</span> <span class="n">value_type</span>

        <span class="n">value_obj</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">input_name</span><span class="p">)</span>
        <span class="n">print_config</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">DEFAULT_PRETTY_PRINT_CONFIG</span><span class="p">)</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(</span><span class="s2">&quot;print_config&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">config</span><span class="p">:</span>
            <span class="n">print_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

        <span class="n">func_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;pretty_print_as_</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">value_obj</span><span class="o">.</span><span class="n">type_obj</span><span class="p">,</span> <span class="n">func_name</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; can&#39;t be pretty printed as &#39;</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&#39;. This is most likely a bug.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
            <span class="n">printed</span> <span class="o">=</span> <span class="s2">&quot;-- not set --&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">value_obj</span><span class="o">.</span><span class="n">type_obj</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
            <span class="c1"># TODO: check signature</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">printed</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value_obj</span><span class="p">,</span> <span class="n">print_config</span><span class="o">=</span><span class="n">print_config</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                    <span class="kn">import</span> <span class="nn">traceback</span>

                    <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                <span class="k">raise</span> <span class="n">KiaraProcessingException</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

        <span class="n">outputs</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="s2">&quot;printed&quot;</span><span class="p">,</span> <span class="n">printed</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.pretty_print.PrettyPrintValueModule.create_input_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.pretty_print.PrettyPrintValueModule.create_input_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the input schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[input_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this input]",
          "optional*': [boolean whether this input is optional or required (defaults to 'False')]
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/pretty_print.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="n">value_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
        <span class="n">input_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="s2">&quot;A value of any type.&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">input_name</span> <span class="o">=</span> <span class="n">value_type</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;A value of type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>

    <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">input_name</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">value_type</span><span class="p">,</span> <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">},</span>
        <span class="s2">&quot;print_config&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dict&quot;</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;Optional print configuration.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;optional&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">inputs</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.pretty_print.PrettyPrintValueModule.create_output_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.pretty_print.PrettyPrintValueModule.create_output_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the output schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[output_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this output]"
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/pretty_print.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="n">outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;printed&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;target_type&quot;</span><span class="p">),</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;The printed value as &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s1">&#39;target_type&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">outputs</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.pretty_print.PrettyPrintValueModule.retrieve_module_profiles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">retrieve_module_profiles</span><span class="p">(</span><span class="n">kiara</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.operations.pretty_print.PrettyPrintValueModule.retrieve_module_profiles" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Retrieve a collection of profiles (pre-set module configs) for this <em>kiara</em> module type.</p>
<p>This is used to automatically create generally useful operations (incl. their ids).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/pretty_print.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="n">Kiara</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

    <span class="n">all_metadata_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">value_type_name</span><span class="p">,</span> <span class="n">value_type_cls</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">value_type_cls</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;pretty_print_as_&quot;</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="n">target_type</span> <span class="o">=</span> <span class="n">attr</span><span class="p">[</span><span class="mi">16</span><span class="p">:]</span>
            <span class="k">if</span> <span class="n">target_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
                <span class="n">log_message</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Pretty print target type &#39;</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&#39; for source type &#39;</span><span class="si">{</span><span class="n">value_type_name</span><span class="si">}</span><span class="s2">&#39; not valid, ignoring.&quot;</span>
                <span class="p">)</span>
                <span class="k">continue</span>

            <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;value_type&quot;</span><span class="p">:</span> <span class="n">value_type_name</span><span class="p">,</span>
                    <span class="s2">&quot;target_type&quot;</span><span class="p">:</span> <span class="n">target_type</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Pretty print a value of type &#39;</span><span class="si">{</span><span class="n">value_type_name</span><span class="si">}</span><span class="s2">&#39; as &#39;</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">all_metadata_profiles</span><span class="p">[</span>
                <span class="sa">f</span><span class="s2">&quot;pretty_print.</span><span class="si">{</span><span class="n">value_type_name</span><span class="si">}</span><span class="s2">.as.</span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

    <span class="k">return</span> <span class="n">all_metadata_profiles</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.operations.sample" class="doc doc-heading">
        <code>sample</code>



<a href="#kiara.operations.sample" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.sample.SampleValueModule" class="doc doc-heading">
        <code>
SampleValueModule            (<a class="autorefs autorefs-internal" title="kiara.module.KiaraModule" href="../module/#kiara.module.KiaraModule">KiaraModule</a>)
        </code>



<a href="#kiara.operations.sample.SampleValueModule" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Base class for operations that take samples of data.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/sample.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SampleValueModule</span><span class="p">(</span><span class="n">KiaraModule</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for operations that take samples of data.&quot;&quot;&quot;</span>

    <span class="n">_config_cls</span> <span class="o">=</span> <span class="n">SampleValueModuleConfig</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_value_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the value type for this sample module.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="n">Kiara</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

        <span class="n">all_metadata_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_value_type</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">value_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
            <span class="n">log_message</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Ignoring sample operation for source type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;: type not available&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">sample_type</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_supported_sample_types</span><span class="p">():</span>

            <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;sample_type&quot;</span><span class="p">:</span> <span class="n">sample_type</span><span class="p">},</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Sample value of type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; using method: </span><span class="si">{</span><span class="n">sample_type</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sample.</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">sample_type</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">all_metadata_profiles</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicate profile key: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">all_metadata_profiles</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

        <span class="k">return</span> <span class="n">all_metadata_profiles</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_supported_sample_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="n">types</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="k">if</span> <span class="n">attr_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;sample_&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">callable</span><span class="p">(</span><span class="n">attr</span><span class="p">):</span>
                <span class="n">sample_type</span> <span class="o">=</span> <span class="n">attr_name</span><span class="p">[</span><span class="mi">7</span><span class="p">:]</span>
                <span class="k">if</span> <span class="n">sample_type</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Error in sample module &#39;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;: multiple sample methods for type &#39;</span><span class="si">{</span><span class="n">sample_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
                    <span class="p">)</span>
                <span class="n">types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample_type</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">types</span>

    <span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="n">input_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_type</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">input_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
            <span class="n">input_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="n">input_name</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_type</span><span class="p">(),</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The value to sample.&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;sample_size&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The sample size.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;sampled_value&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_type</span><span class="p">(),</span> <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The sampled value&quot;</span><span class="p">}</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">sample_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(</span><span class="s2">&quot;sample_size&quot;</span><span class="p">)</span>
        <span class="n">sample_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;sample_type&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">sample_size</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KiaraProcessingException</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid sample size &#39;</span><span class="si">{</span><span class="n">sample_size</span><span class="si">}</span><span class="s2">&#39;: can&#39;t be negative.&quot;</span>
            <span class="p">)</span>

        <span class="n">input_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_type</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">input_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
            <span class="n">input_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">input_name</span><span class="p">)</span>

        <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;sample_</span><span class="si">{</span><span class="n">sample_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">sample_size</span><span class="o">=</span><span class="n">sample_size</span><span class="p">)</span>

        <span class="n">outputs</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="s2">&quot;sampled_value&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.sample.SampleValueModule.create_input_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.sample.SampleValueModule.create_input_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the input schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[input_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this input]",
          "optional*': [boolean whether this input is optional or required (defaults to 'False')]
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/sample.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="n">input_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_type</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">input_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
        <span class="n">input_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="n">input_name</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_type</span><span class="p">(),</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The value to sample.&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;sample_size&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The sample size.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.sample.SampleValueModule.create_output_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.sample.SampleValueModule.create_output_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the output schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[output_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this output]"
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/sample.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;sampled_value&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_type</span><span class="p">(),</span> <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The sampled value&quot;</span><span class="p">}</span>
    <span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.sample.SampleValueModule.get_value_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_value_type</span><span class="p">()</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.operations.sample.SampleValueModule.get_value_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return the value type for this sample module.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/sample.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span> <span class="nf">get_value_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return the value type for this sample module.&quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.sample.SampleValueModule.retrieve_module_profiles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">retrieve_module_profiles</span><span class="p">(</span><span class="n">kiara</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.operations.sample.SampleValueModule.retrieve_module_profiles" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Retrieve a collection of profiles (pre-set module configs) for this <em>kiara</em> module type.</p>
<p>This is used to automatically create generally useful operations (incl. their ids).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/sample.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="n">Kiara</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

    <span class="n">all_metadata_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_value_type</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">value_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
        <span class="n">log_message</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Ignoring sample operation for source type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;: type not available&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">sample_type</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_supported_sample_types</span><span class="p">():</span>

        <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;sample_type&quot;</span><span class="p">:</span> <span class="n">sample_type</span><span class="p">},</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Sample value of type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; using method: </span><span class="si">{</span><span class="n">sample_type</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sample.</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">sample_type</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">all_metadata_profiles</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicate profile key: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">all_metadata_profiles</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

    <span class="k">return</span> <span class="n">all_metadata_profiles</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.sample.SampleValueModuleConfig" class="doc doc-heading">
        <code>
SampleValueModuleConfig            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleTypeConfigSchema" href="../module_config/#kiara.module_config.ModuleTypeConfigSchema">ModuleTypeConfigSchema</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.operations.sample.SampleValueModuleConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/operations/sample.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SampleValueModuleConfig</span><span class="p">(</span><span class="n">ModuleTypeConfigSchema</span><span class="p">):</span>

    <span class="n">sample_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The sample method.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.sample.SampleValueModuleConfig.sample_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sample_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.operations.sample.SampleValueModuleConfig.sample_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The sample method.</p>
    </div>

  </div>











  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.sample.SampleValueOperationType" class="doc doc-heading">
        <code>
SampleValueOperationType            (<span title="kiara.operations.OperationType">OperationType</span>)
        </code>



<a href="#kiara.operations.sample.SampleValueOperationType" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Operation type for sampling data of different types.</p>
<p>This is useful to reduce the size of some datasets in previews and test-runs, while adjusting parameters and the like. Operations of this
type can implement very simple or complex ways to take samples of the data they are fed. The most important ones are
sampling operations relating to tables and arrays, but it might also make sense to sample texts, image-sets and so on.</p>
<p>Operations of this type take the value to be sampled as input, as well as a sample size (integer), which can be, for example,
a number of rows, or percentage of the whole dataset, depending on sample type.</p>
<p>Modules that implement sampling should inherit from <a href="https://dharpa.org/kiara/latest/api_reference/kiara.operations.sample/#kiara.operations.sample.SampleValueModule">SampleValueModule</a>, and will
get auto-registered with operation ids following this template: <code>&lt;VALUE_TYPE&gt;.sample.&lt;SAMPLE_TYPE_NAME&gt;</code>, where <code>SAMPLE_TYPE_NAME</code> is a descriptive name
what will be sampled, or how sampling will be done.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/sample.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SampleValueOperationType</span><span class="p">(</span><span class="n">OperationType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Operation type for sampling data of different types.</span>

<span class="sd">    This is useful to reduce the size of some datasets in previews and test-runs, while adjusting parameters and the like. Operations of this</span>
<span class="sd">    type can implement very simple or complex ways to take samples of the data they are fed. The most important ones are</span>
<span class="sd">    sampling operations relating to tables and arrays, but it might also make sense to sample texts, image-sets and so on.</span>

<span class="sd">    Operations of this type take the value to be sampled as input, as well as a sample size (integer), which can be, for example,</span>
<span class="sd">    a number of rows, or percentage of the whole dataset, depending on sample type.</span>

<span class="sd">    Modules that implement sampling should inherit from [SampleValueModule](https://dharpa.org/kiara/latest/api_reference/kiara.operations.sample/#kiara.operations.sample.SampleValueModule), and will</span>
<span class="sd">    get auto-registered with operation ids following this template: `&lt;VALUE_TYPE&gt;.sample.&lt;SAMPLE_TYPE_NAME&gt;`, where `SAMPLE_TYPE_NAME` is a descriptive name</span>
<span class="sd">    what will be sampled, or how sampling will be done.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">is_matching_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op_config</span><span class="p">:</span> <span class="n">Operation</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="k">return</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">op_config</span><span class="o">.</span><span class="n">module_cls</span><span class="p">,</span> <span class="n">SampleValueModule</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_operations_for_value_type</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Find all operations that serialize the specified type.</span>

<span class="sd">        The result dict uses the serialization type as key, and the operation itself as value.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">o_id</span><span class="p">,</span> <span class="n">op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">sample_op_module_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">SampleValueModule</span><span class="p">]</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module_cls</span>  <span class="c1"># type: ignore</span>
            <span class="n">source_type</span> <span class="o">=</span> <span class="n">sample_op_module_cls</span><span class="o">.</span><span class="n">get_value_type</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">source_type</span> <span class="o">==</span> <span class="n">value_type</span><span class="p">:</span>
                <span class="n">target_type</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;sample_type&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">target_type</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Multiple operations to sample &#39;</span><span class="si">{</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&#39; using </span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                <span class="n">result</span><span class="p">[</span><span class="n">target_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">op</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.sample.SampleValueOperationType.get_operations_for_value_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_operations_for_value_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">)</span></code>


<a href="#kiara.operations.sample.SampleValueOperationType.get_operations_for_value_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Find all operations that serialize the specified type.</p>
<p>The result dict uses the serialization type as key, and the operation itself as value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/sample.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_operations_for_value_type</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Find all operations that serialize the specified type.</span>

<span class="sd">    The result dict uses the serialization type as key, and the operation itself as value.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">o_id</span><span class="p">,</span> <span class="n">op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">sample_op_module_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">SampleValueModule</span><span class="p">]</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module_cls</span>  <span class="c1"># type: ignore</span>
        <span class="n">source_type</span> <span class="o">=</span> <span class="n">sample_op_module_cls</span><span class="o">.</span><span class="n">get_value_type</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">source_type</span> <span class="o">==</span> <span class="n">value_type</span><span class="p">:</span>
            <span class="n">target_type</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;sample_type&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">target_type</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Multiple operations to sample &#39;</span><span class="si">{</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&#39; using </span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">target_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">op</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.operations.serialize" class="doc doc-heading">
        <code>serialize</code>



<a href="#kiara.operations.serialize" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.serialize.SerializeValueModule" class="doc doc-heading">
        <code>
SerializeValueModule            (<a class="autorefs autorefs-internal" title="kiara.module.KiaraModule" href="../module/#kiara.module.KiaraModule">KiaraModule</a>)
        </code>



<a href="#kiara.operations.serialize.SerializeValueModule" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Base class for 'serialize' operations.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/serialize.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SerializeValueModule</span><span class="p">(</span><span class="n">KiaraModule</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for &#39;serialize&#39; operations.&quot;&quot;&quot;</span>

    <span class="n">_config_cls</span> <span class="o">=</span> <span class="n">SerializeValueModuleConfig</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

        <span class="n">all_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_value_type</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">value_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
            <span class="n">log_message</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Ignoring serialization operation for source type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;: type not available&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">serialization_type</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_supported_serialization_types</span><span class="p">():</span>

            <span class="n">mod_conf</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;value_type&quot;</span><span class="p">:</span> <span class="n">value_type</span><span class="p">,</span>
                <span class="s2">&quot;serialization_type&quot;</span><span class="p">:</span> <span class="n">serialization_type</span><span class="p">,</span>
            <span class="p">}</span>

            <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="n">mod_conf</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Serialize value of type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; to &#39;</span><span class="si">{</span><span class="n">serialization_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;serialize.</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">.as.</span><span class="si">{</span><span class="n">serialization_type</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">all_profiles</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicate profile key: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">all_profiles</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

        <span class="k">return</span> <span class="n">all_profiles</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_value_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_supported_serialization_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="n">serialize_types</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="k">if</span> <span class="n">attr_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;to_&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">callable</span><span class="p">(</span><span class="n">attr</span><span class="p">):</span>
                <span class="n">serialize_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">attr_name</span><span class="p">[</span><span class="mi">3</span><span class="p">:])</span>

        <span class="k">return</span> <span class="n">serialize_types</span>

    <span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">)</span>
        <span class="c1"># serialization_type: str = self.get_config_value(&quot;serialization_type&quot;)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;value_item&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">value_type</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;The &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; value to be serialized.&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;value_info&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;value_info&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;Information about the (original) serialized value (can be used to re-constitute the value, incl. its original id).&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;deserialize_config&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;deserialize_config&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;The config to use to deserialize the value of type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">)</span>

        <span class="n">value_obj</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="s2">&quot;value_item&quot;</span><span class="p">)</span>

        <span class="n">serialization_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;serialization_type&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">value_type</span> <span class="o">!=</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">type_name</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KiaraProcessingException</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid type (</span><span class="si">{</span><span class="n">value_obj</span><span class="o">.</span><span class="n">type_name</span><span class="si">}</span><span class="s2">) of source value: expected &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;to_</span><span class="si">{</span><span class="n">serialization_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">):</span>
            <span class="c1"># this can never happen, I think</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Module &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_module_type_id</span><span class="si">}</span><span class="s2">&#39; can&#39;t serialize &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; to &#39;</span><span class="si">{</span><span class="n">serialization_type</span><span class="si">}</span><span class="s2">&#39;: missing method &#39;to_</span><span class="si">{</span><span class="n">serialization_type</span><span class="si">}</span><span class="s2">&#39;. This is a bug.&quot;</span>  <span class="c1"># type: ignore</span>
            <span class="p">)</span>

        <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;to_</span><span class="si">{</span><span class="n">serialization_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">serialized</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">value_obj</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">serialized</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="n">serialized</span> <span class="o">=</span> <span class="n">DeserializeConfig</span><span class="p">(</span><span class="o">**</span><span class="n">serialized</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">serialized</span><span class="p">,</span> <span class="n">DeserializeConfig</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">KiaraProcessingException</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid serialization result type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">serialized</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">outputs</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span>
            <span class="n">deserialize_config</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">value_info</span><span class="o">=</span><span class="n">value_obj</span><span class="o">.</span><span class="n">get_info</span><span class="p">()</span>
        <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.serialize.SerializeValueModule.create_input_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.serialize.SerializeValueModule.create_input_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the input schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[input_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this input]",
          "optional*': [boolean whether this input is optional or required (defaults to 'False')]
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/serialize.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">)</span>
    <span class="c1"># serialization_type: str = self.get_config_value(&quot;serialization_type&quot;)</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;value_item&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">value_type</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;The &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; value to be serialized.&quot;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.serialize.SerializeValueModule.create_output_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.serialize.SerializeValueModule.create_output_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the output schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[output_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this output]"
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/serialize.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;value_info&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;value_info&quot;</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;Information about the (original) serialized value (can be used to re-constitute the value, incl. its original id).&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;deserialize_config&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;deserialize_config&quot;</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;The config to use to deserialize the value of type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>






  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.serialize.SerializeValueModule.retrieve_module_profiles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">retrieve_module_profiles</span><span class="p">(</span><span class="n">kiara</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.operations.serialize.SerializeValueModule.retrieve_module_profiles" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Retrieve a collection of profiles (pre-set module configs) for this <em>kiara</em> module type.</p>
<p>This is used to automatically create generally useful operations (incl. their ids).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/serialize.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

    <span class="n">all_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_value_type</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">value_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
        <span class="n">log_message</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Ignoring serialization operation for source type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;: type not available&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">serialization_type</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_supported_serialization_types</span><span class="p">():</span>

        <span class="n">mod_conf</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;value_type&quot;</span><span class="p">:</span> <span class="n">value_type</span><span class="p">,</span>
            <span class="s2">&quot;serialization_type&quot;</span><span class="p">:</span> <span class="n">serialization_type</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="n">mod_conf</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Serialize value of type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; to &#39;</span><span class="si">{</span><span class="n">serialization_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;serialize.</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">.as.</span><span class="si">{</span><span class="n">serialization_type</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">all_profiles</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicate profile key: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">all_profiles</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

    <span class="k">return</span> <span class="n">all_profiles</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.serialize.SerializeValueModuleConfig" class="doc doc-heading">
        <code>
SerializeValueModuleConfig            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleTypeConfigSchema" href="../module_config/#kiara.module_config.ModuleTypeConfigSchema">ModuleTypeConfigSchema</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.operations.serialize.SerializeValueModuleConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/operations/serialize.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SerializeValueModuleConfig</span><span class="p">(</span><span class="n">ModuleTypeConfigSchema</span><span class="p">):</span>

    <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The type of the source value.&quot;</span><span class="p">)</span>
    <span class="n">serialization_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The type of the converted value.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.serialize.SerializeValueModuleConfig.serialization_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">serialization_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.operations.serialize.SerializeValueModuleConfig.serialization_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The type of the converted value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.serialize.SerializeValueModuleConfig.value_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.operations.serialize.SerializeValueModuleConfig.value_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The type of the source value.</p>
    </div>

  </div>











  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.serialize.SerializeValueOperationType" class="doc doc-heading">
        <code>
SerializeValueOperationType            (<span title="kiara.operations.OperationType">OperationType</span>)
        </code>



<a href="#kiara.operations.serialize.SerializeValueOperationType" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Operations that serialize data into formats that can be used for data exchange.</p>
<p>NOT USED YET</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/serialize.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SerializeValueOperationType</span><span class="p">(</span><span class="n">OperationType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Operations that serialize data into formats that can be used for data exchange.</span>

<span class="sd">    NOT USED YET</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">is_matching_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op_config</span><span class="p">:</span> <span class="n">Operation</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="k">return</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">op_config</span><span class="o">.</span><span class="n">module_cls</span><span class="p">,</span> <span class="n">SerializeValueModule</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_operations_for_value_type</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Find all operations that serialize the specified type.</span>

<span class="sd">        The result dict uses the serialization type as key, and the operation itself as value.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">o_id</span><span class="p">,</span> <span class="n">op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">source_type</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;value_type&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">source_type</span> <span class="o">==</span> <span class="n">value_type</span><span class="p">:</span>
                <span class="n">target_type</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;serialization_type&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">target_type</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Multiple operations to serialize &#39;</span><span class="si">{</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&#39; to </span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                <span class="n">result</span><span class="p">[</span><span class="n">target_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">op</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.serialize.SerializeValueOperationType.get_operations_for_value_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_operations_for_value_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">)</span></code>


<a href="#kiara.operations.serialize.SerializeValueOperationType.get_operations_for_value_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Find all operations that serialize the specified type.</p>
<p>The result dict uses the serialization type as key, and the operation itself as value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/serialize.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_operations_for_value_type</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Find all operations that serialize the specified type.</span>

<span class="sd">    The result dict uses the serialization type as key, and the operation itself as value.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Operation</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">o_id</span><span class="p">,</span> <span class="n">op</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">source_type</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;value_type&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">source_type</span> <span class="o">==</span> <span class="n">value_type</span><span class="p">:</span>
            <span class="n">target_type</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;serialization_type&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">target_type</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Multiple operations to serialize &#39;</span><span class="si">{</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&#39; to </span><span class="si">{</span><span class="n">target_type</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">target_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">op</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.operations.store_value" class="doc doc-heading">
        <code>store_value</code>



<a href="#kiara.operations.store_value" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.store_value.StoreOperationType" class="doc doc-heading">
        <code>
StoreOperationType            (<span title="kiara.operations.OperationType">OperationType</span>)
        </code>



<a href="#kiara.operations.store_value.StoreOperationType" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Store a value into a local data store.</p>
<p>This is a special operation type, that is used internally by the [LocalDataStore](http://dharpa.org/kiara/latest/api_reference/kiara.data.registry.store/#kiara.data.registry.store.LocalDataStore] data registry implementation.</p>
<p>For each value type that should be supported by the persistent <em>kiara</em> data store, there must be an implementation of the <a href="http://dharpa.org/kiara/latest/api_reference/kiara.operations.store_value/#kiara.operations.store_value.StoreValueTypeModule">StoreValueTypeModule</a> class, which handles the
actual persisting on disk. In most cases, end users won't need to interact with this type of operation.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/store_value.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StoreOperationType</span><span class="p">(</span><span class="n">OperationType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Store a value into a local data store.</span>

<span class="sd">    This is a special operation type, that is used internally by the [LocalDataStore](http://dharpa.org/kiara/latest/api_reference/kiara.data.registry.store/#kiara.data.registry.store.LocalDataStore] data registry implementation.</span>

<span class="sd">    For each value type that should be supported by the persistent *kiara* data store, there must be an implementation of the [StoreValueTypeModule](http://dharpa.org/kiara/latest/api_reference/kiara.operations.store_value/#kiara.operations.store_value.StoreValueTypeModule) class, which handles the</span>
<span class="sd">    actual persisting on disk. In most cases, end users won&#39;t need to interact with this type of operation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">is_matching_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op_config</span><span class="p">:</span> <span class="n">Operation</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="k">return</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">op_config</span><span class="o">.</span><span class="n">module_cls</span><span class="p">,</span> <span class="n">StoreValueTypeModule</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_store_operation_for_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Operation</span><span class="p">:</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">op_config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">op_config</span><span class="o">.</span><span class="n">module_config</span><span class="p">[</span><span class="s2">&quot;value_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">value_type</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">op_config</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No &#39;store_value&#39; operation for type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; registered.&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">pass</span>

            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Multiple &#39;store_value&#39; operations for type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; registered.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">













  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.store_value.StoreValueModuleConfig" class="doc doc-heading">
        <code>
StoreValueModuleConfig            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleTypeConfigSchema" href="../module_config/#kiara.module_config.ModuleTypeConfigSchema">ModuleTypeConfigSchema</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.operations.store_value.StoreValueModuleConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/operations/store_value.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StoreValueModuleConfig</span><span class="p">(</span><span class="n">ModuleTypeConfigSchema</span><span class="p">):</span>

    <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The type of the value to save.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.operations.store_value.StoreValueModuleConfig.value_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.operations.store_value.StoreValueModuleConfig.value_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The type of the value to save.</p>
    </div>

  </div>











  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.operations.store_value.StoreValueTypeModule" class="doc doc-heading">
        <code>
StoreValueTypeModule            (<a class="autorefs autorefs-internal" title="kiara.module.KiaraModule" href="../module/#kiara.module.KiaraModule">KiaraModule</a>)
        </code>



<a href="#kiara.operations.store_value.StoreValueTypeModule" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Store a specific value type.</p>
<p>This is used internally.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/store_value.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StoreValueTypeModule</span><span class="p">(</span><span class="n">KiaraModule</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Store a specific value type.</span>

<span class="sd">    This is used internally.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_config_cls</span> <span class="o">=</span> <span class="n">StoreValueModuleConfig</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_supported_value_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">_types</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">retrieve_supported_types</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_types</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">_types</span> <span class="o">=</span> <span class="p">[</span><span class="n">_types</span><span class="p">]</span>

        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">_types</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">retrieve_supported_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
        <span class="k">pass</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="n">Kiara</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

        <span class="n">all_metadata_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">all_types_and_subtypes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">sup_type</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_supported_value_types</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">sup_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
                <span class="n">log_message</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Ignoring save operation for type &#39;</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">&#39;: type not available&quot;</span>
                <span class="p">)</span>
                <span class="k">continue</span>

            <span class="n">all_types_and_subtypes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sup_type</span><span class="p">)</span>
            <span class="n">sub_types</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">get_sub_types</span><span class="p">(</span><span class="n">sup_type</span><span class="p">)</span>
            <span class="n">all_types_and_subtypes</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">sub_types</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">sup_type</span> <span class="ow">in</span> <span class="n">all_types_and_subtypes</span><span class="p">:</span>

            <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value_type&quot;</span><span class="p">:</span> <span class="n">sup_type</span><span class="p">},</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Store a value of type &#39;</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">all_metadata_profiles</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;store.</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

        <span class="k">return</span> <span class="n">all_metadata_profiles</span>

    <span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="n">field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
            <span class="n">field_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>

        <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;value_id&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The id to use when saving the value.&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">field_name</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">),</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;A value of type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s1">&#39;value_type&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;base_path&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The base path to save the value to.&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">inputs</span>

    <span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]:</span>

        <span class="n">field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
            <span class="n">field_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>

        <span class="n">outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">field_name</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">),</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The original or cloned (if applicable) value that was saved.&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;load_config&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;load_config&quot;</span><span class="p">,</span>
                <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The configuration to use with kiara to load the saved value.&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">outputs</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">store_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span> <span class="n">base_path</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
        <span class="n">typing</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
        <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
    <span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Save the value, and return the load config needed to load it again.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(</span><span class="s2">&quot;value_id&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value_id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KiaraProcessingException</span><span class="p">(</span><span class="s2">&quot;No value id provided.&quot;</span><span class="p">)</span>

        <span class="n">field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
            <span class="n">field_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>

        <span class="n">value_obj</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
        <span class="n">base_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(</span><span class="s2">&quot;base_path&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store_value</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value_obj</span><span class="p">,</span> <span class="n">base_path</span><span class="o">=</span><span class="n">base_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="n">load_config</span> <span class="o">=</span> <span class="n">result</span>
            <span class="n">result_value</span> <span class="o">=</span> <span class="n">value_obj</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">load_config</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">result_value</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result_value</span> <span class="o">=</span> <span class="n">value_obj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KiaraProcessingException</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid result type for &#39;store_value&#39; method in class &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;. This is a bug.&quot;</span>
            <span class="p">)</span>

        <span class="n">load_config</span><span class="p">[</span><span class="s2">&quot;value_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_id</span>

        <span class="n">lc</span> <span class="o">=</span> <span class="n">LoadConfig</span><span class="p">(</span><span class="o">**</span><span class="n">load_config</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">lc</span><span class="o">.</span><span class="n">base_path_input_name</span> <span class="ow">and</span> <span class="n">lc</span><span class="o">.</span><span class="n">base_path_input_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">lc</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">KiaraProcessingException</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid load config: base path &#39;</span><span class="si">{</span><span class="n">lc</span><span class="o">.</span><span class="n">base_path_input_name</span><span class="si">}</span><span class="s2">&#39; not part of inputs.&quot;</span>
            <span class="p">)</span>

        <span class="n">outputs</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span>
            <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s2">&quot;load_config&quot;</span><span class="p">:</span> <span class="n">lc</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="n">result_value</span><span class="p">}</span>
        <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.store_value.StoreValueTypeModule.create_input_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.store_value.StoreValueTypeModule.create_input_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the input schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[input_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this input]",
          "optional*': [boolean whether this input is optional or required (defaults to 'False')]
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/store_value.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="n">field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>

    <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;value_id&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The id to use when saving the value.&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">field_name</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">),</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;A value of type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s1">&#39;value_type&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;base_path&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The base path to save the value to.&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">inputs</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.store_value.StoreValueTypeModule.create_output_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.operations.store_value.StoreValueTypeModule.create_output_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the output schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[output_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this output]"
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/store_value.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
    <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ValueSchema</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
<span class="p">]:</span>

    <span class="n">field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>

    <span class="n">outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">field_name</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;value_type&quot;</span><span class="p">),</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The original or cloned (if applicable) value that was saved.&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;load_config&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;load_config&quot;</span><span class="p">,</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="s2">&quot;The configuration to use with kiara to load the saved value.&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">outputs</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.store_value.StoreValueTypeModule.retrieve_module_profiles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">retrieve_module_profiles</span><span class="p">(</span><span class="n">kiara</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.operations.store_value.StoreValueTypeModule.retrieve_module_profiles" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Retrieve a collection of profiles (pre-set module configs) for this <em>kiara</em> module type.</p>
<p>This is used to automatically create generally useful operations (incl. their ids).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/store_value.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">retrieve_module_profiles</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="n">Kiara</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">Operation</span><span class="p">]]:</span>

    <span class="n">all_metadata_profiles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">all_types_and_subtypes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">sup_type</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_supported_value_types</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">sup_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
            <span class="n">log_message</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Ignoring save operation for type &#39;</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">&#39;: type not available&quot;</span>
            <span class="p">)</span>
            <span class="k">continue</span>

        <span class="n">all_types_and_subtypes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sup_type</span><span class="p">)</span>
        <span class="n">sub_types</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">type_mgmt</span><span class="o">.</span><span class="n">get_sub_types</span><span class="p">(</span><span class="n">sup_type</span><span class="p">)</span>
        <span class="n">all_types_and_subtypes</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">sub_types</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">sup_type</span> <span class="ow">in</span> <span class="n">all_types_and_subtypes</span><span class="p">:</span>

        <span class="n">op_config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value_type&quot;</span><span class="p">:</span> <span class="n">sup_type</span><span class="p">},</span>
            <span class="s2">&quot;doc&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Store a value of type &#39;</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">all_metadata_profiles</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;store.</span><span class="si">{</span><span class="n">sup_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">op_config</span>

    <span class="k">return</span> <span class="n">all_metadata_profiles</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.operations.store_value.StoreValueTypeModule.store_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">store_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">base_path</span><span class="p">)</span></code>


<a href="#kiara.operations.store_value.StoreValueTypeModule.store_value" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Save the value, and return the load config needed to load it again.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/operations/store_value.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span> <span class="nf">store_value</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span> <span class="n">base_path</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
    <span class="n">typing</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
    <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
<span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Save the value, and return the load config needed to load it again.&quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.pipeline" class="doc doc-heading">
        <code>pipeline</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.PipelineValueInfo" class="doc doc-heading">
        <code>
PipelineValueInfo            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValueInfo" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Convenience wrapper to make the [PipelineState][kiara.pipeline.pipeline.PipelineState] json/dict export prettier.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineValueInfo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convenience wrapper to make the [PipelineState][kiara.pipeline.pipeline.PipelineState] json/dict export prettier.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_value_obj</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span> <span class="n">ensure_metadata</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">ensure_metadata</span><span class="p">:</span>
            <span class="n">value</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">PipelineValueInfo</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">value_schema</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">value_schema</span><span class="p">,</span>
            <span class="n">is_valid</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">(),</span>
            <span class="n">is_set</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">is_set</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">item_status</span><span class="p">(),</span>
            <span class="c1"># value_metadata=value.value_metadata,</span>
            <span class="c1"># last_update=value.last_update,</span>
            <span class="c1"># value_hash=value.value_hash,</span>
            <span class="c1"># is_streaming=value.is_streaming,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>
        <span class="n">allow_mutation</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;A unique id for this value.&quot;</span><span class="p">)</span>
    <span class="n">is_valid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the value is set and valid.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
    <span class="n">status</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The value status string&quot;</span><span class="p">)</span>
    <span class="n">is_set</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the value is set.&quot;</span><span class="p">)</span>
    <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The schema of this value.&quot;</span><span class="p">)</span>
    <span class="c1"># is_constant: bool = Field(</span>
    <span class="c1">#     description=&quot;Whether this value is a constant.&quot;, default=False</span>
    <span class="c1"># )</span>
    <span class="c1"># value_metadata: ValueMetadata = Field(</span>
    <span class="c1">#     description=&quot;The metadata of the value itself (not the actual data).&quot;</span>
    <span class="c1"># )</span>
    <span class="c1"># last_update: datetime = Field(</span>
    <span class="c1">#     default=None, description=&quot;The time the last update to this value happened.&quot;</span>
    <span class="c1"># )</span>
    <span class="c1"># value_hash: typing.Union[ValueHashMarker, int] = Field(</span>
    <span class="c1">#     description=&quot;The hash of the current value.&quot;</span>
    <span class="c1"># )</span>
    <span class="c1"># is_streaming: bool = Field(</span>
    <span class="c1">#     default=False,</span>
    <span class="c1">#     description=&quot;Whether the value is currently streamed into this object.&quot;,</span>
    <span class="c1"># )</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Metadata relating to the actual data (size, no. of rows, etc. -- depending on data type).&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.PipelineValueInfo.id" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValueInfo.id" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A unique id for this value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.PipelineValueInfo.is_set" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_set</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValueInfo.is_set" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Whether the value is set.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.PipelineValueInfo.is_valid" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_valid</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValueInfo.is_valid" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Whether the value is set and valid.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.PipelineValueInfo.metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValueInfo.metadata" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Metadata relating to the actual data (size, no. of rows, etc. -- depending on data type).</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.PipelineValueInfo.status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">status</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValueInfo.status" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The value status string</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.PipelineValueInfo.value_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValueInfo.value_schema" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The schema of this value.</p>
    </div>

  </div>












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.PipelineValuesInfo" class="doc doc-heading">
        <code>
PipelineValuesInfo            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValuesInfo" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Convenience wrapper to make the [PipelineState][kiara.pipeline.pipeline.PipelineState] json/dict export prettier.</p>
<p>This is basically just a simplified version of the [ValueSet][kiara.data.values.ValueSet] class that is using
pydantic, in order to make it easy to export to json.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineValuesInfo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convenience wrapper to make the [PipelineState][kiara.pipeline.pipeline.PipelineState] json/dict export prettier.</span>

<span class="sd">    This is basically just a simplified version of the [ValueSet][kiara.data.values.ValueSet] class that is using</span>
<span class="sd">    pydantic, in order to make it easy to export to json.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_value_set</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value_set</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">ensure_metadata</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>

        <span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineValueInfo</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">value_set</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">():</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">value_set</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">ensure_metadata</span><span class="o">=</span><span class="n">ensure_metadata</span><span class="p">)</span>
            <span class="n">values</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">PipelineValueInfo</span><span class="o">.</span><span class="n">from_value_obj</span><span class="p">(</span>
                <span class="n">v</span><span class="p">,</span> <span class="n">ensure_metadata</span><span class="o">=</span><span class="n">ensure_metadata</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">PipelineValuesInfo</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">)</span>

    <span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineValueInfo</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Field names are keys, and the data as values.&quot;</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">use_enum_values</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.PipelineValuesInfo.values" class="doc doc-heading">
<code class="highlight language-python"><span class="n">values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">PipelineValueInfo</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValuesInfo.values" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Field names are keys, and the data as values.</p>
    </div>

  </div>












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.StepStatus" class="doc doc-heading">
        <code>
StepStatus            (<span title="enum.Enum">Enum</span>)
        </code>



<a href="#kiara.pipeline.StepStatus" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Enum to describe the state of a workflow.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StepStatus</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Enum to describe the state of a workflow.&quot;&quot;&quot;</span>

    <span class="n">STALE</span> <span class="o">=</span> <span class="s2">&quot;stale&quot;</span>
    <span class="n">INPUTS_READY</span> <span class="o">=</span> <span class="s2">&quot;inputs_ready&quot;</span>
    <span class="n">RESULTS_INCOMING</span> <span class="o">=</span> <span class="s2">&quot;processing&quot;</span>
    <span class="n">RESULTS_READY</span> <span class="o">=</span> <span class="s2">&quot;results_ready&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.StepValueAddress" class="doc doc-heading">
        <code>
StepValueAddress            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Small model to describe the address of a value of a step, within a Pipeline/PipelineStructure.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StepValueAddress</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Small model to describe the address of a value of a step, within a Pipeline/PipelineStructure.&quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>

    <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The id of a step within a pipeline.&quot;</span><span class="p">)</span>
    <span class="n">value_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name of the value (output name or pipeline input name).&quot;</span>
    <span class="p">)</span>
    <span class="n">sub_value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A reference to a subitem of a value (e.g. column, list item)&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">alias</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An alias string for this address (in the form ``[step_id].[value_name]``).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">generate_step_alias</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StepValueAddress</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_value</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span>
            <span class="n">other</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span>
            <span class="n">other</span><span class="o">.</span><span class="n">value_name</span><span class="p">,</span>
            <span class="n">other</span><span class="o">.</span><span class="n">sub_value</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_value</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_value</span><span class="p">:</span>
            <span class="n">sub_value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; sub_value=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sub_value</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sub_value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;StepValueAddres(step_id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">, value_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="si">}{</span><span class="n">sub_value</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.StepValueAddress.alias" class="doc doc-heading">
<code class="highlight language-python"><span class="n">alias</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress.alias" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>An alias string for this address (in the form <code>[step_id].[value_name]</code>).</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.StepValueAddress.step_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress.step_id" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The id of a step within a pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.StepValueAddress.sub_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sub_value</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress.sub_value" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A reference to a subitem of a value (e.g. column, list item)</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.StepValueAddress.value_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress.value_name" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The name of the value (output name or pipeline input name).</p>
    </div>

  </div>








  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.StepValueAddress.__eq__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress.__eq__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return self==value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StepValueAddress</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_value</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span>
        <span class="n">other</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span>
        <span class="n">other</span><span class="o">.</span><span class="n">value_name</span><span class="p">,</span>
        <span class="n">other</span><span class="o">.</span><span class="n">sub_value</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.StepValueAddress.__hash__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress.__hash__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return hash(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_value</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.StepValueAddress.__repr__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress.__repr__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return repr(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_value</span><span class="p">:</span>
        <span class="n">sub_value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; sub_value=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sub_value</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sub_value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;StepValueAddres(step_id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">, value_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="si">}{</span><span class="n">sub_value</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.StepValueAddress.__str__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress.__str__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return str(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h3 id="kiara.pipeline.config" class="doc doc-heading">
        <code>config</code>



<a href="#kiara.pipeline.config" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="kiara.pipeline.config.PipelineConfig" class="doc doc-heading">
        <code>
PipelineConfig            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleTypeConfigSchema" href="../module_config/#kiara.module_config.ModuleTypeConfigSchema">ModuleTypeConfigSchema</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A class to hold the configuration for a <a class="autorefs autorefs-internal" href="../pipeline/module/#kiara.pipeline.module.PipelineModule">PipelineModule</a>.</p>
<p>If you want to control the pipeline input and output names, you need to have to provide a map that uses the
autogenerated field name ([step_id]__[field_name] -- 2 underscores!!) as key, and the desired field name
as value. The reason that schema for the autogenerated field names exist is that it's hard to ensure
the uniqueness of each field; some steps can have the same input field names, but will need different input
values. In some cases, some inputs of different steps need the same input. Those sorts of things.
So, to make sure that we always use the right values, I chose to implement a conservative default approach,
accepting that in some cases the user will be prompted for duplicate inputs for the same value.</p>
<p>To remedy that, the pipeline creator has the option to manually specify a mapping to rename some or all of
the input/output fields.</p>
<p>Further, because in a lot of cases there won't be any overlapping fields, the creator can specify <code>auto</code>,
in which case <em>Kiara</em> will automatically create a mapping that tries to map autogenerated field names
to the shortest possible names for each case.</p>

<p><strong>Examples:</strong></p>
    <p>Configuration for a pipeline module that functions as a <code>nand</code> logic gate (in Python):</p>
<div class="highlight"><pre><span></span><code><span class="n">and_step</span> <span class="o">=</span> <span class="n">PipelineStepConfig</span><span class="p">(</span><span class="n">module_type</span><span class="o">=</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="n">step_id</span><span class="o">=</span><span class="s2">&quot;and&quot;</span><span class="p">)</span>
<span class="n">not_step</span> <span class="o">=</span> <span class="n">PipelineStepConfig</span><span class="p">(</span><span class="n">module_type</span><span class="o">=</span><span class="s2">&quot;not&quot;</span><span class="p">,</span> <span class="n">step_id</span><span class="o">=</span><span class="s2">&quot;not&quot;</span><span class="p">,</span> <span class="n">input_links</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;and.y&quot;</span><span class="p">]}</span>
<span class="n">nand_p_conf</span> <span class="o">=</span> <span class="n">PipelineConfig</span><span class="p">(</span><span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Returns &#39;False&#39; if both inputs are &#39;True&#39;.&quot;</span><span class="p">,</span>
                    <span class="n">steps</span><span class="o">=</span><span class="p">[</span><span class="n">and_step</span><span class="p">,</span> <span class="n">not_step</span><span class="p">],</span>
                    <span class="n">input_aliases</span><span class="o">=</span><span class="p">{</span>
                        <span class="s2">&quot;and__a&quot;</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;and__b&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span>
                    <span class="p">},</span>
                    <span class="n">output_aliases</span><span class="o">=</span><span class="p">{</span>
                        <span class="s2">&quot;not__y&quot;</span><span class="p">:</span> <span class="s2">&quot;y&quot;</span>
                    <span class="p">}}</span>
</code></pre></div>
<p>Or, the same thing in json:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;module_type_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nand&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;doc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Returns &#39;False&#39; if both inputs are &#39;True&#39;.&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;steps&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;and&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;step_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;and&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;not&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;step_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;not&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;input_links&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;and.y&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;input_aliases&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;and__a&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;and__b&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;output_aliases&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;not__y&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;y&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineConfig</span><span class="p">(</span><span class="n">ModuleTypeConfigSchema</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A class to hold the configuration for a [PipelineModule][kiara.pipeline.module.PipelineModule].</span>

<span class="sd">    If you want to control the pipeline input and output names, you need to have to provide a map that uses the</span>
<span class="sd">    autogenerated field name ([step_id]__[field_name] -- 2 underscores!!) as key, and the desired field name</span>
<span class="sd">    as value. The reason that schema for the autogenerated field names exist is that it&#39;s hard to ensure</span>
<span class="sd">    the uniqueness of each field; some steps can have the same input field names, but will need different input</span>
<span class="sd">    values. In some cases, some inputs of different steps need the same input. Those sorts of things.</span>
<span class="sd">    So, to make sure that we always use the right values, I chose to implement a conservative default approach,</span>
<span class="sd">    accepting that in some cases the user will be prompted for duplicate inputs for the same value.</span>

<span class="sd">    To remedy that, the pipeline creator has the option to manually specify a mapping to rename some or all of</span>
<span class="sd">    the input/output fields.</span>

<span class="sd">    Further, because in a lot of cases there won&#39;t be any overlapping fields, the creator can specify ``auto``,</span>
<span class="sd">    in which case *Kiara* will automatically create a mapping that tries to map autogenerated field names</span>
<span class="sd">    to the shortest possible names for each case.</span>

<span class="sd">    Examples:</span>

<span class="sd">        Configuration for a pipeline module that functions as a ``nand`` logic gate (in Python):</span>

<span class="sd">        ``` python</span>
<span class="sd">        and_step = PipelineStepConfig(module_type=&quot;and&quot;, step_id=&quot;and&quot;)</span>
<span class="sd">        not_step = PipelineStepConfig(module_type=&quot;not&quot;, step_id=&quot;not&quot;, input_links={&quot;a&quot;: [&quot;and.y&quot;]}</span>
<span class="sd">        nand_p_conf = PipelineConfig(doc=&quot;Returns &#39;False&#39; if both inputs are &#39;True&#39;.&quot;,</span>
<span class="sd">                            steps=[and_step, not_step],</span>
<span class="sd">                            input_aliases={</span>
<span class="sd">                                &quot;and__a&quot;: &quot;a&quot;,</span>
<span class="sd">                                &quot;and__b&quot;: &quot;b&quot;</span>
<span class="sd">                            },</span>
<span class="sd">                            output_aliases={</span>
<span class="sd">                                &quot;not__y&quot;: &quot;y&quot;</span>
<span class="sd">                            }}</span>
<span class="sd">        ```</span>

<span class="sd">        Or, the same thing in json:</span>

<span class="sd">        ``` json</span>
<span class="sd">        {</span>
<span class="sd">          &quot;module_type_name&quot;: &quot;nand&quot;,</span>
<span class="sd">          &quot;doc&quot;: &quot;Returns &#39;False&#39; if both inputs are &#39;True&#39;.&quot;,</span>
<span class="sd">          &quot;steps&quot;: [</span>
<span class="sd">            {</span>
<span class="sd">              &quot;module_type&quot;: &quot;and&quot;,</span>
<span class="sd">              &quot;step_id&quot;: &quot;and&quot;</span>
<span class="sd">            },</span>
<span class="sd">            {</span>
<span class="sd">              &quot;module_type&quot;: &quot;not&quot;,</span>
<span class="sd">              &quot;step_id&quot;: &quot;not&quot;,</span>
<span class="sd">              &quot;input_links&quot;: {</span>
<span class="sd">                &quot;a&quot;: &quot;and.y&quot;</span>
<span class="sd">              }</span>
<span class="sd">            }</span>
<span class="sd">          ],</span>
<span class="sd">          &quot;input_aliases&quot;: {</span>
<span class="sd">            &quot;and__a&quot;: &quot;a&quot;,</span>
<span class="sd">            &quot;and__b&quot;: &quot;b&quot;</span>
<span class="sd">          },</span>
<span class="sd">          &quot;output_aliases&quot;: {</span>
<span class="sd">            &quot;not__y&quot;: &quot;y&quot;</span>
<span class="sd">          }</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># @classmethod</span>
    <span class="c1"># def from_file(cls, path: typing.Union[str, Path]):</span>
    <span class="c1">#</span>
    <span class="c1">#     content = get_data_from_file(path)</span>
    <span class="c1">#     return PipelineConfig(**content)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_pipeline_config</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ModuleConfig</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineConfig&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Create a PipelineModule instance.</span>

<span class="sd">        The main &#39;config&#39; argument here can be either:</span>

<span class="sd">          - a string: in which case it needs to be (in that order):</span>
<span class="sd">            - a module id</span>
<span class="sd">            - an operation id</span>
<span class="sd">            - a path to a local file</span>
<span class="sd">          - a [ModuleConfig][kiara.module_config.ModuleConfig] object</span>
<span class="sd">          - a dict (to create a `ModuleInstsanceConfig` from</span>


<span class="sd">        Arguments:</span>
<span class="sd">            kiara: the kiara context</span>
<span class="sd">            config: the &#39;main&#39; config object</span>
<span class="sd">            module_config: in case the &#39;main&#39; config object was a module id, this argument is used to instantiate the module</span>
<span class="sd">            kiara: the kiara context (will use default context instance if not provided)</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara.kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="n">module_config_obj</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="o">.</span><span class="n">create_module_config</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">module_config_obj</span><span class="o">.</span><span class="n">module_type</span> <span class="o">==</span> <span class="s2">&quot;pipeline&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Not a valid pipeline configuration: </span><span class="si">{</span><span class="n">config</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># TODO: this is a bit round-about, to create a module config first, but it probably doesn&#39;t matter</span>
        <span class="n">pipeline_config_data</span> <span class="o">=</span> <span class="n">module_config_obj</span><span class="o">.</span><span class="n">module_config</span>

        <span class="n">module</span><span class="p">:</span> <span class="n">PipelineConfig</span> <span class="o">=</span> <span class="n">PipelineConfig</span><span class="p">(</span><span class="o">**</span><span class="n">pipeline_config_data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">module</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">allow</span>
        <span class="n">validate_assignment</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">steps</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">PipelineStepConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A list of steps/modules of this pipeline, and their connections.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">input_aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A map of input aliases, with the calculated (&lt;step_id&gt;__&lt;input_name&gt; -- double underscore!) name as key, and a string (the resulting workflow input alias) as value. Check the documentation for the config class for which marker strings can be used to automatically create this map if possible.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">output_aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A map of output aliases, with the calculated (&lt;step_id&gt;__&lt;output_name&gt; -- double underscore!) name as key, and a string (the resulting workflow output alias) as value.  Check the documentation for the config class for which marker strings can be used to automatically create this map if possible.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">documentation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;-- n/a --&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Documentation about what the pipeline does.&quot;</span>
    <span class="p">)</span>

    <span class="n">context</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Metadata for this workflow.&quot;</span>
    <span class="p">)</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;steps&quot;</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_validate_steps</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>

        <span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="n">PipelineStepConfig</span><span class="p">):</span>
                <span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
                <span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">PipelineStepConfig</span><span class="p">(</span><span class="o">**</span><span class="n">step</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">steps</span>

    <span class="k">def</span> <span class="nf">create_pipeline_structure</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineStructure&quot;</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">kiara</span> <span class="kn">import</span> <span class="n">Kiara</span><span class="p">,</span> <span class="n">PipelineStructure</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="n">ps</span> <span class="o">=</span> <span class="n">PipelineStructure</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">ps</span>

    <span class="k">def</span> <span class="nf">create_pipeline</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">controller</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;PipelineController&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="c1"># if parent_id is None:</span>
        <span class="c1">#     parent_id = DEFAULT_PIPELINE_PARENT_ID</span>
        <span class="n">structure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_pipeline_structure</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>

        <span class="kn">from</span> <span class="nn">kiara</span> <span class="kn">import</span> <span class="n">Pipeline</span>

        <span class="n">pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span>
            <span class="n">structure</span><span class="o">=</span><span class="n">structure</span><span class="p">,</span>
            <span class="n">controller</span><span class="o">=</span><span class="n">controller</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">pipeline</span>

    <span class="k">def</span> <span class="nf">create_pipeline_module</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">module_id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parent_id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineModule&quot;</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara.kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="kn">from</span> <span class="nn">kiara.pipeline.module</span> <span class="kn">import</span> <span class="n">PipelineModule</span>

        <span class="n">module</span> <span class="o">=</span> <span class="n">PipelineModule</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">module_id</span><span class="p">,</span>
            <span class="n">parent_id</span><span class="o">=</span><span class="n">parent_id</span><span class="p">,</span>
            <span class="n">module_config</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">module</span>

    <span class="c1"># def __rich_console__(</span>
    <span class="c1">#     self, console: Console, options: ConsoleOptions</span>
    <span class="c1"># ) -&gt; RenderResult:</span>
    <span class="c1">#</span>
    <span class="c1">#     table = Table(show_header=False, box=box.SIMPLE)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.config.PipelineConfig.context" class="doc doc-heading">
<code class="highlight language-python"><span class="n">context</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineConfig.context" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Metadata for this workflow.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.config.PipelineConfig.documentation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">documentation</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineConfig.documentation" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Documentation about what the pipeline does.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.config.PipelineConfig.input_aliases" class="doc doc-heading">
<code class="highlight language-python"><span class="n">input_aliases</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineConfig.input_aliases" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A map of input aliases, with the calculated (<step_id>__<input_name> -- double underscore!) name as key, and a string (the resulting workflow input alias) as value. Check the documentation for the config class for which marker strings can be used to automatically create this map if possible.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.config.PipelineConfig.output_aliases" class="doc doc-heading">
<code class="highlight language-python"><span class="n">output_aliases</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineConfig.output_aliases" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A map of output aliases, with the calculated (<step_id>__<output_name> -- double underscore!) name as key, and a string (the resulting workflow output alias) as value.  Check the documentation for the config class for which marker strings can be used to automatically create this map if possible.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.config.PipelineConfig.steps" class="doc doc-heading">
<code class="highlight language-python"><span class="n">steps</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">PipelineStepConfig</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineConfig.steps" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A list of steps/modules of this pipeline, and their connections.</p>
    </div>

  </div>











  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.config.PipelineConfig.create_pipeline_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_pipeline_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineConfig.create_pipeline_config" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Create a PipelineModule instance.</p>
<p>The main 'config' argument here can be either:</p>
<ul>
<li>a string: in which case it needs to be (in that order):<ul>
<li>a module id</li>
<li>an operation id</li>
<li>a path to a local file</li>
</ul>
</li>
<li>a <a class="autorefs autorefs-internal" href="../module_config/#kiara.module_config.ModuleConfig">ModuleConfig</a> object</li>
<li>a dict (to create a <code>ModuleInstsanceConfig</code> from</li>
</ul>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>kiara</code></td>
        <td><code>Optional[Kiara]</code></td>
        <td><p>the kiara context</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>config</code></td>
        <td><code>Union[kiara.module_config.ModuleConfig, Mapping[str, Any], str]</code></td>
        <td><p>the 'main' config object</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>module_config</code></td>
        <td><code>Optional[Mapping[str, Any]]</code></td>
        <td><p>in case the 'main' config object was a module id, this argument is used to instantiate the module</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>kiara</code></td>
        <td><code>Optional[Kiara]</code></td>
        <td><p>the kiara context (will use default context instance if not provided)</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">create_pipeline_config</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ModuleConfig</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineConfig&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Create a PipelineModule instance.</span>

<span class="sd">    The main &#39;config&#39; argument here can be either:</span>

<span class="sd">      - a string: in which case it needs to be (in that order):</span>
<span class="sd">        - a module id</span>
<span class="sd">        - an operation id</span>
<span class="sd">        - a path to a local file</span>
<span class="sd">      - a [ModuleConfig][kiara.module_config.ModuleConfig] object</span>
<span class="sd">      - a dict (to create a `ModuleInstsanceConfig` from</span>


<span class="sd">    Arguments:</span>
<span class="sd">        kiara: the kiara context</span>
<span class="sd">        config: the &#39;main&#39; config object</span>
<span class="sd">        module_config: in case the &#39;main&#39; config object was a module id, this argument is used to instantiate the module</span>
<span class="sd">        kiara: the kiara context (will use default context instance if not provided)</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">kiara.kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

        <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

    <span class="n">module_config_obj</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="o">.</span><span class="n">create_module_config</span><span class="p">(</span>
        <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">module_config_obj</span><span class="o">.</span><span class="n">module_type</span> <span class="o">==</span> <span class="s2">&quot;pipeline&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Not a valid pipeline configuration: </span><span class="si">{</span><span class="n">config</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># TODO: this is a bit round-about, to create a module config first, but it probably doesn&#39;t matter</span>
    <span class="n">pipeline_config_data</span> <span class="o">=</span> <span class="n">module_config_obj</span><span class="o">.</span><span class="n">module_config</span>

    <span class="n">module</span><span class="p">:</span> <span class="n">PipelineConfig</span> <span class="o">=</span> <span class="n">PipelineConfig</span><span class="p">(</span><span class="o">**</span><span class="n">pipeline_config_data</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">module</span>
</code></pre></div>
        </details>
    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.pipeline.config.PipelineStepConfig" class="doc doc-heading">
        <code>
PipelineStepConfig            (<a class="autorefs autorefs-internal" title="kiara.module_config.ModuleConfig" href="../module_config/#kiara.module_config.ModuleConfig">ModuleConfig</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineStepConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A class to hold the configuration of one module within a <a class="autorefs autorefs-internal" href="../pipeline/module/#kiara.pipeline.module.PipelineModule">PipelineModule</a>.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineStepConfig</span><span class="p">(</span><span class="n">ModuleConfig</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A class to hold the configuration of one module within a [PipelineModule][kiara.pipeline.module.PipelineModule].&quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>
        <span class="n">validate_assignment</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The id of the step.&quot;</span><span class="p">)</span>
    <span class="n">input_links</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">StepValueAddress</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The map with the name of an input link as key, and the connected module output name(s) as value.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@root_validator</span><span class="p">(</span><span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">create_step_id</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>

        <span class="k">if</span> <span class="s2">&quot;module_type&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No &#39;module_type&#39; specified.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;step_id&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">values</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;step_id&quot;</span><span class="p">]:</span>
            <span class="n">values</span><span class="p">[</span><span class="s2">&quot;step_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">slugify</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;module_type&quot;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">values</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;step_id&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">ensure_valid_id</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>

        <span class="c1"># TODO: check with regex</span>
        <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">v</span> <span class="ow">or</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Step id can&#39;t contain special characters or whitespaces: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">v</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;module_config&quot;</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">ensure_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="n">v</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;input_links&quot;</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">ensure_input_links_valid</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">input_name</span><span class="p">,</span> <span class="n">output</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">input_links</span> <span class="o">=</span> <span class="n">ensure_step_value_addresses</span><span class="p">(</span>
                <span class="n">default_field_name</span><span class="o">=</span><span class="n">input_name</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">output</span>
            <span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">input_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">input_links</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.config.PipelineStepConfig.input_links" class="doc doc-heading">
<code class="highlight language-python"><span class="n">input_links</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">StepValueAddress</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineStepConfig.input_links" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The map with the name of an input link as key, and the connected module output name(s) as value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.config.PipelineStepConfig.step_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineStepConfig.step_id" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The id of the step.</p>
    </div>

  </div>















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.pipeline.config.StepDesc" class="doc doc-heading">
        <code>
StepDesc            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.config.StepDesc" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Details of a single <a class="autorefs autorefs-internal" href="../pipeline/structure/#kiara.pipeline.structure.PipelineStep">PipelineStep</a> (which lives within a <a class="autorefs autorefs-internal" href="../pipeline/pipeline/#kiara.pipeline.pipeline.Pipeline">Pipeline</a></p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StepDesc</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Details of a single [PipelineStep][kiara.pipeline.structure.PipelineStep] (which lives within a [Pipeline][kiara.pipeline.pipeline.Pipeline]&quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">allow_mutation</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>

    <span class="n">step</span><span class="p">:</span> <span class="n">PipelineStep</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Attributes of the step itself.&quot;</span><span class="p">)</span>
    <span class="n">processing_stage</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The processing stage of this step within a Pipeline.&quot;</span>
    <span class="p">)</span>
    <span class="n">input_connections</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;A map that explains what elements connect to this steps inputs. A connection could either be a Pipeline input (indicated by the ``__pipeline__`` token), or another steps output.</span>

<span class="s2">Example:</span>
<span class="s2">``` json</span>
<span class="s2">input_connections: {</span>
<span class="s2">    &quot;a&quot;: [&quot;__pipeline__.a&quot;],</span>
<span class="s2">    &quot;b&quot;: [&quot;step_one.a&quot;]</span>
<span class="s2">}</span>

<span class="s2">```</span>
<span class="s2">        &quot;&quot;&quot;</span>
    <span class="p">)</span>
    <span class="n">output_connections</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A map that explains what elemnts connect to this steps outputs. A connection could be either a Pipeline output, or another steps input.&quot;</span>
    <span class="p">)</span>
    <span class="n">required</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether this step is always required, or potentially could be skipped in case some inputs are not available.&quot;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="k">yield</span> <span class="sa">f</span><span class="s2">&quot;[b]Step: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">[</span><span class="se">\b</span><span class="s2">]&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.config.StepDesc.input_connections" class="doc doc-heading">
<code class="highlight language-python"><span class="n">input_connections</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.config.StepDesc.input_connections" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A map that explains what elements connect to this steps inputs. A connection could either be a Pipeline input (indicated by the <code>__pipeline__</code> token), or another steps output.</p>

<p><strong>Examples:</strong></p>
    
      <div class="highlight"><pre><span></span><code><span class="err">i</span><span class="kc">n</span><span class="err">pu</span><span class="kc">t</span><span class="err">_co</span><span class="kc">nne</span><span class="err">c</span><span class="kc">t</span><span class="err">io</span><span class="kc">ns</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;__pipeline__.a&quot;</span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;b&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;step_one.a&quot;</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.config.StepDesc.output_connections" class="doc doc-heading">
<code class="highlight language-python"><span class="n">output_connections</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.config.StepDesc.output_connections" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A map that explains what elemnts connect to this steps outputs. A connection could be either a Pipeline output, or another steps input.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.config.StepDesc.processing_stage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">processing_stage</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.config.StepDesc.processing_stage" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The processing stage of this step within a Pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.config.StepDesc.required" class="doc doc-heading">
<code class="highlight language-python"><span class="n">required</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.config.StepDesc.required" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Whether this step is always required, or potentially could be skipped in case some inputs are not available.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.config.StepDesc.step" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step</span><span class="p">:</span> <span class="n">PipelineStep</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.config.StepDesc.step" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Attributes of the step itself.</p>
    </div>

  </div>












  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.pipeline.controller" class="doc doc-heading">
        <code>controller</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.controller" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="kiara.pipeline.controller.PipelineController" class="doc doc-heading">
        <code>
PipelineController            (<a class="autorefs autorefs-internal" title="kiara.pipeline.listeners.PipelineListener" href="../pipeline/listeners/#kiara.pipeline.listeners.PipelineListener">PipelineListener</a>)
        </code>



<a href="#kiara.pipeline.controller.PipelineController" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>An object that controls how a <a class="autorefs autorefs-internal" href="../pipeline/pipeline/#kiara.pipeline.pipeline.Pipeline">Pipeline</a> should react to events related to it's inputs/outputs.</p>
<p>This is the base for the central controller class that needs to be implemented by a <em>Kiara</em> frontend. The default implementation
that is used if no <code>PipelineController</code> is provided in a <a class="autorefs autorefs-internal" href="../pipeline/pipeline/#kiara.pipeline.pipeline.Pipeline">Pipeline</a> constructor
is the [BatchController][kiara.pipeline.controller.BatchController], which basically waits until all required inputs are
set, and then processes all pipeline steps in one go (in the right order).</p>
<p>The pipeline object to control can be set either in the constructor, or via the <code>set_pipeline</code> method. But only once,
every subsequent attempt to set a pipeline will raise an Exception.</p>
<p>If you want to implement your own controller, you have to override at least one of the (empty) event hook methods:</p>
<ul>
<li>[<code>pipeline_inputs_changed</code>][kiara.pipeline.controller.PipelineController.pipeline_inputs_changed]</li>
<li>[<code>pipeline_outputs_changed</code>][kiara.pipeline.controller.PipelineController.pipeline_outputs_changed]</li>
<li>[<code>step_inputs_changed</code>][kiara.pipeline.controller.PipelineController.step_inputs_changed]</li>
<li>[<code>step_outputs_changed</code>][kiara.pipeline.controller.PipelineController.step_outputs_changed]</li>
</ul>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pipeline</code></td>
        <td><code>Pipeline</code></td>
        <td><p>the pipeline object to control</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineController</span><span class="p">(</span><span class="n">PipelineListener</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An object that controls how a [Pipeline][kiara.pipeline.pipeline.Pipeline] should react to events related to it&#39;s inputs/outputs.</span>

<span class="sd">    This is the base for the central controller class that needs to be implemented by a *Kiara* frontend. The default implementation</span>
<span class="sd">    that is used if no ``PipelineController`` is provided in a [Pipeline][kiara.pipeline.pipeline.Pipeline] constructor</span>
<span class="sd">    is the [BatchController][kiara.pipeline.controller.BatchController], which basically waits until all required inputs are</span>
<span class="sd">    set, and then processes all pipeline steps in one go (in the right order).</span>

<span class="sd">    The pipeline object to control can be set either in the constructor, or via the ``set_pipeline`` method. But only once,</span>
<span class="sd">    every subsequent attempt to set a pipeline will raise an Exception.</span>

<span class="sd">    If you want to implement your own controller, you have to override at least one of the (empty) event hook methods:</span>

<span class="sd">      - [``pipeline_inputs_changed``][kiara.pipeline.controller.PipelineController.pipeline_inputs_changed]</span>
<span class="sd">      - [``pipeline_outputs_changed``][kiara.pipeline.controller.PipelineController.pipeline_outputs_changed]</span>
<span class="sd">      - [``step_inputs_changed``][kiara.pipeline.controller.PipelineController.step_inputs_changed]</span>
<span class="sd">      - [``step_outputs_changed``][kiara.pipeline.controller.PipelineController.step_outputs_changed]</span>

<span class="sd">    Arguments:</span>
<span class="sd">        pipeline (Pipeline): the pipeline object to control</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">pipeline</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Pipeline&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">processor</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ModuleProcessor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara.kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="n">Kiara</span> <span class="o">=</span> <span class="n">kiara</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Pipeline</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">processor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara.processing.synchronous</span> <span class="kn">import</span> <span class="n">SynchronousProcessor</span>

            <span class="n">processor</span> <span class="o">=</span> <span class="n">SynchronousProcessor</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="p">:</span> <span class="n">ModuleProcessor</span> <span class="o">=</span> <span class="n">processor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_job_ids</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="sd">&quot;&quot;&quot;A map of the last or current job ids per step_id.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">pipeline</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_pipeline</span><span class="p">(</span><span class="n">pipeline</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Pipeline&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the pipeline this controller, well, ...controls...&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline not set yet.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;StepStatus&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">status</span>

    <span class="k">def</span> <span class="nf">set_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipeline</span><span class="p">:</span> <span class="s2">&quot;Pipeline&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the pipeline object for this controller.</span>

<span class="sd">        Only one pipeline can be set, once.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            pipeline: the pipeline object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already set.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span> <span class="o">=</span> <span class="n">pipeline</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">processing_stages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Return the processing stage order of the pipeline.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a list of lists of step ids</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">processing_stages</span>

    <span class="k">def</span> <span class="nf">get_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineStep</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the step object for the provided id.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            step_id: the step id</span>
<span class="sd">        Returns:</span>
<span class="sd">            the step object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_step_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the inputs object for the pipeline.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_step_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the outputs object for the pipeline.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_step_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">input_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the (current) input value for a specified step and input field name.&quot;&quot;&quot;</span>

        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">input_name</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">item</span>

    <span class="k">def</span> <span class="nf">get_step_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">output_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the (current) output value for a specified step and output field name.&quot;&quot;&quot;</span>

        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">item</span>

    <span class="k">def</span> <span class="nf">get_current_pipeline_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineState&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return a description of the current pipeline state.</span>

<span class="sd">        This methods creates a new [PipelineState][kiara.pipeline.pipeline.PipelineState] object when called, containing</span>
<span class="sd">        the pipeline structure as well as metadata about pipeline as well as step inputs and outputs.</span>

<span class="sd">        Returns:</span>
<span class="sd">            an object outlining the current pipeline state</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the inputs object for this pipeline.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">_pipeline_inputs</span>

    <span class="nd">@pipeline_inputs</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">pipeline_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Set one, several or all inputs for this pipeline.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_pipeline_inputs</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the (current) pipeline outputs object for this pipeline.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">_pipeline_outputs</span>

    <span class="k">def</span> <span class="nf">wait_for_jobs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">job_ids</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sync_outputs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">,</span> <span class="n">sync_outputs</span><span class="o">=</span><span class="n">sync_outputs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">can_be_processed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Check whether the step with the provided id is ready to be processed.&quot;&quot;&quot;</span>

        <span class="n">result</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">step_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="o">=</span><span class="n">step_id</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">input_name</span> <span class="ow">in</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">():</span>

            <span class="n">value</span> <span class="o">=</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">input_name</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">():</span>
                <span class="n">result</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">break</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">check_inputs_status</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]]:</span>
        <span class="sd">&quot;&quot;&quot;Check the status of all stages/steps, and whether they are ready to be processed.</span>

<span class="sd">        The result dictionary uses stage numbers as keys, and a secondary dictionary as values which in turn uses</span>
<span class="sd">        the step_id as key, and a dict with details (keys: &#39;ready&#39;, &#39;invalid_inputs&#39;, &#39;required&#39;) as values.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">stage</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                        <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="s2">&quot;ready&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                            <span class="s2">&quot;invalid_inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
                                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">ii</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                            <span class="p">],</span>
                        <span class="p">}</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="s2">&quot;ready&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                            <span class="s2">&quot;invalid_inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
                                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">ii</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                            <span class="p">],</span>
                            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="p">}</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                        <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="s2">&quot;ready&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="s2">&quot;invalid_inputs&quot;</span><span class="p">:</span> <span class="p">[],</span>
                        <span class="p">}</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">can_be_skipped</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Check whether the processing of a step can be skipped.&quot;&quot;&quot;</span>

        <span class="n">result</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">required</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">invalid_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="n">invalid</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">step_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="o">=</span><span class="n">step_id</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">input_name</span> <span class="ow">in</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">():</span>

            <span class="n">value</span> <span class="o">=</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">input_name</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">():</span>
                <span class="n">invalid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">invalid</span>

    <span class="k">def</span> <span class="nf">process_step</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">raise_exception</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">wait</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Kick off processing for the step with the provided id.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            step_id: the id of the step that should be started</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">step_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

        <span class="c1"># if the inputs are not valid, ignore this step</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">check_invalid</span><span class="p">()</span>
            <span class="k">assert</span> <span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t execute step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;, invalid inputs: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="c1"># get the output &#39;holder&#39; objects, which we&#39;ll need to pass to the module</span>
        <span class="n">step_outputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
        <span class="c1"># get the module object that holds the code that will do the processing</span>
        <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

        <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">start</span><span class="p">(</span>
            <span class="n">pipeline_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">pipeline_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">title</span><span class="p">,</span>
            <span class="n">step_id</span><span class="o">=</span><span class="n">step_id</span><span class="p">,</span>
            <span class="n">module</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="p">,</span>
            <span class="n">inputs</span><span class="o">=</span><span class="n">step_inputs</span><span class="p">,</span>
            <span class="n">outputs</span><span class="o">=</span><span class="n">step_outputs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_job_ids</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">job_id</span>

        <span class="k">if</span> <span class="n">wait</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_jobs</span><span class="p">(</span><span class="n">job_id</span><span class="p">,</span> <span class="n">sync_outputs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">job_id</span>

    <span class="k">def</span> <span class="nf">get_job_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_or_job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Job</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Returns job details for a job id, or in case a step_id was provided, the last execution of this step.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">step_or_job_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">get_job_details</span><span class="p">(</span><span class="n">step_or_job_id</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">get_job_details</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_job_ids</span><span class="p">[</span><span class="n">step_or_job_id</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">step_is_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return whether the step with the provided id is ready to be processed.</span>

<span class="sd">        A ``True`` result means that all input fields are currently set with valid values.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            step_id: the id of the step to check</span>

<span class="sd">        Returns:</span>
<span class="sd">            whether the step is ready (``True``) or not (``False``)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">step_is_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return whether the step with the provided id has been processed successfully.</span>

<span class="sd">        A ``True`` result means that all output fields are currently set with valid values, and the inputs haven&#39;t changed</span>
<span class="sd">        since the last time processing was done.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            step_id: the id of the step to check</span>

<span class="sd">        Returns:</span>
<span class="sd">              whether the step result is valid (``True``) or not (``False``)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">pipeline_is_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return whether the pipeline is ready to be processed.</span>

<span class="sd">        A ``True`` result means that all pipeline inputs are set with valid values, and therefore every step within the</span>
<span class="sd">        pipeline can be processed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            whether the pipeline can be processed as a whole (``True``) or not (``False``)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">pipeline_is_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return whether the pipeline has been processed successfully.</span>

<span class="sd">        A ``True`` result means that every step of the pipeline has been processed successfully, and no pipeline input</span>
<span class="sd">        has changed since that happened.</span>

<span class="sd">        Returns:</span>
<span class="sd">            whether the pipeline was processed successfully (``True``) or not (``False``)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_pipeline_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set one, several or all inputs for this pipeline.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            **inputs: the input values to set</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_input_hook</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_inputs</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="o">**</span><span class="n">_inputs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_pipeline_input_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Hook before setting input.</span>

<span class="sd">        Can be implemented by child controller classes, to prevent, transform, validate or queue inputs.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Inputs for pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39; set: </span><span class="si">{</span><span class="n">inputs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">inputs</span>

    <span class="k">def</span> <span class="nf">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Execute the connected pipeline end-to-end.</span>

<span class="sd">        Controllers can elect to overwrite this method, but this is optional.</span>

<span class="sd">        Returns:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.controller.PipelineController.pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline</span><span class="p">:</span> <span class="n">Pipeline</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.controller.PipelineController.pipeline" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return the pipeline this controller, well, ...controls...</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.controller.PipelineController.pipeline_inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_inputs</span><span class="p">:</span> <span class="n">ValueSet</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-writable"><code>writable</code></small>
  </span>

<a href="#kiara.pipeline.controller.PipelineController.pipeline_inputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return the inputs object for this pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.controller.PipelineController.pipeline_outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_outputs</span><span class="p">:</span> <span class="n">ValueSet</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.controller.PipelineController.pipeline_outputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return the (current) pipeline outputs object for this pipeline.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.controller.PipelineController.processing_stages" class="doc doc-heading">
<code class="highlight language-python"><span class="n">processing_stages</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.controller.PipelineController.processing_stages" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return the processing stage order of the pipeline.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[List[str]]</code></td>
      <td><p>a list of lists of step ids</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>







  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.can_be_processed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">can_be_processed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.can_be_processed" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Check whether the step with the provided id is ready to be processed.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">can_be_processed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Check whether the step with the provided id is ready to be processed.&quot;&quot;&quot;</span>

    <span class="n">result</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">step_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="o">=</span><span class="n">step_id</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">input_name</span> <span class="ow">in</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">():</span>

        <span class="n">value</span> <span class="o">=</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">input_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">():</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">break</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.can_be_skipped" class="doc doc-heading">
<code class="highlight language-python"><span class="n">can_be_skipped</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.can_be_skipped" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Check whether the processing of a step can be skipped.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">can_be_skipped</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Check whether the processing of a step can be skipped.&quot;&quot;&quot;</span>

    <span class="n">result</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">required</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.check_inputs_status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_inputs_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.check_inputs_status" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Check the status of all stages/steps, and whether they are ready to be processed.</p>
<p>The result dictionary uses stage numbers as keys, and a secondary dictionary as values which in turn uses
the step_id as key, and a dict with details (keys: 'ready', 'invalid_inputs', 'required') as values.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_inputs_status</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]]:</span>
    <span class="sd">&quot;&quot;&quot;Check the status of all stages/steps, and whether they are ready to be processed.</span>

<span class="sd">    The result dictionary uses stage numbers as keys, and a secondary dictionary as values which in turn uses</span>
<span class="sd">    the step_id as key, and a dict with details (keys: &#39;ready&#39;, &#39;invalid_inputs&#39;, &#39;required&#39;) as values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">stage</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;ready&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                        <span class="s2">&quot;invalid_inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">ii</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                        <span class="p">],</span>
                    <span class="p">}</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;ready&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                        <span class="s2">&quot;invalid_inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">ii</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                        <span class="p">],</span>
                        <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;ready&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s2">&quot;invalid_inputs&quot;</span><span class="p">:</span> <span class="p">[],</span>
                    <span class="p">}</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.get_current_pipeline_state" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_current_pipeline_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.get_current_pipeline_state" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return a description of the current pipeline state.</p>
<p>This methods creates a new [PipelineState][kiara.pipeline.pipeline.PipelineState] object when called, containing
the pipeline structure as well as metadata about pipeline as well as step inputs and outputs.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>PipelineState</code></td>
      <td><p>an object outlining the current pipeline state</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_current_pipeline_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineState&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return a description of the current pipeline state.</span>

<span class="sd">    This methods creates a new [PipelineState][kiara.pipeline.pipeline.PipelineState] object when called, containing</span>
<span class="sd">    the pipeline structure as well as metadata about pipeline as well as step inputs and outputs.</span>

<span class="sd">    Returns:</span>
<span class="sd">        an object outlining the current pipeline state</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.get_job_details" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_job_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_or_job_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.get_job_details" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Returns job details for a job id, or in case a step_id was provided, the last execution of this step.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_job_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_or_job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Job</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Returns job details for a job id, or in case a step_id was provided, the last execution of this step.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">step_or_job_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">get_job_details</span><span class="p">(</span><span class="n">step_or_job_id</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">get_job_details</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_job_ids</span><span class="p">[</span><span class="n">step_or_job_id</span><span class="p">])</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.get_step" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.get_step" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return the step object for the provided id.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>step_id</code></td>
        <td><code>str</code></td>
        <td><p>the step id</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>PipelineStep</code></td>
      <td><p>the step object</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineStep</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return the step object for the provided id.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        step_id: the step id</span>
<span class="sd">    Returns:</span>
<span class="sd">        the step object</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.get_step_input" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_step_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">input_name</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.get_step_input" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Get the (current) input value for a specified step and input field name.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_step_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">input_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Get the (current) input value for a specified step and input field name.&quot;&quot;&quot;</span>

    <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">input_name</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">item</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.get_step_inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_step_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.get_step_inputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return the inputs object for the pipeline.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_step_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return the inputs object for the pipeline.&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.get_step_output" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_step_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">output_name</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.get_step_output" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Get the (current) output value for a specified step and output field name.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_step_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">output_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Get the (current) output value for a specified step and output field name.&quot;&quot;&quot;</span>

    <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">item</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.get_step_outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_step_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.get_step_outputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return the outputs object for the pipeline.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_step_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return the outputs object for the pipeline.&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.pipeline_is_finished" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_is_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.pipeline_is_finished" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return whether the pipeline has been processed successfully.</p>
<p>A <code>True</code> result means that every step of the pipeline has been processed successfully, and no pipeline input
has changed since that happened.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>whether the pipeline was processed successfully (<code>True</code>) or not (<code>False</code>)</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_is_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return whether the pipeline has been processed successfully.</span>

<span class="sd">    A ``True`` result means that every step of the pipeline has been processed successfully, and no pipeline input</span>
<span class="sd">    has changed since that happened.</span>

<span class="sd">    Returns:</span>
<span class="sd">        whether the pipeline was processed successfully (``True``) or not (``False``)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.pipeline_is_ready" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_is_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.pipeline_is_ready" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return whether the pipeline is ready to be processed.</p>
<p>A <code>True</code> result means that all pipeline inputs are set with valid values, and therefore every step within the
pipeline can be processed.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>whether the pipeline can be processed as a whole (<code>True</code>) or not (<code>False</code>)</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_is_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return whether the pipeline is ready to be processed.</span>

<span class="sd">    A ``True`` result means that all pipeline inputs are set with valid values, and therefore every step within the</span>
<span class="sd">    pipeline can be processed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        whether the pipeline can be processed as a whole (``True``) or not (``False``)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.process_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.process_pipeline" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Execute the connected pipeline end-to-end.</p>
<p>Controllers can elect to overwrite this method, but this is optional.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Execute the connected pipeline end-to-end.</span>

<span class="sd">    Controllers can elect to overwrite this method, but this is optional.</span>

<span class="sd">    Returns:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.process_step" class="doc doc-heading">
<code class="highlight language-python"><span class="n">process_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">raise_exception</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.process_step" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Kick off processing for the step with the provided id.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>step_id</code></td>
        <td><code>str</code></td>
        <td><p>the id of the step that should be started</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">process_step</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">raise_exception</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">wait</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Kick off processing for the step with the provided id.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        step_id: the id of the step that should be started</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">step_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

    <span class="c1"># if the inputs are not valid, ignore this step</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">check_invalid</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Can&#39;t execute step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;, invalid inputs: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="c1"># get the output &#39;holder&#39; objects, which we&#39;ll need to pass to the module</span>
    <span class="n">step_outputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
    <span class="c1"># get the module object that holds the code that will do the processing</span>
    <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

    <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">start</span><span class="p">(</span>
        <span class="n">pipeline_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">pipeline_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">title</span><span class="p">,</span>
        <span class="n">step_id</span><span class="o">=</span><span class="n">step_id</span><span class="p">,</span>
        <span class="n">module</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="p">,</span>
        <span class="n">inputs</span><span class="o">=</span><span class="n">step_inputs</span><span class="p">,</span>
        <span class="n">outputs</span><span class="o">=</span><span class="n">step_outputs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_job_ids</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">job_id</span>

    <span class="k">if</span> <span class="n">wait</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_jobs</span><span class="p">(</span><span class="n">job_id</span><span class="p">,</span> <span class="n">sync_outputs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">job_id</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.set_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipeline</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.set_pipeline" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Set the pipeline object for this controller.</p>
<p>Only one pipeline can be set, once.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pipeline</code></td>
        <td><code>Pipeline</code></td>
        <td><p>the pipeline object</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipeline</span><span class="p">:</span> <span class="s2">&quot;Pipeline&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the pipeline object for this controller.</span>

<span class="sd">    Only one pipeline can be set, once.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        pipeline: the pipeline object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already set.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span> <span class="o">=</span> <span class="n">pipeline</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.set_pipeline_inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_pipeline_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">inputs</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.set_pipeline_inputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Set one, several or all inputs for this pipeline.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>**inputs</code></td>
        <td><code>Any</code></td>
        <td><p>the input values to set</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_pipeline_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set one, several or all inputs for this pipeline.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        **inputs: the input values to set</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_input_hook</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_inputs</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="o">**</span><span class="n">_inputs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.step_is_finished" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_is_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.step_is_finished" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return whether the step with the provided id has been processed successfully.</p>
<p>A <code>True</code> result means that all output fields are currently set with valid values, and the inputs haven't changed
since the last time processing was done.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>step_id</code></td>
        <td><code>str</code></td>
        <td><p>the id of the step to check</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>whether the step result is valid (<code>True</code>) or not (<code>False</code>)</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">step_is_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return whether the step with the provided id has been processed successfully.</span>

<span class="sd">    A ``True`` result means that all output fields are currently set with valid values, and the inputs haven&#39;t changed</span>
<span class="sd">    since the last time processing was done.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        step_id: the id of the step to check</span>

<span class="sd">    Returns:</span>
<span class="sd">          whether the step result is valid (``True``) or not (``False``)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.PipelineController.step_is_ready" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_is_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.step_is_ready" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return whether the step with the provided id is ready to be processed.</p>
<p>A <code>True</code> result means that all input fields are currently set with valid values.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>step_id</code></td>
        <td><code>str</code></td>
        <td><p>the id of the step to check</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>whether the step is ready (<code>True</code>) or not (<code>False</code>)</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">step_is_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return whether the step with the provided id is ready to be processed.</span>

<span class="sd">    A ``True`` result means that all input fields are currently set with valid values.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        step_id: the id of the step to check</span>

<span class="sd">    Returns:</span>
<span class="sd">        whether the step is ready (``True``) or not (``False``)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h4 id="kiara.pipeline.controller.batch" class="doc doc-heading">
        <code>batch</code>



<a href="#kiara.pipeline.controller.batch" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h5 id="kiara.pipeline.controller.batch.BatchController" class="doc doc-heading">
        <code>
BatchController            (<a class="autorefs autorefs-internal" title="kiara.pipeline.controller.PipelineController" href="../pipeline/controller/__init__/#kiara.pipeline.controller.PipelineController">PipelineController</a>)
        </code>



<a href="#kiara.pipeline.controller.batch.BatchController" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A <a class="autorefs autorefs-internal" href="../pipeline/controller/__init__/#kiara.pipeline.controller.PipelineController">PipelineController</a> that executes all pipeline steps non-interactively.</p>
<p>This is the default implementation of a <code>PipelineController</code>, and probably the most simple implementation of one.
It waits until all inputs are set, after which it executes all pipeline steps in the required order.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pipeline</code></td>
        <td><code>Optional[Pipeline]</code></td>
        <td><p>the pipeline to control</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>auto_process</code></td>
        <td><code>bool</code></td>
        <td><p>whether to automatically start processing the pipeline as soon as the input set is valid</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">BatchController</span><span class="p">(</span><span class="n">PipelineController</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A [PipelineController][kiara.pipeline.controller.PipelineController] that executes all pipeline steps non-interactively.</span>

<span class="sd">    This is the default implementation of a ``PipelineController``, and probably the most simple implementation of one.</span>
<span class="sd">    It waits until all inputs are set, after which it executes all pipeline steps in the required order.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        pipeline: the pipeline to control</span>
<span class="sd">        auto_process: whether to automatically start processing the pipeline as soon as the input set is valid</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">pipeline</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Pipeline&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">auto_process</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">processor</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ModuleProcessor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_process</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">auto_process</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">pipeline</span><span class="o">=</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">processor</span><span class="o">=</span><span class="n">processor</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">auto_process</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_process</span>

    <span class="nd">@auto_process</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">auto_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_process</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_process</span> <span class="o">=</span> <span class="n">auto_process</span>

    <span class="k">def</span> <span class="nf">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already running.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">:</span>
                <span class="n">job_ids</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                            <span class="k">continue</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;Required pipeline step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; can&#39;t be processed, inputs not ready yet: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span>
                            <span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                        <span class="n">job_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="c1"># TODO: cancel running jobs?</span>
                        <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                            <span class="kn">import</span> <span class="nn">traceback</span>

                            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                        <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Processing of step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; from pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39; failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                        <span class="k">return</span> <span class="kc">False</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>
                <span class="c1"># for j_id in job_ids:</span>
                <span class="c1">#     job = self._processor.get_job_details(j_id)</span>
                <span class="c1">#     assert job is not None</span>
                <span class="c1">#     if job.error:</span>
                <span class="c1">#         print(job.error)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;StepInputEvent&quot;</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_ready</span><span class="p">():</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline not ready after input event: </span><span class="si">{</span><span class="n">event</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_process</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">process_pipeline</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;PipelineOutputEvent&quot;</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_finished</span><span class="p">():</span>
            <span class="c1"># TODO: check if something is running</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">











  <div class="doc doc-object doc-method">



<h6 id="kiara.pipeline.controller.batch.BatchController.pipeline_outputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.batch.BatchController.pipeline_outputs_changed" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several pipeline outputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>PipelineOutputEvent</code></td>
        <td><p>the pipeline output event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;PipelineOutputEvent&quot;</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_finished</span><span class="p">():</span>
        <span class="c1"># TODO: check if something is running</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="kiara.pipeline.controller.batch.BatchController.process_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.batch.BatchController.process_pipeline" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Execute the connected pipeline end-to-end.</p>
<p>Controllers can elect to overwrite this method, but this is optional.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already running.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">:</span>
            <span class="n">job_ids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                        <span class="k">continue</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Required pipeline step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; can&#39;t be processed, inputs not ready yet: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                    <span class="n">job_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="c1"># TODO: cancel running jobs?</span>
                    <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                        <span class="kn">import</span> <span class="nn">traceback</span>

                        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Processing of step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; from pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39; failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>
            <span class="c1"># for j_id in job_ids:</span>
            <span class="c1">#     job = self._processor.get_job_details(j_id)</span>
            <span class="c1">#     assert job is not None</span>
            <span class="c1">#     if job.error:</span>
            <span class="c1">#         print(job.error)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="kiara.pipeline.controller.batch.BatchController.step_inputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.batch.BatchController.step_inputs_changed" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several step inputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>StepInputEvent</code></td>
        <td><p>the step input event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;StepInputEvent&quot;</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_ready</span><span class="p">():</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline not ready after input event: </span><span class="si">{</span><span class="n">event</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_process</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">process_pipeline</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="kiara.pipeline.controller.batch.BatchControllerManual" class="doc doc-heading">
        <code>
BatchControllerManual            (<a class="autorefs autorefs-internal" title="kiara.pipeline.controller.PipelineController" href="../pipeline/controller/__init__/#kiara.pipeline.controller.PipelineController">PipelineController</a>)
        </code>



<a href="#kiara.pipeline.controller.batch.BatchControllerManual" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A <a class="autorefs autorefs-internal" href="../pipeline/controller/__init__/#kiara.pipeline.controller.PipelineController">PipelineController</a> that executes all pipeline steps non-interactively.</p>
<p>This is the default implementation of a <code>PipelineController</code>, and probably the most simple implementation of one.
It waits until all inputs are set, after which it executes all pipeline steps in the required order.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pipeline</code></td>
        <td><code>Optional[Pipeline]</code></td>
        <td><p>the pipeline to control</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>auto_process</code></td>
        <td></td>
        <td><p>whether to automatically start processing the pipeline as soon as the input set is valid</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">BatchControllerManual</span><span class="p">(</span><span class="n">PipelineController</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A [PipelineController][kiara.pipeline.controller.PipelineController] that executes all pipeline steps non-interactively.</span>

<span class="sd">    This is the default implementation of a ``PipelineController``, and probably the most simple implementation of one.</span>
<span class="sd">    It waits until all inputs are set, after which it executes all pipeline steps in the required order.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        pipeline: the pipeline to control</span>
<span class="sd">        auto_process: whether to automatically start processing the pipeline as soon as the input set is valid</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">pipeline</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Pipeline&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">processor</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ModuleProcessor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_finished_until</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">pipeline</span><span class="o">=</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">processor</span><span class="o">=</span><span class="n">processor</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">last_finished_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finished_until</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finished_until</span>

    <span class="k">def</span> <span class="nf">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already running.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">:</span>
                <span class="n">job_ids</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                            <span class="k">continue</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;Required pipeline step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; can&#39;t be processed, inputs not ready yet: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span>
                            <span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                        <span class="n">job_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="c1"># TODO: cancel running jobs?</span>
                        <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                            <span class="kn">import</span> <span class="nn">traceback</span>

                            <span class="n">traceback</span><span class="o">.</span><span class="n">print_stack</span><span class="p">()</span>
                        <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Processing of step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; from pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39; failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                        <span class="k">return</span> <span class="kc">False</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;StepInputEvent&quot;</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_ready</span><span class="p">():</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline not ready after input event: </span><span class="si">{</span><span class="n">event</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span>

    <span class="k">def</span> <span class="nf">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;PipelineInputEvent&quot;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_finished_until</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># print(&quot;============================&quot;)</span>
        <span class="c1"># min_stage_to_clear = sys.maxsize</span>
        <span class="c1"># for inp in event.updated_pipeline_inputs:</span>
        <span class="c1">#     stage = self.pipeline.get_stage_for_pipeline_input(inp)</span>
        <span class="c1">#     if stage &lt; min_stage_to_clear:</span>
        <span class="c1">#         min_stage_to_clear = stage</span>
        <span class="c1">#</span>
        <span class="c1"># for stage, steps in self.pipeline.get_steps_by_stage().items():</span>
        <span class="c1">#     if stage &lt; min_stage_to_clear:</span>
        <span class="c1">#         continue</span>
        <span class="c1">#     for step_id, step in steps.items():</span>
        <span class="c1">#         step_inputs = self.get_step_inputs(step_id)</span>
        <span class="c1">#         empty = { k: None for k in step_inputs.keys() }</span>
        <span class="c1">#         step_inputs.set_values(**empty)</span>
        <span class="c1">#         step_outputs = self.get_step_outputs(step_id)</span>
        <span class="c1">#         empty = { k: None for k in step_outputs.keys() }</span>
        <span class="c1">#         step_outputs.set_values(**empty)</span>

    <span class="k">def</span> <span class="nf">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;PipelineOutputEvent&quot;</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_finished</span><span class="p">():</span>
            <span class="c1"># TODO: check if something is running</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">process_stage</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">stage_nr</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already running.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">stage</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">):</span>

                <span class="n">current_stage</span> <span class="o">=</span> <span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span>

                <span class="k">if</span> <span class="n">current_stage</span> <span class="o">&gt;</span> <span class="n">stage_nr</span><span class="p">:</span>
                    <span class="k">break</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finished_until</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">idx</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finished_until</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="n">job_ids</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                            <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">current_stage</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">continue</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">exc</span> <span class="o">=</span> <span class="ne">Exception</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;Required pipeline step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; can&#39;t be processed, inputs not ready yet: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span>
                            <span class="p">)</span>
                            <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">current_stage</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">exc</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                        <span class="n">job_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
                        <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">current_stage</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">job_id</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="c1"># TODO: cancel running jobs?</span>
                        <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                            <span class="kn">import</span> <span class="nn">traceback</span>

                            <span class="n">traceback</span><span class="o">.</span><span class="n">print_stack</span><span class="p">()</span>
                        <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Processing of step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; from pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39; failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                        <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">current_stage</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>
                <span class="c1"># for job_id in job_ids:</span>
                <span class="c1">#     job = self.get_job_details(job_id)</span>
                <span class="c1">#     dbg(job.dict())</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_finished_until</span> <span class="o">=</span> <span class="n">idx</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;BATCH FINISHED&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">











  <div class="doc doc-object doc-method">



<h6 id="kiara.pipeline.controller.batch.BatchControllerManual.pipeline_inputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.batch.BatchControllerManual.pipeline_inputs_changed" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several pipeline inputs have changed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
</div>
<p>Whenever pipeline inputs change, the connected step inputs also change and an (extra) event will be fired for those. Which means
you can choose to only implement the <code>step_inputs_changed</code> method if you want to. This behaviour might change in the future.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>PipelineInputEvent</code></td>
        <td><p>the pipeline input event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;PipelineInputEvent&quot;</span><span class="p">):</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_finished_until</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># print(&quot;============================&quot;)</span>
    <span class="c1"># min_stage_to_clear = sys.maxsize</span>
    <span class="c1"># for inp in event.updated_pipeline_inputs:</span>
    <span class="c1">#     stage = self.pipeline.get_stage_for_pipeline_input(inp)</span>
    <span class="c1">#     if stage &lt; min_stage_to_clear:</span>
    <span class="c1">#         min_stage_to_clear = stage</span>
    <span class="c1">#</span>
    <span class="c1"># for stage, steps in self.pipeline.get_steps_by_stage().items():</span>
    <span class="c1">#     if stage &lt; min_stage_to_clear:</span>
    <span class="c1">#         continue</span>
    <span class="c1">#     for step_id, step in steps.items():</span>
    <span class="c1">#         step_inputs = self.get_step_inputs(step_id)</span>
    <span class="c1">#         empty = { k: None for k in step_inputs.keys() }</span>
    <span class="c1">#         step_inputs.set_values(**empty)</span>
    <span class="c1">#         step_outputs = self.get_step_outputs(step_id)</span>
    <span class="c1">#         empty = { k: None for k in step_outputs.keys() }</span>
    <span class="c1">#         step_outputs.set_values(**empty)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="kiara.pipeline.controller.batch.BatchControllerManual.pipeline_outputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.batch.BatchControllerManual.pipeline_outputs_changed" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several pipeline outputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>PipelineOutputEvent</code></td>
        <td><p>the pipeline output event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;PipelineOutputEvent&quot;</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_finished</span><span class="p">():</span>
        <span class="c1"># TODO: check if something is running</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="kiara.pipeline.controller.batch.BatchControllerManual.process_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.batch.BatchControllerManual.process_pipeline" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Execute the connected pipeline end-to-end.</p>
<p>Controllers can elect to overwrite this method, but this is optional.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already running.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">:</span>
            <span class="n">job_ids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                        <span class="k">continue</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Required pipeline step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; can&#39;t be processed, inputs not ready yet: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                    <span class="n">job_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="c1"># TODO: cancel running jobs?</span>
                    <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                        <span class="kn">import</span> <span class="nn">traceback</span>

                        <span class="n">traceback</span><span class="o">.</span><span class="n">print_stack</span><span class="p">()</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Processing of step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; from pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39; failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h6 id="kiara.pipeline.controller.batch.BatchControllerManual.step_inputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.batch.BatchControllerManual.step_inputs_changed" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several step inputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>StepInputEvent</code></td>
        <td><p>the step input event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;StepInputEvent&quot;</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_ready</span><span class="p">():</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline not ready after input event: </span><span class="si">{</span><span class="n">event</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.pipeline.listeners" class="doc doc-heading">
        <code>listeners</code>



<a href="#kiara.pipeline.listeners" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.pipeline.listeners.PipelineListener" class="doc doc-heading">
        <code>
PipelineListener            (<span title="abc.ABC">ABC</span>)
        </code>



<a href="#kiara.pipeline.listeners.PipelineListener" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/listeners.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineListener</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">StepInputEvent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method to override if the implementing controller needs to react to events where one or several step inputs have changed.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            event: the step input event</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">step_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">StepOutputEvent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method to override if the implementing controller needs to react to events where one or several step outputs have changed.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            event: the step output event</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">PipelineInputEvent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method to override if the implementing controller needs to react to events where one or several pipeline inputs have changed.</span>

<span class="sd">        !!! note</span>
<span class="sd">        Whenever pipeline inputs change, the connected step inputs also change and an (extra) event will be fired for those. Which means</span>
<span class="sd">        you can choose to only implement the ``step_inputs_changed`` method if you want to. This behaviour might change in the future.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            event: the pipeline input event</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">PipelineOutputEvent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method to override if the implementing controller needs to react to events where one or several pipeline outputs have changed.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            event: the pipeline output event</span>
<span class="sd">        &quot;&quot;&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.listeners.PipelineListener.pipeline_inputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.listeners.PipelineListener.pipeline_inputs_changed" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several pipeline inputs have changed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
</div>
<p>Whenever pipeline inputs change, the connected step inputs also change and an (extra) event will be fired for those. Which means
you can choose to only implement the <code>step_inputs_changed</code> method if you want to. This behaviour might change in the future.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>PipelineInputEvent</code></td>
        <td><p>the pipeline input event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/listeners.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">PipelineInputEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to override if the implementing controller needs to react to events where one or several pipeline inputs have changed.</span>

<span class="sd">    !!! note</span>
<span class="sd">    Whenever pipeline inputs change, the connected step inputs also change and an (extra) event will be fired for those. Which means</span>
<span class="sd">    you can choose to only implement the ``step_inputs_changed`` method if you want to. This behaviour might change in the future.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        event: the pipeline input event</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.listeners.PipelineListener.pipeline_outputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.listeners.PipelineListener.pipeline_outputs_changed" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several pipeline outputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>PipelineOutputEvent</code></td>
        <td><p>the pipeline output event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/listeners.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">PipelineOutputEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to override if the implementing controller needs to react to events where one or several pipeline outputs have changed.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        event: the pipeline output event</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.listeners.PipelineListener.step_inputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.listeners.PipelineListener.step_inputs_changed" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several step inputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>StepInputEvent</code></td>
        <td><p>the step input event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/listeners.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">StepInputEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to override if the implementing controller needs to react to events where one or several step inputs have changed.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        event: the step input event</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.listeners.PipelineListener.step_outputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.listeners.PipelineListener.step_outputs_changed" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several step outputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>StepOutputEvent</code></td>
        <td><p>the step output event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/listeners.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">step_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">StepOutputEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to override if the implementing controller needs to react to events where one or several step outputs have changed.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        event: the step output event</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.pipeline.module" class="doc doc-heading">
        <code>module</code>



<a href="#kiara.pipeline.module" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="kiara.pipeline.module.PipelineModule" class="doc doc-heading">
        <code>
PipelineModule            (<a class="autorefs autorefs-internal" title="kiara.module.KiaraModule" href="../module/#kiara.module.KiaraModule">KiaraModule</a>)
        </code>



<a href="#kiara.pipeline.module.PipelineModule" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A <a class="autorefs autorefs-internal" href="../module/#kiara.module.KiaraModule">KiaraModule</a> that contains a collection of interconnected other modules.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineModule</span><span class="p">(</span><span class="n">KiaraModule</span><span class="p">[</span><span class="n">PipelineConfig</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;A [KiaraModule][kiara.module.KiaraModule] that contains a collection of interconnected other modules.&quot;&quot;&quot;</span>

    <span class="n">_config_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">PipelineConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">PipelineConfig</span>  <span class="c1"># type: ignore</span>
    <span class="n">_module_type_id</span> <span class="o">=</span> <span class="s2">&quot;pipeline&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">is_pipeline</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">parent_id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
            <span class="kc">None</span><span class="p">,</span> <span class="n">PipelineConfig</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="c1"># controller: typing.Union[</span>
        <span class="c1">#     None, PipelineController, str, typing.Type[PipelineController]</span>
        <span class="c1"># ] = None,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="c1"># if controller is not None and not isinstance(controller, PipelineController):</span>
        <span class="c1">#     raise NotImplementedError()</span>
        <span class="c1"># if controller is None:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
            <span class="n">parent_id</span><span class="o">=</span><span class="n">parent_id</span><span class="p">,</span>
            <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_structure</span><span class="p">:</span> <span class="n">PipelineStructure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_structure</span><span class="p">()</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">constants</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">constants</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_structure</span><span class="o">.</span><span class="n">constants</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">structure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineStructure</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The ``PipelineStructure`` of this module.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_structure</span>

    <span class="k">def</span> <span class="nf">_create_structure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineStructure</span><span class="p">:</span>

        <span class="n">pipeline_structure</span> <span class="o">=</span> <span class="n">PipelineStructure</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pipeline_structure</span>

    <span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">pipeline_input_schema</span>

    <span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">pipeline_output_schema</span>

    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="kn">from</span> <span class="nn">kiara</span> <span class="kn">import</span> <span class="n">Pipeline</span>

        <span class="c1"># controller = BatchController(auto_process=False, kiara=self._kiara)</span>

        <span class="n">pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">structure</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="p">)</span>
        <span class="n">pipeline</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">KiaraProcessingException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t start processing of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_module_type_id</span><span class="si">}</span><span class="s2"> pipeline: one or several inputs missing or invalid.&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">RESULTS_READY</span><span class="p">:</span>
            <span class="c1"># TODO: error details</span>
            <span class="k">raise</span> <span class="n">KiaraProcessingException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error when running pipeline of type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_module_type_id</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="n">outputs</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="o">**</span><span class="n">pipeline</span><span class="o">.</span><span class="n">outputs</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.module.PipelineModule.structure" class="doc doc-heading">
<code class="highlight language-python"><span class="n">structure</span><span class="p">:</span> <span class="n">PipelineStructure</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.module.PipelineModule.structure" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The <code>PipelineStructure</code> of this module.</p>
    </div>

  </div>







  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.module.PipelineModule.create_input_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.module.PipelineModule.create_input_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the input schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[input_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this input]",
          "optional*': [boolean whether this input is optional or required (defaults to 'False')]
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">pipeline_input_schema</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.module.PipelineModule.create_output_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.module.PipelineModule.create_output_schema" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the output schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[output_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this output]"
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">pipeline_output_schema</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.module.PipelineModule.is_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_pipeline</span><span class="p">()</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.pipeline.module.PipelineModule.is_pipeline" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Check whether this module type is a pipeline, or not.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">is_pipeline</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.pipeline.pipeline" class="doc doc-heading">
        <code>pipeline</code>



<a href="#kiara.pipeline.pipeline" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="kiara.pipeline.pipeline.Pipeline" class="doc doc-heading">
        <code>
Pipeline        </code>



<a href="#kiara.pipeline.pipeline.Pipeline" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>An instance of a <a class="autorefs autorefs-internal" href="../pipeline/structure/#kiara.pipeline.structure.PipelineStructure">PipelineStructure</a> that holds state for all of the inputs/outputs of the steps within.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Pipeline</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An instance of a [PipelineStructure][kiara.pipeline.structure.PipelineStructure] that holds state for all of the inputs/outputs of the steps within.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">structure</span><span class="p">:</span> <span class="n">PipelineStructure</span><span class="p">,</span>
        <span class="c1"># constants: typing.Optional[typing.Mapping[str, typing.Any]] = None,</span>
        <span class="n">controller</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">PipelineController</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="p">:</span> <span class="n">PipelineStructure</span> <span class="o">=</span> <span class="n">structure</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_inputs</span><span class="p">:</span> <span class="n">SlottedValueSet</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_outputs</span><span class="p">:</span> <span class="n">SlottedValueSet</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_step_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSet</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_step_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSet</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">ValueRef</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status</span><span class="p">:</span> <span class="n">StepStatus</span> <span class="o">=</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">STALE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="o">.</span><span class="n">_kiara</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="p">:</span> <span class="n">DataRegistry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_registry</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_init_values</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">controller</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">controller</span> <span class="o">=</span> <span class="n">BatchController</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">controller</span><span class="o">.</span><span class="n">set_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_controller</span><span class="p">:</span> <span class="n">PipelineController</span> <span class="o">=</span> <span class="n">controller</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_listeners</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">PipelineListener</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_status</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Pipeline</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_id</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_title</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">structure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineStructure</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">controller</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineController</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_controller</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No controller set (yet).&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_controller</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SlottedValueSet</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;All (pipeline) input values of this pipeline.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_inputs</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SlottedValueSet</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;All (pipeline) output values of this pipeline.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_outputs</span>

    <span class="c1"># def set_pipeline_inputs(self, **inputs: typing.Any):</span>
    <span class="c1">#     self._controller.set_pipeline_inputs(**inputs)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">step_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return all ids of the steps of this pipeline.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="o">.</span><span class="n">step_ids</span>

    <span class="k">def</span> <span class="nf">get_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineStep</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the object representing a step in this workflow, identified by the step id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_steps_by_stage</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Return a all pipeline steps, ordered by stage they belong to.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">step_ids</span><span class="p">:</span>
            <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
            <span class="n">stage</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">processing_stage</span>
            <span class="k">assert</span> <span class="n">stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">step</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span>

    <span class="k">def</span> <span class="nf">get_pipeline_inputs_by_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Return a list of pipeline input names, ordered by stage they are first required.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># type: ignore</span>
            <span class="n">refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span><span class="p">[</span><span class="n">v</span><span class="p">]</span>
            <span class="n">min_stage</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span>
            <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">refs</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">StepInputRef</span><span class="p">):</span>
                    <span class="k">continue</span>
                <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">ref</span><span class="o">.</span><span class="n">step_id</span><span class="p">)</span>
                <span class="n">stage</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">processing_stage</span>
                <span class="k">assert</span> <span class="n">stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">stage</span> <span class="o">&lt;</span> <span class="n">min_stage</span><span class="p">:</span>
                    <span class="n">min_stage</span> <span class="o">=</span> <span class="n">stage</span>  <span class="c1"># type: ignore</span>
                <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">min_stage</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span>

    <span class="k">def</span> <span class="nf">get_pipeline_outputs_by_stage</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Return a list of pipeline input names, ordered by the stage that needs to be executed before they are available.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># type: ignore</span>
            <span class="n">refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span><span class="p">[</span><span class="n">v</span><span class="p">]</span>
            <span class="n">min_stage</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span>
            <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">refs</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">StepOutputRef</span><span class="p">):</span>
                    <span class="k">continue</span>
                <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">ref</span><span class="o">.</span><span class="n">step_id</span><span class="p">)</span>
                <span class="n">stage</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">processing_stage</span>
                <span class="k">assert</span> <span class="n">stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">stage</span> <span class="o">&lt;</span> <span class="n">min_stage</span><span class="p">:</span>
                    <span class="n">min_stage</span> <span class="o">=</span> <span class="n">stage</span>  <span class="c1"># type: ignore</span>
                <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">min_stage</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span>

    <span class="k">def</span> <span class="nf">get_pipeline_inputs_for_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return a list of pipeline inputs that are required for a stage to be processed.</span>

<span class="sd">        The result of this method does not include inputs that were required earlier already.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pipeline_inputs_by_stage</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="p">[])</span>

    <span class="k">def</span> <span class="nf">get_stage_for_pipeline_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>

        <span class="k">for</span> <span class="n">stage</span><span class="p">,</span> <span class="n">input_names</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pipeline_inputs_by_stage</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">input_name</span> <span class="ow">in</span> <span class="n">input_names</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">stage</span>

        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No input name &#39;</span><span class="si">{</span><span class="n">input_name</span><span class="si">}</span><span class="s2">&#39;. Available inputs: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">stage_for_pipeline_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>

        <span class="k">for</span> <span class="n">stage</span><span class="p">,</span> <span class="n">output_names</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pipeline_outputs_by_stage</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">output_name</span> <span class="ow">in</span> <span class="n">output_names</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">stage</span>

        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No output name &#39;</span><span class="si">{</span><span class="n">output_name</span><span class="si">}</span><span class="s2">&#39;. Available outputs: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_pipeline_outputs_for_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return a list of pipeline outputs that are first available after the specified stage completed processing.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pipeline_outputs_by_stage</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="p">[])</span>

    <span class="k">def</span> <span class="nf">get_pipeline_inputs_for_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">value_slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span><span class="p">[</span><span class="n">value_slot</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">refs</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">PipelineInputRef</span><span class="p">):</span>
                    <span class="k">continue</span>
                <span class="k">for</span> <span class="n">ci</span> <span class="ow">in</span> <span class="n">ref</span><span class="o">.</span><span class="n">connected_inputs</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">ci</span><span class="o">.</span><span class="n">step_id</span> <span class="o">==</span> <span class="n">step_id</span> <span class="ow">and</span> <span class="n">ref</span><span class="o">.</span><span class="n">value_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ref</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">get_pipeline_outputs_for_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">value_slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span><span class="p">[</span><span class="n">value_slot</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">refs</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">PipelineOutputRef</span><span class="p">):</span>
                    <span class="k">continue</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">ref</span><span class="o">.</span><span class="n">connected_output</span><span class="o">.</span><span class="n">step_id</span> <span class="o">==</span> <span class="n">step_id</span>
                    <span class="ow">and</span> <span class="n">ref</span><span class="o">.</span><span class="n">value_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result</span>
                <span class="p">):</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ref</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">get_step_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return all inputs for a step id (incl. inputs that are not pipeline inputs but connected to other modules output).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_step_inputs</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_step_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return all outputs for a step id (incl. outputs that are not pipeline outputs).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_step_outputs</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">add_listener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listener</span><span class="p">:</span> <span class="n">PipelineListener</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Add a listener taht gets notified on any internal pipeline input/output events.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_listeners</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">listener</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StepStatus</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the current status of this pipeline.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span>

    <span class="k">def</span> <span class="nf">_update_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Make sure internal state variable is up to date.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_state</span> <span class="o">=</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">STALE</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>
            <span class="n">new_state</span> <span class="o">=</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">STALE</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>
            <span class="n">new_state</span> <span class="o">=</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">INPUTS_READY</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_state</span> <span class="o">=</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">RESULTS_READY</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">new_state</span>

    <span class="k">def</span> <span class="nf">_init_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize this object. This should only be called once.</span>

<span class="sd">        Basically, this goes through all the inputs and outputs of all steps, and &#39;allocates&#39; a PipelineValueInfo object</span>
<span class="sd">        for each of them. In case where output/input or pipeline-input/input points are connected, only one</span>
<span class="sd">        value item is allocated, since those refer to the same value.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">pipeline_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">pipeline_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">all_step_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">all_step_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">value_refs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ValueRef</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># create the value objects that are associated with step outputs</span>
        <span class="c1"># all pipeline outputs are created here too, since the only place</span>
        <span class="c1"># those can be associated are step outputs</span>
        <span class="k">for</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">step_details</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="o">.</span><span class="n">steps_details</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">step_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepOutputRef</span><span class="p">]</span> <span class="o">=</span> <span class="n">step_details</span><span class="p">[</span><span class="s2">&quot;outputs&quot;</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">output_name</span><span class="p">,</span> <span class="n">output_point</span> <span class="ow">in</span> <span class="n">step_outputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                <span class="n">init_output_value_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                    <span class="n">value_schema</span><span class="o">=</span><span class="n">output_point</span><span class="o">.</span><span class="n">value_schema</span>
                <span class="p">)</span>
                <span class="n">output_value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="o">.</span><span class="n">register_alias</span><span class="p">(</span>
                    <span class="n">value_or_schema</span><span class="o">=</span><span class="n">init_output_value_item</span><span class="p">,</span> <span class="n">callbacks</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span>
                <span class="p">)</span>
                <span class="n">value_refs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">output_value_slot</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">output_point</span><span class="p">)</span>

                <span class="n">all_step_outputs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">step_id</span><span class="p">,</span> <span class="p">{})[</span>
                    <span class="n">output_name</span>
                <span class="p">]</span> <span class="o">=</span> <span class="n">output_value_slot</span>

                <span class="c1"># not all step outputs necessarily need to be connected to a pipeline output</span>
                <span class="k">if</span> <span class="n">output_point</span><span class="o">.</span><span class="n">pipeline_output</span><span class="p">:</span>

                    <span class="n">pipeline_outputs</span><span class="p">[</span><span class="n">output_point</span><span class="o">.</span><span class="n">pipeline_output</span><span class="p">]</span> <span class="o">=</span> <span class="n">output_value_slot</span>
                    <span class="n">po</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="o">.</span><span class="n">pipeline_outputs</span><span class="p">[</span><span class="n">output_point</span><span class="o">.</span><span class="n">pipeline_output</span><span class="p">]</span>
                    <span class="n">value_refs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">output_value_slot</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">po</span><span class="p">)</span>

        <span class="c1"># create the value objects that are associated with step inputs</span>
        <span class="k">for</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">step_details</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="o">.</span><span class="n">steps_details</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">step_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepInputRef</span><span class="p">]</span> <span class="o">=</span> <span class="n">step_details</span><span class="p">[</span><span class="s2">&quot;inputs&quot;</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">input_name</span><span class="p">,</span> <span class="n">input_point</span> <span class="ow">in</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                <span class="c1"># if this step input gets fed from a pipeline_input (meaning user input in most cases),</span>
                <span class="c1"># we need to create a DataValue for that pipeline input</span>
                <span class="c1"># vm = ValueMetadata(</span>
                <span class="c1">#     origin=f&quot;{self.id}.steps.{step_id}.inputs.{input_point.value_name}&quot;</span>
                <span class="c1"># )</span>
                <span class="k">if</span> <span class="n">input_point</span><span class="o">.</span><span class="n">connected_pipeline_input</span><span class="p">:</span>
                    <span class="n">connected_pipeline_input_name</span> <span class="o">=</span> <span class="n">input_point</span><span class="o">.</span><span class="n">connected_pipeline_input</span>
                    <span class="n">pipeline_input_field</span><span class="p">:</span> <span class="n">PipelineInputRef</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="o">.</span><span class="n">pipeline_inputs</span><span class="p">[</span><span class="n">connected_pipeline_input_name</span><span class="p">]</span>
                    <span class="p">)</span>
                    <span class="n">pipeline_input_slot</span><span class="p">:</span> <span class="n">ValueSlot</span> <span class="o">=</span> <span class="n">pipeline_inputs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                        <span class="n">connected_pipeline_input_name</span><span class="p">,</span> <span class="kc">None</span>
                    <span class="p">)</span>

                    <span class="k">if</span> <span class="n">pipeline_input_slot</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="c1"># if the pipeline input wasn&#39;t created by another step input before,</span>
                        <span class="c1"># we need to take care of it here</span>

                        <span class="k">if</span> <span class="n">pipeline_input_field</span><span class="o">.</span><span class="n">is_constant</span><span class="p">:</span>
                            <span class="n">init_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">constants</span><span class="p">[</span>
                                <span class="n">pipeline_input_field</span><span class="o">.</span><span class="n">value_name</span>
                            <span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">init_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">defaults</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                                <span class="n">pipeline_input_field</span><span class="o">.</span><span class="n">value_name</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span>
                            <span class="p">)</span>

                        <span class="n">init_pipeline_input_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                            <span class="n">value_data</span><span class="o">=</span><span class="n">init_value</span><span class="p">,</span>
                            <span class="n">value_schema</span><span class="o">=</span><span class="n">pipeline_input_field</span><span class="o">.</span><span class="n">value_schema</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="c1"># TODO: check whether it&#39;s a constant?</span>
                        <span class="n">pipeline_input_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="o">.</span><span class="n">register_alias</span><span class="p">(</span>
                            <span class="n">value_or_schema</span><span class="o">=</span><span class="n">init_pipeline_input_value</span><span class="p">,</span> <span class="n">callbacks</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span>
                        <span class="p">)</span>
                        <span class="n">value_refs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">pipeline_input_slot</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="n">pipeline_input_field</span>
                        <span class="p">)</span>

                        <span class="n">pipeline_inputs</span><span class="p">[</span>
                            <span class="n">connected_pipeline_input_name</span>
                        <span class="p">]</span> <span class="o">=</span> <span class="n">pipeline_input_slot</span>

                    <span class="n">all_step_inputs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">step_id</span><span class="p">,</span> <span class="p">{})[</span>
                        <span class="n">input_name</span>
                    <span class="p">]</span> <span class="o">=</span> <span class="n">pipeline_input_slot</span>
                    <span class="n">value_refs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">pipeline_input_slot</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_point</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">input_point</span><span class="o">.</span><span class="n">connected_outputs</span><span class="p">:</span>

                    <span class="k">for</span> <span class="n">co</span> <span class="ow">in</span> <span class="n">input_point</span><span class="o">.</span><span class="n">connected_outputs</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">input_point</span><span class="o">.</span><span class="n">connected_outputs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">co</span><span class="o">.</span><span class="n">sub_value</span><span class="p">:</span>
                            <span class="c1"># this means the input is the same value as the connected output</span>
                            <span class="n">output_value</span><span class="p">:</span> <span class="n">ValueSlot</span> <span class="o">=</span> <span class="n">all_step_outputs</span><span class="p">[</span><span class="n">co</span><span class="o">.</span><span class="n">step_id</span><span class="p">][</span>
                                <span class="n">co</span><span class="o">.</span><span class="n">value_name</span>
                            <span class="p">]</span>
                            <span class="n">all_step_inputs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">input_point</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="p">{})[</span>
                                <span class="n">input_point</span><span class="o">.</span><span class="n">value_name</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">output_value</span>
                            <span class="n">value_refs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">output_value</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_point</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">input_point</span><span class="o">.</span><span class="n">connected_outputs</span><span class="p">)</span>
                            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
                            <span class="c1"># sub_value = co.sub_value</span>

                            <span class="c1"># linked_values = {}</span>
                            <span class="c1"># for co in input_point.connected_outputs:</span>
                            <span class="c1">#     output_value = all_step_outputs[co.step_id][co.value_name]</span>
                            <span class="c1">#     sub_value = co.sub_value</span>
                            <span class="c1">#     if len(input_point.connected_outputs) &gt; 1 and not sub_value:</span>
                            <span class="c1">#         raise NotImplementedError()</span>
                            <span class="c1">#         sub_value = {&quot;config&quot;: co.step_id}</span>
                            <span class="c1">#     if sub_value is not None:</span>
                            <span class="c1">#         raise NotImplementedError</span>
                            <span class="c1">#</span>
                            <span class="c1">#     linked_values[output_value.id] = sub_value</span>
                            <span class="c1">#</span>
                            <span class="c1"># step_input = self._data_registry.register_linked_value(</span>
                            <span class="c1">#     parent_id=self.id,</span>
                            <span class="c1">#     linked_values=linked_values,</span>
                            <span class="c1">#     value_schema=input_point.value_schema,</span>
                            <span class="c1">#     value_refs=input_point,</span>
                            <span class="c1"># )</span>
                            <span class="c1"># self._data_registry.register_callback(</span>
                            <span class="c1">#     self.values_updated, step_input</span>
                            <span class="c1"># )</span>
                            <span class="c1"># all_step_inputs.setdefault(input_point.step_id, {})[</span>
                            <span class="c1">#     input_point.value_name</span>
                            <span class="c1"># ] = step_input</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Invalid value point type for this location: </span><span class="si">{</span><span class="n">input_point</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">pipeline_inputs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t init pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39;: no pipeline inputs&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_inputs</span> <span class="o">=</span> <span class="n">SlottedValueSet</span><span class="p">(</span>
            <span class="n">items</span><span class="o">=</span><span class="n">pipeline_inputs</span><span class="p">,</span>
            <span class="n">read_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Inputs for pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span>
            <span class="n">registry</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">pipeline_outputs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t init pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39;: no pipeline outputs&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_outputs</span> <span class="o">=</span> <span class="n">SlottedValueSet</span><span class="p">(</span>
            <span class="n">items</span><span class="o">=</span><span class="n">pipeline_outputs</span><span class="p">,</span>
            <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Outputs for pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span>
            <span class="n">registry</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_step_inputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">inputs</span> <span class="ow">in</span> <span class="n">all_step_inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_step_inputs</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">SlottedValueSet</span><span class="p">(</span>
                <span class="n">items</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span>
                <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Inputs for step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; of pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span>
                <span class="n">registry</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_step_outputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">outputs</span> <span class="ow">in</span> <span class="n">all_step_outputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_step_outputs</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">SlottedValueSet</span><span class="p">(</span>
                <span class="n">read_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">items</span><span class="o">=</span><span class="n">outputs</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Outputs for step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; of pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
                <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span>
                <span class="n">registry</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span> <span class="o">=</span> <span class="n">value_refs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">values_updated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">items</span><span class="p">:</span> <span class="n">ValueSlot</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">updated_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">updated_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">updated_pipeline_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">updated_pipeline_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># print(&quot;===================================================&quot;)</span>
        <span class="c1"># for item in items:</span>
        <span class="c1">#     print(item)</span>
        <span class="c1"># print(&quot;===================================================&quot;)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_status</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># means init is not finished yet</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>

            <span class="c1"># TODO: multiple value fields, also check pipeline id</span>
            <span class="n">references</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">references</span>

            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">references</span><span class="p">:</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">StepInputRef</span><span class="p">):</span>
                    <span class="n">updated_inputs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">StepOutputRef</span><span class="p">):</span>
                    <span class="n">updated_outputs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">PipelineInputRef</span><span class="p">):</span>
                    <span class="n">updated_pipeline_inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">PipelineOutputRef</span><span class="p">):</span>
                    <span class="n">updated_pipeline_outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t update, invalid type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># print(&#39;========================================&#39;)</span>
        <span class="c1"># print(&#39;---&#39;)</span>
        <span class="c1"># print(&quot;Upaded pipeline input&quot;)</span>
        <span class="c1"># print(updated_pipeline_inputs)</span>
        <span class="c1"># print(&#39;---&#39;)</span>
        <span class="c1"># print(&quot;Upaded step inputs&quot;)</span>
        <span class="c1"># print(updated_inputs)</span>
        <span class="c1"># print(&#39;---&#39;)</span>
        <span class="c1"># print(&quot;Upaded step outputs&quot;)</span>
        <span class="c1"># print(updated_outputs)</span>
        <span class="c1"># print(&#39;---&#39;)</span>
        <span class="c1"># print(&quot;Upaded pipeline outputs&quot;)</span>
        <span class="c1"># print(updated_pipeline_outputs)</span>

        <span class="k">if</span> <span class="n">updated_pipeline_inputs</span><span class="p">:</span>
            <span class="n">event_pi</span> <span class="o">=</span> <span class="n">PipelineInputEvent</span><span class="p">(</span>
                <span class="n">pipeline_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">updated_pipeline_inputs</span><span class="o">=</span><span class="n">updated_pipeline_inputs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_controller</span><span class="o">.</span><span class="n">pipeline_inputs_changed</span><span class="p">(</span><span class="n">event_pi</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_notify_pipeline_listeners</span><span class="p">(</span><span class="n">event_pi</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">updated_outputs</span><span class="p">:</span>
            <span class="n">event_so</span> <span class="o">=</span> <span class="n">StepOutputEvent</span><span class="p">(</span>
                <span class="n">pipeline_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">updated_step_outputs</span><span class="o">=</span><span class="n">updated_outputs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_controller</span><span class="o">.</span><span class="n">step_outputs_changed</span><span class="p">(</span><span class="n">event_so</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_notify_pipeline_listeners</span><span class="p">(</span><span class="n">event_so</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">updated_inputs</span><span class="p">:</span>
            <span class="n">event_si</span> <span class="o">=</span> <span class="n">StepInputEvent</span><span class="p">(</span>
                <span class="n">pipeline_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">updated_step_inputs</span><span class="o">=</span><span class="n">updated_inputs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_controller</span><span class="o">.</span><span class="n">step_inputs_changed</span><span class="p">(</span><span class="n">event_si</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_notify_pipeline_listeners</span><span class="p">(</span><span class="n">event_si</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">updated_pipeline_outputs</span><span class="p">:</span>
            <span class="n">event_po</span> <span class="o">=</span> <span class="n">PipelineOutputEvent</span><span class="p">(</span>
                <span class="n">pipeline_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">updated_pipeline_outputs</span><span class="o">=</span><span class="n">updated_pipeline_outputs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_controller</span><span class="o">.</span><span class="n">pipeline_outputs_changed</span><span class="p">(</span><span class="n">event_po</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_notify_pipeline_listeners</span><span class="p">(</span><span class="n">event_po</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_notify_pipeline_listeners</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">StepEvent</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">listener</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listeners</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;step_input&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                <span class="n">listener</span><span class="o">.</span><span class="n">step_inputs_changed</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;step_output&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                <span class="n">listener</span><span class="o">.</span><span class="n">step_outputs_changed</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;pipeline_input&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                <span class="n">listener</span><span class="o">.</span><span class="n">pipeline_inputs_changed</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;pipeline_output&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                <span class="n">listener</span><span class="o">.</span><span class="n">pipeline_outputs_changed</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported type: </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="k">def</span> <span class="nf">get_current_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineState&quot;</span><span class="p">:</span>

        <span class="n">step_inputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">step_states</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_step_inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">step_inputs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">PipelineValuesInfo</span><span class="o">.</span><span class="n">from_value_set</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>
                <span class="n">step_states</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">INPUTS_READY</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">step_states</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">STALE</span>

        <span class="n">step_outputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_step_outputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">step_outputs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">PipelineValuesInfo</span><span class="o">.</span><span class="n">from_value_set</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>
                <span class="n">step_states</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">RESULTS_READY</span>

        <span class="kn">from</span> <span class="nn">kiara.info.pipelines</span> <span class="kn">import</span> <span class="n">PipelineState</span>

        <span class="n">state</span> <span class="o">=</span> <span class="n">PipelineState</span><span class="p">(</span>
            <span class="n">structure</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">to_details</span><span class="p">(),</span>
            <span class="n">pipeline_inputs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_inputs</span><span class="o">.</span><span class="n">to_details</span><span class="p">(),</span>
            <span class="n">pipeline_outputs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_outputs</span><span class="o">.</span><span class="n">to_details</span><span class="p">(),</span>
            <span class="n">step_states</span><span class="o">=</span><span class="n">step_states</span><span class="p">,</span>
            <span class="n">step_inputs</span><span class="o">=</span><span class="n">step_inputs</span><span class="p">,</span>
            <span class="n">step_outputs</span><span class="o">=</span><span class="n">step_outputs</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">state</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">








  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.pipeline.Pipeline.inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">inputs</span><span class="p">:</span> <span class="n">SlottedValueSet</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.pipeline.Pipeline.inputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>All (pipeline) input values of this pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.pipeline.Pipeline.outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">outputs</span><span class="p">:</span> <span class="n">SlottedValueSet</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.pipeline.Pipeline.outputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>All (pipeline) output values of this pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.pipeline.Pipeline.status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">status</span><span class="p">:</span> <span class="n">StepStatus</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.pipeline.Pipeline.status" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return the current status of this pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.pipeline.Pipeline.step_ids" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_ids</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.pipeline.Pipeline.step_ids" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return all ids of the steps of this pipeline.</p>
    </div>

  </div>












  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.pipeline.Pipeline.add_listener" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_listener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listener</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.add_listener" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Add a listener taht gets notified on any internal pipeline input/output events.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_listener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listener</span><span class="p">:</span> <span class="n">PipelineListener</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add a listener taht gets notified on any internal pipeline input/output events.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_listeners</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">listener</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.pipeline.Pipeline.get_pipeline_inputs_by_stage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_pipeline_inputs_by_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.get_pipeline_inputs_by_stage" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return a list of pipeline input names, ordered by stage they are first required.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_pipeline_inputs_by_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a list of pipeline input names, ordered by stage they are first required.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># type: ignore</span>
        <span class="n">refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span><span class="p">[</span><span class="n">v</span><span class="p">]</span>
        <span class="n">min_stage</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span>
        <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">refs</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">StepInputRef</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">ref</span><span class="o">.</span><span class="n">step_id</span><span class="p">)</span>
            <span class="n">stage</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">processing_stage</span>
            <span class="k">assert</span> <span class="n">stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">stage</span> <span class="o">&lt;</span> <span class="n">min_stage</span><span class="p">:</span>
                <span class="n">min_stage</span> <span class="o">=</span> <span class="n">stage</span>  <span class="c1"># type: ignore</span>
            <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">min_stage</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.pipeline.Pipeline.get_pipeline_inputs_for_stage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_pipeline_inputs_for_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.get_pipeline_inputs_for_stage" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return a list of pipeline inputs that are required for a stage to be processed.</p>
<p>The result of this method does not include inputs that were required earlier already.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_pipeline_inputs_for_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Return a list of pipeline inputs that are required for a stage to be processed.</span>

<span class="sd">    The result of this method does not include inputs that were required earlier already.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pipeline_inputs_by_stage</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="p">[])</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.pipeline.Pipeline.get_pipeline_outputs_by_stage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_pipeline_outputs_by_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.get_pipeline_outputs_by_stage" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return a list of pipeline input names, ordered by the stage that needs to be executed before they are available.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_pipeline_outputs_by_stage</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a list of pipeline input names, ordered by the stage that needs to be executed before they are available.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># type: ignore</span>
        <span class="n">refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span><span class="p">[</span><span class="n">v</span><span class="p">]</span>
        <span class="n">min_stage</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span>
        <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">refs</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">StepOutputRef</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">ref</span><span class="o">.</span><span class="n">step_id</span><span class="p">)</span>
            <span class="n">stage</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">processing_stage</span>
            <span class="k">assert</span> <span class="n">stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">stage</span> <span class="o">&lt;</span> <span class="n">min_stage</span><span class="p">:</span>
                <span class="n">min_stage</span> <span class="o">=</span> <span class="n">stage</span>  <span class="c1"># type: ignore</span>
            <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">min_stage</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.pipeline.Pipeline.get_pipeline_outputs_for_stage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_pipeline_outputs_for_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.get_pipeline_outputs_for_stage" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return a list of pipeline outputs that are first available after the specified stage completed processing.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_pipeline_outputs_for_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Return a list of pipeline outputs that are first available after the specified stage completed processing.&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pipeline_outputs_by_stage</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="p">[])</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.pipeline.Pipeline.get_step" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.get_step" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return the object representing a step in this workflow, identified by the step id.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineStep</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return the object representing a step in this workflow, identified by the step id.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.pipeline.Pipeline.get_step_inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_step_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.get_step_inputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return all inputs for a step id (incl. inputs that are not pipeline inputs but connected to other modules output).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_step_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return all inputs for a step id (incl. inputs that are not pipeline inputs but connected to other modules output).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_step_inputs</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.pipeline.Pipeline.get_step_outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_step_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.get_step_outputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return all outputs for a step id (incl. outputs that are not pipeline outputs).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_step_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return all outputs for a step id (incl. outputs that are not pipeline outputs).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_step_outputs</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.pipeline.Pipeline.get_steps_by_stage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_steps_by_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.get_steps_by_stage" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return a all pipeline steps, ordered by stage they belong to.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_steps_by_stage</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a all pipeline steps, ordered by stage they belong to.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">step_ids</span><span class="p">:</span>
        <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
        <span class="n">stage</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">processing_stage</span>
        <span class="k">assert</span> <span class="n">stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">step</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span>
</code></pre></div>
        </details>
    </div>

  </div>







  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.pipeline.structure" class="doc doc-heading">
        <code>structure</code>



<a href="#kiara.pipeline.structure" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="kiara.pipeline.structure.PipelineStep" class="doc doc-heading">
        <code>
PipelineStep            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A step within a pipeline-structure, includes information about it's connection(s) and other metadata.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/structure.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineStep</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A step within a pipeline-structure, includes information about it&#39;s connection(s) and other metadata.&quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">validate_assignment</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_steps</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">steps</span><span class="p">:</span> <span class="s2">&quot;PipelineStepConfig&quot;</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="s2">&quot;PipelineStep&quot;</span><span class="p">]:</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">PipelineStep</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara.module</span> <span class="kn">import</span> <span class="n">Kiara</span>

            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">steps</span><span class="p">:</span>

            <span class="n">_s</span> <span class="o">=</span> <span class="n">PipelineStep</span><span class="p">(</span>
                <span class="n">step_id</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span>
                <span class="n">module_type</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">module_type</span><span class="p">,</span>
                <span class="n">module_config</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">module_config</span><span class="p">),</span>
                <span class="n">input_links</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">input_links</span><span class="p">),</span>
                <span class="n">_kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="p">)</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_s</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="n">_module</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;step_id&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_validate_step_id</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Step ids can&#39;t contain &#39;.&#39; characters.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">v</span>

    <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The module type.&quot;</span><span class="p">)</span>
    <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The module config.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span>
    <span class="p">)</span>
    <span class="n">required</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether this step is required within the workflow.</span><span class="se">\n\n</span><span class="s2">In some cases, when none of the pipeline outputs have a required input that connects to a step, then it is not necessary for this step to have been executed, even if it is placed before a step in the execution hierarchy. This also means that the pipeline inputs that are connected to this step might not be required.&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">processing_stage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The stage number this step is executed within the pipeline.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">input_links</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">StepValueAddress</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The links that connect to inputs of the module.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">_kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>  <span class="c1"># type: ignore</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
        <span class="n">kiara</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;_kiara&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span> <span class="o">=</span> <span class="n">kiara</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">kiara</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">module</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KiaraModule&quot;</span><span class="p">:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">module_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kiara</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">profiles</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                    <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_config</span>
                <span class="p">):</span>
                    <span class="n">op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kiara</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">profiles</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_module</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_module</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kiara</span><span class="o">.</span><span class="n">create_module</span><span class="p">(</span>
                        <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span>
                        <span class="n">module_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="p">,</span>
                        <span class="n">module_config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">module_config</span><span class="p">,</span>
                    <span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t assemble pipeline step &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_id</span>

        <span class="c1"># # TODO: also check whether _kiara obj is equal?</span>
        <span class="c1"># eq = (self.step_id, self.parent_id, self.module, self.processing_stage,) == (</span>
        <span class="c1">#     other.step_id,</span>
        <span class="c1">#     other.parent_id,</span>
        <span class="c1">#     other.module,</span>
        <span class="c1">#     other.processing_stage,</span>
        <span class="c1"># )</span>
        <span class="c1">#</span>
        <span class="c1"># if not eq:</span>
        <span class="c1">#     return False</span>
        <span class="c1">#</span>
        <span class="c1"># hs = DeepHash(self.input_links)</span>
        <span class="c1"># ho = DeepHash(other.input_links)</span>
        <span class="c1">#</span>
        <span class="c1"># return hs[self.input_links] == ho[other.input_links]</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

        <span class="c1"># # TODO: also include _kiara obj?</span>
        <span class="c1"># # TODO: figure out whether that can be made to work without deephash</span>
        <span class="c1"># hs = DeepHash(self.input_links)</span>
        <span class="c1"># return hash(</span>
        <span class="c1">#     (</span>
        <span class="c1">#         self.step_id,</span>
        <span class="c1">#         self.parent_id,</span>
        <span class="c1">#         self.module,</span>
        <span class="c1">#         self.processing_stage,</span>
        <span class="c1">#         hs[self.input_links],</span>
        <span class="c1">#     )</span>
        <span class="c1"># )</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(step_id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2"> module_type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="si">}</span><span class="s2"> processing_stage=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">processing_stage</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;step: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2"> (module: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.structure.PipelineStep.input_links" class="doc doc-heading">
<code class="highlight language-python"><span class="n">input_links</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">StepValueAddress</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.input_links" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The links that connect to inputs of the module.</p>
    </div>

  </div>





  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.structure.PipelineStep.module_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">module_config</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.module_config" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The module config.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.structure.PipelineStep.module_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.module_type" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The module type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.structure.PipelineStep.processing_stage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">processing_stage</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.processing_stage" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The stage number this step is executed within the pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.structure.PipelineStep.required" class="doc doc-heading">
<code class="highlight language-python"><span class="n">required</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.required" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Whether this step is required within the workflow.</p>
<p>In some cases, when none of the pipeline outputs have a required input that connects to a step, then it is not necessary for this step to have been executed, even if it is placed before a step in the execution hierarchy. This also means that the pipeline inputs that are connected to this step might not be required.</p>
    </div>

  </div>









  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.structure.PipelineStep.__eq__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.__eq__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return self==value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/structure.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_id</span>

    <span class="c1"># # TODO: also check whether _kiara obj is equal?</span>
    <span class="c1"># eq = (self.step_id, self.parent_id, self.module, self.processing_stage,) == (</span>
    <span class="c1">#     other.step_id,</span>
    <span class="c1">#     other.parent_id,</span>
    <span class="c1">#     other.module,</span>
    <span class="c1">#     other.processing_stage,</span>
    <span class="c1"># )</span>
    <span class="c1">#</span>
    <span class="c1"># if not eq:</span>
    <span class="c1">#     return False</span>
    <span class="c1">#</span>
    <span class="c1"># hs = DeepHash(self.input_links)</span>
    <span class="c1"># ho = DeepHash(other.input_links)</span>
    <span class="c1">#</span>
    <span class="c1"># return hs[self.input_links] == ho[other.input_links]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.structure.PipelineStep.__hash__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.__hash__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return hash(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/structure.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

    <span class="c1"># # TODO: also include _kiara obj?</span>
    <span class="c1"># # TODO: figure out whether that can be made to work without deephash</span>
    <span class="c1"># hs = DeepHash(self.input_links)</span>
    <span class="c1"># return hash(</span>
    <span class="c1">#     (</span>
    <span class="c1">#         self.step_id,</span>
    <span class="c1">#         self.parent_id,</span>
    <span class="c1">#         self.module,</span>
    <span class="c1">#         self.processing_stage,</span>
    <span class="c1">#         hs[self.input_links],</span>
    <span class="c1">#     )</span>
    <span class="c1"># )</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.structure.PipelineStep.__repr__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.__repr__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return repr(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/structure.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(step_id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2"> module_type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="si">}</span><span class="s2"> processing_stage=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">processing_stage</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.structure.PipelineStep.__str__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.__str__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return str(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/structure.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;step: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2"> (module: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.pipeline.structure.PipelineStructure" class="doc doc-heading">
        <code>
PipelineStructure        </code>



<a href="#kiara.pipeline.structure.PipelineStructure" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>An object that holds one or several steps, and describes the connections between them.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/structure.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineStructure</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An object that holds one or several steps, and describes the connections between them.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="s2">&quot;PipelineConfig&quot;</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_structure_config</span><span class="p">:</span> <span class="s2">&quot;PipelineConfig&quot;</span> <span class="o">=</span> <span class="n">config</span>

        <span class="n">steps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure_config</span><span class="o">.</span><span class="n">steps</span>
        <span class="n">input_aliases</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure_config</span><span class="o">.</span><span class="n">input_aliases</span>
        <span class="n">output_aliases</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure_config</span><span class="o">.</span><span class="n">output_aliases</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">steps</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No steps provided.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="n">Kiara</span> <span class="o">=</span> <span class="n">kiara</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_steps</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">PipelineStep</span><span class="p">]</span> <span class="o">=</span> <span class="n">PipelineStep</span><span class="o">.</span><span class="n">create_steps</span><span class="p">(</span>
            <span class="o">*</span><span class="n">steps</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span>
        <span class="p">)</span>
        <span class="c1"># self._pipeline_id: str = parent_id</span>

        <span class="k">if</span> <span class="n">input_aliases</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">input_aliases</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">input_aliases</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">input_aliases</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ALLOWED_INPUT_ALIAS_MARKERS</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t create pipeline, invalid value &#39;</span><span class="si">{</span><span class="n">input_aliases</span><span class="si">}</span><span class="s2">&#39; for &#39;input_aliases&#39;. Either specify a dict, or use one of: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ALLOWED_INPUT_ALIAS_MARKERS</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="n">input_aliases</span> <span class="o">=</span> <span class="n">calculate_shortest_field_aliases</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_steps</span><span class="p">,</span> <span class="n">input_aliases</span><span class="p">,</span> <span class="s2">&quot;inputs&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">output_aliases</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">output_aliases</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ALLOWED_INPUT_ALIAS_MARKERS</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t create pipeline, invalid value &#39;</span><span class="si">{</span><span class="n">output_aliases</span><span class="si">}</span><span class="s2">&#39; for &#39;output_aliases&#39;. Either specify a dict, or use one of: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ALLOWED_INPUT_ALIAS_MARKERS</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="n">output_aliases</span> <span class="o">=</span> <span class="n">calculate_shortest_field_aliases</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_steps</span><span class="p">,</span> <span class="n">output_aliases</span><span class="p">,</span> <span class="s2">&quot;outputs&quot;</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_input_aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">input_aliases</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">if</span> <span class="n">output_aliases</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">output_aliases</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_output_aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">output_aliases</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="c1"># this is hardcoded for now</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_all_workflow_outputs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_constants</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_execution_graph</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph_simple</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_processing_stages</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_steps_details</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="sd">&quot;&quot;&quot;Holds details about the (current) processing steps contained in this workflow.&quot;&quot;&quot;</span>

    <span class="c1"># @property</span>
    <span class="c1"># def pipeline_id(self) -&gt; str:</span>
    <span class="c1">#     return self._pipeline_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">structure_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineConfig&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure_config</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">steps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">PipelineStep</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">modules</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">module</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">steps_details</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_details</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_details</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">step_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_details</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_details</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">constants</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constants</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constants</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span>

    <span class="k">def</span> <span class="nf">get_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineStep</span><span class="p">:</span>

        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steps_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">step_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">d</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No module with id: </span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;step&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_step_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepInputRef</span><span class="p">]:</span>

        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steps_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">step_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">d</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No module with id: </span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;inputs&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_step_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepOutputRef</span><span class="p">]:</span>

        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steps_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">step_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">d</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No module with id: </span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;outputs&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_step_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steps_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">step_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">d</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No module with id: </span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">d</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">execution_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execution_graph</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execution_graph</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data_flow_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data_flow_graph_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph_simple</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph_simple</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">processing_stages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_details</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processing_stages</span>

    <span class="nd">@lru_cache</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_get_node_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_details</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>

        <span class="k">return</span> <span class="p">[</span>
            <span class="n">node</span>
            <span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">attr</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">node_type</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">steps_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepInputRef</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">node</span><span class="o">.</span><span class="n">alias</span><span class="p">:</span> <span class="n">node</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_of_type</span><span class="p">(</span><span class="n">node_type</span><span class="o">=</span><span class="n">StepInputRef</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">steps_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepOutputRef</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">node</span><span class="o">.</span><span class="n">alias</span><span class="p">:</span> <span class="n">node</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_of_type</span><span class="p">(</span><span class="n">node_type</span><span class="o">=</span><span class="n">StepOutputRef</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineInputRef</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">node</span><span class="o">.</span><span class="n">value_name</span><span class="p">:</span> <span class="n">node</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_of_type</span><span class="p">(</span><span class="n">node_type</span><span class="o">=</span><span class="n">PipelineInputRef</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineOutputRef</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">node</span><span class="o">.</span><span class="n">value_name</span><span class="p">:</span> <span class="n">node</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_of_type</span><span class="p">(</span><span class="n">node_type</span><span class="o">=</span><span class="n">PipelineOutputRef</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="n">input_name</span><span class="p">:</span> <span class="n">w_in</span><span class="o">.</span><span class="n">value_schema</span>
            <span class="k">for</span> <span class="n">input_name</span><span class="p">,</span> <span class="n">w_in</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_inputs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">output_name</span><span class="p">:</span> <span class="n">w_out</span><span class="o">.</span><span class="n">value_schema</span>
            <span class="k">for</span> <span class="n">output_name</span><span class="p">,</span> <span class="n">w_out</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_outputs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">_process_steps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The core method of this class, it connects all the processing modules, their inputs and outputs.&quot;&quot;&quot;</span>

        <span class="n">steps_details</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">execution_graph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
        <span class="n">execution_graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;__root__&quot;</span><span class="p">)</span>
        <span class="n">data_flow_graph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
        <span class="n">data_flow_graph_simple</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
        <span class="n">processing_stages</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">constants</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">structure_defaults</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># temp variable, to hold all outputs</span>
        <span class="n">outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepOutputRef</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># process all pipeline and step outputs first</span>
        <span class="n">_temp_steps_map</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">pipeline_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineOutputRef</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps</span><span class="p">:</span>

            <span class="n">_temp_steps_map</span><span class="p">[</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">step</span>

            <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">step_id</span> <span class="ow">in</span> <span class="n">steps_details</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t process steps: duplicate step_id &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                <span class="p">)</span>

            <span class="n">steps_details</span><span class="p">[</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="n">step</span><span class="p">,</span>
                <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="p">}</span>

            <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;step&quot;</span><span class="p">)</span>

            <span class="c1"># go through all the module outputs, create points for them and connect them to pipeline outputs</span>
            <span class="k">for</span> <span class="n">output_name</span><span class="p">,</span> <span class="n">schema</span> <span class="ow">in</span> <span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">output_schemas</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                <span class="n">step_output</span> <span class="o">=</span> <span class="n">StepOutputRef</span><span class="p">(</span>
                    <span class="n">value_name</span><span class="o">=</span><span class="n">output_name</span><span class="p">,</span>
                    <span class="n">value_schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span>
                    <span class="n">step_id</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="n">steps_details</span><span class="p">[</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">][</span><span class="s2">&quot;outputs&quot;</span><span class="p">][</span><span class="n">output_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">step_output</span>
                <span class="n">step_alias</span> <span class="o">=</span> <span class="n">generate_step_alias</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="n">output_name</span><span class="p">)</span>
                <span class="n">outputs</span><span class="p">[</span><span class="n">step_alias</span><span class="p">]</span> <span class="o">=</span> <span class="n">step_output</span>

                <span class="n">step_output_name</span> <span class="o">=</span> <span class="n">generate_pipeline_endpoint_name</span><span class="p">(</span>
                    <span class="n">step_id</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="n">output_name</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_aliases</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">step_output_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_aliases</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">step_output_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_aliases</span><span class="p">[</span><span class="n">step_output_name</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_all_workflow_outputs</span><span class="p">:</span>
                            <span class="c1"># this output is not interesting for the workflow</span>
                            <span class="n">step_output_name</span> <span class="o">=</span> <span class="kc">None</span>

                <span class="k">if</span> <span class="n">step_output_name</span><span class="p">:</span>
                    <span class="n">step_output_address</span> <span class="o">=</span> <span class="n">StepValueAddress</span><span class="p">(</span>
                        <span class="n">step_id</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="n">output_name</span>
                    <span class="p">)</span>
                    <span class="n">pipeline_output</span> <span class="o">=</span> <span class="n">PipelineOutputRef</span><span class="p">(</span>
                        <span class="n">value_name</span><span class="o">=</span><span class="n">step_output_name</span><span class="p">,</span>
                        <span class="n">connected_output</span><span class="o">=</span><span class="n">step_output_address</span><span class="p">,</span>
                        <span class="n">value_schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">pipeline_outputs</span><span class="p">[</span><span class="n">step_output_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">pipeline_output</span>
                    <span class="n">step_output</span><span class="o">.</span><span class="n">pipeline_output</span> <span class="o">=</span> <span class="n">pipeline_output</span><span class="o">.</span><span class="n">value_name</span>

                    <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span>
                        <span class="n">pipeline_output</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">PipelineOutputRef</span><span class="o">.</span><span class="vm">__name__</span>
                    <span class="p">)</span>
                    <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">step_output</span><span class="p">,</span> <span class="n">pipeline_output</span><span class="p">)</span>

                    <span class="n">data_flow_graph_simple</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span>
                        <span class="n">pipeline_output</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">PipelineOutputRef</span><span class="o">.</span><span class="vm">__name__</span>
                    <span class="p">)</span>
                    <span class="n">data_flow_graph_simple</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="n">pipeline_output</span><span class="p">)</span>

                <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">step_output</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">StepOutputRef</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
                <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="n">step_output</span><span class="p">)</span>

        <span class="c1"># now process inputs, and connect them to the appropriate output/pipeline-input points</span>
        <span class="n">existing_pipeline_input_points</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineInputRef</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps</span><span class="p">:</span>

            <span class="n">other_step_dependency</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="c1"># go through all the inputs of a module, create input points and connect them to either</span>
            <span class="c1"># other module outputs, or pipeline inputs (which need to be created)</span>

            <span class="n">module_constants</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
                <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span>
            <span class="p">]</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;constants&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">input_name</span><span class="p">,</span> <span class="n">schema</span> <span class="ow">in</span> <span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">input_schemas</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                <span class="n">matching_input_links</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">StepValueAddress</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">is_constant</span> <span class="o">=</span> <span class="n">input_name</span> <span class="ow">in</span> <span class="n">module_constants</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

                <span class="k">for</span> <span class="n">value_name</span><span class="p">,</span> <span class="n">input_links</span> <span class="ow">in</span> <span class="n">step</span><span class="o">.</span><span class="n">input_links</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">value_name</span> <span class="o">==</span> <span class="n">input_name</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">input_link</span> <span class="ow">in</span> <span class="n">input_links</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">input_link</span> <span class="ow">in</span> <span class="n">matching_input_links</span><span class="p">:</span>
                                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicate input link: </span><span class="si">{</span><span class="n">input_link</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                            <span class="n">matching_input_links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_link</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">matching_input_links</span><span class="p">:</span>
                    <span class="c1"># this means we connect to other steps output</span>

                    <span class="n">connected_output_points</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">StepOutputRef</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">connected_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">StepValueAddress</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

                    <span class="k">for</span> <span class="n">input_link</span> <span class="ow">in</span> <span class="n">matching_input_links</span><span class="p">:</span>
                        <span class="n">output_id</span> <span class="o">=</span> <span class="n">generate_step_alias</span><span class="p">(</span>
                            <span class="n">input_link</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="n">input_link</span><span class="o">.</span><span class="n">value_name</span>
                        <span class="p">)</span>

                        <span class="k">if</span> <span class="n">output_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">outputs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;Can&#39;t connect input &#39;</span><span class="si">{</span><span class="n">input_name</span><span class="si">}</span><span class="s2">&#39; for step &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;: no output &#39;</span><span class="si">{</span><span class="n">output_id</span><span class="si">}</span><span class="s2">&#39; available. Available output names: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">outputs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
                            <span class="p">)</span>
                        <span class="n">connected_output_points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">outputs</span><span class="p">[</span><span class="n">output_id</span><span class="p">])</span>
                        <span class="n">connected_outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_link</span><span class="p">)</span>

                        <span class="n">other_step_dependency</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">input_link</span><span class="o">.</span><span class="n">step_id</span><span class="p">)</span>

                    <span class="n">step_input_point</span> <span class="o">=</span> <span class="n">StepInputRef</span><span class="p">(</span>
                        <span class="n">step_id</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span>
                        <span class="n">value_name</span><span class="o">=</span><span class="n">input_name</span><span class="p">,</span>
                        <span class="n">value_schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span>
                        <span class="n">is_constant</span><span class="o">=</span><span class="n">is_constant</span><span class="p">,</span>
                        <span class="n">connected_pipeline_input</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">connected_outputs</span><span class="o">=</span><span class="n">connected_outputs</span><span class="p">,</span>
                    <span class="p">)</span>

                    <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">connected_output_points</span><span class="p">:</span>
                        <span class="n">op</span><span class="o">.</span><span class="n">connected_inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">step_input_point</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
                        <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">step_input_point</span><span class="p">)</span>
                        <span class="n">data_flow_graph_simple</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span>
                            <span class="n">_temp_steps_map</span><span class="p">[</span><span class="n">op</span><span class="o">.</span><span class="n">step_id</span><span class="p">],</span> <span class="n">step_input_point</span>
                        <span class="p">)</span>  <span class="c1"># TODO: name edge</span>
                        <span class="n">data_flow_graph_simple</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span>
                            <span class="n">step_input_point</span><span class="p">,</span> <span class="n">step</span>
                        <span class="p">)</span>  <span class="c1"># TODO: name edge</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># this means we connect to pipeline input</span>
                    <span class="n">pipeline_input_name</span> <span class="o">=</span> <span class="n">generate_pipeline_endpoint_name</span><span class="p">(</span>
                        <span class="n">step_id</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="n">input_name</span>
                    <span class="p">)</span>
                    <span class="c1"># check whether this input has an alias associated with it</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_aliases</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">pipeline_input_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_aliases</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="c1"># this means we use the pipeline alias</span>
                            <span class="n">pipeline_input_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_aliases</span><span class="p">[</span>
                                <span class="n">pipeline_input_name</span>
                            <span class="p">]</span>

                    <span class="k">if</span> <span class="n">pipeline_input_name</span> <span class="ow">in</span> <span class="n">existing_pipeline_input_points</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="c1"># we already created a pipeline input with this name</span>
                        <span class="c1"># TODO: check whether schema fits</span>
                        <span class="n">connected_pipeline_input</span> <span class="o">=</span> <span class="n">existing_pipeline_input_points</span><span class="p">[</span>
                            <span class="n">pipeline_input_name</span>
                        <span class="p">]</span>
                        <span class="k">assert</span> <span class="n">connected_pipeline_input</span><span class="o">.</span><span class="n">is_constant</span> <span class="o">==</span> <span class="n">is_constant</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># we need to create the pipeline input</span>
                        <span class="n">connected_pipeline_input</span> <span class="o">=</span> <span class="n">PipelineInputRef</span><span class="p">(</span>
                            <span class="n">value_name</span><span class="o">=</span><span class="n">pipeline_input_name</span><span class="p">,</span>
                            <span class="n">value_schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span>
                            <span class="n">is_constant</span><span class="o">=</span><span class="n">is_constant</span><span class="p">,</span>
                        <span class="p">)</span>

                        <span class="n">existing_pipeline_input_points</span><span class="p">[</span>
                            <span class="n">pipeline_input_name</span>
                        <span class="p">]</span> <span class="o">=</span> <span class="n">connected_pipeline_input</span>

                        <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span>
                            <span class="n">connected_pipeline_input</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">PipelineInputRef</span><span class="o">.</span><span class="vm">__name__</span>
                        <span class="p">)</span>
                        <span class="n">data_flow_graph_simple</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span>
                            <span class="n">connected_pipeline_input</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">PipelineInputRef</span><span class="o">.</span><span class="vm">__name__</span>
                        <span class="p">)</span>
                        <span class="k">if</span> <span class="n">is_constant</span><span class="p">:</span>
                            <span class="n">constants</span><span class="p">[</span>
                                <span class="n">pipeline_input_name</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;constants&quot;</span><span class="p">)[</span><span class="n">input_name</span><span class="p">]</span>

                        <span class="n">default_val</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;defaults&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                            <span class="n">input_name</span><span class="p">,</span> <span class="kc">None</span>
                        <span class="p">)</span>
                        <span class="k">if</span> <span class="n">is_constant</span> <span class="ow">and</span> <span class="n">default_val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;Module config invalid for step &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;: both default value and constant provided for input &#39;</span><span class="si">{</span><span class="n">input_name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
                            <span class="p">)</span>
                        <span class="k">elif</span> <span class="n">default_val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">structure_defaults</span><span class="p">[</span><span class="n">pipeline_input_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">default_val</span>

                    <span class="n">step_input_point</span> <span class="o">=</span> <span class="n">StepInputRef</span><span class="p">(</span>
                        <span class="n">step_id</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span>
                        <span class="n">value_name</span><span class="o">=</span><span class="n">input_name</span><span class="p">,</span>
                        <span class="n">value_schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span>
                        <span class="n">connected_pipeline_input</span><span class="o">=</span><span class="n">connected_pipeline_input</span><span class="o">.</span><span class="n">value_name</span><span class="p">,</span>
                        <span class="n">connected_outputs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">connected_pipeline_input</span><span class="o">.</span><span class="n">connected_inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">step_input_point</span><span class="o">.</span><span class="n">address</span>
                    <span class="p">)</span>
                    <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">connected_pipeline_input</span><span class="p">,</span> <span class="n">step_input_point</span><span class="p">)</span>
                    <span class="n">data_flow_graph_simple</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">connected_pipeline_input</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>

                <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">step_input_point</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">StepInputRef</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

                <span class="n">steps_details</span><span class="p">[</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">][</span><span class="s2">&quot;inputs&quot;</span><span class="p">][</span><span class="n">input_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">step_input_point</span>

                <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">step_input_point</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">other_step_dependency</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">module_id</span> <span class="ow">in</span> <span class="n">other_step_dependency</span><span class="p">:</span>
                    <span class="n">execution_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">module_id</span><span class="p">,</span> <span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">execution_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">&quot;__root__&quot;</span><span class="p">,</span> <span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">)</span>

        <span class="c1"># calculate execution order</span>
        <span class="n">path_lengths</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps</span><span class="p">:</span>

            <span class="n">step_id</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">step_id</span>

            <span class="n">paths</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">all_simple_paths</span><span class="p">(</span><span class="n">execution_graph</span><span class="p">,</span> <span class="s2">&quot;__root__&quot;</span><span class="p">,</span> <span class="n">step_id</span><span class="p">))</span>
            <span class="n">max_steps</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">paths</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="n">path_lengths</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">max_steps</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>

        <span class="n">max_length</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">path_lengths</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">stage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">m</span> <span class="k">for</span> <span class="n">m</span><span class="p">,</span> <span class="n">length</span> <span class="ow">in</span> <span class="n">path_lengths</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">length</span> <span class="o">==</span> <span class="n">i</span>
            <span class="p">]</span>
            <span class="n">processing_stages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stage</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">_step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
                <span class="n">steps_details</span><span class="p">[</span><span class="n">_step_id</span><span class="p">][</span><span class="s2">&quot;processing_stage&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
                <span class="n">steps_details</span><span class="p">[</span><span class="n">_step_id</span><span class="p">][</span><span class="s2">&quot;step&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">processing_stage</span> <span class="o">=</span> <span class="n">i</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_constants</span> <span class="o">=</span> <span class="n">constants</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span> <span class="o">=</span> <span class="n">structure_defaults</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_steps_details</span> <span class="o">=</span> <span class="n">steps_details</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execution_graph</span> <span class="o">=</span> <span class="n">execution_graph</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph</span> <span class="o">=</span> <span class="n">data_flow_graph</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph_simple</span> <span class="o">=</span> <span class="n">data_flow_graph_simple</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_processing_stages</span> <span class="o">=</span> <span class="n">processing_stages</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_of_type</span><span class="o">.</span><span class="n">cache_clear</span><span class="p">()</span>

        <span class="c1"># calculating which steps are always required to execute to compute one of the required pipeline outputs.</span>
        <span class="c1"># this is done because in some cases it&#39;s possible that some steps can be skipped to execute if they</span>
        <span class="c1"># don&#39;t have a valid input set, because the inputs downstream they are connecting to are &#39;non-required&#39;</span>
        <span class="c1"># optional_steps = []</span>

        <span class="n">last_stage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processing_stages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">step_nodes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">PipelineStep</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">node</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph_simple</span><span class="o">.</span><span class="n">nodes</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="n">all_required_inputs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">last_stage</span><span class="p">:</span>

            <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
            <span class="n">step_nodes</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">s_inp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">s_inp</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">is_required</span><span class="p">():</span>
                    <span class="k">continue</span>
                <span class="n">all_required_inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s_inp</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">pipeline_input</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_inputs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>

            <span class="k">for</span> <span class="n">last_step_input</span> <span class="ow">in</span> <span class="n">all_required_inputs</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">path</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph_simple</span><span class="p">,</span> <span class="n">pipeline_input</span><span class="p">,</span> <span class="n">last_step_input</span>
                    <span class="p">)</span>
                    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">step_nodes</span><span class="p">:</span>
                            <span class="n">step_nodes</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
                <span class="k">except</span> <span class="p">(</span><span class="n">NetworkXNoPath</span><span class="p">,</span> <span class="n">NodeNotFound</span><span class="p">):</span>
                    <span class="k">pass</span>
                    <span class="c1"># print(&quot;NO PATH&quot;)</span>
                    <span class="c1"># print(f&quot;{pipeline_input} -&gt; {last_step_input}&quot;)</span>

        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">step_nodes</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">required</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">for</span> <span class="n">input_name</span><span class="p">,</span> <span class="n">inp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">steps</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">ci</span> <span class="ow">in</span> <span class="n">inp</span><span class="o">.</span><span class="n">connected_inputs</span><span class="p">:</span>
                <span class="n">steps</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ci</span><span class="o">.</span><span class="n">step_id</span><span class="p">)</span>

            <span class="n">optional</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">steps</span><span class="p">:</span>
                <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">required</span><span class="p">:</span>
                    <span class="n">optional</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="n">optional</span><span class="p">:</span>
                <span class="n">inp</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">optional</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">extend</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">other</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
            <span class="s2">&quot;Pipeline&quot;</span><span class="p">,</span>
            <span class="s2">&quot;PipelineStructure&quot;</span><span class="p">,</span>
            <span class="s2">&quot;PipelineConfig&quot;</span><span class="p">,</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
        <span class="p">],</span>
        <span class="n">input_links</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">StepValueAddress</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineStructure&quot;</span><span class="p">:</span>

        <span class="k">return</span> <span class="n">extend_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_details</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineStructureDesc&quot;</span><span class="p">:</span>

        <span class="kn">from</span> <span class="nn">kiara.info.pipelines</span> <span class="kn">import</span> <span class="n">PipelineStructureDesc</span>

        <span class="k">return</span> <span class="n">PipelineStructureDesc</span><span class="o">.</span><span class="n">create_pipeline_structure_desc</span><span class="p">(</span><span class="n">pipeline</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_details</span><span class="p">()</span>
        <span class="k">yield</span> <span class="n">d</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">




































  </div>

    </div>

  </div>









  </div>

    </div>

  </div>




  <div class="doc doc-object doc-module">



<h3 id="kiara.pipeline.values" class="doc doc-heading">
        <code>values</code>



<a href="#kiara.pipeline.values" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.pipeline.values.PipelineInputRef" class="doc doc-heading">
        <code>
PipelineInputRef            (<a class="autorefs autorefs-internal" title="kiara.pipeline.values.ValueRef" href="../pipeline/values/#kiara.pipeline.values.ValueRef">ValueRef</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.values.PipelineInputRef" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>An input to a pipeline.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineInputRef</span><span class="p">(</span><span class="n">ValueRef</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An input to a pipeline.&quot;&quot;&quot;</span>

    <span class="n">connected_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">StepValueAddress</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The step inputs that are connected to this pipeline input&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">is_constant</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="s2">&quot;Whether this input is a constant and can&#39;t be changed by the user.&quot;</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">generate_step_alias</span><span class="p">(</span><span class="n">PIPELINE_PARENT_MARKER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.values.PipelineInputRef.connected_inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">connected_inputs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">StepValueAddress</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.values.PipelineInputRef.connected_inputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The step inputs that are connected to this pipeline input</p>
    </div>

  </div>












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.pipeline.values.PipelineOutputRef" class="doc doc-heading">
        <code>
PipelineOutputRef            (<a class="autorefs autorefs-internal" title="kiara.pipeline.values.ValueRef" href="../pipeline/values/#kiara.pipeline.values.ValueRef">ValueRef</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.values.PipelineOutputRef" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>An output to a pipeline.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineOutputRef</span><span class="p">(</span><span class="n">ValueRef</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An output to a pipeline.&quot;&quot;&quot;</span>

    <span class="n">connected_output</span><span class="p">:</span> <span class="n">StepValueAddress</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Connected step outputs.&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">generate_step_alias</span><span class="p">(</span><span class="n">PIPELINE_PARENT_MARKER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.values.PipelineOutputRef.connected_output" class="doc doc-heading">
<code class="highlight language-python"><span class="n">connected_output</span><span class="p">:</span> <span class="n">StepValueAddress</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.values.PipelineOutputRef.connected_output" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Connected step outputs.</p>
    </div>

  </div>











  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.pipeline.values.StepInputRef" class="doc doc-heading">
        <code>
StepInputRef            (<a class="autorefs autorefs-internal" title="kiara.pipeline.values.ValueRef" href="../pipeline/values/#kiara.pipeline.values.ValueRef">ValueRef</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.values.StepInputRef" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>An input to a step.</p>
<p>This object can either have a 'connected_outputs' set, or a 'connected_pipeline_input', not both.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StepInputRef</span><span class="p">(</span><span class="n">ValueRef</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An input to a step.</span>

<span class="sd">    This object can either have a &#39;connected_outputs&#39; set, or a &#39;connected_pipeline_input&#39;, not both.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The step id.&quot;</span><span class="p">)</span>
    <span class="n">connected_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">StepValueAddress</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A potential connected list of one or several module outputs.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">connected_pipeline_input</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A potential pipeline input.&quot;</span>
    <span class="p">)</span>
    <span class="n">is_constant</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="s2">&quot;Whether this input is a constant and can&#39;t be changed by the user.&quot;</span>
    <span class="p">)</span>

    <span class="nd">@root_validator</span><span class="p">(</span><span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">ensure_single_connected_item</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connected_outputs&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&quot;connected_pipeline_input&quot;</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Multiple connected items, only one allowed.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">values</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">generate_step_alias</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StepValueAddress</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">StepValueAddress</span><span class="p">(</span><span class="n">step_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">camel_case_to_snake_case</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">5</span><span class="p">],</span> <span class="n">repl</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">








  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.values.StepInputRef.connected_outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">connected_outputs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">StepValueAddress</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.values.StepInputRef.connected_outputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A potential connected list of one or several module outputs.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.values.StepInputRef.connected_pipeline_input" class="doc doc-heading">
<code class="highlight language-python"><span class="n">connected_pipeline_input</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.values.StepInputRef.connected_pipeline_input" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A potential pipeline input.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.values.StepInputRef.step_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.values.StepInputRef.step_id" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The step id.</p>
    </div>

  </div>













  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.pipeline.values.StepOutputRef" class="doc doc-heading">
        <code>
StepOutputRef            (<a class="autorefs autorefs-internal" title="kiara.pipeline.values.ValueRef" href="../pipeline/values/#kiara.pipeline.values.ValueRef">ValueRef</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.values.StepOutputRef" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>An output to a step.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StepOutputRef</span><span class="p">(</span><span class="n">ValueRef</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An output to a step.&quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">allow_mutation</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The step id.&quot;</span><span class="p">)</span>
    <span class="n">pipeline_output</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The connected pipeline output.&quot;</span>
    <span class="p">)</span>
    <span class="n">connected_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">StepValueAddress</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The step inputs that are connected to this step output&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">generate_step_alias</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StepValueAddress</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">StepValueAddress</span><span class="p">(</span><span class="n">step_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">camel_case_to_snake_case</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">5</span><span class="p">],</span> <span class="n">repl</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">








  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.values.StepOutputRef.connected_inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">connected_inputs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">StepValueAddress</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.values.StepOutputRef.connected_inputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The step inputs that are connected to this step output</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.values.StepOutputRef.pipeline_output" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_output</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.values.StepOutputRef.pipeline_output" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The connected pipeline output.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.pipeline.values.StepOutputRef.step_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.values.StepOutputRef.step_id" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The step id.</p>
    </div>

  </div>













  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.pipeline.values.ValueRef" class="doc doc-heading">
        <code>
ValueRef            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.values.ValueRef" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>An object that holds information about the location of a value within a pipeline (or other structure).</p>
<p>Basically, a <code>ValueRef</code> helps the containing object where in its structure the value belongs (for example so
it can update dependent other values). A <code>ValueRef</code> object (obviously) does not contain the value itself.</p>
<p>There are four different ValueRef type that are relevant for pipelines:</p>
<ul>
<li><a class="autorefs autorefs-internal" href="../pipeline/values/#kiara.pipeline.values.StepInputRef">kiara.pipeline.values.StepInputRef</a>: an input to a step</li>
<li><a class="autorefs autorefs-internal" href="../pipeline/values/#kiara.pipeline.values.StepOutputRef">kiara.pipeline.values.StepOutputRef</a>: an output of a step</li>
<li><a class="autorefs autorefs-internal" href="../pipeline/values/#kiara.pipeline.values.PipelineInputRef">kiara.pipeline.values.PipelineInputRef</a>: an input to a pipeline</li>
<li><a class="autorefs autorefs-internal" href="../pipeline/values/#kiara.pipeline.values.PipelineOutputRef">kiara.pipeline.values.PipelineOutputRef</a>: an output for a pipeline</li>
</ul>
<p>Several <code>ValueRef</code> objects can target the same value, for example a step output and a connected step input would
reference the same <code>Value</code> (in most cases)..</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueRef</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An object that holds information about the location of a value within a pipeline (or other structure).</span>

<span class="sd">    Basically, a `ValueRef` helps the containing object where in its structure the value belongs (for example so</span>
<span class="sd">    it can update dependent other values). A `ValueRef` object (obviously) does not contain the value itself.</span>

<span class="sd">    There are four different ValueRef type that are relevant for pipelines:</span>

<span class="sd">    - [kiara.pipeline.values.StepInputRef][]: an input to a step</span>
<span class="sd">    - [kiara.pipeline.values.StepOutputRef][]: an output of a step</span>
<span class="sd">    - [kiara.pipeline.values.PipelineInputRef][]: an input to a pipeline</span>
<span class="sd">    - [kiara.pipeline.values.PipelineOutputRef][]: an output for a pipeline</span>

<span class="sd">    Several `ValueRef` objects can target the same value, for example a step output and a connected step input would</span>
<span class="sd">    reference the same `Value` (in most cases)..</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">allow_mutation</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>

    <span class="n">_id</span><span class="p">:</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">)</span>
    <span class="n">value_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span>
    <span class="c1"># pipeline_id: str</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_id</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">step_id</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;step_id&quot;</span><span class="p">):</span>
            <span class="n">step_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; step_id=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(value_name=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">camel_case_to_snake_case</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">5</span><span class="p">],</span> <span class="n">repl</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">













  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.values.ValueRef.__eq__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.values.ValueRef.__eq__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return self==value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_id</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.values.ValueRef.__hash__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.values.ValueRef.__hash__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return hash(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.values.ValueRef.__repr__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.values.ValueRef.__repr__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return repr(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">step_id</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;step_id&quot;</span><span class="p">):</span>
        <span class="n">step_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; step_id=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(value_name=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.values.ValueRef.__str__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.values.ValueRef.__str__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return str(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">camel_case_to_snake_case</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">5</span><span class="p">],</span> <span class="n">repl</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.processing" class="doc doc-heading">
        <code>processing</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.processing" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="kiara.processing.Job" class="doc doc-heading">
        <code>
Job            (<a class="autorefs autorefs-internal" title="kiara.processing.ProcessingInfo" href="../processing/__init__/#kiara.processing.ProcessingInfo">ProcessingInfo</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.processing.Job" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/processing/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Job</span><span class="p">(</span><span class="n">ProcessingInfo</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_event_msg</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="s2">&quot;Job&quot;</span><span class="p">):</span>

        <span class="n">topic</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

        <span class="n">payload</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">job</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">payload</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">use_enum_values</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">_exception</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="n">pipeline_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The id of the pipeline this jobs runs for.&quot;</span><span class="p">)</span>
    <span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name/type of the pipeline.&quot;</span><span class="p">)</span>
    <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The id of the step within the pipeline.&quot;</span><span class="p">)</span>

    <span class="n">inputs</span><span class="p">:</span> <span class="n">PipelineValuesInfo</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The input values.&quot;</span><span class="p">)</span>
    <span class="n">outputs</span><span class="p">:</span> <span class="n">PipelineValuesInfo</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The output values.&quot;</span><span class="p">)</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">JobStatus</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The current status of the job.&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">JobStatus</span><span class="o">.</span><span class="n">CREATED</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">error</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Potential error message.&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">exception</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exception</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">runtime</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">started</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">finished</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">runtime</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">finished</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">started</span>
        <span class="k">return</span> <span class="n">runtime</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_validate_status</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Status must be a status string, or an integer between 0 and 100.&quot;</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">v</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.Job.error" class="doc doc-heading">
<code class="highlight language-python"><span class="n">error</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.processing.Job.error" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Potential error message.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.Job.inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">inputs</span><span class="p">:</span> <span class="n">PipelineValuesInfo</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.processing.Job.inputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The input values.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.Job.outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">outputs</span><span class="p">:</span> <span class="n">PipelineValuesInfo</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.processing.Job.outputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The output values.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.Job.pipeline_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.processing.Job.pipeline_id" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The id of the pipeline this jobs runs for.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.Job.pipeline_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.processing.Job.pipeline_name" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The name/type of the pipeline.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.Job.status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">status</span><span class="p">:</span> <span class="n">JobStatus</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.processing.Job.status" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The current status of the job.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.Job.step_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.processing.Job.step_id" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The id of the step within the pipeline.</p>
    </div>

  </div>












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.processing.JobLog" class="doc doc-heading">
        <code>
JobLog            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.processing.JobLog" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/processing/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">JobLog</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>

    <span class="n">log</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">LogMessage</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The logs for this job.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span>
    <span class="p">)</span>
    <span class="n">percent_finished</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Describes how much of the job is finished. A negative number means the module does not support progress tracking.&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">log_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">):</span>

        <span class="n">_msg</span> <span class="o">=</span> <span class="n">LogMessage</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span> <span class="n">log_level</span><span class="o">=</span><span class="n">log_level</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">)]</span> <span class="o">=</span> <span class="n">_msg</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.JobLog.log" class="doc doc-heading">
<code class="highlight language-python"><span class="n">log</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">LogMessage</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.processing.JobLog.log" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The logs for this job.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.JobLog.percent_finished" class="doc doc-heading">
<code class="highlight language-python"><span class="n">percent_finished</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.processing.JobLog.percent_finished" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Describes how much of the job is finished. A negative number means the module does not support progress tracking.</p>
    </div>

  </div>











  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.processing.JobStatus" class="doc doc-heading">
        <code>
JobStatus            (<span title="enum.Enum">Enum</span>)
        </code>



<a href="#kiara.processing.JobStatus" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>An enumeration.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/processing/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">JobStatus</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>

    <span class="n">CREATED</span> <span class="o">=</span> <span class="s2">&quot;__job_created__&quot;</span>
    <span class="n">STARTED</span> <span class="o">=</span> <span class="s2">&quot;__job_started__&quot;</span>
    <span class="n">SUCCESS</span> <span class="o">=</span> <span class="s2">&quot;__job_success__&quot;</span>
    <span class="n">FAILED</span> <span class="o">=</span> <span class="s2">&quot;__job_failed__&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.processing.LogMessage" class="doc doc-heading">
        <code>
LogMessage            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.processing.LogMessage" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/processing/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">LogMessage</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>

    <span class="n">timestamp</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The time the message was logged.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span>
    <span class="p">)</span>
    <span class="n">log_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The log level.&quot;</span><span class="p">)</span>
    <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The log message&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.LogMessage.log_level" class="doc doc-heading">
<code class="highlight language-python"><span class="n">log_level</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.processing.LogMessage.log_level" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The log level.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.LogMessage.msg" class="doc doc-heading">
<code class="highlight language-python"><span class="n">msg</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.processing.LogMessage.msg" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The log message</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.LogMessage.timestamp" class="doc doc-heading">
<code class="highlight language-python"><span class="n">timestamp</span><span class="p">:</span> <span class="n">datetime</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.processing.LogMessage.timestamp" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The time the message was logged.</p>
    </div>

  </div>










  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.processing.ProcessingInfo" class="doc doc-heading">
        <code>
ProcessingInfo            (<a class="autorefs autorefs-internal" title="kiara.metadata.MetadataModel" href="../metadata/__init__/#kiara.metadata.MetadataModel">MetadataModel</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.processing.ProcessingInfo" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/processing/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ProcessingInfo</span><span class="p">(</span><span class="n">MetadataModel</span><span class="p">):</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The id of the job.&quot;</span><span class="p">)</span>
    <span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The module type name.&quot;</span><span class="p">)</span>
    <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The module configuration.&quot;</span>
    <span class="p">)</span>
    <span class="n">module_doc</span><span class="p">:</span> <span class="n">DocumentationMetadataModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Documentation for the module that runs the job.&quot;</span>
    <span class="p">)</span>
    <span class="n">job_log</span><span class="p">:</span> <span class="n">JobLog</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Details about the job progress.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="n">JobLog</span>
    <span class="p">)</span>
    <span class="n">submitted</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;When the job was submitted.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span>
    <span class="p">)</span>
    <span class="n">started</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;When the job was started.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>
    <span class="n">finished</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;When the job was finished.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;instance.job_info&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.ProcessingInfo.finished" class="doc doc-heading">
<code class="highlight language-python"><span class="n">finished</span><span class="p">:</span> <span class="n">datetime</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.processing.ProcessingInfo.finished" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>When the job was finished.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.ProcessingInfo.id" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.processing.ProcessingInfo.id" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The id of the job.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.ProcessingInfo.job_log" class="doc doc-heading">
<code class="highlight language-python"><span class="n">job_log</span><span class="p">:</span> <span class="n">JobLog</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.processing.ProcessingInfo.job_log" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Details about the job progress.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.ProcessingInfo.module_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">module_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.processing.ProcessingInfo.module_config" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The module configuration.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.ProcessingInfo.module_doc" class="doc doc-heading">
<code class="highlight language-python"><span class="n">module_doc</span><span class="p">:</span> <span class="n">DocumentationMetadataModel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.processing.ProcessingInfo.module_doc" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Documentation for the module that runs the job.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.ProcessingInfo.module_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.processing.ProcessingInfo.module_type" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The module type name.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.ProcessingInfo.started" class="doc doc-heading">
<code class="highlight language-python"><span class="n">started</span><span class="p">:</span> <span class="n">datetime</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.processing.ProcessingInfo.started" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>When the job was started.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.processing.ProcessingInfo.submitted" class="doc doc-heading">
<code class="highlight language-python"><span class="n">submitted</span><span class="p">:</span> <span class="n">datetime</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.processing.ProcessingInfo.submitted" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>When the job was submitted.</p>
    </div>

  </div>












  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h3 id="kiara.processing.parallel" class="doc doc-heading">
        <code>parallel</code>



<a href="#kiara.processing.parallel" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="kiara.processing.parallel.ThreadPoolProcessorConfig" class="doc doc-heading">
        <code>
ThreadPoolProcessorConfig            (<span title="kiara.processing.processor.ProcessorConfig">ProcessorConfig</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.processing.parallel.ThreadPoolProcessorConfig" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/processing/parallel.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ThreadPoolProcessorConfig</span><span class="p">(</span><span class="n">ProcessorConfig</span><span class="p">):</span>

    <span class="n">max_workers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The max mount of workers for the thread pool.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.processing.parallel.ThreadPoolProcessorConfig.max_workers" class="doc doc-heading">
<code class="highlight language-python"><span class="n">max_workers</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.processing.parallel.ThreadPoolProcessorConfig.max_workers" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The max mount of workers for the thread pool.</p>
    </div>

  </div>










  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.processing.processor" class="doc doc-heading">
        <code>processor</code>



<a href="#kiara.processing.processor" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.processing.processor.ModuleProcessor" class="doc doc-heading">
        <code>
ModuleProcessor            (<span title="abc.ABC">ABC</span>)
        </code>



<a href="#kiara.processing.processor.ModuleProcessor" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/processing/processor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ModuleProcessor</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_config</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="n">ProcessorConfig</span><span class="p">],</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ModuleProcessor&quot;</span><span class="p">:</span>

        <span class="kn">from</span> <span class="nn">kiara.processing.parallel</span> <span class="kn">import</span> <span class="n">ThreadPoolProcessorConfig</span>
        <span class="kn">from</span> <span class="nn">kiara.processing.synchronous</span> <span class="kn">import</span> <span class="n">SynchronousProcessorConfig</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="p">:</span>
            <span class="n">config</span> <span class="o">=</span> <span class="n">SynchronousProcessorConfig</span><span class="p">(</span><span class="n">module_processor_type</span><span class="o">=</span><span class="s2">&quot;synchronous&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="n">processor_type</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;module_processor_type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">processor_type</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No &#39;module_processor_type&#39; provided: </span><span class="si">{config}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">processor_type</span> <span class="o">==</span> <span class="s2">&quot;synchronous&quot;</span><span class="p">:</span>
                <span class="n">config</span> <span class="o">=</span> <span class="n">SynchronousProcessorConfig</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">processor_type</span> <span class="o">==</span> <span class="s2">&quot;multi-threaded&quot;</span><span class="p">:</span>
                <span class="n">config</span> <span class="o">=</span> <span class="n">ThreadPoolProcessorConfig</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid processor type: </span><span class="si">{</span><span class="n">processor_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">SynchronousProcessorConfig</span><span class="p">):</span>
            <span class="kn">from</span> <span class="nn">kiara.processing.synchronous</span> <span class="kn">import</span> <span class="n">SynchronousProcessor</span>

            <span class="n">proc</span><span class="p">:</span> <span class="n">ModuleProcessor</span> <span class="o">=</span> <span class="n">SynchronousProcessor</span><span class="p">(</span>
                <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;module_processor_type&quot;</span><span class="p">})</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">ThreadPoolProcessorConfig</span><span class="p">):</span>
            <span class="kn">from</span> <span class="nn">kiara.processing.parallel</span> <span class="kn">import</span> <span class="n">ThreadPoolProcessor</span>

            <span class="n">proc</span> <span class="o">=</span> <span class="n">ThreadPoolProcessor</span><span class="p">(</span>
                <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;module_processor_type&quot;</span><span class="p">})</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid processor config class: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">proc</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">zmq_context</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Context</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara.kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="n">Kiara</span> <span class="o">=</span> <span class="n">kiara</span>

        <span class="k">if</span> <span class="n">zmq_context</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">zmq_context</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zmq_context</span><span class="p">:</span> <span class="n">Context</span> <span class="o">=</span> <span class="n">zmq_context</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="p">:</span> <span class="n">Socket</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zmq_context</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">zmq</span><span class="o">.</span><span class="n">PUB</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;inproc://kiara_in&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_jobs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Job</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_finished_jobs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Job</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># TODO: clean up those?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepInputs</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepOutputs</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">get_job_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Job</span><span class="p">]:</span>

        <span class="k">if</span> <span class="n">job_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_jobs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_jobs</span><span class="p">[</span><span class="n">job_id</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">job_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finished_jobs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finished_jobs</span><span class="p">[</span><span class="n">job_id</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">pipeline_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">module</span><span class="p">:</span> <span class="s2">&quot;KiaraModule&quot;</span><span class="p">,</span>
        <span class="n">inputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span>
        <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>

        <span class="n">job_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

        <span class="c1"># TODO: make snapshot of current state of data?</span>

        <span class="n">full_inputs</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">create_full_inputs</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>
        <span class="n">wrapped_inputs</span> <span class="o">=</span> <span class="n">StepInputs</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">full_inputs</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">)</span>
        <span class="n">wrapped_outputs</span> <span class="o">=</span> <span class="n">StepOutputs</span><span class="p">(</span><span class="n">outputs</span><span class="o">=</span><span class="n">outputs</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_inputs</span><span class="p">[</span><span class="n">job_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">wrapped_inputs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span><span class="p">[</span><span class="n">job_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">wrapped_outputs</span>

        <span class="n">job</span> <span class="o">=</span> <span class="n">Job</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">job_id</span><span class="p">,</span>
            <span class="n">pipeline_id</span><span class="o">=</span><span class="n">pipeline_id</span><span class="p">,</span>
            <span class="n">pipeline_name</span><span class="o">=</span><span class="n">pipeline_name</span><span class="p">,</span>
            <span class="n">step_id</span><span class="o">=</span><span class="n">step_id</span><span class="p">,</span>
            <span class="n">module_type</span><span class="o">=</span><span class="n">module</span><span class="o">.</span><span class="n">_module_type_id</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="n">module_config</span><span class="o">=</span><span class="n">module</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">dict</span><span class="p">(),</span>
            <span class="n">module_doc</span><span class="o">=</span><span class="n">module</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span><span class="o">.</span><span class="n">documentation</span><span class="p">,</span>
            <span class="n">inputs</span><span class="o">=</span><span class="n">PipelineValuesInfo</span><span class="o">.</span><span class="n">from_value_set</span><span class="p">(</span><span class="n">inputs</span><span class="p">),</span>
            <span class="n">outputs</span><span class="o">=</span><span class="n">PipelineValuesInfo</span><span class="o">.</span><span class="n">from_value_set</span><span class="p">(</span><span class="n">outputs</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">job</span><span class="o">.</span><span class="n">job_log</span><span class="o">.</span><span class="n">add_log</span><span class="p">(</span><span class="s2">&quot;job created&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_jobs</span><span class="p">[</span><span class="n">job_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">job</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">send_string</span><span class="p">(</span><span class="n">Job</span><span class="o">.</span><span class="n">create_event_msg</span><span class="p">(</span><span class="n">job</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span>
                <span class="n">job_id</span><span class="o">=</span><span class="n">job_id</span><span class="p">,</span>
                <span class="n">module</span><span class="o">=</span><span class="n">module</span><span class="p">,</span>
                <span class="n">inputs</span><span class="o">=</span><span class="n">wrapped_inputs</span><span class="p">,</span>
                <span class="n">outputs</span><span class="o">=</span><span class="n">wrapped_outputs</span><span class="p">,</span>
                <span class="n">job_log</span><span class="o">=</span><span class="n">job</span><span class="o">.</span><span class="n">job_log</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">return</span> <span class="n">job_id</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">job</span><span class="o">.</span><span class="n">error</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="kn">import</span> <span class="nn">traceback</span>

                    <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">KiaraProcessingException</span><span class="p">):</span>
                <span class="n">e</span><span class="o">.</span><span class="n">_module</span> <span class="o">=</span> <span class="n">module</span>
                <span class="n">e</span><span class="o">.</span><span class="n">_inputs</span> <span class="o">=</span> <span class="n">inputs</span>
                <span class="n">job</span><span class="o">.</span><span class="n">_exception</span> <span class="o">=</span> <span class="n">e</span>
                <span class="k">raise</span> <span class="n">e</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">kpe</span> <span class="o">=</span> <span class="n">KiaraProcessingException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">module</span><span class="o">=</span><span class="n">module</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">)</span>
                <span class="n">job</span><span class="o">.</span><span class="n">_exception</span> <span class="o">=</span> <span class="n">kpe</span>
                <span class="k">raise</span> <span class="n">kpe</span>

    <span class="k">def</span> <span class="nf">job_status_updated</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">JobStatus</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]</span>
    <span class="p">):</span>

        <span class="n">job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_jobs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">job_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">job</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t retrieve active job with id &#39;</span><span class="si">{</span><span class="n">job_id</span><span class="si">}</span><span class="s2">&#39;, no such job registered.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">JobStatus</span><span class="o">.</span><span class="n">SUCCESS</span><span class="p">:</span>
            <span class="n">job</span><span class="o">.</span><span class="n">job_log</span><span class="o">.</span><span class="n">add_log</span><span class="p">(</span><span class="s2">&quot;job finished successfully&quot;</span><span class="p">)</span>
            <span class="n">job</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">JobStatus</span><span class="o">.</span><span class="n">SUCCESS</span>
            <span class="n">job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_jobs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
            <span class="n">job</span><span class="o">.</span><span class="n">finished</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_finished_jobs</span><span class="p">[</span><span class="n">job_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">job</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">send_string</span><span class="p">(</span><span class="n">Job</span><span class="o">.</span><span class="n">create_event_msg</span><span class="p">(</span><span class="n">job</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">status</span> <span class="o">==</span> <span class="n">JobStatus</span><span class="o">.</span><span class="n">FAILED</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">)):</span>
            <span class="n">job</span><span class="o">.</span><span class="n">job_log</span><span class="o">.</span><span class="n">add_log</span><span class="p">(</span><span class="s2">&quot;job failed&quot;</span><span class="p">)</span>
            <span class="n">job</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">JobStatus</span><span class="o">.</span><span class="n">FAILED</span>
            <span class="n">job</span><span class="o">.</span><span class="n">finished</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">job</span><span class="o">.</span><span class="n">error</span> <span class="o">=</span> <span class="n">status</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">):</span>
                <span class="n">job</span><span class="o">.</span><span class="n">error</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
                <span class="n">job</span><span class="o">.</span><span class="n">_exception</span> <span class="o">=</span> <span class="n">status</span>
            <span class="n">job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_jobs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_finished_jobs</span><span class="p">[</span><span class="n">job_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">job</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">send_string</span><span class="p">(</span><span class="n">Job</span><span class="o">.</span><span class="n">create_event_msg</span><span class="p">(</span><span class="n">job</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">status</span> <span class="o">==</span> <span class="n">JobStatus</span><span class="o">.</span><span class="n">STARTED</span><span class="p">:</span>
            <span class="n">job</span><span class="o">.</span><span class="n">job_log</span><span class="o">.</span><span class="n">add_log</span><span class="p">(</span><span class="s2">&quot;job started&quot;</span><span class="p">)</span>
            <span class="n">job</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">JobStatus</span><span class="o">.</span><span class="n">STARTED</span>
            <span class="n">job</span><span class="o">.</span><span class="n">started</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_socket</span><span class="o">.</span><span class="n">send_string</span><span class="p">(</span><span class="n">Job</span><span class="o">.</span><span class="n">create_event_msg</span><span class="p">(</span><span class="n">job</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid value for status: </span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">sync_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">job_ids</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">j_id</span> <span class="ow">in</span> <span class="n">job_ids</span><span class="p">:</span>

            <span class="n">job_details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_job_details</span><span class="p">(</span><span class="n">j_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">job_details</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t sync outputs, no job with id: </span><span class="si">{</span><span class="n">j_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">job_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inputs</span><span class="p">[</span><span class="n">j_id</span><span class="p">]</span>
            <span class="n">proc_info</span> <span class="o">=</span> <span class="n">ProcessingInfo</span><span class="p">(</span><span class="o">**</span><span class="n">job_details</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
            <span class="n">input_infos</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueInfo</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">get_info</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">job_inputs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="c1"># for field_name, value in d.items():</span>
            <span class="n">value_lineage</span> <span class="o">=</span> <span class="n">ValueLineage</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
                <span class="n">module_type</span><span class="o">=</span><span class="n">job_details</span><span class="o">.</span><span class="n">module_type</span><span class="p">,</span>
                <span class="n">module_config</span><span class="o">=</span><span class="n">job_details</span><span class="o">.</span><span class="n">module_config</span><span class="p">,</span>
                <span class="n">module_doc</span><span class="o">=</span><span class="n">job_details</span><span class="o">.</span><span class="n">module_doc</span><span class="p">,</span>
                <span class="c1"># output_name=field_name,</span>
                <span class="n">inputs</span><span class="o">=</span><span class="n">input_infos</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs</span><span class="p">[</span><span class="n">j_id</span><span class="p">]</span>
            <span class="n">d</span><span class="o">.</span><span class="n">sync</span><span class="p">(</span><span class="n">proccessing_info</span><span class="o">=</span><span class="n">proc_info</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="n">value_lineage</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">wait_for</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">job_ids</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sync_outputs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Wait for the jobs with the specified ids, also optionally sync their outputs with the pipeline value state.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">job_id</span> <span class="ow">in</span> <span class="n">job_ids</span><span class="p">:</span>
            <span class="n">job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_job_details</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">job</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t find job with id: </span><span class="si">{</span><span class="n">job_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">job</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">JobStatus</span><span class="o">.</span><span class="n">SUCCESS</span><span class="p">:</span>
                <span class="n">job</span><span class="o">.</span><span class="n">job_log</span><span class="o">.</span><span class="n">percent_finished</span> <span class="o">=</span> <span class="mi">100</span>

        <span class="k">if</span> <span class="n">sync_outputs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sync_outputs</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">module</span><span class="p">:</span> <span class="s2">&quot;KiaraModule&quot;</span><span class="p">,</span>
        <span class="n">inputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span>
        <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span>
        <span class="n">job_log</span><span class="p">:</span> <span class="n">JobLog</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_wait_for</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">job_ids</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>

        <span class="k">pass</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">
















  <div class="doc doc-object doc-method">



<h5 id="kiara.processing.processor.ModuleProcessor.wait_for" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_for</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">job_ids</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">sync_outputs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#kiara.processing.processor.ModuleProcessor.wait_for" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Wait for the jobs with the specified ids, also optionally sync their outputs with the pipeline value state.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/processing/processor.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">wait_for</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">job_ids</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sync_outputs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Wait for the jobs with the specified ids, also optionally sync their outputs with the pipeline value state.&quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">job_id</span> <span class="ow">in</span> <span class="n">job_ids</span><span class="p">:</span>
        <span class="n">job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_job_details</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">job</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t find job with id: </span><span class="si">{</span><span class="n">job_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">job</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">JobStatus</span><span class="o">.</span><span class="n">SUCCESS</span><span class="p">:</span>
            <span class="n">job</span><span class="o">.</span><span class="n">job_log</span><span class="o">.</span><span class="n">percent_finished</span> <span class="o">=</span> <span class="mi">100</span>

    <span class="k">if</span> <span class="n">sync_outputs</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sync_outputs</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>








  </div>

    </div>

  </div>





  </div>

    </div>

  </div>





  <div class="doc doc-object doc-module">



<h2 id="kiara.utils" class="doc doc-heading">
        <code>utils</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.utils" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">














  <div class="doc doc-object doc-function">



<h3 id="kiara.utils.check_valid_field_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_valid_field_names</span><span class="p">(</span><span class="o">*</span><span class="n">field_names</span><span class="p">)</span></code>


<a href="#kiara.utils.check_valid_field_names" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Check whether the provided field names are all valid.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[str]</code></td>
      <td><p>an iterable of strings with invalid field names</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/utils/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_valid_field_names</span><span class="p">(</span><span class="o">*</span><span class="n">field_names</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Check whether the provided field names are all valid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        an iterable of strings with invalid field names</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">field_names</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">INVALID_VALUE_NAMES</span> <span class="ow">or</span> <span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)]</span>
</code></pre></div>
        </details>
    </div>

  </div>








  <div class="doc doc-object doc-function">



<h3 id="kiara.utils.find_free_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_free_id</span><span class="p">(</span><span class="n">stem</span><span class="p">,</span> <span class="n">current_ids</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;_&#39;</span><span class="p">)</span></code>


<a href="#kiara.utils.find_free_id" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Find a free var (or other name) based on a stem string, based on a list of provided existing names.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>stem</code></td>
        <td><code>str</code></td>
        <td><p>the base string to use</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>current_ids</code></td>
        <td><code>Iterable[str]</code></td>
        <td><p>currently existing names</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>method</code></td>
        <td><code>str</code></td>
        <td><p>the method to create new names (allowed: 'count' -- for now)</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>method_args</code></td>
        <td><code>dict</code></td>
        <td><p>prototing_config for the creation method</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>a free name</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/utils/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_free_id</span><span class="p">(</span>
    <span class="n">stem</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">current_ids</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;_&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Find a free var (or other name) based on a stem string, based on a list of provided existing names.</span>

<span class="sd">    Args:</span>
<span class="sd">        stem (str): the base string to use</span>
<span class="sd">        current_ids (Iterable[str]): currently existing names</span>
<span class="sd">        method (str): the method to create new names (allowed: &#39;count&#39; -- for now)</span>
<span class="sd">        method_args (dict): prototing_config for the creation method</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: a free name</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">start_count</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">stem</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">current_ids</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">stem</span>

    <span class="n">i</span> <span class="o">=</span> <span class="n">start_count</span>

    <span class="c1"># new_name = None</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">new_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">stem</span><span class="si">}{</span><span class="n">sep</span><span class="si">}{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">new_name</span> <span class="ow">in</span> <span class="n">current_ids</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">continue</span>
        <span class="k">break</span>
    <span class="k">return</span> <span class="n">new_name</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kiara.utils.get_auto_workflow_alias" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_auto_workflow_alias</span><span class="p">(</span><span class="n">module_type</span><span class="p">,</span> <span class="n">use_incremental_ids</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#kiara.utils.get_auto_workflow_alias" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return an id for a workflow obj of a provided module class.</p>
<p>If 'use_incremental_ids' is set to True, a unique id is returned.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>module_type</code></td>
        <td><code>str</code></td>
        <td><p>the name of the module type</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>use_incremental_ids</code></td>
        <td><code>bool</code></td>
        <td><p>whether to return a unique (incremental) id</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>a module id</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/utils/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_auto_workflow_alias</span><span class="p">(</span><span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">use_incremental_ids</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return an id for a workflow obj of a provided module class.</span>

<span class="sd">    If &#39;use_incremental_ids&#39; is set to True, a unique id is returned.</span>

<span class="sd">    Args:</span>
<span class="sd">        module_type (str): the name of the module type</span>
<span class="sd">        use_incremental_ids (bool): whether to return a unique (incremental) id</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: a module id</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">use_incremental_ids</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">module_type</span>

    <span class="n">nr</span> <span class="o">=</span> <span class="n">_AUTO_MODULE_ID</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">module_type</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">_AUTO_MODULE_ID</span><span class="p">[</span><span class="n">module_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">nr</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">module_type</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">nr</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>













  <div class="doc doc-object doc-module">



<h3 id="kiara.utils.class_loading" class="doc doc-heading">
        <code>class_loading</code>



<a href="#kiara.utils.class_loading" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">












  <div class="doc doc-object doc-function">



<h4 id="kiara.utils.class_loading.find_all_kiara_modules" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_all_kiara_modules</span><span class="p">()</span></code>


<a href="#kiara.utils.class_loading.find_all_kiara_modules" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Find all <a class="autorefs autorefs-internal" href="../module/#kiara.module.KiaraModule">KiaraModule</a> subclasses via package entry points.</p>
<p>TODO</p>

        <details class="quote">
          <summary>Source code in <code>kiara/utils/class_loading.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_all_kiara_modules</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Find all [KiaraModule][kiara.module.KiaraModule] subclasses via package entry points.</span>

<span class="sd">    TODO</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">from</span> <span class="nn">kiara.module</span> <span class="kn">import</span> <span class="n">KiaraModule</span>

    <span class="n">modules</span> <span class="o">=</span> <span class="n">load_all_subclasses_for_entry_point</span><span class="p">(</span>
        <span class="n">entry_point_name</span><span class="o">=</span><span class="s2">&quot;kiara.modules&quot;</span><span class="p">,</span>
        <span class="n">base_class</span><span class="o">=</span><span class="n">KiaraModule</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
        <span class="n">set_id_attribute</span><span class="o">=</span><span class="s2">&quot;_module_type_name&quot;</span><span class="p">,</span>
        <span class="n">remove_namespace_tokens</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;core.&quot;</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># need to test this, since I couldn&#39;t add an abstract method to the KiaraModule class itself (mypy complained because it is potentially overloaded)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s2">&quot;process&quot;</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Ignoring module class &#39;</span><span class="si">{</span><span class="bp">cls</span><span class="si">}</span><span class="s2">&#39;: no &#39;process&#39; method.&quot;</span>
            <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="c1"># TODO: check signature of process method</span>

        <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">):</span>
            <span class="n">tokens</span> <span class="o">=</span> <span class="n">k</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">k</span> <span class="o">=</span> <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">k</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>

        <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-function">



<h4 id="kiara.utils.class_loading.find_all_metadata_models" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_all_metadata_models</span><span class="p">()</span></code>


<a href="#kiara.utils.class_loading.find_all_metadata_models" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Find all <a class="autorefs autorefs-internal" href="../module/#kiara.module.KiaraModule">KiaraModule</a> subclasses via package entry points.</p>
<p>TODO</p>

        <details class="quote">
          <summary>Source code in <code>kiara/utils/class_loading.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_all_metadata_models</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;MetadataModel&quot;</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Find all [KiaraModule][kiara.module.KiaraModule] subclasses via package entry points.</span>

<span class="sd">    TODO</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">load_all_subclasses_for_entry_point</span><span class="p">(</span>
        <span class="n">entry_point_name</span><span class="o">=</span><span class="s2">&quot;kiara.metadata_models&quot;</span><span class="p">,</span>
        <span class="n">base_class</span><span class="o">=</span><span class="n">MetadataModel</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
        <span class="n">set_id_attribute</span><span class="o">=</span><span class="s2">&quot;_metadata_key&quot;</span><span class="p">,</span>
        <span class="n">remove_namespace_tokens</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;core.&quot;</span><span class="p">],</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-function">



<h4 id="kiara.utils.class_loading.find_all_value_types" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_all_value_types</span><span class="p">()</span></code>


<a href="#kiara.utils.class_loading.find_all_value_types" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Find all <a class="autorefs autorefs-internal" href="../module/#kiara.module.KiaraModule">KiaraModule</a> subclasses via package entry points.</p>
<p>TODO</p>

        <details class="quote">
          <summary>Source code in <code>kiara/utils/class_loading.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_all_value_types</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="s2">&quot;ValueType&quot;</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Find all [KiaraModule][kiara.module.KiaraModule] subclasses via package entry points.</span>

<span class="sd">    TODO</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">all_value_types</span> <span class="o">=</span> <span class="n">load_all_subclasses_for_entry_point</span><span class="p">(</span>
        <span class="n">entry_point_name</span><span class="o">=</span><span class="s2">&quot;kiara.value_types&quot;</span><span class="p">,</span>
        <span class="n">base_class</span><span class="o">=</span><span class="n">ValueType</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
        <span class="n">set_id_attribute</span><span class="o">=</span><span class="s2">&quot;_value_type_name&quot;</span><span class="p">,</span>
        <span class="n">remove_namespace_tokens</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">invalid</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">all_value_types</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">invalid</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid value type name(s), type names can&#39;t contain &#39;.&#39;: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">invalid</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">all_value_types</span>
</code></pre></div>
        </details>
    </div>

  </div>







  <div class="doc doc-object doc-function">



<h4 id="kiara.utils.class_loading.find_subclasses_under" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_subclasses_under</span><span class="p">(</span><span class="n">base_class</span><span class="p">,</span> <span class="n">module</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">remove_namespace_tokens</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">module_name_func</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#kiara.utils.class_loading.find_subclasses_under" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Find all (non-abstract) subclasses of a base class that live under a module (recursively).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>base_class</code></td>
        <td><code>Type[~SUBCLASS_TYPE]</code></td>
        <td><p>the parent class</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>module</code></td>
        <td><code>Union[str, module]</code></td>
        <td><p>the module to search</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>prefix</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>a string to use as a result items namespace prefix, defaults to an empty string, use 'None' to indicate the module path should be used</p></td>
        <td><code>&#39;&#39;</code></td>
      </tr>
      <tr>
        <td><code>remove_namespace_tokens</code></td>
        <td><code>Optional[Iterable[str]]</code></td>
        <td><p>a list of strings to remove from module names when autogenerating subclass ids, and prefix is None</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Mapping[str, Type[~SUBCLASS_TYPE]]</code></td>
      <td><p>a map containing the (fully namespaced) id of the subclass as key, and the actual class object as value</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/utils/class_loading.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_subclasses_under</span><span class="p">(</span>
    <span class="n">base_class</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">SUBCLASS_TYPE</span><span class="p">],</span>
    <span class="n">module</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ModuleType</span><span class="p">],</span>
    <span class="n">prefix</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">remove_namespace_tokens</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">module_name_func</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">SUBCLASS_TYPE</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Find all (non-abstract) subclasses of a base class that live under a module (recursively).</span>

<span class="sd">    Arguments:</span>
<span class="sd">        base_class: the parent class</span>
<span class="sd">        module: the module to search</span>
<span class="sd">        prefix: a string to use as a result items namespace prefix, defaults to an empty string, use &#39;None&#39; to indicate the module path should be used</span>
<span class="sd">        remove_namespace_tokens: a list of strings to remove from module names when autogenerating subclass ids, and prefix is None</span>

<span class="sd">    Returns:</span>
<span class="sd">        a map containing the (fully namespaced) id of the subclass as key, and the actual class object as value</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="s2">&quot;frozen&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Pyinstaller bundling not supported yet.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>

    <span class="n">_import_modules_recursively</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>

    <span class="n">subclasses</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">SUBCLASS_TYPE</span><span class="p">]]</span> <span class="o">=</span> <span class="n">_get_all_subclasses</span><span class="p">(</span>
        <span class="n">base_class</span>
    <span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">sc</span> <span class="ow">in</span> <span class="n">subclasses</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">sc</span><span class="o">.</span><span class="vm">__module__</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">module</span><span class="o">.</span><span class="vm">__name__</span><span class="p">):</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isabstract</span><span class="p">(</span><span class="n">sc</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                <span class="c1"># import traceback</span>
                <span class="c1"># traceback.print_stack()</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Ignoring abstract subclass: </span><span class="si">{</span><span class="n">sc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Ignoring abstract subclass: </span><span class="si">{</span><span class="n">sc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="n">module_name_func</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">module_name_func</span> <span class="o">=</span> <span class="n">_get_subclass_name</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">module_name_func</span><span class="p">(</span><span class="n">sc</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="vm">__module__</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">module</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>  <span class="c1"># noqa</span>

        <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
            <span class="n">full_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">full_name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="k">if</span> <span class="n">prefix</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span>
            <span class="k">if</span> <span class="n">remove_namespace_tokens</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">rnt</span> <span class="ow">in</span> <span class="n">remove_namespace_tokens</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">prefix</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">rnt</span><span class="p">):</span>
                        <span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span><span class="p">[</span><span class="mi">0</span> <span class="p">:</span> <span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">rnt</span><span class="p">)]</span>  <span class="c1"># noqa</span>

        <span class="k">if</span> <span class="n">prefix</span><span class="p">:</span>
            <span class="n">full_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">full_name</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">result</span><span class="p">[</span><span class="n">full_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">sc</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-function">



<h4 id="kiara.utils.class_loading.load_all_subclasses_for_entry_point" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_all_subclasses_for_entry_point</span><span class="p">(</span><span class="n">entry_point_name</span><span class="p">,</span> <span class="n">base_class</span><span class="p">,</span> <span class="n">set_id_attribute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">remove_namespace_tokens</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#kiara.utils.class_loading.load_all_subclasses_for_entry_point" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Find all subclasses of a base class via package entry points.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>entry_point_name</code></td>
        <td><code>str</code></td>
        <td><p>the entry point name to query entries for</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>base_class</code></td>
        <td><code>Type[~SUBCLASS_TYPE]</code></td>
        <td><p>the base class to look for</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>set_id_attribute</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>whether to set the entry point id as attribute to the class, if None, no id attribute will be set, if a string, the attribute with that name will be set</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>remove_namespace_tokens</code></td>
        <td><code>Union[Iterable[str], bool]</code></td>
        <td><p>a list of strings to remove from module names when autogenerating subclass ids, and prefix is None, or a boolean in which case all or none namespaces will be removed</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>      <p>TODO</p>

        <details class="quote">
          <summary>Source code in <code>kiara/utils/class_loading.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">load_all_subclasses_for_entry_point</span><span class="p">(</span>
    <span class="n">entry_point_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">base_class</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">SUBCLASS_TYPE</span><span class="p">],</span>
    <span class="n">set_id_attribute</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">remove_namespace_tokens</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">bool</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">SUBCLASS_TYPE</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Find all subclasses of a base class via package entry points.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        entry_point_name: the entry point name to query entries for</span>
<span class="sd">        base_class: the base class to look for</span>
<span class="sd">        set_id_attribute: whether to set the entry point id as attribute to the class, if None, no id attribute will be set, if a string, the attribute with that name will be set</span>
<span class="sd">        remove_namespace_tokens: a list of strings to remove from module names when autogenerating subclass ids, and prefix is None, or a boolean in which case all or none namespaces will be removed</span>

<span class="sd">    TODO</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">log2</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;stevedore&quot;</span><span class="p">)</span>
    <span class="n">out_hdlr</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
    <span class="n">out_hdlr</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">entry_point_name</span><span class="si">}</span><span class="s2"> plugin search error -&gt; %(message)s&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">out_hdlr</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
    <span class="n">log2</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">out_hdlr</span><span class="p">)</span>
    <span class="n">log2</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Finding </span><span class="si">{</span><span class="n">entry_point_name</span><span class="si">}</span><span class="s2"> items from search paths...&quot;</span><span class="p">)</span>

    <span class="n">mgr</span> <span class="o">=</span> <span class="n">ExtensionManager</span><span class="p">(</span>
        <span class="n">namespace</span><span class="o">=</span><span class="n">entry_point_name</span><span class="p">,</span>
        <span class="n">invoke_on_load</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">propagate_map_exceptions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">result_entrypoints</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">result_dynamic</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">plugin</span> <span class="ow">in</span> <span class="n">mgr</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">name</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">plugin</span><span class="o">.</span><span class="n">plugin</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">plugin</span><span class="o">.</span><span class="n">plugin</span><span class="p">,</span> <span class="n">base_class</span><span class="p">):</span>
            <span class="n">ep</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">entry_point</span>
            <span class="n">module_cls</span> <span class="o">=</span> <span class="n">ep</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">set_id_attribute</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">module_cls</span><span class="p">,</span> <span class="n">set_id_attribute</span><span class="p">):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module_cls</span><span class="p">,</span> <span class="n">set_id_attribute</span><span class="p">)</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                        <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Item id mismatch for type </span><span class="si">{</span><span class="n">entry_point_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">getattr</span><span class="p">(</span><span class="n">module_cls</span><span class="p">,</span> <span class="n">set_id_attribute</span><span class="p">)</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">, entry point key takes precedence: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">)&quot;</span>
                        <span class="p">)</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="n">module_cls</span><span class="p">,</span> <span class="n">set_id_attribute</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">module_cls</span><span class="p">,</span> <span class="n">set_id_attribute</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="n">result_entrypoints</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">module_cls</span>
        <span class="k">elif</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">plugin</span><span class="o">.</span><span class="n">plugin</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span>
            <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">plugin</span><span class="o">.</span><span class="n">plugin</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span>
            <span class="ow">and</span> <span class="n">callable</span><span class="p">(</span><span class="n">plugin</span><span class="o">.</span><span class="n">plugin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="p">)</span> <span class="ow">or</span> <span class="n">callable</span><span class="p">(</span><span class="n">plugin</span><span class="o">.</span><span class="n">plugin</span><span class="p">):</span>
            <span class="n">modules</span> <span class="o">=</span> <span class="n">_callable_wrapper</span><span class="p">(</span><span class="n">plugin</span><span class="o">.</span><span class="n">plugin</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">modules</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">if</span> <span class="n">_name</span> <span class="ow">in</span> <span class="n">result_dynamic</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Duplicate item name for type </span><span class="si">{</span><span class="n">entry_point_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">_name</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                <span class="n">result_dynamic</span><span class="p">[</span><span class="n">_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t load subclasses for entry point </span><span class="si">{</span><span class="n">entry_point_name</span><span class="si">}</span><span class="s2"> and base class </span><span class="si">{</span><span class="n">base_class</span><span class="si">}</span><span class="s2">: invalid plugin type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">plugin</span><span class="o">.</span><span class="n">plugin</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">result_dynamic</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">result_entrypoints</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicate item name for type </span><span class="si">{</span><span class="n">entry_point_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">result_entrypoints</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">SUBCLASS_TYPE</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">result_entrypoints</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

        <span class="k">if</span> <span class="n">remove_namespace_tokens</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">remove_namespace_tokens</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">k</span> <span class="o">=</span> <span class="n">k</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">remove_namespace_tokens</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">rnt</span> <span class="ow">in</span> <span class="n">remove_namespace_tokens</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">rnt</span><span class="p">):</span>
                        <span class="n">k</span> <span class="o">=</span> <span class="n">k</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">rnt</span><span class="p">)</span> <span class="p">:]</span>  <span class="c1"># noqa</span>

        <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">if</span> <span class="n">set_id_attribute</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; Check whether &#39;</span><span class="si">{</span><span class="n">v</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39; is missing the &#39;</span><span class="si">{</span><span class="n">set_id_attribute</span><span class="si">}</span><span class="s2">&#39; class attribute (in case this is a sub-class), or it&#39;s &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39; value is also set in another class?&quot;</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Duplicate item name for base class </span><span class="si">{</span><span class="n">base_class</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.utils.concurrency" class="doc doc-heading">
        <code>concurrency</code>



<a href="#kiara.utils.concurrency" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.utils.concurrency.ThreadSaveCounter" class="doc doc-heading">
        <code>
ThreadSaveCounter        </code>



<a href="#kiara.utils.concurrency.ThreadSaveCounter" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A thread-safe counter, can be used in kiara modules to update completion percentage.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/utils/concurrency.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ThreadSaveCounter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A thread-safe counter, can be used in kiara modules to update completion percentage.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_current</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">current</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current</span>

    <span class="k">def</span> <span class="nf">current_percent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>

        <span class="k">return</span> <span class="nb">int</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">/</span> <span class="n">total</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">increment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_current</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current</span>

    <span class="k">def</span> <span class="nf">decrement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_current</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">
















  </div>

    </div>

  </div>







  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h3 id="kiara.utils.modules" class="doc doc-heading">
        <code>modules</code>



<a href="#kiara.utils.modules" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">










  <div class="doc doc-object doc-function">



<h4 id="kiara.utils.modules.find_file_for_module" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_file_for_module</span><span class="p">(</span><span class="n">module_name</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#kiara.utils.modules.find_file_for_module" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Find the python file a module belongs to.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/utils/modules.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_file_for_module</span><span class="p">(</span>
    <span class="n">module_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Find the python file a module belongs to.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">kiara.kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

        <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

    <span class="n">m_cls</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">get_module_class</span><span class="p">(</span><span class="n">module_type</span><span class="o">=</span><span class="n">module_name</span><span class="p">)</span>
    <span class="n">python_module</span> <span class="o">=</span> <span class="n">m_cls</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span><span class="o">.</span><span class="n">python_class</span><span class="o">.</span><span class="n">get_module</span><span class="p">()</span>

    <span class="c1"># TODO: some sanity checks</span>
    <span class="n">module_file</span> <span class="o">=</span> <span class="n">python_module</span><span class="o">.</span><span class="vm">__file__</span>
    <span class="k">assert</span> <span class="n">module_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">module_file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;__init__.py&quot;</span><span class="p">):</span>
        <span class="n">extra_bit</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">python_module</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">)</span>
            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>
            <span class="o">+</span> <span class="s2">&quot;__init__.py&quot;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">extra_bit</span> <span class="o">=</span> <span class="n">python_module</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.py&quot;</span>
    <span class="n">python_file_path</span> <span class="o">=</span> <span class="n">module_file</span><span class="p">[</span><span class="mi">0</span> <span class="p">:</span> <span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">extra_bit</span><span class="p">)]</span>  <span class="c1"># noqa</span>

    <span class="k">return</span> <span class="n">python_file_path</span>
</code></pre></div>
        </details>
    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.utils.output" class="doc doc-heading">
        <code>output</code>



<a href="#kiara.utils.output" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h4 id="kiara.utils.output.OutputDetails" class="doc doc-heading">
        <code>
OutputDetails            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.utils.output.OutputDetails" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/utils/output.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">OutputDetails</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">):</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="s2">&quot;=&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;format=</span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;=&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;format=</span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
            <span class="n">output_details_dict</span> <span class="o">=</span> <span class="n">dict_from_cli_args</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t parse output detail config: invalid input type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
            <span class="p">)</span>

        <span class="n">output_details</span> <span class="o">=</span> <span class="n">OutputDetails</span><span class="p">(</span><span class="o">**</span><span class="n">output_details_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">output_details</span>

    <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The output format.&quot;</span><span class="p">)</span>
    <span class="n">target</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The output target.&quot;</span><span class="p">)</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Output configuration.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span>
    <span class="p">)</span>

    <span class="nd">@root_validator</span><span class="p">(</span><span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_set_defaults</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>

        <span class="n">target</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;target&quot;</span><span class="p">,</span> <span class="s2">&quot;terminal&quot;</span><span class="p">)</span>
        <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">target</span> <span class="o">==</span> <span class="s2">&quot;terminal&quot;</span><span class="p">:</span>
                <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;terminal&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">target</span> <span class="o">==</span> <span class="s2">&quot;file&quot;</span><span class="p">:</span>
                    <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ext</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">ext</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">]:</span>
                        <span class="nb">format</span> <span class="o">=</span> <span class="n">ext</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="nb">format</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="n">target</span><span class="p">,</span> <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">values</span><span class="p">)}</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.utils.output.OutputDetails.config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.utils.output.OutputDetails.config" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Output configuration.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.utils.output.OutputDetails.format" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">format</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.utils.output.OutputDetails.format" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The output format.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.utils.output.OutputDetails.target" class="doc doc-heading">
<code class="highlight language-python"><span class="n">target</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.utils.output.OutputDetails.target" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The output target.</p>
    </div>

  </div>











  </div>

    </div>

  </div>











  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.workflow" class="doc doc-heading">
        <code>workflow</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.workflow" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h3 id="kiara.workflow.kiara_workflow" class="doc doc-heading">
        <code>kiara_workflow</code>



<a href="#kiara.workflow.kiara_workflow" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.workflow.kiara_workflow.KiaraWorkflow" class="doc doc-heading">
        <code>
KiaraWorkflow        </code>



<a href="#kiara.workflow.kiara_workflow.KiaraWorkflow" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A thin wrapper class around a [PipelineModule][kiara.pipeline.PipelineModule], mostly handling initialization from simplified configuration data.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/workflow/kiara_workflow.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">KiaraWorkflow</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A thin wrapper class around a [PipelineModule][kiara.pipeline.PipelineModule], mostly handling initialization from simplified configuration data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">workflow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">ModuleConfig</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">,</span>
        <span class="n">controller</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">PipelineController</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_controller</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">PipelineController</span><span class="p">]</span> <span class="o">=</span> <span class="n">controller</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_workflow_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">workflow_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_workflow_config</span><span class="p">:</span> <span class="n">ModuleConfig</span> <span class="o">=</span> <span class="n">config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="n">Kiara</span> <span class="o">=</span> <span class="n">kiara</span>

        <span class="n">root_module_args</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workflow_id</span><span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workflow_config</span><span class="o">.</span><span class="n">module_type</span> <span class="o">==</span> <span class="s2">&quot;pipeline&quot;</span><span class="p">:</span>
            <span class="n">root_module_args</span><span class="p">[</span><span class="s2">&quot;module_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;pipeline&quot;</span>
            <span class="n">root_module_args</span><span class="p">[</span><span class="s2">&quot;module_config&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workflow_config</span><span class="o">.</span><span class="n">module_config</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">is_pipeline_module</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_workflow_config</span><span class="o">.</span><span class="n">module_type</span><span class="p">):</span>
            <span class="n">root_module_args</span><span class="p">[</span><span class="s2">&quot;module_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workflow_config</span><span class="o">.</span><span class="n">module_type</span>
            <span class="n">root_module_args</span><span class="p">[</span><span class="s2">&quot;module_config&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workflow_config</span><span class="o">.</span><span class="n">module_config</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># means it&#39;s a python module, and we wrap it into a single-module pipeline</span>
            <span class="n">root_module_args</span><span class="p">[</span><span class="s2">&quot;module_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;pipeline&quot;</span>
            <span class="n">steps_conf</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;steps&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;module_type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workflow_config</span><span class="o">.</span><span class="n">module_type</span><span class="p">,</span>
                        <span class="s2">&quot;step_id&quot;</span><span class="p">:</span> <span class="n">slugify</span><span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_workflow_config</span><span class="o">.</span><span class="n">module_type</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="s2">&quot;_&quot;</span>
                        <span class="p">),</span>
                        <span class="s2">&quot;module_config&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workflow_config</span><span class="o">.</span><span class="n">module_config</span><span class="p">,</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="s2">&quot;input_aliases&quot;</span><span class="p">:</span> <span class="s2">&quot;auto&quot;</span><span class="p">,</span>
                <span class="s2">&quot;output_aliases&quot;</span><span class="p">:</span> <span class="s2">&quot;auto&quot;</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">root_module_args</span><span class="p">[</span><span class="s2">&quot;module_config&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">steps_conf</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_root_module</span><span class="p">:</span> <span class="n">PipelineModule</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">create_module</span><span class="p">(</span><span class="o">**</span><span class="n">root_module_args</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_root_module</span><span class="p">,</span> <span class="n">PipelineModule</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Pipeline</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">structure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineStructure</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root_module</span><span class="o">.</span><span class="n">structure</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Pipeline</span><span class="p">:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="p">,</span> <span class="n">controller</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_controller</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">controller</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineController</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">controller</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StepStatus</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">status</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">inputs</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">outputs</span>

    <span class="k">def</span> <span class="nf">get_current_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineState</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">current_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineState</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span>

    <span class="c1"># @inputs.setter</span>
    <span class="c1"># def inputs(self, inputs: typing.Mapping[str, typing.Any]):</span>
    <span class="c1">#     self.pipeline.set_pipeline_inputs(**inputs)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">input_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">output_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">workflow_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_workflow_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">steps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StepsInfo</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">to_details</span><span class="p">()</span><span class="o">.</span><span class="n">steps_info</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(workflow_id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">workflow_id</span><span class="si">}</span><span class="s2">, root_module=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_root_module</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="k">yield</span> <span class="sa">f</span><span class="s2">&quot;[b]Workflow: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">workflow_id</span><span class="si">}</span><span class="s2">[/b]&quot;</span>

        <span class="n">doc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root_module</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">description</span>
        <span class="k">if</span> <span class="n">doc</span> <span class="ow">and</span> <span class="n">doc</span> <span class="o">!=</span> <span class="n">DEFAULT_NO_DESC_VALUE</span><span class="p">:</span>
            <span class="k">yield</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">doc</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">,</span> <span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;property&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
        <span class="n">doc_link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root_module</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">references</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&quot;documentation&quot;</span><span class="p">,</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">doc_link</span><span class="p">:</span>
            <span class="c1"># TODO: use direct link</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">doc_link</span><span class="o">.</span><span class="n">url</span>
            <span class="n">module_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[link=</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">]</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_root_module</span><span class="o">.</span><span class="n">_module_type_id</span><span class="si">}</span><span class="s2">[/link]&quot;</span>  <span class="c1"># type: ignore</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">module_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root_module</span><span class="o">.</span><span class="n">_module_type_id</span>  <span class="c1"># type: ignore</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;root module&quot;</span><span class="p">,</span> <span class="n">module_str</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;current status&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">inputs_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">_create_rich_table</span><span class="p">(</span><span class="n">show_headers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;inputs&quot;</span><span class="p">,</span> <span class="n">inputs_table</span><span class="p">)</span>
        <span class="n">outputs_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">_create_rich_table</span><span class="p">(</span><span class="n">show_headers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;outputs&quot;</span><span class="p">,</span> <span class="n">outputs_table</span><span class="p">)</span>

        <span class="k">yield</span> <span class="n">table</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


























  </div>

    </div>

  </div>







  </div>

    </div>

  </div>





  </div>

    </div>

  </div>




  </div>

    </div>

  </div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../../../operation_types/store_value/" class="md-footer__link md-footer__link--prev" aria-label="Previous: store_value" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              store_value
            </div>
          </div>
        </a>
      
      
        
        <a href="../config/" class="md-footer__link md-footer__link--next" aria-label="Next: config" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              config
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      DHARPA project
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.tracking"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.bd0b6b67.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.467223ff.min.js"></script>
      
    
  </body>
</html>