
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the Kiara project">
      
      
        <meta name="author" content="Markus Binsteiner">
      
      
        <link rel="canonical" href="https://dharpa.org/kiara/latest/reference/kiara/data/__init__/">
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.1">
    
    
      
        <title>data - Kiara</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.e8d9bf0c.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kiara.data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Kiara" class="md-header__button md-logo" aria-label="Kiara" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kiara
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              data
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/DHARPA-Project/kiara/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Kiara" class="md-nav__button md-logo" aria-label="Kiara" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Kiara
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/DHARPA-Project/kiara/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../install/" class="md-nav__link">
        Install
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../architecture/">Architecture</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Architecture" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Architecture
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/assumptions/" class="md-nav__link">
        Assumptions & considerations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/decisions/" class="md-nav__link">
        Decisions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/metadata/" class="md-nav__link">
        Metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../architecture/data/">Data</a>
          
            <label for="__nav_3_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Data" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/data/data_centric_approach/" class="md-nav__link">
        Data centric approach
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/data/data_formats/" class="md-nav__link">
        Data formats
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/data/dev/" class="md-nav__link">
        Dev
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/data/persistence/" class="md-nav__link">
        Data persistence
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/data/requirements/" class="md-nav__link">
        Requirements
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" type="checkbox" id="__nav_3_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../architecture/workflows/">Workflows</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Workflows" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Workflows
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5_1" type="checkbox" id="__nav_3_5_1" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../architecture/workflows/modularity/modularity/">Modularity</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Modularity" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_5_1">
          <span class="md-nav__icon md-icon"></span>
          Modularity
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/workflows/modularity/modularity_2/" class="md-nav__link">
        Modularity 2
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Value types
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Value types" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Value types
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../value_types/any/" class="md-nav__link">
        any
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../value_types/deserialize_config/" class="md-nav__link">
        deserialize_config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../value_types/load_config/" class="md-nav__link">
        load_config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../value_types/value_info/" class="md-nav__link">
        value_info
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../value_types/value_lineage/" class="md-nav__link">
        value_lineage
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Modules
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Modules" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Modules
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../modules/metadata/" class="md-nav__link">
        metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../modules/value/" class="md-nav__link">
        value
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Operation types
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Operation types" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Operation types
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/all/" class="md-nav__link">
        all
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/calculate_hash/" class="md-nav__link">
        calculate_hash
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/create/" class="md-nav__link">
        create
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/export/" class="md-nav__link">
        export
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/extract_metadata/" class="md-nav__link">
        extract_metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/import/" class="md-nav__link">
        import
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/pretty_print/" class="md-nav__link">
        pretty_print
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/sample/" class="md-nav__link">
        sample
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/serialize/" class="md-nav__link">
        serialize
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/store_value/" class="md-nav__link">
        store_value
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          API docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          API docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1" type="checkbox" id="__nav_7_1" checked>
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../__init__/">kiara</a>
          
            <label for="__nav_7_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="kiara" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_1">
          <span class="md-nav__icon md-icon"></span>
          kiara
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/" class="md-nav__link">
        config
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2" type="checkbox" id="__nav_7_1_2" checked>
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index md-nav__link--active">
          <a href="./">data</a>
          
            <label for="__nav_7_1_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="data" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_2">
          <span class="md-nav__icon md-icon"></span>
          data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2_1" type="checkbox" id="__nav_7_1_2_1" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../onboarding/__init__/">onboarding</a>
          
        </div>
      
      <nav class="md-nav" aria-label="onboarding" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_2_1">
          <span class="md-nav__icon md-icon"></span>
          onboarding
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../onboarding/batch/" class="md-nav__link">
        batch
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2_2" type="checkbox" id="__nav_7_1_2_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../registry/__init__/">registry</a>
          
        </div>
      
      <nav class="md-nav" aria-label="registry" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_2_2">
          <span class="md-nav__icon md-icon"></span>
          registry
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../registry/store/" class="md-nav__link">
        store
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2_3" type="checkbox" id="__nav_7_1_2_3" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../types/__init__/">types</a>
          
            <label for="__nav_7_1_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="types" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_2_3">
          <span class="md-nav__icon md-icon"></span>
          types
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../types/core/" class="md-nav__link">
        core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../types/type_mgmt/" class="md-nav__link">
        type_mgmt
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2_4" type="checkbox" id="__nav_7_1_2_4" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../values/__init__/">values</a>
          
        </div>
      
      <nav class="md-nav" aria-label="values" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_2_4">
          <span class="md-nav__icon md-icon"></span>
          values
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../values/value_set/" class="md-nav__link">
        value_set
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../defaults/" class="md-nav__link">
        defaults
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_4" type="checkbox" id="__nav_7_1_4" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../doc/__init__/">doc</a>
          
            <label for="__nav_7_1_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="doc" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_4">
          <span class="md-nav__icon md-icon"></span>
          doc
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../doc/gen_info_pages/" class="md-nav__link">
        gen_info_pages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../doc/generate_api_doc/" class="md-nav__link">
        generate_api_doc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../doc/mkdocs_macros_cli/" class="md-nav__link">
        mkdocs_macros_cli
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../doc/mkdocs_macros_kiara/" class="md-nav__link">
        mkdocs_macros_kiara
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_4_5" type="checkbox" id="__nav_7_1_4_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../doc/mkdocstrings/__init__/">mkdocstrings</a>
          
            <label for="__nav_7_1_4_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="mkdocstrings" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_4_5">
          <span class="md-nav__icon md-icon"></span>
          mkdocstrings
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../doc/mkdocstrings/collector/" class="md-nav__link">
        collector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../doc/mkdocstrings/handler/" class="md-nav__link">
        handler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../doc/mkdocstrings/renderer/" class="md-nav__link">
        renderer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_5" type="checkbox" id="__nav_7_1_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../environment/__init__/">environment</a>
          
            <label for="__nav_7_1_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="environment" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_5">
          <span class="md-nav__icon md-icon"></span>
          environment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../environment/operating_system/" class="md-nav__link">
        operating_system
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../environment/python/" class="md-nav__link">
        python
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../events/" class="md-nav__link">
        events
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_7" type="checkbox" id="__nav_7_1_7" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../examples/__init__/">examples</a>
          
        </div>
      
      <nav class="md-nav" aria-label="examples" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_7">
          <span class="md-nav__icon md-icon"></span>
          examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/example_controller/" class="md-nav__link">
        example_controller
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../exceptions/" class="md-nav__link">
        exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_9" type="checkbox" id="__nav_7_1_9" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../info/__init__/">info</a>
          
            <label for="__nav_7_1_9">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="info" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_9">
          <span class="md-nav__icon md-icon"></span>
          info
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../info/kiara/" class="md-nav__link">
        kiara
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../info/metadata/" class="md-nav__link">
        metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../info/modules/" class="md-nav__link">
        modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../info/operations/" class="md-nav__link">
        operations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../info/pipelines/" class="md-nav__link">
        pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../info/types/" class="md-nav__link">
        types
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10" type="checkbox" id="__nav_7_1_10" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/__init__/">interfaces</a>
          
            <label for="__nav_7_1_10">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="interfaces" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_10">
          <span class="md-nav__icon md-icon"></span>
          interfaces
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1" type="checkbox" id="__nav_7_1_10_1" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/__init__/">cli</a>
          
            <label for="__nav_7_1_10_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="cli" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_10_1">
          <span class="md-nav__icon md-icon"></span>
          cli
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_1" type="checkbox" id="__nav_7_1_10_1_1" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/data/__init__/">data</a>
          
        </div>
      
      <nav class="md-nav" aria-label="data" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_1">
          <span class="md-nav__icon md-icon"></span>
          data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/data/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_2" type="checkbox" id="__nav_7_1_10_1_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/dev/__init__/">dev</a>
          
        </div>
      
      <nav class="md-nav" aria-label="dev" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_2">
          <span class="md-nav__icon md-icon"></span>
          dev
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/dev/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_3" type="checkbox" id="__nav_7_1_10_1_3" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/environment/__init__/">environment</a>
          
        </div>
      
      <nav class="md-nav" aria-label="environment" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_3">
          <span class="md-nav__icon md-icon"></span>
          environment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/environment/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/explain/" class="md-nav__link">
        explain
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_5" type="checkbox" id="__nav_7_1_10_1_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/info/__init__/">info</a>
          
        </div>
      
      <nav class="md-nav" aria-label="info" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_5">
          <span class="md-nav__icon md-icon"></span>
          info
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/info/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_6" type="checkbox" id="__nav_7_1_10_1_6" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/metadata/__init__/">metadata</a>
          
        </div>
      
      <nav class="md-nav" aria-label="metadata" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_6">
          <span class="md-nav__icon md-icon"></span>
          metadata
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/metadata/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_7" type="checkbox" id="__nav_7_1_10_1_7" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/module/__init__/">module</a>
          
        </div>
      
      <nav class="md-nav" aria-label="module" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_7">
          <span class="md-nav__icon md-icon"></span>
          module
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/module/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_8" type="checkbox" id="__nav_7_1_10_1_8" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/operation/__init__/">operation</a>
          
        </div>
      
      <nav class="md-nav" aria-label="operation" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_8">
          <span class="md-nav__icon md-icon"></span>
          operation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/operation/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_9" type="checkbox" id="__nav_7_1_10_1_9" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/pipeline/__init__/">pipeline</a>
          
        </div>
      
      <nav class="md-nav" aria-label="pipeline" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_9">
          <span class="md-nav__icon md-icon"></span>
          pipeline
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/pipeline/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/run/" class="md-nav__link">
        run
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_11" type="checkbox" id="__nav_7_1_10_1_11" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/type/__init__/">type</a>
          
        </div>
      
      <nav class="md-nav" aria-label="type" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_11">
          <span class="md-nav__icon md-icon"></span>
          type
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/type/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/utils/" class="md-nav__link">
        utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_2" type="checkbox" id="__nav_7_1_10_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/python_api/__init__/">python_api</a>
          
        </div>
      
      <nav class="md-nav" aria-label="python_api" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_10_2">
          <span class="md-nav__icon md-icon"></span>
          python_api
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/python_api/controller/" class="md-nav__link">
        controller
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kiara/" class="md-nav__link">
        kiara
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_12" type="checkbox" id="__nav_7_1_12" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../metadata/__init__/">metadata</a>
          
            <label for="__nav_7_1_12">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="metadata" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_12">
          <span class="md-nav__icon md-icon"></span>
          metadata
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metadata/core_models/" class="md-nav__link">
        core_models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metadata/data/" class="md-nav__link">
        data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metadata/mgmt/" class="md-nav__link">
        mgmt
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metadata/module_models/" class="md-nav__link">
        module_models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metadata/operation_models/" class="md-nav__link">
        operation_models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metadata/type_models/" class="md-nav__link">
        type_models
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../module/" class="md-nav__link">
        module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../module_config/" class="md-nav__link">
        module_config
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_15" type="checkbox" id="__nav_7_1_15" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../module_mgmt/__init__/">module_mgmt</a>
          
            <label for="__nav_7_1_15">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="module_mgmt" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_15">
          <span class="md-nav__icon md-icon"></span>
          module_mgmt
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../module_mgmt/merged/" class="md-nav__link">
        merged
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../module_mgmt/pipelines/" class="md-nav__link">
        pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../module_mgmt/python_classes/" class="md-nav__link">
        python_classes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_16" type="checkbox" id="__nav_7_1_16" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../modules/__init__/">modules</a>
          
            <label for="__nav_7_1_16">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="modules" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_16">
          <span class="md-nav__icon md-icon"></span>
          modules
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/metadata/" class="md-nav__link">
        metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/pipelines/__init__/" class="md-nav__link">
        pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/save_value/" class="md-nav__link">
        save_value
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/type_conversion/" class="md-nav__link">
        type_conversion
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_17" type="checkbox" id="__nav_7_1_17" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../operations/__init__/">operations</a>
          
            <label for="__nav_7_1_17">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="operations" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_17">
          <span class="md-nav__icon md-icon"></span>
          operations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/calculate_hash/" class="md-nav__link">
        calculate_hash
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/create_value/" class="md-nav__link">
        create_value
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/data_export/" class="md-nav__link">
        data_export
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/data_import/" class="md-nav__link">
        data_import
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/extract_metadata/" class="md-nav__link">
        extract_metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/merge_values/" class="md-nav__link">
        merge_values
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/pretty_print/" class="md-nav__link">
        pretty_print
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/sample/" class="md-nav__link">
        sample
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/serialize/" class="md-nav__link">
        serialize
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/store_value/" class="md-nav__link">
        store_value
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_18" type="checkbox" id="__nav_7_1_18" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../pipeline/__init__/">pipeline</a>
          
            <label for="__nav_7_1_18">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="pipeline" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_18">
          <span class="md-nav__icon md-icon"></span>
          pipeline
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pipeline/config/" class="md-nav__link">
        config
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_18_2" type="checkbox" id="__nav_7_1_18_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../pipeline/controller/__init__/">controller</a>
          
        </div>
      
      <nav class="md-nav" aria-label="controller" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_18_2">
          <span class="md-nav__icon md-icon"></span>
          controller
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pipeline/controller/batch/" class="md-nav__link">
        batch
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pipeline/listeners/" class="md-nav__link">
        listeners
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pipeline/module/" class="md-nav__link">
        module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pipeline/pipeline/" class="md-nav__link">
        pipeline
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pipeline/structure/" class="md-nav__link">
        structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pipeline/utils/" class="md-nav__link">
        utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../pipeline/values/" class="md-nav__link">
        values
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_19" type="checkbox" id="__nav_7_1_19" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../processing/__init__/">processing</a>
          
            <label for="__nav_7_1_19">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="processing" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_19">
          <span class="md-nav__icon md-icon"></span>
          processing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../processing/parallel/" class="md-nav__link">
        parallel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../processing/processor/" class="md-nav__link">
        processor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../processing/synchronous/" class="md-nav__link">
        synchronous
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_20" type="checkbox" id="__nav_7_1_20" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../rendering/__init__/">rendering</a>
          
            <label for="__nav_7_1_20">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="rendering" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_20">
          <span class="md-nav__icon md-icon"></span>
          rendering
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rendering/jinja/" class="md-nav__link">
        jinja
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rendering/mgmt/" class="md-nav__link">
        mgmt
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sessions/__init__/" class="md-nav__link">
        sessions
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_22" type="checkbox" id="__nav_7_1_22" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../utils/__init__/">utils</a>
          
            <label for="__nav_7_1_22">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="utils" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_22">
          <span class="md-nav__icon md-icon"></span>
          utils
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/class_loading/" class="md-nav__link">
        class_loading
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/concurrency/" class="md-nav__link">
        concurrency
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/doc/" class="md-nav__link">
        doc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/global_metadata/" class="md-nav__link">
        global_metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/jupyter/" class="md-nav__link">
        jupyter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/modules/" class="md-nav__link">
        modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/output/" class="md-nav__link">
        output
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_23" type="checkbox" id="__nav_7_1_23" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../workflow/__init__/">workflow</a>
          
            <label for="__nav_7_1_23">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="workflow" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_23">
          <span class="md-nav__icon md-icon"></span>
          workflow
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../workflow/kiara_workflow/" class="md-nav__link">
        kiara_workflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../workflow/wrapped/" class="md-nav__link">
        wrapped
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2" type="checkbox" id="__nav_7_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2">
          mkdocstrings_handlers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="mkdocstrings_handlers" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          mkdocstrings_handlers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../mkdocstrings_handlers/kiara/__init__/" class="md-nav__link">
        kiara
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kiara.data" class="md-nav__link">
    kiara.data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.data.onboarding" class="md-nav__link">
    onboarding
  </a>
  
    <nav class="md-nav" aria-label="onboarding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.data.onboarding.ValueStoreConfig" class="md-nav__link">
    ValueStoreConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.onboarding.batch" class="md-nav__link">
    batch
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.data.registry" class="md-nav__link">
    registry
  </a>
  
    <nav class="md-nav" aria-label="registry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.data.registry.BaseDataRegistry" class="md-nav__link">
    BaseDataRegistry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.registry.DataRegistry" class="md-nav__link">
    DataRegistry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.registry.ValueSlotUpdateHandler" class="md-nav__link">
    ValueSlotUpdateHandler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.registry.store" class="md-nav__link">
    store
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.data.types" class="md-nav__link">
    types
  </a>
  
    <nav class="md-nav" aria-label="types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.data.types.ValueType" class="md-nav__link">
    ValueType
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.types.ValueTypeConfigMetadata" class="md-nav__link">
    ValueTypeConfigMetadata
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.types.ValueTypeConfigSchema" class="md-nav__link">
    ValueTypeConfigSchema
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.types.get_type_name" class="md-nav__link">
    get_type_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.types.core" class="md-nav__link">
    core
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.types.type_mgmt" class="md-nav__link">
    type_mgmt
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.data.values" class="md-nav__link">
    values
  </a>
  
    <nav class="md-nav" aria-label="values">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.data.values.Value" class="md-nav__link">
    Value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.values.ValueAlias" class="md-nav__link">
    ValueAlias
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.values.ValueHash" class="md-nav__link">
    ValueHash
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.values.ValueInfo" class="md-nav__link">
    ValueInfo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.values.ValueLineage" class="md-nav__link">
    ValueLineage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.values.ValueSchema" class="md-nav__link">
    ValueSchema
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.values.ValueSlot" class="md-nav__link">
    ValueSlot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.data.values.value_set" class="md-nav__link">
    value_set
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/DHARPA-Project/kiara/edit/master/docs/src/kiara/data/__init__.py" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>



  <h1>data</h1>

<div class="doc doc-object doc-module">

<a id="kiara.data"></a>
    <div class="doc doc-contents first">

      <p>Data and value related classes for <em>Kiara</em>.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h2 id="kiara.data.onboarding" class="doc doc-heading">
        <code>onboarding</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.onboarding" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h3 id="kiara.data.onboarding.ValueStoreConfig" class="doc doc-heading">
        <code>
ValueStoreConfig            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.onboarding.ValueStoreConfig" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>A configuration that describes which step outputs of a pipeline to save, and how.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/onboarding/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueStoreConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A configuration that describes which step outputs of a pipeline to save, and how.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">save_fields</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">base_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">value_set</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">],</span>
        <span class="n">matchers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">FieldMatcher</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>

        <span class="k">if</span> <span class="n">matchers</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">matchers</span> <span class="o">=</span> <span class="n">FieldMatcher</span><span class="o">.</span><span class="n">create_default_matchers</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">matcher</span> <span class="ow">in</span> <span class="n">matchers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">matcher</span><span class="o">.</span><span class="n">matcher_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;glob&quot;</span><span class="p">,</span> <span class="s2">&quot;regex&quot;</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                    <span class="s2">&quot;Only &#39;glob&#39; and &#39;regex&#39; field matcher type implemented yet.&quot;</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">matcher</span><span class="o">.</span><span class="n">matcher_type</span> <span class="o">==</span> <span class="s2">&quot;glob&quot;</span><span class="p">:</span>
                <span class="n">matcher</span><span class="o">.</span><span class="n">matcher_type</span> <span class="o">=</span> <span class="s2">&quot;regex&quot;</span>
                <span class="n">matcher</span><span class="o">.</span><span class="n">match_expr</span> <span class="o">=</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">matcher</span><span class="o">.</span><span class="n">match_expr</span><span class="p">)</span>

        <span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">()</span>

        <span class="n">to_save</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">value_set</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

            <span class="k">for</span> <span class="n">matcher</span> <span class="ow">in</span> <span class="n">matchers</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">matcher</span><span class="o">.</span><span class="n">match_expr</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
                    <span class="k">continue</span>

                <span class="n">template</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">matcher</span><span class="o">.</span><span class="n">alias_template</span><span class="p">)</span>
                <span class="n">rendered</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="n">field_name</span><span class="p">,</span> <span class="n">base_id</span><span class="o">=</span><span class="n">base_id</span><span class="p">)</span>

                <span class="n">to_save</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="nb">set</span><span class="p">())</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">rendered</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">matcher</span><span class="o">.</span><span class="n">check_next_on_match</span><span class="p">:</span>
                    <span class="k">break</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">aliases</span> <span class="ow">in</span> <span class="n">to_save</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">value</span> <span class="o">=</span> <span class="n">value_set</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
            <span class="n">_v</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">aliases</span><span class="o">=</span><span class="n">aliases</span><span class="p">)</span>
            <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">_v</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">aliases</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">FieldMatcher</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether and how to save inputs.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span>
    <span class="p">)</span>
    <span class="n">outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">FieldMatcher</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether and how to save inputs.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="n">FieldMatcher</span><span class="o">.</span><span class="n">create_default_matchers</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">steps</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="s2">&quot;ValueStoreConfig&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether and how to save step inputs and outputs.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.onboarding.ValueStoreConfig.inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">inputs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">onboarding</span><span class="o">.</span><span class="n">FieldMatcher</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.onboarding.ValueStoreConfig.inputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Whether and how to save inputs.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.onboarding.ValueStoreConfig.outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">outputs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">onboarding</span><span class="o">.</span><span class="n">FieldMatcher</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.onboarding.ValueStoreConfig.outputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Whether and how to save inputs.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.onboarding.ValueStoreConfig.steps" class="doc doc-heading">
<code class="highlight language-python"><span class="n">steps</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ValueStoreConfig</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.onboarding.ValueStoreConfig.steps" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Whether and how to save step inputs and outputs.</p>
    </div>

  </div>











  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h3 id="kiara.data.onboarding.batch" class="doc doc-heading">
        <code>batch</code>



<a href="#kiara.data.onboarding.batch" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.data.onboarding.batch.BatchOnboard" class="doc doc-heading">
        <code>
BatchOnboard            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.onboarding.batch.BatchOnboard" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/onboarding/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">BatchOnboard</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
        <span class="n">store_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueStoreConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Kiara</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="n">operation</span> <span class="o">=</span> <span class="n">Operation</span><span class="o">.</span><span class="n">create_operation</span><span class="p">(</span>
            <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>
            <span class="n">operation_id</span><span class="o">=</span><span class="s2">&quot;_batch_onboarding_&quot;</span><span class="p">,</span>
            <span class="n">config</span><span class="o">=</span><span class="n">module_type</span><span class="p">,</span>
            <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">store_config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">store_config</span> <span class="o">=</span> <span class="n">ValueStoreConfig</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">store_config</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="n">store_config</span> <span class="o">=</span> <span class="n">ValueStoreConfig</span><span class="p">(</span><span class="o">**</span><span class="n">store_config</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">BatchOnboard</span><span class="p">(</span>
            <span class="n">operation</span><span class="o">=</span><span class="n">operation</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span> <span class="n">store_config</span><span class="o">=</span><span class="n">store_config</span>
        <span class="p">)</span>

    <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The inputs.&quot;</span><span class="p">)</span>
    <span class="n">operation</span><span class="p">:</span> <span class="n">Operation</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The operation to use with the inputs.&quot;</span><span class="p">)</span>
    <span class="n">store_config</span><span class="p">:</span> <span class="n">ValueStoreConfig</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The configuration for storing operation/pipeline values.&quot;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>

        <span class="n">run_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operation</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">)</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">store_config</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Storing inputs not supported yet.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">store_config</span><span class="o">.</span><span class="n">steps</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Storing step inputs/outputs not supported yet.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">store_config</span><span class="o">.</span><span class="n">outputs</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">ValueStoreConfig</span><span class="o">.</span><span class="n">save_fields</span><span class="p">(</span>
                <span class="n">base_id</span><span class="o">=</span><span class="n">base_id</span><span class="p">,</span>
                <span class="n">value_set</span><span class="o">=</span><span class="n">run_result</span><span class="p">,</span>
                <span class="n">matchers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store_config</span><span class="o">.</span><span class="n">outputs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">value</span><span class="p">,</span> <span class="n">aliases</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">aliases</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.onboarding.batch.BatchOnboard.inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">inputs</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.onboarding.batch.BatchOnboard.inputs" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The inputs.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.onboarding.batch.BatchOnboard.operation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">operation</span><span class="p">:</span> <span class="n">Operation</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.onboarding.batch.BatchOnboard.operation" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The operation to use with the inputs.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.onboarding.batch.BatchOnboard.store_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">store_config</span><span class="p">:</span> <span class="n">ValueStoreConfig</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.onboarding.batch.BatchOnboard.store_config" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The configuration for storing operation/pipeline values.</p>
    </div>

  </div>












  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.data.registry" class="doc doc-heading">
        <code>registry</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.registry" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h3 id="kiara.data.registry.BaseDataRegistry" class="doc doc-heading">
        <code>
BaseDataRegistry            (<span title="abc.ABC">ABC</span>)
        </code>



<a href="#kiara.data.registry.BaseDataRegistry" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Base class to extend if you want to write a <em>kiara</em> data registry.</p>
<p>This outlines the main methods that must be available for an entity that holds some values and their data, as
well as their associated aliases. In most cases users will interact with subclasses of the more fully
featured <a href="../registry/__init__/#kiara.data.registry.DataRegistry">DataRegistry</a> class, but there are cases where it will make sense
to sub-class this base class directly (like for example read-only 'archive' data registries).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/registry/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">BaseDataRegistry</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class to extend if you want to write a *kiara* data registry.</span>

<span class="sd">    This outlines the main methods that must be available for an entity that holds some values and their data, as</span>
<span class="sd">    well as their associated aliases. In most cases users will interact with subclasses of the more fully</span>
<span class="sd">    featured [DataRegistry][kiara.data.registry.DataRegistry] class, but there are cases where it will make sense</span>
<span class="sd">    to sub-class this base class directly (like for example read-only &#39;archive&#39; data registries).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="n">Kiara</span> <span class="o">=</span> <span class="n">kiara</span>
        <span class="c1"># self._hashes: typing.Dict[str, typing.Dict[str, str]] = {}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register_tokens</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_available_value_ids</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">alias_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_available_aliases</span><span class="p">())</span>

    <span class="c1"># ======================================================================</span>
    <span class="c1"># main abstract methods</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_available_value_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return all of the registries available value ids.&quot;&quot;&quot;</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_value_obj_for_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_value_data_for_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_item</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_available_aliases</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">pass</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_value_slot_for_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSlot</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_value_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]:</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_find_value_for_hashes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">hashes</span><span class="p">:</span> <span class="n">ValueHash</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Value</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return a value that matches one of the provided hashes.</span>

<span class="sd">        This method does not need to be overwritten, but it is recommended that it is done for performance reasons.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            hashes: a collection of hashes,</span>
<span class="sd">        Returns:</span>
<span class="sd">            A (registered) value that matches one of the hashes</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># -----------------------------------------------------------------------</span>
    <span class="c1"># main value retrieval methods</span>
    <span class="k">def</span> <span class="nf">_create_alias_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueAlias</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">alias</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;value:&quot;</span><span class="p">):</span>
            <span class="n">alias</span> <span class="o">=</span> <span class="n">alias</span><span class="p">[</span><span class="mi">6</span><span class="p">:]</span>
        <span class="n">value_alias</span> <span class="o">=</span> <span class="n">ValueAlias</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">value_alias</span><span class="o">=</span><span class="n">alias</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">value_alias</span><span class="o">.</span><span class="n">alias</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_value_ids</span><span class="p">()</span>
            <span class="ow">and</span> <span class="n">value_alias</span><span class="o">.</span><span class="n">alias</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_aliases</span><span class="p">()</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Neither id nor alias &#39;</span><span class="si">{</span><span class="n">alias</span><span class="si">}</span><span class="s2">&#39; registered with this registry.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">value_alias</span><span class="o">.</span><span class="n">alias</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_aliases</span><span class="p">()</span>
            <span class="ow">and</span> <span class="n">value_alias</span><span class="o">.</span><span class="n">tag</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="n">value_alias</span><span class="o">.</span><span class="n">version</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="n">value_alias</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_latest_version_for_alias</span><span class="p">(</span><span class="n">value_alias</span><span class="o">.</span><span class="n">alias</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">value_alias</span>

    <span class="k">def</span> <span class="nf">get_value_obj</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value_item</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">,</span> <span class="n">ValueAlias</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">],</span>
        <span class="n">raise_exception</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Value</span><span class="p">]:</span>

        <span class="k">if</span> <span class="n">value_item</span> <span class="o">==</span> <span class="n">NO_ID_YET_MARKER</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t get value object: value not fully registered yet.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_item</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="n">value_item</span> <span class="o">=</span> <span class="n">value_item</span><span class="o">.</span><span class="n">id</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_item</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
            <span class="n">value_item</span> <span class="o">=</span> <span class="n">value_item</span><span class="o">.</span><span class="n">get_latest_value</span><span class="p">()</span><span class="o">.</span><span class="n">id</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_item</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">value_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_alias_obj</span><span class="p">(</span><span class="n">value_item</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_item</span><span class="p">,</span> <span class="n">ValueAlias</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value_item</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; for value item parameter.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">value_item</span><span class="o">.</span><span class="n">alias</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_value_ids</span><span class="p">():</span>
            <span class="n">_value_id</span> <span class="o">=</span> <span class="n">value_item</span><span class="o">.</span><span class="n">alias</span>
            <span class="n">_value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_value_obj_for_id</span><span class="p">(</span><span class="n">_value_id</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">value_item</span><span class="o">.</span><span class="n">alias</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_aliases</span><span class="p">():</span>
            <span class="n">_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_alias_to_value</span><span class="p">(</span><span class="n">value_item</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_value</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">_value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">raise_exception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No value or alias registered in registry for: </span><span class="si">{</span><span class="n">value_item</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">_value</span>

    <span class="k">def</span> <span class="nf">get_value_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_item</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">,</span> <span class="n">ValueAlias</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_item</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value registered for: </span><span class="si">{</span><span class="n">value_item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">is_set</span> <span class="ow">and</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">,</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value not set: </span><span class="si">{</span><span class="n">value_obj</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_value_data_for_id</span><span class="p">(</span><span class="n">value_obj</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">data</span> <span class="o">==</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">data</span>

    <span class="k">def</span> <span class="nf">get_lineage</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_item</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]:</span>

        <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_item</span><span class="o">=</span><span class="n">value_item</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value registered for: </span><span class="si">{</span><span class="n">value_item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_value_lineage</span><span class="p">(</span><span class="n">value_obj</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="c1"># def get_value_info(self, value_item: typing.Union[str, Value, ValueAlias]) -&gt; ValueInfo:</span>
    <span class="c1">#</span>
    <span class="c1">#     value_obj = self.get_value_obj(value_item=value_item)</span>
    <span class="c1">#</span>
    <span class="c1">#     aliases = self.find_aliases_for_value_id(value_id=value_obj.id, include_all_versions=True, include_tags=True)</span>
    <span class="c1">#</span>
    <span class="c1">#     info = ValueInfo(value_id=value_obj.id, value_type=value_obj.value_schema.type, aliases=aliases, metadata=value_obj.get_metadata())</span>
    <span class="c1">#     return info</span>

    <span class="k">def</span> <span class="nf">get_value_slot</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">]:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
            <span class="n">alias</span> <span class="o">=</span> <span class="n">alias</span><span class="o">.</span><span class="n">id</span>

        <span class="k">if</span> <span class="n">alias</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">alias_names</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_value_slot_for_alias</span><span class="p">(</span><span class="n">alias_name</span><span class="o">=</span><span class="n">alias</span><span class="p">)</span>

    <span class="c1"># -----------------------------------------------------------------------</span>
    <span class="c1"># def _resolve_hash_to_value(</span>
    <span class="c1">#     self, hash_str: str, hash_type: typing.Optional[str] = None</span>
    <span class="c1"># ) -&gt; typing.Optional[Value]:</span>
    <span class="c1">#</span>
    <span class="c1">#     matches: typing.Set[str] = set()</span>
    <span class="c1">#     if hash_type is None:</span>
    <span class="c1">#         for hash_type, details in self._hashes.items():</span>
    <span class="c1">#             if hash_str in details.keys():</span>
    <span class="c1">#                 matches.add(details[hash_str])</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         hashes_for_type = self._hashes.get(hash_type, {})</span>
    <span class="c1">#         if hash_str in hashes_for_type.keys():</span>
    <span class="c1">#             matches.add(hashes_for_type[hash_str])</span>
    <span class="c1">#</span>
    <span class="c1">#     if len(matches) == 0:</span>
    <span class="c1">#         return None</span>
    <span class="c1">#     elif len(matches) &gt; 1:</span>
    <span class="c1">#         raise Exception(f&quot;Multiple values found for hash &#39;{hash_str}&#39;.&quot;)</span>
    <span class="c1">#</span>
    <span class="c1">#     match_id = next(iter(matches))</span>
    <span class="c1">#     value = self.get_value_obj(match_id)</span>
    <span class="c1">#     return value</span>

    <span class="k">def</span> <span class="nf">_check_register_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">register_token</span><span class="p">:</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">):</span>

        <span class="k">return</span> <span class="n">register_token</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_tokens</span>

    <span class="c1"># alias-related methods</span>
    <span class="k">def</span> <span class="nf">_resolve_alias_to_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="n">ValueAlias</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Value</span><span class="p">]:</span>

        <span class="n">alias_name</span> <span class="o">=</span> <span class="n">alias</span><span class="o">.</span><span class="n">alias</span>
        <span class="n">alias_version</span> <span class="o">=</span> <span class="n">alias</span><span class="o">.</span><span class="n">version</span>
        <span class="n">alias_tag</span> <span class="o">=</span> <span class="n">alias</span><span class="o">.</span><span class="n">tag</span>

        <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value_slot</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39; registered with registry.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">alias_tag</span><span class="p">:</span>
            <span class="n">_version</span> <span class="o">=</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">alias_tag</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">alias_version</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">_version</span> <span class="o">!=</span> <span class="n">alias_version</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Value alias object contains both tag and version information, but actual version of tag resolves to different version in the registry: </span><span class="si">{</span><span class="n">_version</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">alias_version</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">alias_version</span> <span class="o">=</span> <span class="n">_version</span>

        <span class="k">assert</span> <span class="n">alias_version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">alias_version</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_find_aliases_for_value_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ValueAlias</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Find all aliases that point to the specified value id.</span>

<span class="sd">        Sub-classes may overwrite this method for performance reasons.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_aliases</span><span class="p">():</span>
            <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">value_slot</span>
            <span class="n">aliases</span> <span class="o">=</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">find_linked_aliases</span><span class="p">(</span><span class="n">value_id</span><span class="p">)</span>
            <span class="n">result</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">aliases</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">_get_tags_for_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value_slot</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No alias &#39;</span><span class="si">{</span><span class="n">alias</span><span class="si">}</span><span class="s2">&#39; registered with registry.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">find_aliases_for_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value_item</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">],</span>
        <span class="n">include_all_versions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_tags</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ValueAlias</span><span class="p">]:</span>

        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_item</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t find registered value for: </span><span class="si">{</span><span class="n">value_item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">aliases</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_aliases_for_value_id</span><span class="p">(</span><span class="n">value_id</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">latest_cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">aliases</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">alias</span><span class="o">.</span><span class="n">version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">include_all_versions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">alias</span><span class="o">.</span><span class="n">alias</span> <span class="ow">in</span> <span class="n">latest_cache</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">latest_version</span> <span class="o">=</span> <span class="n">latest_cache</span><span class="p">[</span><span class="n">alias</span><span class="o">.</span><span class="n">alias</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">latest_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_latest_version_for_alias</span><span class="p">(</span><span class="n">alias</span><span class="o">.</span><span class="n">alias</span><span class="p">)</span>
                        <span class="n">latest_cache</span><span class="p">[</span><span class="n">alias</span><span class="o">.</span><span class="n">alias</span><span class="p">]</span> <span class="o">=</span> <span class="n">latest_version</span>
                    <span class="k">if</span> <span class="n">latest_version</span> <span class="o">==</span> <span class="n">alias</span><span class="o">.</span><span class="n">version</span><span class="p">:</span>
                        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">alias</span><span class="o">.</span><span class="n">tag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">include_tags</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">get_latest_version_for_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>

        <span class="n">versions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_versions_for_alias</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">versions</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">versions</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_versions_for_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return all available versions for the specified alias.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">_alias</span> <span class="o">=</span> <span class="n">ValueAlias</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">ValueAlias</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for alias: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_alias</span> <span class="o">=</span> <span class="n">alias</span>

        <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value_slot</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No alias &#39;</span><span class="si">{</span><span class="n">_alias</span><span class="o">.</span><span class="n">alias</span><span class="si">}</span><span class="s2">&#39; registered with registry.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">value_slot</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_tags_for_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">_alias</span> <span class="o">=</span> <span class="n">ValueAlias</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">ValueAlias</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for alias: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_alias</span> <span class="o">=</span> <span class="n">alias</span>

        <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value_slot</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No alias &#39;</span><span class="si">{</span><span class="n">_alias</span><span class="o">.</span><span class="n">alias</span><span class="si">}</span><span class="s2">&#39; registered with registry.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">value_slot</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;This will be removed soon in favor of a more generic way to query values.&quot;</span>
    <span class="p">)</span>
    <span class="k">def</span> <span class="nf">find_all_values_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Find all values of a certain type.&quot;&quot;&quot;</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">value_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
            <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_item</span><span class="o">=</span><span class="n">value_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value registered for: </span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">type_name</span> <span class="o">==</span> <span class="n">value_type</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                <span class="n">result</span><span class="p">[</span><span class="n">value_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_obj</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="c1"># TODO: compare all attributes if id is equal, just to make sure...</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DataRegistry</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">id</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


















  <div class="doc doc-object doc-method">



<h4 id="kiara.data.registry.BaseDataRegistry.find_all_values_of_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_all_values_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">)</span></code>


<a href="#kiara.data.registry.BaseDataRegistry.find_all_values_of_type" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Find all values of a certain type.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/registry/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@deprecated</span><span class="p">(</span>
    <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;This will be removed soon in favor of a more generic way to query values.&quot;</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">find_all_values_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Find all values of a certain type.&quot;&quot;&quot;</span>

    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">value_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
        <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_item</span><span class="o">=</span><span class="n">value_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value registered for: </span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">type_name</span> <span class="o">==</span> <span class="n">value_type</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
            <span class="n">result</span><span class="p">[</span><span class="n">value_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_obj</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>









  <div class="doc doc-object doc-method">



<h4 id="kiara.data.registry.BaseDataRegistry.get_versions_for_alias" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_versions_for_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">)</span></code>


<a href="#kiara.data.registry.BaseDataRegistry.get_versions_for_alias" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return all available versions for the specified alias.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/registry/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_versions_for_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Return all available versions for the specified alias.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">_alias</span> <span class="o">=</span> <span class="n">ValueAlias</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">ValueAlias</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for alias: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_alias</span> <span class="o">=</span> <span class="n">alias</span>

    <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">value_slot</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No alias &#39;</span><span class="si">{</span><span class="n">_alias</span><span class="o">.</span><span class="n">alias</span><span class="si">}</span><span class="s2">&#39; registered with registry.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">value_slot</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.data.registry.DataRegistry" class="doc doc-heading">
        <code>
DataRegistry            (<a title="kiara.data.registry.BaseDataRegistry" href="../registry/__init__/#kiara.data.registry.BaseDataRegistry">BaseDataRegistry</a>)
        </code>



<a href="#kiara.data.registry.DataRegistry" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/registry/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DataRegistry</span><span class="p">(</span><span class="n">BaseDataRegistry</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_register_value_and_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Register data into this registry.</span>

<span class="sd">        Returns the values id. In case the value already has a value set (meaning it&#39;s different from string [NO_ID_YET_MARKER][kiara.data.value.NO_ID_YET_MARKER] / &#39;__no_id_yet__&#39;</span>
<span class="sd">        this method must use this id or throw an exception. Otherwise, it is required that the result id is different</span>
<span class="sd">        from ``NO_ID_YET_MARKER`` and a non-empty string.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_register_remote_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Register an existing value from a different registry into this one.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            value: the original value (with the &#39;_registry&#39; attribute still pointing to the original registry)</span>

<span class="sd">        Returns:</span>
<span class="sd">            either None (in which case the original value object will be copied with the &#39;_registry&#39; and &#39;_kiara&#39; attributes adjusted), or a value object.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">register_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value_data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span> <span class="o">=</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span>
        <span class="n">value_schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>

        <span class="c1"># if lineage and not lineage.output_name:</span>
        <span class="c1">#     raise Exception(f&quot;Value lineage for data of type &#39;{value_data.value_schema.type}&#39; does not have &#39;output_name&#39; field set.&quot;)</span>

        <span class="n">value_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">value_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t register value: value id &#39;</span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&#39; already exists.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">value_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">alias_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t register value: value id &#39;</span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&#39; already exists as alias.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">value_schema</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_data</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
                <span class="n">value_schema</span> <span class="o">=</span> <span class="n">value_data</span><span class="o">.</span><span class="n">value_schema</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value schema provided for value: </span><span class="si">{</span><span class="n">value_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">value_schema</span> <span class="o">=</span> <span class="n">ValueSchema</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">value_schema</span><span class="p">)</span>

        <span class="bp">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">get_value_type_cls</span><span class="p">(</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="n">_type_obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type_config</span><span class="p">)</span>

        <span class="n">existing_value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_data</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">value_data</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">metadata</span><span class="p">:</span>

                <span class="k">if</span> <span class="n">lineage</span><span class="p">:</span>
                    <span class="n">existing_lineage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">value_data</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">existing_lineage</span><span class="p">:</span>
                        <span class="n">log_message</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Overwriting existing value lineage for: </span><span class="si">{</span><span class="n">value_data</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="p">[</span><span class="n">value_data</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">lineage</span>

                <span class="c1"># TODO: check it&#39;s really the same</span>
                <span class="n">our_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_data</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">our_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="s2">&quot;Could not retrieve cloned value, this is probably a bug.&quot;</span>
                    <span class="p">)</span>
                <span class="k">return</span> <span class="n">our_value</span>

            <span class="n">existing_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_value_for_hashes</span><span class="p">(</span><span class="o">*</span><span class="n">value_data</span><span class="o">.</span><span class="n">get_hashes</span><span class="p">())</span>

            <span class="k">if</span> <span class="n">existing_value</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">metadata</span><span class="p">:</span>

                <span class="k">if</span> <span class="n">lineage</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">existing_value</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                    <span class="n">log_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Overwriting value lineage for: </span><span class="si">{</span><span class="n">existing_value</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">lineage</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="p">[</span><span class="n">existing_value</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">lineage</span>

                <span class="k">return</span> <span class="n">existing_value</span>

            <span class="k">if</span> <span class="n">value_data</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span> <span class="ow">and</span> <span class="n">metadata</span><span class="p">:</span>
                <span class="n">_metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
                    <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
                <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">metadata</span><span class="p">:</span>
                    <span class="n">_metadata</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="n">_metadata</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                        <span class="n">_metadata</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="s2">&quot;metadata_item&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
                        <span class="n">_metadata</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="s2">&quot;metadata_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">schema_json</span><span class="p">()</span>

                <span class="c1"># TODO: not resolve value_data ?</span>
                <span class="n">cloned_new_metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_value_obj</span><span class="p">(</span>
                    <span class="n">value_schema</span><span class="o">=</span><span class="n">value_data</span><span class="o">.</span><span class="n">value_schema</span><span class="p">,</span>
                    <span class="n">is_set</span><span class="o">=</span><span class="n">value_data</span><span class="o">.</span><span class="n">is_set</span><span class="p">,</span>
                    <span class="n">is_none</span><span class="o">=</span><span class="n">value_data</span><span class="o">.</span><span class="n">is_none</span><span class="p">,</span>
                    <span class="n">type_obj</span><span class="o">=</span><span class="n">value_data</span><span class="o">.</span><span class="n">type_obj</span><span class="p">,</span>
                    <span class="n">metadata</span><span class="o">=</span><span class="n">_metadata</span><span class="p">,</span>
                    <span class="n">value_hashes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_new_value_obj</span><span class="p">(</span>
                    <span class="n">value_obj</span><span class="o">=</span><span class="n">cloned_new_metadata</span><span class="p">,</span>
                    <span class="n">value_data</span><span class="o">=</span><span class="n">value_data</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(),</span>
                    <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span><span class="p">,</span>
                    <span class="c1"># value_hashes=value_hashes,</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">r</span>

            <span class="n">copied_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_remote_value</span><span class="p">(</span><span class="n">value_data</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">value_data</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Value with id &#39;</span><span class="si">{</span><span class="n">value_data</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39; wasn&#39;t successfully registered. This is most likely a bug.&quot;</span>
                <span class="p">)</span>

            <span class="k">assert</span> <span class="n">copied_value</span><span class="o">.</span><span class="n">_registry</span> <span class="o">==</span> <span class="bp">self</span>
            <span class="k">assert</span> <span class="n">copied_value</span><span class="o">.</span><span class="n">_kiara</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span>

            <span class="k">if</span> <span class="n">value_data</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="n">copied_value</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                <span class="n">log_message</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Value id for value of type </span><span class="si">{</span><span class="n">copied_value</span><span class="o">.</span><span class="n">type_name</span><span class="si">}</span><span class="s2"> changed when registering in other registry.&quot;</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Imported value object with id &#39;</span><span class="si">{</span><span class="n">value_data</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39; resulted in copied value with different id. This is a bug.&quot;</span>
                <span class="p">)</span>

            <span class="c1"># for hash_type, value_hash in copied_value.get_hashes().items():</span>
            <span class="c1">#     self._hashes.setdefault(hash_type, {})[value_hash.hash] = value_id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="p">[</span><span class="n">copied_value</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_data</span><span class="o">.</span><span class="n">get_lineage</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">copied_value</span>

        <span class="k">if</span> <span class="n">value_data</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">,</span>
        <span class="p">]</span> <span class="ow">and</span> <span class="n">value_schema</span><span class="o">.</span><span class="n">default</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">,</span>
        <span class="p">]:</span>

            <span class="k">if</span> <span class="n">metadata</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
            <span class="n">value_data</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">value_data</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">]:</span>
            <span class="c1"># TODO: actually implement that</span>
            <span class="k">for</span> <span class="n">hash_type</span> <span class="ow">in</span> <span class="n">_type_obj</span><span class="o">.</span><span class="n">get_supported_hash_types</span><span class="p">():</span>
                <span class="n">hash_str</span> <span class="o">=</span> <span class="n">_type_obj</span><span class="o">.</span><span class="n">calculate_value_hash</span><span class="p">(</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">value_data</span><span class="p">,</span> <span class="n">hash_type</span><span class="o">=</span><span class="n">hash_type</span>
                <span class="p">)</span>
                <span class="n">existing_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_value_for_hashes</span><span class="p">(</span>
                    <span class="n">ValueHash</span><span class="p">(</span><span class="n">hash_type</span><span class="o">=</span><span class="n">hash_type</span><span class="p">,</span> <span class="nb">hash</span><span class="o">=</span><span class="n">hash_str</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">existing_value</span><span class="p">:</span>
                    <span class="k">break</span>

        <span class="k">if</span> <span class="n">existing_value</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">metadata</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">lineage</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">existing_value</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">log_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Overwriting lineage for value &#39;</span><span class="si">{</span><span class="n">existing_value</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">lineage</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="p">[</span><span class="n">existing_value</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">lineage</span>
            <span class="k">return</span> <span class="n">existing_value</span>

        <span class="k">if</span> <span class="n">value_schema</span><span class="o">.</span><span class="n">is_constant</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">value_data</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">]</span>
                <span class="ow">and</span> <span class="n">value_data</span> <span class="o">!=</span> <span class="n">value_schema</span><span class="o">.</span><span class="n">default</span>
            <span class="p">):</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
            <span class="n">value_data</span> <span class="o">=</span> <span class="n">value_schema</span><span class="o">.</span><span class="n">default</span>

        <span class="n">is_set</span> <span class="o">=</span> <span class="n">value_data</span> <span class="o">!=</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span>
        <span class="n">is_none</span> <span class="o">=</span> <span class="n">value_data</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">]</span>

        <span class="n">_metadata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">metadata</span><span class="p">:</span>
            <span class="n">_metadata</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">_metadata</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">_metadata</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="s2">&quot;metadata_item&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
                <span class="n">_metadata</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="s2">&quot;metadata_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">schema_json</span><span class="p">()</span>

        <span class="c1"># value_hashes: typing.Dict[str] = {}</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_value_obj</span><span class="p">(</span>
            <span class="n">value_schema</span><span class="o">=</span><span class="n">value_schema</span><span class="p">,</span>
            <span class="n">is_set</span><span class="o">=</span><span class="n">is_set</span><span class="p">,</span>
            <span class="n">is_none</span><span class="o">=</span><span class="n">is_none</span><span class="p">,</span>
            <span class="n">type_obj</span><span class="o">=</span><span class="n">_type_obj</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">_metadata</span><span class="p">,</span>
            <span class="n">value_hashes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_register_new_value_obj</span><span class="p">(</span>
            <span class="n">value_obj</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
            <span class="n">value_data</span><span class="o">=</span><span class="n">value_data</span><span class="p">,</span>
            <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span><span class="p">,</span>
            <span class="c1"># value_hashes=value_hashes,</span>
        <span class="p">)</span>

        <span class="c1"># if not value.is_none:</span>
        <span class="c1"># value.get_metadata()</span>
        <span class="c1">#     metadata = self._kiara.metadata_mgmt.get_value_metadata(value=value, also_return_schema=True)</span>
        <span class="c1">#     print(metadata)</span>

        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_get_value_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]:</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">value_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_create_value_obj</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span><span class="p">,</span>
        <span class="n">is_set</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">is_none</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">type_obj</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">value_hashes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">ValueHash</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="c1"># if value_schema.is_constant and value_data not in [</span>
        <span class="c1">#     SpecialValue.NO_VALUE,</span>
        <span class="c1">#     SpecialValue.NOT_SET,</span>
        <span class="c1">#     None,</span>
        <span class="c1"># ]:</span>
        <span class="c1">#     raise Exception(</span>
        <span class="c1">#         &quot;Can&#39;t create value. Is a constant, but value data was provided.&quot;</span>
        <span class="c1">#     )</span>

        <span class="k">if</span> <span class="n">type_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value_schema</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">value_types</span><span class="p">:</span>
                <span class="n">log_message</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Value type &#39;</span><span class="si">{</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&#39; not supported in this kiara environment, changing type to &#39;any&#39;.&quot;</span>
                <span class="p">)</span>
                <span class="n">type_cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">get_value_type_cls</span><span class="p">(</span><span class="s2">&quot;any&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">type_cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">get_value_type_cls</span><span class="p">(</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="n">type_obj</span> <span class="o">=</span> <span class="n">type_cls</span><span class="p">(</span><span class="o">**</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type_config</span><span class="p">)</span>

        <span class="n">register_token</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register_tokens</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">register_token</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">Value</span><span class="p">(</span>
                <span class="n">registry</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                <span class="n">value_schema</span><span class="o">=</span><span class="n">value_schema</span><span class="p">,</span>
                <span class="n">type_obj</span><span class="o">=</span><span class="n">type_obj</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
                <span class="n">is_set</span><span class="o">=</span><span class="n">is_set</span><span class="p">,</span>
                <span class="n">is_none</span><span class="o">=</span><span class="n">is_none</span><span class="p">,</span>
                <span class="n">hashes</span><span class="o">=</span><span class="n">value_hashes</span><span class="p">,</span>
                <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
                <span class="n">register_token</span><span class="o">=</span><span class="n">register_token</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_register_tokens</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">register_token</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_register_new_value_obj</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value_obj</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span>
        <span class="n">value_data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
        <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">],</span>
        <span class="c1"># value_hashes: typing.Optional[typing.Mapping[str, ValueHash]] = None,</span>
    <span class="p">):</span>

        <span class="c1"># assert value_obj.id == NO_ID_YET_MARKER</span>

        <span class="k">if</span> <span class="n">value_data</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">,</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span>
            <span class="n">SpecialValue</span><span class="o">.</span><span class="n">IGNORE</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">]:</span>
            <span class="c1"># TODO: should we keep the original value?</span>
            <span class="n">value_data</span> <span class="o">=</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">type_obj</span><span class="o">.</span><span class="n">import_value</span><span class="p">(</span><span class="n">value_data</span><span class="p">)</span>

        <span class="n">value_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_value_and_data</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value_obj</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">value_data</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">NO_ID_YET_MARKER</span><span class="p">:</span>
            <span class="n">value_obj</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">value_id</span>

        <span class="k">if</span> <span class="n">value_obj</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="n">value_id</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Inconsistent id for value: </span><span class="si">{</span><span class="n">value_obj</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">value_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Value id &#39;</span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&#39; wasn&#39;t registered propertly in registry. This is most likely a bug.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">lineage</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="p">[</span><span class="n">value_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">lineage</span>
        <span class="c1"># if value_hashes is None:</span>
        <span class="c1">#     value_hashes = {}</span>
        <span class="c1"># for hash_type, value_hash in value_hashes.items():</span>
        <span class="c1">#     self._hashes.setdefault(hash_type, {})[value_hash.hash] = value_id</span>

        <span class="k">return</span> <span class="n">value_obj</span>

    <span class="k">def</span> <span class="nf">set_value_lineage</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_item</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">],</span> <span class="n">value_lineage</span><span class="p">:</span> <span class="n">ValueLineage</span>
    <span class="p">):</span>

        <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_item</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value available for: </span><span class="si">{</span><span class="n">value_item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lineages</span><span class="p">[</span><span class="n">value_obj</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_lineage</span>

    <span class="k">def</span> <span class="nf">link_alias</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">],</span>
        <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">register_missing_alias</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value for: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="n">alias</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_slot</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">register_missing_alias</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t link value to alias &#39;</span><span class="si">{</span><span class="n">alias</span><span class="si">}</span><span class="s2">&#39;: alias not registered.&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">register_alias</span><span class="p">(</span><span class="n">value_or_schema</span><span class="o">=</span><span class="n">value_obj</span><span class="p">,</span> <span class="n">alias_name</span><span class="o">=</span><span class="n">alias</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value_alias</span> <span class="o">=</span> <span class="n">ValueAlias</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value_alias</span><span class="o">.</span><span class="n">tag</span><span class="p">:</span>
                <span class="n">value_slot</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span><span class="n">value_obj</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="n">value_alias</span><span class="o">.</span><span class="n">tag</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value_slot</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span><span class="n">value_obj</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">link_aliases</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">],</span>
        <span class="o">*</span><span class="n">aliases</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">register_missing_aliases</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value for: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">register_missing_aliases</span><span class="p">:</span>
            <span class="n">invalid</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">aliases</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">alias</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">alias_names</span><span class="p">:</span>
                    <span class="n">invalid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">invalid</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t link value(s), invalid alias(es): </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">invalid</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

        <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">aliases</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">link_alias</span><span class="p">(</span><span class="n">value_obj</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="n">alias</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_check_valid_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>

        <span class="n">match</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">VALID_ALIAS_PATTERN</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">match</span> <span class="k">else</span> <span class="kc">False</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_register_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSlot</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">register_aliases</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value_or_schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">callbacks</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">ValueSlotUpdateHandler</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]:</span>

        <span class="n">invalid</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">aliases</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid_alias</span><span class="p">(</span><span class="n">alias_name</span><span class="o">=</span><span class="n">alias</span><span class="p">):</span>
                <span class="n">invalid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">invalid</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid alias(es), only alphanumeric characters, &#39;-&#39;, and &#39;_&#39; allowed in alias name: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">invalid</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">aliases</span><span class="p">:</span>
            <span class="n">vs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">register_alias</span><span class="p">(</span>
                <span class="n">value_or_schema</span><span class="o">=</span><span class="n">value_or_schema</span><span class="p">,</span> <span class="n">alias_name</span><span class="o">=</span><span class="n">alias</span><span class="p">,</span> <span class="n">callbacks</span><span class="o">=</span><span class="n">callbacks</span>
            <span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">alias</span><span class="p">]</span> <span class="o">=</span> <span class="n">vs</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">register_alias</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value_or_schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="c1"># preseed: bool = False,</span>
        <span class="n">alias_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">callbacks</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">ValueSlotUpdateHandler</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSlot</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Register a value slot.</span>

<span class="sd">        A value slot is an object that holds multiple versions of values that all use the same schema.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            value_or_schema: a value, value_id, or schema, if value, it is added to the newly created slot (after preseed, if selected)</span>
<span class="sd">            preseed: whether to add an empty/non-set value to the newly created slot</span>
<span class="sd">            alias_name: the alias name, will be auto-created if not provided</span>
<span class="sd">            callbacks: a list of callbacks to trigger whenever the alias is updated</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">alias_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">alias_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">alias_name</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Empty alias name not allowed.&quot;</span><span class="p">)</span>

        <span class="n">match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid_alias</span><span class="p">(</span><span class="n">alias_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39;: only alphanumeric characters, &#39;-&#39;, and &#39;_&#39; allowed in alias name.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># if the provided value_or_schema argument is a string, it must be a value_id (for now)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">value_or_schema</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t register alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39;, provided string &#39;</span><span class="si">{</span><span class="n">value_or_schema</span><span class="si">}</span><span class="s2">&#39; not an existing value id.&quot;</span>
                <span class="p">)</span>
            <span class="n">_value_or_schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">_value_or_schema</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value registered for: </span><span class="si">{</span><span class="n">value_or_schema</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">value_or_schema</span> <span class="o">=</span> <span class="n">_value_or_schema</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="n">_value_schema</span> <span class="o">=</span> <span class="n">value_or_schema</span><span class="o">.</span><span class="n">value_schema</span>
            <span class="n">_value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_or_schema</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">):</span>
            <span class="n">_value_schema</span> <span class="o">=</span> <span class="n">value_or_schema</span>
            <span class="n">_value</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid value type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">alias_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_aliases</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t register alias: alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39; already exists.&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">alias_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_value_ids</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t register alias: alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39; already exists as value id.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># vs = ValueSlot.from_value(id=_id, value=value_or_schema)</span>
        <span class="n">vs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_alias</span><span class="p">(</span><span class="n">alias_name</span><span class="o">=</span><span class="n">alias_name</span><span class="p">,</span> <span class="n">value_schema</span><span class="o">=</span><span class="n">_value_schema</span><span class="p">)</span>
        <span class="c1"># self._value_slots[vs.id] = vs</span>

        <span class="c1"># if preseed:</span>
        <span class="c1">#     _v = Value(value_schema=_value_schema, kiara=self._kiara, registry=self)</span>
        <span class="c1">#     vs.add_value(_v)</span>

        <span class="k">if</span> <span class="n">callbacks</span><span class="p">:</span>
            <span class="n">vs</span><span class="o">.</span><span class="n">register_callbacks</span><span class="p">(</span><span class="o">*</span><span class="n">callbacks</span><span class="p">)</span>
            <span class="c1"># self.register_callbacks(vs, *callbacks)</span>

        <span class="k">if</span> <span class="n">_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">vs</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">vs</span>

    <span class="c1"># def find_value_slots(</span>
    <span class="c1">#     self, value_item: typing.Union[str, Value]</span>
    <span class="c1"># ) -&gt; typing.List[ValueSlot]:</span>
    <span class="c1">#</span>
    <span class="c1">#     value_item = self.get_value_obj(value_item)</span>
    <span class="c1">#     result = []</span>
    <span class="c1">#     for slot_id, slot in self._value_slots.items():</span>
    <span class="c1">#         if slot.is_latest_value(value_item):</span>
    <span class="c1">#             result.append(slot)</span>
    <span class="c1">#     return result</span>

    <span class="c1"># def register_callbacks(</span>
    <span class="c1">#     self,</span>
    <span class="c1">#     alias: typing.Union[str, ValueSlot],</span>
    <span class="c1">#     *callbacks: ValueSlotUpdateHandler,</span>
    <span class="c1"># ) -&gt; None:</span>
    <span class="c1">#</span>
    <span class="c1">#     _value_slot = self.get_value_slot(alias)</span>
    <span class="c1">#     _value_slot.register_callbacks(*callbacks)</span>

    <span class="k">def</span> <span class="nf">update_value_slot</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value_slot</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">],</span>
        <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
        <span class="n">value_lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="c1"># first, resolve a potential string into a value_slot or value</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_slot</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">value_slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">alias_names</span><span class="p">:</span>
                <span class="n">_value_slot</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
                    <span class="kc">None</span><span class="p">,</span> <span class="n">Value</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">,</span> <span class="nb">str</span>
                <span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="n">value_slot</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">value_slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
                <span class="n">_value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_slot</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_value_slot</span> <span class="o">=</span> <span class="n">value_slot</span>

            <span class="k">if</span> <span class="n">_value_slot</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t retrieve target object for id: </span><span class="si">{</span><span class="n">value_slot</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">value_slot</span> <span class="o">=</span> <span class="n">_value_slot</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_slot</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="n">aliases</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_aliases_for_value</span><span class="p">(</span><span class="n">value_slot</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="c1"># slots = self.find_value_slots(value_slot)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">aliases</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value slot found for value &#39;</span><span class="si">{</span><span class="n">value_slot</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">aliases</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Multiple value slots found for value &#39;</span><span class="si">{</span><span class="n">value_slot</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39;. This is not supported (yet).&quot;</span>
                <span class="p">)</span>
            <span class="n">_value_slot_2</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span>
                <span class="n">alias</span><span class="o">=</span><span class="n">aliases</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">alias</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_slot</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
            <span class="n">_value_slot_2</span> <span class="o">=</span> <span class="n">value_slot</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for value slot: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value_slot</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">assert</span> <span class="n">_value_slot_2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">value_lineage</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t update value slot with new value lineage data.&quot;</span><span class="p">)</span>
            <span class="n">_value</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                <span class="n">value_data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                <span class="n">value_schema</span><span class="o">=</span><span class="n">value_slot</span><span class="o">.</span><span class="n">value_schema</span><span class="p">,</span>
                <span class="n">lineage</span><span class="o">=</span><span class="n">value_lineage</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="c1"># _value = self.create_value(</span>
            <span class="c1">#     value_data=data,</span>
            <span class="c1">#     value_schema=_value_slot.value_schema,</span>
            <span class="c1">#     value_lineage=value_lineage,</span>
            <span class="c1"># )</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_value_slot</span><span class="p">(</span>
            <span class="n">value_slot</span><span class="o">=</span><span class="n">_value_slot_2</span><span class="p">,</span> <span class="n">new_value</span><span class="o">=</span><span class="n">_value</span><span class="p">,</span> <span class="n">trigger_callbacks</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_value_slots</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">updated_values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">],</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]:</span>

        <span class="n">updated</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">cb_map</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlotUpdateHandler</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">invalid</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">alias</span><span class="p">,</span> <span class="n">value_item</span> <span class="ow">in</span> <span class="n">updated_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
                <span class="n">alias</span> <span class="o">=</span> <span class="n">alias</span><span class="o">.</span><span class="n">id</span>

            <span class="n">_alias</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">_alias</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
                    <span class="n">invalid</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">alias</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">invalid</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">invalid</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t update value slots: invalid alias name(s) &#39;</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">invalid</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="n">alias</span><span class="p">,</span> <span class="n">value_item</span> <span class="ow">in</span> <span class="n">updated_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
                <span class="n">alias</span> <span class="o">=</span> <span class="n">alias</span><span class="o">.</span><span class="n">id</span>

            <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value_slot</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t retrieve value slot for alias: </span><span class="si">{</span><span class="n">alias</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">alias</span><span class="p">,</span> <span class="n">value_item</span> <span class="ow">in</span> <span class="n">updated_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
                <span class="n">alias</span> <span class="o">=</span> <span class="n">alias</span><span class="o">.</span><span class="n">id</span>

            <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_slot</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value_slot</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value slot for alias: </span><span class="si">{</span><span class="n">alias</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_item</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
                    <span class="n">_value_item</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="n">value_item</span>
                    <span class="k">if</span> <span class="n">_value_item</span><span class="o">.</span><span class="n">_registry</span> <span class="o">!=</span> <span class="bp">self</span><span class="p">:</span>
                        <span class="n">_value_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                            <span class="n">_value_item</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span>
                        <span class="p">)</span>
                    <span class="k">elif</span> <span class="n">metadata</span><span class="p">:</span>
                        <span class="n">_value_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                            <span class="n">_value_item</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span>
                        <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">_value_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                        <span class="n">value_data</span><span class="o">=</span><span class="n">value_item</span><span class="p">,</span>
                        <span class="n">value_schema</span><span class="o">=</span><span class="n">value_slot</span><span class="o">.</span><span class="n">value_schema</span><span class="p">,</span>
                        <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
                        <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span><span class="p">,</span>
                    <span class="p">)</span>

                <span class="n">updated_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_value_slot</span><span class="p">(</span>
                    <span class="n">value_slot</span><span class="o">=</span><span class="n">value_slot</span><span class="p">,</span>
                    <span class="n">new_value</span><span class="o">=</span><span class="n">_value_item</span><span class="p">,</span>
                    <span class="n">trigger_callbacks</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">result</span><span class="p">[</span><span class="n">value_slot</span><span class="p">]</span> <span class="o">=</span> <span class="n">updated_item</span>
                <span class="k">if</span> <span class="n">updated_item</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">cb_id</span><span class="p">,</span> <span class="n">cb</span> <span class="ow">in</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">_callbacks</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="n">cb_map</span><span class="p">[</span><span class="n">cb_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">cb</span>
                        <span class="n">updated</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">cb_id</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value_slot</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">log_message</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                    <span class="kn">import</span> <span class="nn">traceback</span>

                    <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                <span class="n">result</span><span class="p">[</span><span class="n">value_slot</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span>

        <span class="k">for</span> <span class="n">cb_id</span><span class="p">,</span> <span class="n">value_slots</span> <span class="ow">in</span> <span class="n">updated</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">cb</span> <span class="o">=</span> <span class="n">cb_map</span><span class="p">[</span><span class="n">cb_id</span><span class="p">]</span>
            <span class="n">cb</span><span class="o">.</span><span class="n">values_updated</span><span class="p">(</span><span class="o">*</span><span class="n">value_slots</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">_update_value_slot</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_slot</span><span class="p">:</span> <span class="n">ValueSlot</span><span class="p">,</span> <span class="n">new_value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span> <span class="n">trigger_callbacks</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="n">last_version</span> <span class="o">=</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">latest_version_nr</span>
        <span class="n">new_version</span> <span class="o">=</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span>
            <span class="n">new_value</span><span class="p">,</span> <span class="n">trigger_callbacks</span><span class="o">=</span><span class="n">trigger_callbacks</span>
        <span class="p">)</span>

        <span class="n">updated</span> <span class="o">=</span> <span class="n">last_version</span> <span class="o">!=</span> <span class="n">new_version</span>
        <span class="k">return</span> <span class="n">updated</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">












  <div class="doc doc-object doc-method">



<h4 id="kiara.data.registry.DataRegistry.register_alias" class="doc doc-heading">
<code class="highlight language-python"><span class="n">register_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_or_schema</span><span class="p">,</span> <span class="n">alias_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">callbacks</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#kiara.data.registry.DataRegistry.register_alias" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Register a value slot.</p>
<p>A value slot is an object that holds multiple versions of values that all use the same schema.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>value_or_schema</code></td>
        <td><code>Union[kiara.data.values.Value, kiara.data.values.ValueSchema, str]</code></td>
        <td><p>a value, value_id, or schema, if value, it is added to the newly created slot (after preseed, if selected)</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>preseed</code></td>
        <td></td>
        <td><p>whether to add an empty/non-set value to the newly created slot</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>alias_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>the alias name, will be auto-created if not provided</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>callbacks</code></td>
        <td><code>Optional[Iterable[kiara.data.registry.ValueSlotUpdateHandler]]</code></td>
        <td><p>a list of callbacks to trigger whenever the alias is updated</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/data/registry/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">register_alias</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">value_or_schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="c1"># preseed: bool = False,</span>
    <span class="n">alias_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">callbacks</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">ValueSlotUpdateHandler</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSlot</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Register a value slot.</span>

<span class="sd">    A value slot is an object that holds multiple versions of values that all use the same schema.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        value_or_schema: a value, value_id, or schema, if value, it is added to the newly created slot (after preseed, if selected)</span>
<span class="sd">        preseed: whether to add an empty/non-set value to the newly created slot</span>
<span class="sd">        alias_name: the alias name, will be auto-created if not provided</span>
<span class="sd">        callbacks: a list of callbacks to trigger whenever the alias is updated</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">alias_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">alias_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">alias_name</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Empty alias name not allowed.&quot;</span><span class="p">)</span>

    <span class="n">match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid_alias</span><span class="p">(</span><span class="n">alias_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39;: only alphanumeric characters, &#39;-&#39;, and &#39;_&#39; allowed in alias name.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># if the provided value_or_schema argument is a string, it must be a value_id (for now)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value_or_schema</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t register alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39;, provided string &#39;</span><span class="si">{</span><span class="n">value_or_schema</span><span class="si">}</span><span class="s2">&#39; not an existing value id.&quot;</span>
            <span class="p">)</span>
        <span class="n">_value_or_schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_value_or_schema</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value registered for: </span><span class="si">{</span><span class="n">value_or_schema</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">value_or_schema</span> <span class="o">=</span> <span class="n">_value_or_schema</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
        <span class="n">_value_schema</span> <span class="o">=</span> <span class="n">value_or_schema</span><span class="o">.</span><span class="n">value_schema</span>
        <span class="n">_value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_or_schema</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">):</span>
        <span class="n">_value_schema</span> <span class="o">=</span> <span class="n">value_or_schema</span>
        <span class="n">_value</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid value type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value_or_schema</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">alias_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_aliases</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Can&#39;t register alias: alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39; already exists.&quot;</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">alias_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_available_value_ids</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Can&#39;t register alias: alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39; already exists as value id.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># vs = ValueSlot.from_value(id=_id, value=value_or_schema)</span>
    <span class="n">vs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_register_alias</span><span class="p">(</span><span class="n">alias_name</span><span class="o">=</span><span class="n">alias_name</span><span class="p">,</span> <span class="n">value_schema</span><span class="o">=</span><span class="n">_value_schema</span><span class="p">)</span>
    <span class="c1"># self._value_slots[vs.id] = vs</span>

    <span class="c1"># if preseed:</span>
    <span class="c1">#     _v = Value(value_schema=_value_schema, kiara=self._kiara, registry=self)</span>
    <span class="c1">#     vs.add_value(_v)</span>

    <span class="k">if</span> <span class="n">callbacks</span><span class="p">:</span>
        <span class="n">vs</span><span class="o">.</span><span class="n">register_callbacks</span><span class="p">(</span><span class="o">*</span><span class="n">callbacks</span><span class="p">)</span>
        <span class="c1"># self.register_callbacks(vs, *callbacks)</span>

    <span class="k">if</span> <span class="n">_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">vs</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">vs</span>
</code></pre></div>
        </details>
    </div>

  </div>










  </div>

    </div>

  </div>




  <div class="doc doc-object doc-class">



<h3 id="kiara.data.registry.ValueSlotUpdateHandler" class="doc doc-heading">
        <code>
ValueSlotUpdateHandler            (<span title="typing.Protocol">Protocol</span>)
        </code>



<a href="#kiara.data.registry.ValueSlotUpdateHandler" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>The call signature for callbacks that can be registered as value update handlers.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/registry/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueSlotUpdateHandler</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The call signature for callbacks that can be registered as value update handlers.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">values_updated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">items</span><span class="p">:</span> <span class="s2">&quot;ValueSlot&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="o">...</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">














  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h3 id="kiara.data.registry.store" class="doc doc-heading">
        <code>store</code>



<a href="#kiara.data.registry.store" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.data.registry.store.LocalDataStore" class="doc doc-heading">
        <code>
LocalDataStore            (<a title="kiara.data.registry.DataRegistry" href="../registry/__init__/#kiara.data.registry.DataRegistry">DataRegistry</a>)
        </code>



<a href="#kiara.data.registry.store.LocalDataStore" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>An implementation of a <em>kiara</em> data registry that stores data locally, so it can be accessed across sessions.</p>
<p>Data is stored under the value for the configured 'base_path' attribute, along with <a href="../../metadata/data/#kiara.metadata.data.LoadConfig">LoadConfig</a> data
that describes how the data can be re-loaded into memory.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/registry/store.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">LocalDataStore</span><span class="p">(</span><span class="n">DataRegistry</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An implementation of a *kiara* data registry that stores data locally, so it can be accessed across sessions.</span>

<span class="sd">    Data is stored under the value for the configured &#39;base_path&#39; attribute, along with [LoadConfig][kiara.metadata.data.LoadConfig] data</span>
<span class="sd">    that describes how the data can be re-loaded into memory.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">,</span> <span class="n">base_path</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]):</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">base_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">base_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="n">base_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_obj_cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_info_cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">SavedValueInfo</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_metadata_cache</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">base_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span>

    <span class="k">def</span> <span class="nf">_get_saved_value_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SavedValueInfo</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">value_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_info_cache</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_info_cache</span><span class="p">[</span><span class="n">value_id</span><span class="p">]</span>

        <span class="n">metadata_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata_path</span><span class="p">(</span><span class="n">value_id</span><span class="o">=</span><span class="n">value_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">metadata_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value with id &#39;</span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&#39; registered.&quot;</span><span class="p">)</span>

        <span class="n">info_content</span> <span class="o">=</span> <span class="n">metadata_path</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
        <span class="n">info_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">info_content</span><span class="p">)</span>

        <span class="n">value_info</span> <span class="o">=</span> <span class="n">SavedValueInfo</span><span class="p">(</span><span class="o">**</span><span class="n">info_dict</span><span class="p">)</span>

        <span class="k">assert</span> <span class="n">value_info</span><span class="o">.</span><span class="n">value_id</span> <span class="o">==</span> <span class="n">value_id</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_value_info_cache</span><span class="p">[</span><span class="n">value_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_info</span>
        <span class="k">return</span> <span class="n">value_info</span>

    <span class="k">def</span> <span class="nf">_get_value_obj_for_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">value_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_obj_cache</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_obj_cache</span><span class="p">[</span><span class="n">value_id</span><span class="p">]</span>

        <span class="n">value_info</span><span class="p">:</span> <span class="n">SavedValueInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_saved_value_info</span><span class="p">(</span><span class="n">value_id</span><span class="p">)</span>
        <span class="n">value_schema</span> <span class="o">=</span> <span class="n">value_info</span><span class="o">.</span><span class="n">value_schema</span>
        <span class="c1"># value_schema = ValueSchema(</span>
        <span class="c1">#     type=value_info.value_type, type_config=value_info.value_type_config</span>
        <span class="c1"># )</span>

        <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_value_obj</span><span class="p">(</span>
            <span class="n">value_schema</span><span class="o">=</span><span class="n">value_schema</span><span class="p">,</span>
            <span class="n">is_set</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">is_none</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">value_hashes</span><span class="o">=</span><span class="n">value_info</span><span class="o">.</span><span class="n">hashes</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">value_info</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">value_obj</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">value_info</span><span class="o">.</span><span class="n">value_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register_new_value_obj</span><span class="p">(</span>
            <span class="n">value_obj</span><span class="o">=</span><span class="n">value_obj</span><span class="p">,</span>
            <span class="n">value_data</span><span class="o">=</span><span class="n">SpecialValue</span><span class="o">.</span><span class="n">IGNORE</span><span class="p">,</span>
            <span class="n">lineage</span><span class="o">=</span><span class="n">value_info</span><span class="o">.</span><span class="n">lineage</span><span class="p">,</span>
            <span class="c1"># value_hashes=value_info.hashes,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_obj_cache</span><span class="p">[</span><span class="n">value_obj</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_obj</span>
        <span class="k">return</span> <span class="n">value_obj</span>

    <span class="k">def</span> <span class="nf">_get_value_data_for_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">value_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_cache</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_cache</span><span class="p">[</span><span class="n">value_id</span><span class="p">]</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>

        <span class="c1"># # value_obj = self.get_value_obj(value_item=value_id)</span>
        <span class="c1"># metadata_path = self.get_metadata_path(value_id=value_id)</span>
        <span class="c1"># if not metadata_path.exists():</span>
        <span class="c1">#     raise Exception(f&quot;No value with id &#39;{value_id}&#39; registered.&quot;)</span>
        <span class="c1">#</span>
        <span class="c1"># info_content = metadata_path.read_text()</span>
        <span class="c1"># info_dict = json.loads(info_content)</span>
        <span class="c1"># value_info = SavedValueInfo(**info_dict)</span>
        <span class="n">value_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_saved_value_info</span><span class="p">(</span><span class="n">value_id</span><span class="o">=</span><span class="n">value_id</span><span class="p">)</span>

        <span class="k">assert</span> <span class="n">value_info</span><span class="o">.</span><span class="n">value_id</span> <span class="o">==</span> <span class="n">value_id</span>

        <span class="n">load_config</span> <span class="o">=</span> <span class="n">value_info</span><span class="o">.</span><span class="n">load_config</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="o">**</span><span class="n">load_config</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;value_id&quot;</span><span class="p">,</span> <span class="s2">&quot;base_path_input_name&quot;</span><span class="p">,</span> <span class="s2">&quot;doc&quot;</span><span class="p">}))</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_cache</span><span class="p">[</span><span class="n">value_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_get_value_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]:</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_saved_value_info</span><span class="p">(</span><span class="n">value_id</span><span class="p">)</span><span class="o">.</span><span class="n">lineage</span>

    <span class="k">def</span> <span class="nf">_register_value_and_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">data</span> <span class="o">==</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">IGNORE</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
        <span class="c1">#</span>
        <span class="c1"># new_value_id = str(uuid.uuid4())</span>
        <span class="c1">#</span>
        <span class="c1"># value.id = new_value_id</span>
        <span class="c1"># value_type = value.type_name</span>
        <span class="c1">#</span>
        <span class="c1"># # run the type and repo type specific save module, and retrieve the load_config that is needed to retrieve it again later</span>
        <span class="c1"># save_config = self._prepare_save_config(</span>
        <span class="c1">#     value_id=new_value_id, value_type=value_type, value=value</span>
        <span class="c1"># )</span>
        <span class="c1">#</span>
        <span class="c1"># save_module = save_config.create_module(kiara=self._kiara)</span>
        <span class="c1"># result = save_module.run(**save_config.inputs)</span>
        <span class="c1"># load_config_value: Value = result.get_value_obj(&quot;load_config&quot;)</span>
        <span class="c1">#</span>
        <span class="c1"># # assemble the value metadata</span>
        <span class="c1"># metadata: typing.Dict[str, typing.Mapping[str, typing.Any]] = dict(</span>
        <span class="c1">#     value.get_metadata(also_return_schema=True)</span>
        <span class="c1"># )</span>

    <span class="k">def</span> <span class="nf">_register_remote_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>

        <span class="n">value_metadata_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata_path</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value_metadata_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t register remote value with id &#39;</span><span class="si">{</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39;. Load config for this id already exists: </span><span class="si">{</span><span class="n">value_metadata_path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">value_type</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">type_name</span>

        <span class="c1"># run the type and repo type specific save module, and retrieve the load_config that is needed to retrieve it again later</span>
        <span class="n">save_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_save_config</span><span class="p">(</span>
            <span class="n">value_id</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">value_type</span><span class="o">=</span><span class="n">value_type</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span>
        <span class="p">)</span>

        <span class="n">save_module</span> <span class="o">=</span> <span class="n">save_config</span><span class="o">.</span><span class="n">create_module</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">save_module</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="o">**</span><span class="n">save_config</span><span class="o">.</span><span class="n">inputs</span><span class="p">)</span>

        <span class="n">load_config_value</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="s2">&quot;load_config&quot;</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">value_type</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
            <span class="n">field_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>
        <span class="n">saved_value</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>

        <span class="n">load_config_data</span> <span class="o">=</span> <span class="n">load_config_value</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>

        <span class="n">metadata</span> <span class="o">=</span> <span class="n">saved_value</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">also_return_schema</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">value_info</span> <span class="o">=</span> <span class="n">SavedValueInfo</span><span class="p">(</span>
            <span class="n">value_id</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">value_schema</span><span class="o">=</span><span class="n">saved_value</span><span class="o">.</span><span class="n">value_schema</span><span class="p">,</span>
            <span class="n">is_valid</span><span class="o">=</span><span class="n">saved_value</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">(),</span>
            <span class="n">hashes</span><span class="o">=</span><span class="n">saved_value</span><span class="o">.</span><span class="n">get_hashes</span><span class="p">(),</span>
            <span class="n">lineage</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">get_lineage</span><span class="p">(),</span>
            <span class="n">save_lineage</span><span class="o">=</span><span class="n">saved_value</span><span class="o">.</span><span class="n">get_lineage</span><span class="p">(),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
            <span class="n">load_config</span><span class="o">=</span><span class="n">load_config_data</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">value_metadata_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">value_metadata_path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">value_info</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

        <span class="n">copied_value</span> <span class="o">=</span> <span class="n">saved_value</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">copied_value</span><span class="o">.</span><span class="n">_registry</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">copied_value</span><span class="o">.</span><span class="n">_kiara</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span>

        <span class="k">if</span> <span class="n">copied_value</span><span class="o">.</span><span class="n">id</span> <span class="o">!=</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="n">log_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Saved value id different to original id &#39;</span><span class="si">{</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
            <span class="n">copied_value</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_value_obj_cache</span><span class="p">[</span><span class="n">copied_value</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">copied_value</span>

        <span class="k">return</span> <span class="n">copied_value</span>

    <span class="k">def</span> <span class="nf">_prepare_save_config</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="s2">&quot;Value&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SaveConfig</span><span class="p">:</span>

        <span class="n">store_operations</span><span class="p">:</span> <span class="n">StoreOperationType</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">get_operations</span><span class="p">(</span><span class="s2">&quot;store_value&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="n">op_config</span> <span class="o">=</span> <span class="n">store_operations</span><span class="o">.</span><span class="n">get_store_operation_for_type</span><span class="p">(</span><span class="n">value_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">op_config</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t save value: no save operation found for value type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
            <span class="p">)</span>

        <span class="n">target_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_path</span><span class="p">(</span><span class="n">value_id</span><span class="o">=</span><span class="n">value_id</span><span class="p">)</span>
        <span class="n">metadata_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_metadata_path</span><span class="p">(</span><span class="n">value_id</span><span class="o">=</span><span class="n">value_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">metadata_path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t save value, metadata file already exists: </span><span class="si">{</span><span class="n">metadata_path</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">input_name</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">type_name</span>
        <span class="k">if</span> <span class="n">input_name</span> <span class="o">==</span> <span class="s2">&quot;any&quot;</span><span class="p">:</span>
            <span class="n">input_name</span> <span class="o">=</span> <span class="s2">&quot;value_item&quot;</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">input_name</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(),</span>
            <span class="s2">&quot;base_path&quot;</span><span class="p">:</span> <span class="n">target_path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span>
            <span class="s2">&quot;value_id&quot;</span><span class="p">:</span> <span class="n">value_id</span><span class="p">,</span>
        <span class="p">}</span>  <span class="c1"># type: ignore</span>

        <span class="n">save_config</span> <span class="o">=</span> <span class="n">SaveConfig</span><span class="p">(</span>
            <span class="n">module_type</span><span class="o">=</span><span class="n">op_config</span><span class="o">.</span><span class="n">module_type</span><span class="p">,</span>
            <span class="n">module_config</span><span class="o">=</span><span class="n">op_config</span><span class="o">.</span><span class="n">module_config</span><span class="p">,</span>
            <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span>
            <span class="n">load_config_output</span><span class="o">=</span><span class="s2">&quot;load_config&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">save_config</span>

    <span class="k">def</span> <span class="nf">get_data_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;value_</span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">/</span> <span class="s2">&quot;data&quot;</span>

    <span class="k">def</span> <span class="nf">get_metadata_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;value_</span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">/</span> <span class="s2">&quot;value_metadata.json&quot;</span>
        <span class="k">return</span> <span class="n">path</span>

    <span class="c1"># def get_load_config_path(self, value_id: str) -&gt; Path:</span>
    <span class="c1">#     path = self._base_path / f&quot;value_{value_id}&quot; / &quot;load_config.json&quot;</span>
    <span class="c1">#     return path</span>

    <span class="k">def</span> <span class="nf">_get_value_slot_for_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSlot</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">alias_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">[</span><span class="n">alias_name</span><span class="p">]</span>

        <span class="n">alias_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span> <span class="o">/</span> <span class="s2">&quot;aliases&quot;</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;alias_</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">.json&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">alias_file</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No alias with name &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39; registered.&quot;</span><span class="p">)</span>

        <span class="n">file_content</span> <span class="o">=</span> <span class="n">alias_file</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
        <span class="n">alias_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">file_content</span><span class="p">)</span>
        <span class="n">value_schema</span> <span class="o">=</span> <span class="n">ValueSchema</span><span class="p">(</span><span class="o">**</span><span class="n">alias_data</span><span class="p">[</span><span class="s2">&quot;value_schema&quot;</span><span class="p">])</span>

        <span class="n">value_slot</span> <span class="o">=</span> <span class="n">ValueSlot</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">alias_name</span><span class="p">,</span> <span class="n">value_schema</span><span class="o">=</span><span class="n">value_schema</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span> <span class="n">registry</span><span class="o">=</span><span class="bp">self</span>
        <span class="p">)</span>
        <span class="n">value_slot</span><span class="o">.</span><span class="n">register_callbacks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">version</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">alias_data</span><span class="p">[</span><span class="s2">&quot;versions&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())):</span>
            <span class="n">value_id</span> <span class="o">=</span> <span class="n">alias_data</span><span class="p">[</span><span class="s2">&quot;versions&quot;</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">version</span><span class="p">)]</span>
            <span class="n">value_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">value_item</span><span class="o">=</span><span class="n">value_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t find value with id: </span><span class="si">{</span><span class="n">value_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">tags</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">value_id</span> <span class="ow">in</span> <span class="n">alias_data</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">tags</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">tag</span>
                    <span class="k">for</span> <span class="n">tag</span><span class="p">,</span> <span class="n">version</span> <span class="ow">in</span> <span class="n">alias_data</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">version</span> <span class="o">==</span> <span class="n">version</span>
                <span class="p">]</span>

            <span class="n">new_version</span> <span class="o">=</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span>
                <span class="n">value_obj</span><span class="p">,</span> <span class="n">trigger_callbacks</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="n">tags</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">new_version</span> <span class="o">!=</span> <span class="nb">int</span><span class="p">(</span><span class="n">version</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;New version different to stored version (</span><span class="si">{</span><span class="n">new_version</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">). This is a bug.&quot;</span>
                <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">[</span><span class="n">alias_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_slot</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">[</span><span class="n">alias_name</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_get_available_aliases</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="n">alias_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span> <span class="o">/</span> <span class="s2">&quot;aliases&quot;</span>
        <span class="n">alias_file</span> <span class="o">=</span> <span class="n">alias_path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;alias_*.json&quot;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">af</span> <span class="ow">in</span> <span class="n">alias_file</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">af</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
                <span class="n">log_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Ignoring non-file: </span><span class="si">{</span><span class="n">af</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="n">alias_name</span> <span class="o">=</span> <span class="n">af</span><span class="o">.</span><span class="n">name</span><span class="p">[</span><span class="mi">6</span><span class="p">:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">_get_available_value_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">value_ids</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">x</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span><span class="p">[</span><span class="mi">6</span><span class="p">:]</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;value_*/value_metadata.json&quot;</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="k">return</span> <span class="n">value_ids</span>

    <span class="k">def</span> <span class="nf">_register_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSlot</span><span class="p">:</span>

        <span class="n">alias_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span> <span class="o">/</span> <span class="s2">&quot;aliases&quot;</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;alias_</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">.json&quot;</span>
        <span class="k">if</span> <span class="n">alias_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39; already registered.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">alias_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value slot for alias &#39;</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">&#39; already exists.&quot;</span><span class="p">)</span>

        <span class="n">alias_file</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">vs</span> <span class="o">=</span> <span class="n">ValueSlot</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">alias_name</span><span class="p">,</span> <span class="n">value_schema</span><span class="o">=</span><span class="n">value_schema</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span> <span class="n">registry</span><span class="o">=</span><span class="bp">self</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">[</span><span class="n">alias_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">vs</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_write_alias_file</span><span class="p">(</span><span class="n">alias_name</span><span class="p">)</span>
        <span class="n">vs</span><span class="o">.</span><span class="n">register_callbacks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">vs</span>

    <span class="k">def</span> <span class="nf">_write_alias_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">):</span>

        <span class="n">alias_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base_path</span> <span class="o">/</span> <span class="s2">&quot;aliases&quot;</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;alias_</span><span class="si">{</span><span class="n">alias_name</span><span class="si">}</span><span class="s2">.json&quot;</span>

        <span class="n">value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">[</span><span class="n">alias_name</span><span class="p">]</span>

        <span class="n">alias_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;value_schema&quot;</span><span class="p">:</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">dict</span><span class="p">(),</span>
            <span class="s2">&quot;versions&quot;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="n">version</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">alias_dict</span><span class="p">[</span><span class="s2">&quot;versions&quot;</span><span class="p">][</span><span class="n">version</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span>

        <span class="k">for</span> <span class="n">tag_name</span><span class="p">,</span> <span class="n">version</span> <span class="ow">in</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">alias_dict</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">][</span><span class="n">tag_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">version</span>

        <span class="n">alias_file</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">alias_dict</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">values_updated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">items</span><span class="p">:</span> <span class="s2">&quot;ValueSlot&quot;</span><span class="p">):</span>

        <span class="n">invalid</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">invalid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">invalid</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t update value(s), invalid aliases: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">invalid</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_alias_file</span><span class="p">(</span><span class="n">alias_name</span><span class="o">=</span><span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">
















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.data.registry.store.SavedValueInfo" class="doc doc-heading">
        <code>
SavedValueInfo            (<a title="kiara.data.values.ValueInfo" href="../values/__init__/#kiara.data.values.ValueInfo">ValueInfo</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.registry.store.SavedValueInfo" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/registry/store.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SavedValueInfo</span><span class="p">(</span><span class="n">ValueInfo</span><span class="p">):</span>

    <span class="n">load_config</span><span class="p">:</span> <span class="n">LoadConfig</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The configuration to load this value from disk (or however it is stored).&quot;</span>
    <span class="p">)</span>
    <span class="n">save_lineage</span><span class="p">:</span> <span class="n">ValueLineage</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Information about how the value was saved.&quot;</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.registry.store.SavedValueInfo.load_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_config</span><span class="p">:</span> <span class="n">LoadConfig</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.registry.store.SavedValueInfo.load_config" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>The configuration to load this value from disk (or however it is stored).</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="kiara.data.registry.store.SavedValueInfo.save_lineage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save_lineage</span><span class="p">:</span> <span class="n">ValueLineage</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.registry.store.SavedValueInfo.save_lineage" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Information about how the value was saved.</p>
    </div>

  </div>










  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.data.types" class="doc doc-heading">
        <code>types</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.types" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>This is the base module that contains everything data type-related in <em>kiara</em>.</p>
<p>I'm still not 100% sure how to best implement the <em>kiara</em> type system, there are several ways it could be done, for example
based on Python type-hints, using JSON-schema, Avro (which is my 2nd favourite option), as well as by implementing a
custom type-class hierarchy. Which is what I have choosen to try first. For now, it looks like it'll work out,
but there is a chance requirements I haven't forseen will crop up that could make this become ugly.</p>
<p>Anyway, the way it works (for now) is that <em>kiara</em> comes with a set of often used types (the standard set of: scalars,
list, dict, table &amp; array, etc.) which each come with 2 functions that can serialize and deserialize values of that
type in a persistant fashion -- which could be storing as a file on disk, or as a cell/row in a database. Those functions
will most likley be <em>kiara</em> modules themselves, with even more restricted input/output type options.</p>
<p>In addition, packages that contain modules can implement their own, custom types, if suitable ones are not available in
core-<em>kiara</em>. Those can either be 'serialized/deserialized' into <em>kiara</em>-native types (which in turn will serialize them
using their own serializing functions), or will have to implement custom serializing functionality (which will probably
be discouraged, since this might not be trivial and there are quite a few things to consider).</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h3 id="kiara.data.types.ValueType" class="doc doc-heading">
        <code>
ValueType            (<span title="abc.ABC">ABC</span>, <span title="typing.Generic">Generic</span>)
        </code>



<a href="#kiara.data.types.ValueType" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Base class that all <em>kiara</em> types must inherit from.</p>
<p><em>kiara</em> types have 3 main responsibilities:</p>
<ul>
<li>serialize into / deserialize from persistent state</li>
<li>data validation</li>
<li>metadata extraction</li>
</ul>
<p>Serializing being the arguably most important of those, because without most of the data management features of
 <em>kiara</em> would be impossible. Validation should not require any explanation. Metadata extraction is important, because
 that metadata will be available to other components of <em>kiara</em> (or frontends for it), without them having to request
 the actual data. That will hopefully make <em>kiara</em> very efficient in terms of memory management, as well as data
 transfer and I/O. Ideally, the actual data (bytes) will only be requested at the last possible moment. For example when a
 module needs the input data to do processing on it -- and even then it might be that it only requests a part of the
 data, say a single column of a table. Or when a frontend needs to display/visualize the data.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueType</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Generic</span><span class="p">[</span><span class="n">TYPE_PYTHON_CLS</span><span class="p">,</span> <span class="n">TYPE_CONFIG_CLS</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Base class that all *kiara* types must inherit from.</span>

<span class="sd">    *kiara* types have 3 main responsibilities:</span>

<span class="sd">     - serialize into / deserialize from persistent state</span>
<span class="sd">     - data validation</span>
<span class="sd">     -  metadata extraction</span>

<span class="sd">     Serializing being the arguably most important of those, because without most of the data management features of</span>
<span class="sd">     *kiara* would be impossible. Validation should not require any explanation. Metadata extraction is important, because</span>
<span class="sd">     that metadata will be available to other components of *kiara* (or frontends for it), without them having to request</span>
<span class="sd">     the actual data. That will hopefully make *kiara* very efficient in terms of memory management, as well as data</span>
<span class="sd">     transfer and I/O. Ideally, the actual data (bytes) will only be requested at the last possible moment. For example when a</span>
<span class="sd">     module needs the input data to do processing on it -- and even then it might be that it only requests a part of the</span>
<span class="sd">     data, say a single column of a table. Or when a frontend needs to display/visualize the data.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_type_metadata</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueTypeMetadata</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ValueTypeMetadata</span><span class="o">.</span><span class="n">from_value_type_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>

    <span class="c1"># @classmethod</span>
    <span class="c1"># def doc(cls) -&gt; str:</span>
    <span class="c1">#</span>
    <span class="c1">#     return extract_doc_from_cls(cls)</span>
    <span class="c1">#</span>
    <span class="c1"># @classmethod</span>
    <span class="c1"># def desc(cls) -&gt; str:</span>
    <span class="c1">#     return extract_doc_from_cls(cls, only_first_line=True)</span>

    <span class="c1"># @classmethod</span>
    <span class="c1"># def conversions(</span>
    <span class="c1">#     self,</span>
    <span class="c1"># ) -&gt; typing.Optional[typing.Mapping[str, typing.Mapping[str, typing.Any]]]:</span>
    <span class="c1">#     &quot;&quot;&quot;Return a dictionary of configuration for modules that can transform this type.</span>
    <span class="c1">#</span>
    <span class="c1">#     The name of the transformation is the key of the result dictionary, the configuration is a module configuration</span>
    <span class="c1">#     (dictionary wth &#39;module_type&#39; and optional &#39;module_config&#39;, &#39;input_name&#39; and &#39;output_name&#39; keys).</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#</span>
    <span class="c1">#     return {&quot;string&quot;: {&quot;module_type&quot;: &quot;string.pretty_print&quot;, &quot;input_name&quot;: &quot;item&quot;}}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">check_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ValueType&quot;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Check whether the provided input matches this value type.</span>

<span class="sd">        If it does, return a ValueType object (with the appropriate type configuration).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">backing_python_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">TYPE_PYTHON_CLS</span><span class="p">]:</span>
        <span class="k">pass</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">type_config_cls</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">TYPE_CONFIG_CLS</span><span class="p">]:</span>
        <span class="k">pass</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">candidate_python_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_supported_hash_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">calculate_value_hash</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">hash_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calculate the hash of this value.</span>

<span class="sd">        If a hash can&#39;t be calculated, or the calculation of a type is not implemented (yet), this will return None.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value type &#39;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">_value_type_name</span><span class="si">}</span><span class="s2">&#39; does not support hash calculation.&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">type_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_type_config</span><span class="p">:</span> <span class="n">TYPE_CONFIG_CLS</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">type_config_cls</span><span class="p">(</span><span class="o">**</span><span class="n">type_config</span><span class="p">)</span>  <span class="c1"># type: ignore  # TODO: double-check this is only a mypy issue</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ValueTypeConfigException</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Error creating object for value_type: </span><span class="si">{</span><span class="n">ve</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span>
                <span class="n">type_config</span><span class="p">,</span>
                <span class="n">ve</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="c1"># self._type_config: typing.Mapping[str, typing.Any] = self</span>
        <span class="c1"># self._transformations: typing.Optional[</span>
        <span class="c1">#     typing.Mapping[str, typing.Mapping[str, typing.Any]]</span>
        <span class="c1"># ] = None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">type_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TYPE_CONFIG_CLS</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_config</span>

    <span class="k">def</span> <span class="nf">import_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="k">assert</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">parsed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">parsed</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">parsed</span> <span class="o">=</span> <span class="n">value</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">parsed</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KiaraValueException</span><span class="p">(</span>
                <span class="n">value_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">value_data</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">e</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">parsed</span>

    <span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Parse a value into a supported python type.</span>

<span class="sd">        This exists to make it easier to do trivial conversions (e.g. from a date string to a datetime object).</span>
<span class="sd">        If you choose to overwrite this method, make 100% sure that you don&#39;t change the meaning of the value, and try to</span>
<span class="sd">        avoid adding or removing information from the data (e.g. by changing the resolution of a date).</span>

<span class="sd">        Arguments:</span>
<span class="sd">            v: the value</span>

<span class="sd">        Returns:</span>
<span class="sd">            &#39;None&#39;, if no parsing was done and the original value should be used, otherwise return the parsed Python object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Validate the value. This expects an instance of the defined Python class (from &#39;backing_python_type).&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get_type_hint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;python&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return a type hint for this value type object.</span>

<span class="sd">        This can be used by kiara interfaces to document/validate user input. For now, only &#39;python&#39; type hints are</span>
<span class="sd">        expected to be implemented, but in theory this could also return type hints for other contexts.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">













  <div class="doc doc-object doc-method">



<h4 id="kiara.data.types.ValueType.calculate_value_hash" class="doc doc-heading">
<code class="highlight language-python"><span class="n">calculate_value_hash</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">hash_type</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.data.types.ValueType.calculate_value_hash" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Calculate the hash of this value.</p>
<p>If a hash can't be calculated, or the calculation of a type is not implemented (yet), this will return None.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">calculate_value_hash</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">hash_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Calculate the hash of this value.</span>

<span class="sd">    If a hash can&#39;t be calculated, or the calculation of a type is not implemented (yet), this will return None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value type &#39;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">_value_type_name</span><span class="si">}</span><span class="s2">&#39; does not support hash calculation.&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h4 id="kiara.data.types.ValueType.check_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.data.types.ValueType.check_data" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Check whether the provided input matches this value type.</p>
<p>If it does, return a ValueType object (with the appropriate type configuration).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">check_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ValueType&quot;</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Check whether the provided input matches this value type.</span>

<span class="sd">    If it does, return a ValueType object (with the appropriate type configuration).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h4 id="kiara.data.types.ValueType.get_type_hint" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_type_hint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="s1">&#39;python&#39;</span><span class="p">)</span></code>


<a href="#kiara.data.types.ValueType.get_type_hint" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return a type hint for this value type object.</p>
<p>This can be used by kiara interfaces to document/validate user input. For now, only 'python' type hints are
expected to be implemented, but in theory this could also return type hints for other contexts.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_type_hint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;python&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Return a type hint for this value type object.</span>

<span class="sd">    This can be used by kiara interfaces to document/validate user input. For now, only &#39;python&#39; type hints are</span>
<span class="sd">    expected to be implemented, but in theory this could also return type hints for other contexts.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h4 id="kiara.data.types.ValueType.parse_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.ValueType.parse_value" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Parse a value into a supported python type.</p>
<p>This exists to make it easier to do trivial conversions (e.g. from a date string to a datetime object).
If you choose to overwrite this method, make 100% sure that you don't change the meaning of the value, and try to
avoid adding or removing information from the data (e.g. by changing the resolution of a date).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>v</code></td>
        <td></td>
        <td><p>the value</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>'None', if no parsing was done and the original value should be used, otherwise return the parsed Python object</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Parse a value into a supported python type.</span>

<span class="sd">    This exists to make it easier to do trivial conversions (e.g. from a date string to a datetime object).</span>
<span class="sd">    If you choose to overwrite this method, make 100% sure that you don&#39;t change the meaning of the value, and try to</span>
<span class="sd">    avoid adding or removing information from the data (e.g. by changing the resolution of a date).</span>

<span class="sd">    Arguments:</span>
<span class="sd">        v: the value</span>

<span class="sd">    Returns:</span>
<span class="sd">        &#39;None&#39;, if no parsing was done and the original value should be used, otherwise return the parsed Python object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h4 id="kiara.data.types.ValueType.validate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.ValueType.validate" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Validate the value. This expects an instance of the defined Python class (from 'backing_python_type).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Validate the value. This expects an instance of the defined Python class (from &#39;backing_python_type).&quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.data.types.ValueTypeConfigMetadata" class="doc doc-heading">
        <code>
ValueTypeConfigMetadata            (<a title="kiara.metadata.WrapperMetadataModel" href="../../metadata/__init__/#kiara.metadata.WrapperMetadataModel">WrapperMetadataModel</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.types.ValueTypeConfigMetadata" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueTypeConfigMetadata</span><span class="p">(</span><span class="n">WrapperMetadataModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_config_class</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">config_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">ValueTypeConfigSchema</span><span class="p">],</span>
    <span class="p">):</span>

        <span class="n">flat_models</span> <span class="o">=</span> <span class="n">get_flat_models_from_model</span><span class="p">(</span><span class="n">config_cls</span><span class="p">)</span>
        <span class="n">model_name_map</span> <span class="o">=</span> <span class="n">get_model_name_map</span><span class="p">(</span><span class="n">flat_models</span><span class="p">)</span>
        <span class="n">m_schema</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">model_process_schema</span><span class="p">(</span><span class="n">config_cls</span><span class="p">,</span> <span class="n">model_name_map</span><span class="o">=</span><span class="n">model_name_map</span><span class="p">)</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="n">m_schema</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span>

        <span class="n">config_values</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">details</span> <span class="ow">in</span> <span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">type_str</span> <span class="o">=</span> <span class="s2">&quot;-- n/a --&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;type&quot;</span> <span class="ow">in</span> <span class="n">details</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">type_str</span> <span class="o">=</span> <span class="n">details</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>

            <span class="n">desc</span> <span class="o">=</span> <span class="n">details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">DEFAULT_NO_DESC_VALUE</span><span class="p">)</span>

            <span class="n">default</span> <span class="o">=</span> <span class="n">config_cls</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">default</span>

            <span class="k">if</span> <span class="n">default</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">config_cls</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">default_factory</span><span class="p">):</span>
                    <span class="n">default</span> <span class="o">=</span> <span class="n">config_cls</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">default_factory</span><span class="p">()</span>  <span class="c1"># type: ignore</span>

            <span class="n">req</span> <span class="o">=</span> <span class="n">config_cls</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">required</span>

            <span class="n">config_values</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ValueTypeAndDescription</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">type_str</span><span class="p">,</span> <span class="n">value_default</span><span class="o">=</span><span class="n">default</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="n">req</span>
            <span class="p">)</span>

        <span class="n">python_cls</span> <span class="o">=</span> <span class="n">PythonClassMetadata</span><span class="o">.</span><span class="n">from_class</span><span class="p">(</span><span class="n">config_cls</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ValueTypeConfigMetadata</span><span class="p">(</span>
            <span class="n">python_class</span><span class="o">=</span><span class="n">python_cls</span><span class="p">,</span> <span class="n">config_values</span><span class="o">=</span><span class="n">config_values</span>
        <span class="p">)</span>

    <span class="n">config_values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueTypeAndDescription</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The available configuration values.&quot;</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.types.ValueTypeConfigMetadata.config_values" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config_values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">ValueTypeAndDescription</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.types.ValueTypeConfigMetadata.config_values" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The available configuration values.</p>
    </div>

  </div>











  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.data.types.ValueTypeConfigSchema" class="doc doc-heading">
        <code>
ValueTypeConfigSchema            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.types.ValueTypeConfigSchema" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Base class that describes the configuration a <a href="../types/__init__/#kiara.data.types.ValueType"><code>ValueType</code></a> class accepts.</p>
<p>This is stored in the <code>_config_cls</code> class attribute in each <code>ValueType</code> class. By default,
a <code>ValueType</code> is not configurable, unless the <code>_config_cls</code> class attribute points to a sub-class of this class.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueTypeConfigSchema</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class that describes the configuration a [``ValueType``][kiara.data.types.ValueType] class accepts.</span>

<span class="sd">    This is stored in the ``_config_cls`` class attribute in each ``ValueType`` class. By default,</span>
<span class="sd">    a ``ValueType`` is not configurable, unless the ``_config_cls`` class attribute points to a sub-class of this class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">requires_config</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return whether this class can be used as-is, or requires configuration before an instance can be created.&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">required</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">default</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="n">_config_hash</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>
        <span class="n">allow_mutation</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the value for the specified configuation key.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fields__</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No config value &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; in module config class &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config_hash</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
            <span class="n">hashes</span> <span class="o">=</span> <span class="n">deepdiff</span><span class="o">.</span><span class="n">DeepHash</span><span class="p">(</span><span class="n">_d</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_config_hash</span> <span class="o">=</span> <span class="n">hashes</span><span class="p">[</span><span class="n">_d</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config_hash</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_hash</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="n">my_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">MINIMAL</span><span class="p">,</span> <span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">my_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Field name&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">my_table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fields__</span><span class="p">:</span>
            <span class="n">my_table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">))</span>

        <span class="k">yield</span> <span class="n">my_table</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">












  <div class="doc doc-object doc-method">



<h4 id="kiara.data.types.ValueTypeConfigSchema.__eq__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.types.ValueTypeConfigSchema.__eq__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return self==value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.data.types.ValueTypeConfigSchema.__hash__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.types.ValueTypeConfigSchema.__hash__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return hash(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_hash</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h4 id="kiara.data.types.ValueTypeConfigSchema.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></code>


<a href="#kiara.data.types.ValueTypeConfigSchema.get" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Get the value for the specified configuation key.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Get the value for the specified configuation key.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fields__</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No config value &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; in module config class &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.data.types.ValueTypeConfigSchema.requires_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">requires_config</span><span class="p">()</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.data.types.ValueTypeConfigSchema.requires_config" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return whether this class can be used as-is, or requires configuration before an instance can be created.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">requires_config</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return whether this class can be used as-is, or requires configuration before an instance can be created.&quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">required</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">default</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>





  <div class="doc doc-object doc-function">



<h3 id="kiara.data.types.get_type_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_type_name</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>


<a href="#kiara.data.types.get_type_name" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Utility function to get a pretty string from the class of an object.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_type_name</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Utility function to get a pretty string from the class of an object.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__module__</span> <span class="o">==</span> <span class="s2">&quot;builtins&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-module">



<h3 id="kiara.data.types.core" class="doc doc-heading">
        <code>core</code>



<a href="#kiara.data.types.core" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="kiara.data.types.core.AnyType" class="doc doc-heading">
        <code>
AnyType            (<a title="kiara.data.types.ValueType" href="../types/__init__/#kiara.data.types.ValueType">ValueType</a>)
        </code>



<a href="#kiara.data.types.core.AnyType" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Any type / No type information.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">AnyType</span><span class="p">(</span><span class="n">ValueType</span><span class="p">[</span><span class="nb">object</span><span class="p">,</span> <span class="n">ValueTypeConfigSchema</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Any type / No type information.&quot;&quot;&quot;</span>

    <span class="n">_value_type_name</span> <span class="o">=</span> <span class="s2">&quot;any&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">backing_python_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">object</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">type_config_cls</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">ValueTypeConfigSchema</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">ValueTypeConfigSchema</span>

    <span class="k">def</span> <span class="nf">pretty_print_as_renderables</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="s2">&quot;Value&quot;</span><span class="p">,</span> <span class="n">print_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)]</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">














  </div>

    </div>

  </div>




  <div class="doc doc-object doc-class">



<h4 id="kiara.data.types.core.DeserializeConfigData" class="doc doc-heading">
        <code>
DeserializeConfigData            (<span title="kiara.data.types.core.KiaraInternalValueType">KiaraInternalValueType</span>)
        </code>



<a href="#kiara.data.types.core.DeserializeConfigData" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A dictionary representing a configuration to deserialize a value.</p>
<p>This contains all inputs necessary to re-create the value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DeserializeConfigData</span><span class="p">(</span><span class="n">KiaraInternalValueType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A dictionary representing a configuration to deserialize a value.</span>

<span class="sd">    This contains all inputs necessary to re-create the value.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">candidate_python_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">,</span> <span class="n">DeserializeConfig</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">type_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;deserialize_config&quot;</span>

    <span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="n">_value</span> <span class="o">=</span> <span class="n">DeserializeConfig</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">_value</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">DeserializeConfig</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for deserialize config: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.core.DeserializeConfigData.parse_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.core.DeserializeConfigData.parse_value" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Parse a value into a supported python type.</p>
<p>This exists to make it easier to do trivial conversions (e.g. from a date string to a datetime object).
If you choose to overwrite this method, make 100% sure that you don't change the meaning of the value, and try to
avoid adding or removing information from the data (e.g. by changing the resolution of a date).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>v</code></td>
        <td></td>
        <td><p>the value</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>'None', if no parsing was done and the original value should be used, otherwise return the parsed Python object</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
        <span class="n">_value</span> <span class="o">=</span> <span class="n">DeserializeConfig</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_value</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.core.DeserializeConfigData.validate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.core.DeserializeConfigData.validate" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Validate the value. This expects an instance of the defined Python class (from 'backing_python_type).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">DeserializeConfig</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for deserialize config: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-class">



<h4 id="kiara.data.types.core.LoadConfigData" class="doc doc-heading">
        <code>
LoadConfigData            (<span title="kiara.data.types.core.KiaraInternalValueType">KiaraInternalValueType</span>)
        </code>



<a href="#kiara.data.types.core.LoadConfigData" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A dictionary representing load config for a <em>kiara</em> value.</p>
<p>The load config schema itself can be looked up via the wrapper class  '[LoadConfig][kiara.data.persistence.LoadConfig]'.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">LoadConfigData</span><span class="p">(</span><span class="n">KiaraInternalValueType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A dictionary representing load config for a *kiara* value.</span>

<span class="sd">    The load config schema itself can be looked up via the wrapper class  &#39;[LoadConfig][kiara.data.persistence.LoadConfig]&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">candidate_python_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">,</span> <span class="n">LoadConfig</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">type_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;load_config&quot;</span>

    <span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="n">_value</span> <span class="o">=</span> <span class="n">LoadConfig</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">_value</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">LoadConfig</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for load config: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.core.LoadConfigData.parse_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.core.LoadConfigData.parse_value" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Parse a value into a supported python type.</p>
<p>This exists to make it easier to do trivial conversions (e.g. from a date string to a datetime object).
If you choose to overwrite this method, make 100% sure that you don't change the meaning of the value, and try to
avoid adding or removing information from the data (e.g. by changing the resolution of a date).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>v</code></td>
        <td></td>
        <td><p>the value</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>'None', if no parsing was done and the original value should be used, otherwise return the parsed Python object</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
        <span class="n">_value</span> <span class="o">=</span> <span class="n">LoadConfig</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_value</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.core.LoadConfigData.validate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.core.LoadConfigData.validate" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Validate the value. This expects an instance of the defined Python class (from 'backing_python_type).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">LoadConfig</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for load config: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.data.types.core.ValueInfoData" class="doc doc-heading">
        <code>
ValueInfoData            (<span title="kiara.data.types.core.KiaraInternalValueType">KiaraInternalValueType</span>)
        </code>



<a href="#kiara.data.types.core.ValueInfoData" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A dictionary representing a kiara ValueInfo object.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueInfoData</span><span class="p">(</span><span class="n">KiaraInternalValueType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A dictionary representing a kiara ValueInfo object.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">candidate_python_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">,</span> <span class="n">ValueInfo</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">type_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;value_info&quot;</span>

    <span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="n">_value</span> <span class="o">=</span> <span class="n">ValueInfo</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">_value</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ValueInfo</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for value info: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.core.ValueInfoData.parse_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.core.ValueInfoData.parse_value" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Parse a value into a supported python type.</p>
<p>This exists to make it easier to do trivial conversions (e.g. from a date string to a datetime object).
If you choose to overwrite this method, make 100% sure that you don't change the meaning of the value, and try to
avoid adding or removing information from the data (e.g. by changing the resolution of a date).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>v</code></td>
        <td></td>
        <td><p>the value</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>'None', if no parsing was done and the original value should be used, otherwise return the parsed Python object</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
        <span class="n">_value</span> <span class="o">=</span> <span class="n">ValueInfo</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_value</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.core.ValueInfoData.validate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.core.ValueInfoData.validate" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Validate the value. This expects an instance of the defined Python class (from 'backing_python_type).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ValueInfo</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for value info: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.data.types.core.ValueLineageData" class="doc doc-heading">
        <code>
ValueLineageData            (<span title="kiara.data.types.core.KiaraInternalValueType">KiaraInternalValueType</span>)
        </code>



<a href="#kiara.data.types.core.ValueLineageData" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A dictionary representing a kiara ValueLineage.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueLineageData</span><span class="p">(</span><span class="n">KiaraInternalValueType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A dictionary representing a kiara ValueLineage.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">candidate_python_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">,</span> <span class="n">ValueLineage</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">type_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;value_lineage&quot;</span>

    <span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="n">_value</span> <span class="o">=</span> <span class="n">ValueLineage</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">_value</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ValueLineage</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for value seed: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.core.ValueLineageData.parse_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.core.ValueLineageData.parse_value" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Parse a value into a supported python type.</p>
<p>This exists to make it easier to do trivial conversions (e.g. from a date string to a datetime object).
If you choose to overwrite this method, make 100% sure that you don't change the meaning of the value, and try to
avoid adding or removing information from the data (e.g. by changing the resolution of a date).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>v</code></td>
        <td></td>
        <td><p>the value</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>'None', if no parsing was done and the original value should be used, otherwise return the parsed Python object</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
        <span class="n">_value</span> <span class="o">=</span> <span class="n">ValueLineage</span><span class="p">(</span><span class="o">**</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_value</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.core.ValueLineageData.validate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>


<a href="#kiara.data.types.core.ValueLineageData.validate" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Validate the value. This expects an instance of the defined Python class (from 'backing_python_type).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/core.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ValueLineage</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type for value seed: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="kiara.data.types.type_mgmt" class="doc doc-heading">
        <code>type_mgmt</code>



<a href="#kiara.data.types.type_mgmt" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="kiara.data.types.type_mgmt.TypeMgmt" class="doc doc-heading">
        <code>
TypeMgmt        </code>



<a href="#kiara.data.types.type_mgmt.TypeMgmt" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/types/type_mgmt.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">TypeMgmt</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="n">Kiara</span> <span class="o">=</span> <span class="n">kiara</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_types</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">bidict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_type_transformations</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_registered_python_classes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_hierarchy</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">invalidate_types</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_value_types</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value_type_transformations</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_registered_python_classes</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">bidict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_types</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_types</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_value_types</span> <span class="o">=</span> <span class="n">bidict</span><span class="p">(</span><span class="n">find_all_value_types</span><span class="p">())</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_types</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value_type_hierarchy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;nx.DiGraph&quot;</span><span class="p">:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_hierarchy</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_hierarchy</span>

        <span class="k">def</span> <span class="nf">recursive_base_find</span><span class="p">(</span>
            <span class="bp">cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">,</span> <span class="n">current</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="p">):</span>

            <span class="k">if</span> <span class="n">current</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">current</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">base</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">:</span>

                <span class="k">if</span> <span class="n">base</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                    <span class="n">current</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">inverse</span><span class="p">[</span><span class="n">base</span><span class="p">])</span>

                <span class="n">recursive_base_find</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">current</span><span class="o">=</span><span class="n">current</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">current</span>

        <span class="n">bases</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">bases</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">recursive_base_find</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>

        <span class="n">hierarchy</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">_bases</span> <span class="ow">in</span> <span class="n">bases</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">hierarchy</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">_bases</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="c1"># we only need the first parent, all others will be taken care of by the parent of the parent</span>
            <span class="n">hierarchy</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">_bases</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_type_hierarchy</span> <span class="o">=</span> <span class="n">hierarchy</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_hierarchy</span>

    <span class="k">def</span> <span class="nf">get_type_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Returns the shortest path between the specified type and the &#39;any&#39; type, in reverse direction starting from the specified type.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">value_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; registered.&quot;</span><span class="p">)</span>

        <span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_type_hierarchy</span><span class="p">,</span> <span class="s2">&quot;any&quot;</span><span class="p">,</span> <span class="n">value_type</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_sub_types</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="k">if</span> <span class="n">value_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; registered.&quot;</span><span class="p">)</span>

        <span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>

        <span class="n">desc</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">descendants</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_type_hierarchy</span><span class="p">,</span> <span class="n">value_type</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">desc</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">value_type_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">registered_python_classes</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registered_python_classes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registered_python_classes</span>

        <span class="n">registered_types</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">v_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">rel</span> <span class="o">=</span> <span class="n">v_type</span><span class="o">.</span><span class="n">candidate_python_types</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">rel</span><span class="p">:</span>
                <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">rel</span><span class="p">:</span>
                    <span class="n">registered_types</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_registered_python_classes</span> <span class="o">=</span> <span class="n">registered_types</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registered_python_classes</span>

    <span class="k">def</span> <span class="nf">get_type_config_for_data_profile</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">profile_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="n">type_name</span> <span class="o">=</span> <span class="n">TYPE_PROFILE_MAP</span><span class="p">[</span><span class="n">profile_name</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">type_name</span><span class="p">,</span> <span class="s2">&quot;type_config&quot;</span><span class="p">:</span> <span class="p">{}}</span>

    <span class="k">def</span> <span class="nf">determine_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">registered_types</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">registered_python_classes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="p">[]))</span>
        <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">:</span>
            <span class="n">reg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">registered_python_classes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">reg</span><span class="p">:</span>
                <span class="n">registered_types</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">reg</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">registered_types</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">rt</span> <span class="ow">in</span> <span class="n">registered_types</span><span class="p">:</span>
                <span class="n">_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_type_cls</span><span class="p">(</span><span class="n">rt</span><span class="p">)</span>
                <span class="n">match</span> <span class="o">=</span> <span class="n">_cls</span><span class="o">.</span><span class="n">check_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">match</span><span class="p">)</span>

        <span class="c1"># TODO: re-run all checks on all modules, not just the ones that registered interest in the class</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">result_str</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">_value_type_name</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Multiple value types found for value: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result_str</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_value_type_cls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">type_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]:</span>

        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">type_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">t</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No value type &#39;</span><span class="si">{</span><span class="n">type_name</span><span class="si">}</span><span class="s2">&#39;, available types: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">t</span>

    <span class="c1"># def get_value_type_transformations(</span>
    <span class="c1">#     self, value_type_name: str</span>
    <span class="c1"># ) -&gt; typing.Mapping[str, typing.Mapping[str, typing.Any]]:</span>
    <span class="c1">#     &quot;&quot;&quot;Return available transform pipelines for value types.&quot;&quot;&quot;</span>
    <span class="c1">#</span>
    <span class="c1">#     if value_type_name in self._value_type_transformations.keys():</span>
    <span class="c1">#         return self._value_type_transformations[value_type_name]</span>
    <span class="c1">#</span>
    <span class="c1">#     type_cls = self.get_value_type_cls(type_name=value_type_name)</span>
    <span class="c1">#     _configs = type_cls.conversions()</span>
    <span class="c1">#     if _configs is None:</span>
    <span class="c1">#         module_configs = {}</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         module_configs = dict(_configs)</span>
    <span class="c1">#     for base in type_cls.__bases__:</span>
    <span class="c1">#         if hasattr(base, &quot;conversions&quot;):</span>
    <span class="c1">#             _b_configs = base.conversions()  # type: ignore</span>
    <span class="c1">#             if not _b_configs:</span>
    <span class="c1">#                 continue</span>
    <span class="c1">#             for k, v in _b_configs.items():</span>
    <span class="c1">#                 if k not in module_configs.keys():</span>
    <span class="c1">#                     module_configs[k] = v</span>
    <span class="c1">#</span>
    <span class="c1">#     # TODO: check input type compatibility?</span>
    <span class="c1">#     result: typing.Dict[str, typing.Dict[str, typing.Any]] = {}</span>
    <span class="c1">#     for name, config in module_configs.items():</span>
    <span class="c1">#         config = dict(config)</span>
    <span class="c1">#         module_type = config.pop(&quot;module_type&quot;, None)</span>
    <span class="c1">#         if not module_type:</span>
    <span class="c1">#             raise Exception(</span>
    <span class="c1">#                 f&quot;Can&#39;t create transformation &#39;{name}&#39; for type &#39;{value_type_name}&#39;, no module type specified in config: {config}&quot;</span>
    <span class="c1">#             )</span>
    <span class="c1">#         module_config = config.pop(&quot;module_config&quot;, {})</span>
    <span class="c1">#         module = self._kiara.create_module(</span>
    <span class="c1">#             id=f&quot;_transform_{value_type_name}_{name}&quot;,</span>
    <span class="c1">#             module_type=module_type,</span>
    <span class="c1">#             module_config=module_config,</span>
    <span class="c1">#         )</span>
    <span class="c1">#</span>
    <span class="c1">#         if &quot;input_name&quot; not in config.keys():</span>
    <span class="c1">#</span>
    <span class="c1">#             if len(module.input_schemas) == 1:</span>
    <span class="c1">#                 config[&quot;input_name&quot;] = next(iter(module.input_schemas.keys()))</span>
    <span class="c1">#             else:</span>
    <span class="c1">#                 required_inputs = [</span>
    <span class="c1">#                     inp</span>
    <span class="c1">#                     for inp, schema in module.input_schemas.items()</span>
    <span class="c1">#                     if schema.is_required()</span>
    <span class="c1">#                 ]</span>
    <span class="c1">#                 if len(required_inputs) == 1:</span>
    <span class="c1">#                     config[&quot;input_name&quot;] = required_inputs[0]</span>
    <span class="c1">#                 else:</span>
    <span class="c1">#                     raise Exception(</span>
    <span class="c1">#                         f&quot;Can&#39;t create transformation &#39;{name}&#39; for type &#39;{value_type_name}&#39;: can&#39;t determine input name between those options: &#39;{&#39;, &#39;.join(required_inputs)}&#39;&quot;</span>
    <span class="c1">#                     )</span>
    <span class="c1">#</span>
    <span class="c1">#         if &quot;output_name&quot; not in config.keys():</span>
    <span class="c1">#</span>
    <span class="c1">#             if len(module.input_schemas) == 1:</span>
    <span class="c1">#                 config[&quot;output_name&quot;] = next(iter(module.output_schemas.keys()))</span>
    <span class="c1">#             else:</span>
    <span class="c1">#                 required_outputs = [</span>
    <span class="c1">#                     inp</span>
    <span class="c1">#                     for inp, schema in module.output_schemas.items()</span>
    <span class="c1">#                     if schema.is_required()</span>
    <span class="c1">#                 ]</span>
    <span class="c1">#                 if len(required_outputs) == 1:</span>
    <span class="c1">#                     config[&quot;output_name&quot;] = required_outputs[0]</span>
    <span class="c1">#                 else:</span>
    <span class="c1">#                     raise Exception(</span>
    <span class="c1">#                         f&quot;Can&#39;t create transformation &#39;{name}&#39; for type &#39;{value_type_name}&#39;: can&#39;t determine output name between those options: &#39;{&#39;, &#39;.join(required_outputs)}&#39;&quot;</span>
    <span class="c1">#                     )</span>
    <span class="c1">#</span>
    <span class="c1">#         result[name] = {</span>
    <span class="c1">#             &quot;module&quot;: module,</span>
    <span class="c1">#             &quot;module_type&quot;: module_type,</span>
    <span class="c1">#             &quot;module_config&quot;: module_config,</span>
    <span class="c1">#             &quot;transformation_config&quot;: config,</span>
    <span class="c1">#         }</span>
    <span class="c1">#</span>
    <span class="c1">#     self._value_type_transformations[value_type_name] = result</span>
    <span class="c1">#     return self._value_type_transformations[value_type_name]</span>

    <span class="k">def</span> <span class="nf">find_value_types_for_package</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">package_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">ValueType</span><span class="p">]]:</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">value_type_name</span><span class="p">,</span> <span class="n">value_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">value_md</span> <span class="o">=</span> <span class="n">value_type</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span>
            <span class="n">package</span> <span class="o">=</span> <span class="n">value_md</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;package&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">package</span> <span class="o">==</span> <span class="n">package_name</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">value_type_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_type</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="c1"># def get_available_transformations_for_type(</span>
    <span class="c1">#     self, value_type_name: str</span>
    <span class="c1"># ) -&gt; typing.Iterable[str]:</span>
    <span class="c1">#</span>
    <span class="c1">#     return self.get_value_type_transformations(value_type_name=value_type_name)</span>

    <span class="c1"># def transform_value(</span>
    <span class="c1">#     self,</span>
    <span class="c1">#     transformation_alias: str,</span>
    <span class="c1">#     value: Value,</span>
    <span class="c1">#     other_inputs: typing.Optional[typing.Mapping[str, typing.Any]] = None,</span>
    <span class="c1"># ) -&gt; Value:</span>
    <span class="c1">#</span>
    <span class="c1">#     transformations = self.get_value_type_transformations(value.value_schema.type)</span>
    <span class="c1">#</span>
    <span class="c1">#     if transformation_alias not in transformations.keys():</span>
    <span class="c1">#         raise Exception(</span>
    <span class="c1">#             f&quot;Can&#39;t transform value of type &#39;{value.value_schema.type}&#39;, transformation &#39;{transformation_alias}&#39; not available for this type. Available: {&#39;, &#39;.join(transformations.keys())}&quot;</span>
    <span class="c1">#         )</span>
    <span class="c1">#</span>
    <span class="c1">#     config = transformations[transformation_alias]</span>
    <span class="c1">#</span>
    <span class="c1">#     transformation_config = config[&quot;transformation_config&quot;]</span>
    <span class="c1">#     input_name = transformation_config[&quot;input_name&quot;]</span>
    <span class="c1">#</span>
    <span class="c1">#     module: KiaraModule = config[&quot;module&quot;]</span>
    <span class="c1">#</span>
    <span class="c1">#     constants = module.get_config_value(&quot;constants&quot;)</span>
    <span class="c1">#     inputs = dict(constants)</span>
    <span class="c1">#</span>
    <span class="c1">#     if other_inputs:</span>
    <span class="c1">#</span>
    <span class="c1">#         for k, v in other_inputs.items():</span>
    <span class="c1">#             if k in constants.keys():</span>
    <span class="c1">#                 raise Exception(f&quot;Invalid value &#39;{k}&#39; for &#39;other_inputs&#39;, this is a constant that can&#39;t be overwrittern.&quot;)</span>
    <span class="c1">#             inputs[k] = v</span>
    <span class="c1">#</span>
    <span class="c1">#     defaults = transformation_config.get(&quot;defaults&quot;, None)</span>
    <span class="c1">#     if defaults:</span>
    <span class="c1">#         for k, v in defaults.items():</span>
    <span class="c1">#             if k in constants.keys():</span>
    <span class="c1">#                 raise Exception(f&quot;Invalid  default value &#39;{k}&#39;, this is a constant that can&#39;t be overwrittern.&quot;)</span>
    <span class="c1">#             if k not in inputs.keys():</span>
    <span class="c1">#                 inputs[k] = v</span>
    <span class="c1">#</span>
    <span class="c1">#     if input_name in inputs.keys():</span>
    <span class="c1">#         raise Exception(</span>
    <span class="c1">#             f&quot;Invalid value for inputs in transform arguments, can&#39;t contain the main input key &#39;{input_name}&#39;.&quot;</span>
    <span class="c1">#         )</span>
    <span class="c1">#</span>
    <span class="c1">#     inputs[input_name] = value</span>
    <span class="c1">#</span>
    <span class="c1">#     result = module.run(**inputs)</span>
    <span class="c1">#     output_name = transformation_config[&quot;output_name&quot;]</span>
    <span class="c1">#</span>
    <span class="c1">#     result_value = result.get_value_obj(output_name)</span>
    <span class="c1">#     return result_value</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


















  <div class="doc doc-object doc-method">



<h5 id="kiara.data.types.type_mgmt.TypeMgmt.get_type_lineage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_type_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">)</span></code>


<a href="#kiara.data.types.type_mgmt.TypeMgmt.get_type_lineage" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Returns the shortest path between the specified type and the 'any' type, in reverse direction starting from the specified type.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/types/type_mgmt.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_type_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Returns the shortest path between the specified type and the &#39;any&#39; type, in reverse direction starting from the specified type.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">value_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_types</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No value type &#39;</span><span class="si">{</span><span class="n">value_type</span><span class="si">}</span><span class="s2">&#39; registered.&quot;</span><span class="p">)</span>

    <span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>

    <span class="n">path</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_type_hierarchy</span><span class="p">,</span> <span class="s2">&quot;any&quot;</span><span class="p">,</span> <span class="n">value_type</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>







  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.data.values" class="doc doc-heading">
        <code>values</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>A module that contains value-related classes for <em>Kiara</em>.</p>
<p>A value in Kiara-speak is a pointer to actual data (aka 'bytes'). It contains metadata about that data (like whether it's
valid/set, what type/schema it has, when it was last modified, ...), but it does not contain the data itself. The reason for
that is that such data can be fairly large, and in a lot of cases it is not necessary for the code involved to have
access to it, access to the metadata is enough.</p>
<p>Each Value has a unique id, which can be used to retrieve the data (whole, or parts of it) from a <a href="../registry/__init__/#kiara.data.registry.DataRegistry">DataRegistry</a>.
In addition, that id can be used to subscribe to change events for a value (published whenever the data that is associated with a value was changed).</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-class">



<h3 id="kiara.data.values.Value" class="doc doc-heading">
        <code>
Value            (<span title="pydantic.main.BaseModel">BaseModel</span>, <span title="rich.jupyter.JupyterMixin">JupyterMixin</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.values.Value" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>The underlying base class for all values.</p>
<p>The important subclasses here are the ones inheriting from 'PipelineValue', as those are registered in the data
registry.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Value</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">JupyterMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The underlying base class for all values.</span>

<span class="sd">    The important subclasses here are the ones inheriting from &#39;PipelineValue&#39;, as those are registered in the data</span>
<span class="sd">    registry.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>
        <span class="n">use_enum_values</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">registry</span><span class="p">:</span> <span class="s2">&quot;BaseDataRegistry&quot;</span><span class="p">,</span> <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span><span class="p">,</span> <span class="n">type_obj</span><span class="p">:</span> <span class="n">ValueType</span><span class="p">,</span> <span class="n">is_set</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">is_none</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">hashes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">ValueHash</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">register_token</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>  <span class="c1"># type: ignore</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">register_token</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No register token provided.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">registry</span><span class="o">.</span><span class="n">_check_register_token</span><span class="p">(</span><span class="n">register_token</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Value registration with token &#39;</span><span class="si">{</span><span class="n">register_token</span><span class="si">}</span><span class="s2">&#39; not allowed.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">value_schema</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

        <span class="k">assert</span> <span class="n">registry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span> <span class="o">=</span> <span class="n">registry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">_kiara</span>

        <span class="n">kwargs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">NO_ID_YET_MARKER</span>

        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;value_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_schema</span>

        <span class="c1"># if value_lineage is None:</span>
        <span class="c1">#     value_lineage = ValueLineage()</span>
        <span class="c1">#</span>
        <span class="c1"># kwargs[&quot;value_lineage&quot;] = value_lineage</span>

        <span class="c1"># kwargs[&quot;is_streaming&quot;] = False  # not used yet</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;creation_date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;is_set&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_set</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;is_none&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">is_none</span>

        <span class="k">if</span> <span class="n">hashes</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;hashes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">hashes</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">metadata</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;metadata&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;metadata&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type_obj</span> <span class="o">=</span> <span class="n">type_obj</span>

    <span class="n">_kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>
    <span class="n">_registry</span><span class="p">:</span> <span class="s2">&quot;BaseDataRegistry&quot;</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>
    <span class="n">_type_obj</span><span class="p">:</span> <span class="n">ValueType</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>
    <span class="n">_value_info</span><span class="p">:</span> <span class="s2">&quot;ValueInfo&quot;</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;A unique id for this value.&quot;</span><span class="p">)</span>
    <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The schema of this value.&quot;</span><span class="p">)</span>
    <span class="n">creation_date</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The time this value was created value happened.&quot;</span>
    <span class="p">)</span>
    <span class="c1"># is_streaming: bool = Field(</span>
    <span class="c1">#     default=False,</span>
    <span class="c1">#     description=&quot;Whether the value is currently streamed into this object.&quot;,</span>
    <span class="c1"># )</span>
    <span class="n">is_set</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the value was set (in some way: user input, default, constant...).&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">is_none</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the value is &#39;None&#39;.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">hashes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ValueHash</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Available hashes relating to the actual value data. This attribute is not populated by default, use the &#39;get_hashes()&#39; method to request one or several hash items, afterwards those hashes will be reflected in this attribute.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Available metadata relating to the actual value data (size, no. of rows, etc. -- depending on data type). This attribute is not populated by default, use the &#39;get_metadata()&#39; method to request one or several metadata items, afterwards those metadata items will be reflected in this attribute.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">type_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">type_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the object that contains all the type information for this value.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_obj</span>

    <span class="k">def</span> <span class="nf">get_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hash_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueHash</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calculate the hash of a specified type for this value. Hashes are cached.&quot;&quot;&quot;</span>

        <span class="n">hashes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_hashes</span><span class="p">(</span><span class="n">hash_type</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">hashes</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_hashes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">hash_types</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">ValueHash</span><span class="p">]:</span>

        <span class="n">all_hash_types</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_obj</span><span class="o">.</span><span class="n">get_supported_hash_types</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">hash_types</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">hash_types</span> <span class="o">=</span> <span class="n">all_hash_types</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">log_message</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">hash_types</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[]</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">missing</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">hash_types</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">hash_obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hashes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">hash_obj</span><span class="o">.</span><span class="n">hash_type</span> <span class="ow">in</span> <span class="n">hash_types</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hash_obj</span><span class="p">)</span>
                <span class="n">missing</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">hash_obj</span><span class="o">.</span><span class="n">hash_type</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">hash_type</span> <span class="ow">in</span> <span class="n">missing</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">hash_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_hash_types</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Hash type &#39;</span><span class="si">{</span><span class="n">hash_type</span><span class="si">}</span><span class="s2">&#39; not supported for &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                <span class="p">)</span>

            <span class="n">hash_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_obj</span><span class="o">.</span><span class="n">calculate_value_hash</span><span class="p">(</span>
                <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(),</span> <span class="n">hash_type</span><span class="o">=</span><span class="n">hash_type</span>
            <span class="p">)</span>
            <span class="n">hash_obj</span> <span class="o">=</span> <span class="n">ValueHash</span><span class="p">(</span><span class="n">hash_type</span><span class="o">=</span><span class="n">hash_type</span><span class="p">,</span> <span class="nb">hash</span><span class="o">=</span><span class="n">hash_str</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hashes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hash_obj</span><span class="p">)</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hash_obj</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">item_is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Check whether the current value is valid&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">optional</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_set</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_none</span>

    <span class="k">def</span> <span class="nf">item_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Print a human readable short description of this values status.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">optional</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_none</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s2">&quot;no value (not required)&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_name</span> <span class="ow">in</span> <span class="p">[</span>
                        <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
                    <span class="p">]:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span><span class="p">:</span>
                            <span class="k">return</span> <span class="s2">&quot;set (default)&quot;</span>
                    <span class="k">return</span> <span class="s2">&quot;set&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;not set (not required)&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_none</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s2">&quot;no value&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_name</span> <span class="ow">in</span> <span class="p">[</span>
                        <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
                    <span class="p">]:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span><span class="p">:</span>
                            <span class="k">return</span> <span class="s2">&quot;set (default)&quot;</span>
                    <span class="k">return</span> <span class="s2">&quot;set&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;not set&quot;</span>

    <span class="k">def</span> <span class="nf">get_value_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]:</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">get_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_value_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_lineage</span><span class="p">:</span> <span class="n">ValueLineage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="p">,</span> <span class="s2">&quot;set_value_lineage&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">set_value_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_lineage</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t set value lineage: registry is read only&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ValueInfo&quot;</span><span class="p">:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_info</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_value_info</span> <span class="o">=</span> <span class="n">ValueInfo</span><span class="o">.</span><span class="n">from_value</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_info</span>

    <span class="k">def</span> <span class="nf">create_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">include_deserialization_config</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ValueInfo&quot;</span><span class="p">:</span>

        <span class="k">return</span> <span class="n">ValueInfo</span><span class="o">.</span><span class="n">from_value</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">include_deserialization_config</span><span class="o">=</span><span class="n">include_deserialization_config</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_metadata</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">metadata_keys</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">also_return_schema</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Retrieve (if necessary) and return metadata for the specified keys.</span>

<span class="sd">        By default, the metadata is returned as a map (in case of a single key: single-item map) with metadata key as</span>
<span class="sd">        dict key, and the metadata as value. If &#39;also_return_schema&#39; was set to `True`, the value will be a two-key</span>
<span class="sd">        map with the metadata under the ``metadata_item`` subkey, and the value schema under ``metadata_schema``.</span>

<span class="sd">        If no metadata key is specified, all available metadata for this value type will be returned.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            metadata_keys: the metadata keys to retrieve metadata (empty for all available metadata)</span>
<span class="sd">            also_return_schema: whether to also return the schema for each metadata item</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">metadata_keys</span><span class="p">:</span>
            <span class="n">_metadata_keys</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">metadata_mgmt</span><span class="o">.</span><span class="n">get_metadata_keys_for_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type_name</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">_metadata_keys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_metadata_keys</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">metadata_keys</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">missing</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">metadata_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">_metadata_keys</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">metadata_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">also_return_schema</span><span class="p">:</span>
                    <span class="n">result</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">][</span><span class="s2">&quot;metadata_item&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">missing</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">metadata_key</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">missing</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>

        <span class="n">_md</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">metadata_mgmt</span><span class="o">.</span><span class="n">get_value_metadata</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">missing</span><span class="p">,</span> <span class="n">also_return_schema</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">_md</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
            <span class="k">if</span> <span class="n">also_return_schema</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="s2">&quot;metadata_item&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">keys</span><span class="p">())}</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">register_missing_aliases</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Value&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Save this value, under the specified alias(es).&quot;&quot;&quot;</span>

        <span class="c1"># if self.get_value_lineage():</span>
        <span class="c1">#     for field_name, value in self.get_value_lineage().inputs.items():</span>
        <span class="c1">#         value_obj = self._registry.get_value_obj(value)</span>
        <span class="c1">#         try:</span>
        <span class="c1">#             value_obj.save()</span>
        <span class="c1">#         except Exception as e:</span>
        <span class="c1">#             print(e)</span>

        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_store</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">aliases</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_store</span><span class="o">.</span><span class="n">link_aliases</span><span class="p">(</span>
                <span class="n">value</span><span class="p">,</span> <span class="o">*</span><span class="n">aliases</span><span class="p">,</span> <span class="n">register_missing_aliases</span><span class="o">=</span><span class="n">register_missing_aliases</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="c1"># TODO: compare all attributes if id is equal, just to make sure...</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">id</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Value(id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">, type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type_name</span><span class="si">}</span><span class="s2">, is_set=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">is_set</span><span class="si">}</span><span class="s2">, is_none=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">is_none</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="c1"># table = self._create_value_table()</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Value&quot;</span>
        <span class="k">yield</span> <span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_info</span><span class="p">(),</span> <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">ROUNDED</span><span class="p">,</span> <span class="n">title_align</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.Value.creation_date" class="doc doc-heading">
<code class="highlight language-python"><span class="n">creation_date</span><span class="p">:</span> <span class="n">datetime</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.Value.creation_date" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The time this value was created value happened.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.Value.hashes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">hashes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ValueHash</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.Value.hashes" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Available hashes relating to the actual value data. This attribute is not populated by default, use the 'get_hashes()' method to request one or several hash items, afterwards those hashes will be reflected in this attribute.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.Value.id" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.Value.id" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A unique id for this value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.Value.is_none" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_none</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.Value.is_none" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Whether the value is 'None'.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.Value.is_set" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_set</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.Value.is_set" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Whether the value was set (in some way: user input, default, constant...).</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.Value.metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.Value.metadata" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Available metadata relating to the actual value data (size, no. of rows, etc. -- depending on data type). This attribute is not populated by default, use the 'get_metadata()' method to request one or several metadata items, afterwards those metadata items will be reflected in this attribute.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.Value.type_obj" class="doc doc-heading">
<code class="highlight language-python"><span class="n">type_obj</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.data.values.Value.type_obj" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return the object that contains all the type information for this value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.Value.value_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.Value.value_schema" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The schema of this value.</p>
    </div>

  </div>








  <div class="doc doc-object doc-method">



<h4 id="kiara.data.values.Value.__eq__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.Value.__eq__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return self==value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

    <span class="c1"># TODO: compare all attributes if id is equal, just to make sure...</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">id</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.data.values.Value.__hash__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.Value.__hash__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return hash(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h4 id="kiara.data.values.Value.__repr__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.Value.__repr__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return repr(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Value(id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">, type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type_name</span><span class="si">}</span><span class="s2">, is_set=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">is_set</span><span class="si">}</span><span class="s2">, is_none=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">is_none</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h4 id="kiara.data.values.Value.__str__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.Value.__str__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return str(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h4 id="kiara.data.values.Value.get_hash" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hash_type</span><span class="p">)</span></code>


<a href="#kiara.data.values.Value.get_hash" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Calculate the hash of a specified type for this value. Hashes are cached.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hash_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueHash</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Calculate the hash of a specified type for this value. Hashes are cached.&quot;&quot;&quot;</span>

    <span class="n">hashes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_hashes</span><span class="p">(</span><span class="n">hash_type</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">hashes</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>






  <div class="doc doc-object doc-method">



<h4 id="kiara.data.values.Value.get_metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">metadata_keys</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">also_return_schema</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#kiara.data.values.Value.get_metadata" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Retrieve (if necessary) and return metadata for the specified keys.</p>
<p>By default, the metadata is returned as a map (in case of a single key: single-item map) with metadata key as
dict key, and the metadata as value. If 'also_return_schema' was set to <code>True</code>, the value will be a two-key
map with the metadata under the <code>metadata_item</code> subkey, and the value schema under <code>metadata_schema</code>.</p>
<p>If no metadata key is specified, all available metadata for this value type will be returned.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>metadata_keys</code></td>
        <td><code>str</code></td>
        <td><p>the metadata keys to retrieve metadata (empty for all available metadata)</p></td>
        <td><code>()</code></td>
      </tr>
      <tr>
        <td><code>also_return_schema</code></td>
        <td><code>bool</code></td>
        <td><p>whether to also return the schema for each metadata item</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_metadata</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">metadata_keys</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">also_return_schema</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Retrieve (if necessary) and return metadata for the specified keys.</span>

<span class="sd">    By default, the metadata is returned as a map (in case of a single key: single-item map) with metadata key as</span>
<span class="sd">    dict key, and the metadata as value. If &#39;also_return_schema&#39; was set to `True`, the value will be a two-key</span>
<span class="sd">    map with the metadata under the ``metadata_item`` subkey, and the value schema under ``metadata_schema``.</span>

<span class="sd">    If no metadata key is specified, all available metadata for this value type will be returned.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        metadata_keys: the metadata keys to retrieve metadata (empty for all available metadata)</span>
<span class="sd">        also_return_schema: whether to also return the schema for each metadata item</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">metadata_keys</span><span class="p">:</span>
        <span class="n">_metadata_keys</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">metadata_mgmt</span><span class="o">.</span><span class="n">get_metadata_keys_for_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type_name</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">_metadata_keys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_metadata_keys</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">metadata_keys</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">missing</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">metadata_key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">_metadata_keys</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">metadata_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">also_return_schema</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">][</span><span class="s2">&quot;metadata_item&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">missing</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">metadata_key</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">missing</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="n">_md</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">metadata_mgmt</span><span class="o">.</span><span class="n">get_value_metadata</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">missing</span><span class="p">,</span> <span class="n">also_return_schema</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">_md</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">if</span> <span class="n">also_return_schema</span><span class="p">:</span>
            <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="s2">&quot;metadata_item&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">keys</span><span class="p">())}</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h4 id="kiara.data.values.Value.item_is_valid" class="doc doc-heading">
<code class="highlight language-python"><span class="n">item_is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.data.values.Value.item_is_valid" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Check whether the current value is valid</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">item_is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Check whether the current value is valid&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">optional</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_set</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_none</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.data.values.Value.item_status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">item_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.data.values.Value.item_status" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Print a human readable short description of this values status.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">item_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Print a human readable short description of this values status.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">optional</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_none</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;no value (not required)&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_name</span> <span class="ow">in</span> <span class="p">[</span>
                    <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
                <span class="p">]:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span><span class="p">:</span>
                        <span class="k">return</span> <span class="s2">&quot;set (default)&quot;</span>
                <span class="k">return</span> <span class="s2">&quot;set&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;not set (not required)&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_none</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;no value&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_name</span> <span class="ow">in</span> <span class="p">[</span>
                    <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
                <span class="p">]:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span><span class="p">:</span>
                        <span class="k">return</span> <span class="s2">&quot;set (default)&quot;</span>
                <span class="k">return</span> <span class="s2">&quot;set&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;not set&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.data.values.Value.save" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aliases</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">register_missing_aliases</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#kiara.data.values.Value.save" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Save this value, under the specified alias(es).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">save</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">register_missing_aliases</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Value&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Save this value, under the specified alias(es).&quot;&quot;&quot;</span>

    <span class="c1"># if self.get_value_lineage():</span>
    <span class="c1">#     for field_name, value in self.get_value_lineage().inputs.items():</span>
    <span class="c1">#         value_obj = self._registry.get_value_obj(value)</span>
    <span class="c1">#         try:</span>
    <span class="c1">#             value_obj.save()</span>
    <span class="c1">#         except Exception as e:</span>
    <span class="c1">#             print(e)</span>

    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_store</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">aliases</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_store</span><span class="o">.</span><span class="n">link_aliases</span><span class="p">(</span>
            <span class="n">value</span><span class="p">,</span> <span class="o">*</span><span class="n">aliases</span><span class="p">,</span> <span class="n">register_missing_aliases</span><span class="o">=</span><span class="n">register_missing_aliases</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">value</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.data.values.ValueAlias" class="doc doc-heading">
        <code>
ValueAlias            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.values.ValueAlias" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueAlias</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_string</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default_repo_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ValueAlias&quot;</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_alias</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid id_or_alias: not a string.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value_alias</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid id_or_alias: can&#39;t be empty string.&quot;</span><span class="p">)</span>

        <span class="n">_repo_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">default_repo_name</span>
        <span class="n">_version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">_tag</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="s2">&quot;#&quot;</span> <span class="ow">in</span> <span class="n">value_alias</span><span class="p">:</span>
            <span class="n">_repo_name</span><span class="p">,</span> <span class="n">_value_alias</span> <span class="o">=</span> <span class="n">value_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_value_alias</span> <span class="o">=</span> <span class="n">value_alias</span>

        <span class="k">if</span> <span class="s2">&quot;@&quot;</span> <span class="ow">in</span> <span class="n">_value_alias</span><span class="p">:</span>
            <span class="n">_alias</span><span class="p">,</span> <span class="n">_postfix</span> <span class="o">=</span> <span class="n">_value_alias</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">_version</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_postfix</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">_postfix</span><span class="o">.</span><span class="n">isidentifier</span><span class="p">():</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Invalid format for version/tag element of id_or_alias: </span><span class="si">{</span><span class="n">_tag</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                <span class="n">_tag</span> <span class="o">=</span> <span class="n">_postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_alias</span> <span class="o">=</span> <span class="n">_value_alias</span>

        <span class="k">return</span> <span class="n">ValueAlias</span><span class="p">(</span>
            <span class="n">repo_name</span><span class="o">=</span><span class="n">_repo_name</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="n">_alias</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">_version</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">_tag</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_strings</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">value_aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ValueAlias&quot;</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="s2">&quot;ValueAlias&quot;</span><span class="p">]:</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">va</span> <span class="ow">in</span> <span class="n">value_aliases</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">va</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ValueAlias</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">va</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">va</span><span class="p">,</span> <span class="n">ValueAlias</span><span class="p">):</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">va</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">va</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; for type alias, expected &#39;str&#39; or &#39;ValueAlias&#39;.&quot;</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="n">repo_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name of the data repo the value lives in.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>
    <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;The alias name.&quot;</span><span class="p">)</span>
    <span class="n">version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The version of this alias.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>
    <span class="n">tag</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The tag for the alias.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">full_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">alias</span><span class="si">}</span><span class="s2">@</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">alias</span><span class="si">}</span><span class="s2">@</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">alias</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">








  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueAlias.repo_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">repo_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueAlias.repo_name" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The name of the data repo the value lives in.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueAlias.tag" class="doc doc-heading">
<code class="highlight language-python"><span class="n">tag</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueAlias.tag" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The tag for the alias.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueAlias.version" class="doc doc-heading">
<code class="highlight language-python"><span class="n">version</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueAlias.version" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The version of this alias.</p>
    </div>

  </div>












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.data.values.ValueHash" class="doc doc-heading">
        <code>
ValueHash            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.values.ValueHash" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueHash</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>

    <span class="nb">hash</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The value hash.&quot;</span><span class="p">)</span>
    <span class="n">hash_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The value hash method.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueHash.hash" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">hash</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueHash.hash" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The value hash.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueHash.hash_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">hash_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueHash.hash_type" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The value hash method.</p>
    </div>

  </div>










  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.data.values.ValueInfo" class="doc doc-heading">
        <code>
ValueInfo            (<span title="kiara.info.KiaraInfoModel">KiaraInfoModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.values.ValueInfo" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueInfo</span><span class="p">(</span><span class="n">KiaraInfoModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_value</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span> <span class="n">include_deserialization_config</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">value_ids</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Value not registered (yet).&quot;</span><span class="p">)</span>

        <span class="c1"># aliases = value._registry.find_aliases_for_value(value)</span>
        <span class="n">hashes</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_hashes</span><span class="p">()</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">also_return_schema</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># metadata = value.metadata</span>
        <span class="n">value_lineage</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_lineage</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">include_deserialization_config</span><span class="p">:</span>
            <span class="c1"># serialize_operation: SerializeValueOperationType = (  # type: ignore</span>
            <span class="c1">#     value._kiara.operation_mgmt.get_operation(&quot;serialize&quot;)  # type: ignore</span>
            <span class="c1"># )</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ValueInfo</span><span class="p">(</span>
            <span class="n">value_id</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">value_schema</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">value_schema</span><span class="p">,</span>
            <span class="n">hashes</span><span class="o">=</span><span class="n">hashes</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
            <span class="n">lineage</span><span class="o">=</span><span class="n">value_lineage</span><span class="p">,</span>
            <span class="n">is_valid</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">(),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_id</span>

    <span class="k">def</span> <span class="nf">get_category_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;value&quot;</span>

    <span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The value id.&quot;</span><span class="p">)</span>
    <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The value schema.&quot;</span><span class="p">)</span>
    <span class="c1"># aliases: typing.List[ValueAlias] = Field(</span>
    <span class="c1">#     description=&quot;All aliases for this value.&quot;, default_factory=list</span>
    <span class="c1"># )</span>
    <span class="c1"># tags: typing.List[str] = Field(</span>
    <span class="c1">#     description=&quot;All tags for this value.&quot;, default_factory=list</span>
    <span class="c1"># )</span>
    <span class="c1"># created: str = Field(description=&quot;The time the data was created.&quot;)</span>
    <span class="n">is_valid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the item is valid (in the context of its schema).&quot;</span>
    <span class="p">)</span>
    <span class="n">hashes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ValueHash</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;All available hashes for this value.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span>
    <span class="p">)</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The metadata associated with this value.&quot;</span>
    <span class="p">)</span>
    <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Information about how the value was created.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>
    <span class="n">deserialize_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">DeserializeConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The module config (incl. inputs) to deserialize the value.&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_metadata_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">keys</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">keys</span><span class="p">:</span>
            <span class="n">_keys</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_keys</span> <span class="o">=</span> <span class="n">keys</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">_keys</span><span class="p">:</span>

            <span class="n">md</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">md</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No metadata for key &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39; available.&quot;</span><span class="p">)</span>

            <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">md</span><span class="p">[</span><span class="s2">&quot;metadata_item&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">get_metadata_schemas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">keys</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">keys</span><span class="p">:</span>
            <span class="n">_keys</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_keys</span> <span class="o">=</span> <span class="n">keys</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">_keys</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">md</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No metadata for key &#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&#39; available.&quot;</span><span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">md</span><span class="p">[</span><span class="s2">&quot;metadata_schema&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="n">padding</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;padding&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">skip_metadata</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;skip_metadata&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="n">skip_value_lineage</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;skip_lineage&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">include_ids</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_ids&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">,</span> <span class="n">show_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="n">padding</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;property&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_id</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type_config</span><span class="p">:</span>
            <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type_config</span><span class="p">)</span>
            <span class="n">tc_content</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span><span class="n">json_data</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;type config&quot;</span><span class="p">,</span> <span class="n">tc_content</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;desc&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">doc</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;is set&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span> <span class="k">else</span> <span class="s2">&quot;no&quot;</span><span class="p">)</span>
        <span class="c1"># table.add_row(&quot;is constant&quot;, &quot;yes&quot; if self.is_constant else &quot;no&quot;)</span>

        <span class="c1"># if isinstance(self.value_hash, int):</span>
        <span class="c1">#     vh = str(self.value_hash)</span>
        <span class="c1"># else:</span>
        <span class="c1">#     vh = self.value_hash.value</span>
        <span class="c1"># table.add_row(&quot;hash&quot;, vh)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hashes</span><span class="p">:</span>
            <span class="n">hashes_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">hs</span><span class="o">.</span><span class="n">hash_type</span><span class="p">:</span> <span class="n">hs</span><span class="o">.</span><span class="n">hash</span> <span class="k">for</span> <span class="n">hs</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hashes</span><span class="p">}</span>
            <span class="n">yaml_string</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">hashes_dict</span><span class="p">)</span>
            <span class="n">hases_str</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span><span class="n">yaml_string</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;hashes&quot;</span><span class="p">,</span> <span class="n">hases_str</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_metadata</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">:</span>
                <span class="n">yaml_string</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_metadata_items</span><span class="p">())</span>
                <span class="c1"># json_string = json.dumps(self.get_metadata_items(), indent=2)</span>
                <span class="n">metadata</span> <span class="o">=</span> <span class="n">Syntax</span><span class="p">(</span><span class="n">yaml_string</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="s2">&quot;-- no metadata --&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_value_lineage</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineage</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">:</span>
                <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="c1"># json_string = self.lineage.json(indent=2)</span>
            <span class="c1"># seed_content = Syntax(json_string, &quot;json&quot;)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span>
                <span class="s2">&quot;lineage&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineage</span><span class="o">.</span><span class="n">create_renderable</span><span class="p">(</span><span class="n">include_ids</span><span class="o">=</span><span class="n">include_ids</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">table</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueInfo.deserialize_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">deserialize_config</span><span class="p">:</span> <span class="n">DeserializeConfig</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueInfo.deserialize_config" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The module config (incl. inputs) to deserialize the value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueInfo.hashes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">hashes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">ValueHash</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueInfo.hashes" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>All available hashes for this value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueInfo.is_valid" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_valid</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueInfo.is_valid" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Whether the item is valid (in the context of its schema).</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueInfo.lineage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">lineage</span><span class="p">:</span> <span class="n">ValueLineage</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueInfo.lineage" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Information about how the value was created.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueInfo.metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueInfo.metadata" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The metadata associated with this value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueInfo.value_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueInfo.value_id" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The value id.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueInfo.value_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueInfo.value_schema" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The value schema.</p>
    </div>

  </div>
















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.data.values.ValueLineage" class="doc doc-heading">
        <code>
ValueLineage            (<a title="kiara.module_config.ModuleConfig" href="../../module_config/#kiara.module_config.ModuleConfig">ModuleConfig</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.values.ValueLineage" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Model containing the lineage of a value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueLineage</span><span class="p">(</span><span class="n">ModuleConfig</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Model containing the lineage of a value.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_module_and_inputs</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">module</span><span class="p">:</span> <span class="s2">&quot;KiaraModule&quot;</span><span class="p">,</span>
        <span class="n">output_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Value&quot;</span><span class="p">,</span> <span class="s2">&quot;ValueInfo&quot;</span><span class="p">]],</span>
    <span class="p">):</span>

        <span class="n">module_type</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">_module_type_id</span>  <span class="c1"># type: ignore</span>
        <span class="n">module_config</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">get_type_metadata</span><span class="p">()</span><span class="o">.</span><span class="n">documentation</span>

        <span class="n">_inputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
                <span class="n">_inputs</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_info</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_inputs</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">return</span> <span class="n">ValueLineage</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span>
            <span class="n">module_type</span><span class="o">=</span><span class="n">module_type</span><span class="p">,</span>
            <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span>
            <span class="n">doc</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span>
            <span class="n">output_name</span><span class="o">=</span><span class="n">output_name</span><span class="p">,</span>
            <span class="n">inputs</span><span class="o">=</span><span class="n">_inputs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
        <span class="n">module_doc</span><span class="p">:</span> <span class="n">DocumentationMetadataModel</span><span class="p">,</span>
        <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Value&quot;</span><span class="p">,</span> <span class="s2">&quot;ValueInfo&quot;</span><span class="p">]],</span>
        <span class="n">output_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="n">_inputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
                <span class="n">_inputs</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">get_info</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_inputs</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">return</span> <span class="n">ValueLineage</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span>
            <span class="n">module_type</span><span class="o">=</span><span class="n">module_type</span><span class="p">,</span>
            <span class="n">module_config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">module_config</span><span class="p">),</span>
            <span class="n">doc</span><span class="o">=</span><span class="n">module_doc</span><span class="p">,</span>
            <span class="n">output_name</span><span class="o">=</span><span class="n">output_name</span><span class="p">,</span>
            <span class="n">inputs</span><span class="o">=</span><span class="n">_inputs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">output_name</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The result field name for the value this refers to.&quot;</span>
    <span class="p">)</span>
    <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ValueInfo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The inputs that were used to create the value this refers to.&quot;</span>
    <span class="p">)</span>
    <span class="n">value_index</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ValueInfo&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Index of all values that are associated with this value lineage.&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_minimal_dict</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">include_metadata</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_module_doc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_module_config</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="n">full_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">minimal_dict</span> <span class="o">=</span> <span class="n">filter_metadata_schema</span><span class="p">(</span>
            <span class="n">full_dict</span><span class="p">,</span>
            <span class="n">include_metadata</span><span class="o">=</span><span class="n">include_metadata</span><span class="p">,</span>
            <span class="n">include_module_doc</span><span class="o">=</span><span class="n">include_module_doc</span><span class="p">,</span>
            <span class="n">include_module_config</span><span class="o">=</span><span class="n">include_module_config</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">minimal_dict</span>

    <span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

        <span class="n">all_ids</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">find_all_ids_in_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="n">id_color_map</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">v_id</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">all_ids</span><span class="p">):</span>
            <span class="n">id_color_map</span><span class="p">[</span><span class="n">v_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">COLOR_LIST</span><span class="p">[</span><span class="n">idx</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">COLOR_LIST</span><span class="p">)]</span>

        <span class="n">show_ids</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_ids&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="n">tree</span> <span class="o">=</span> <span class="n">fill_lineage_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">include_ids</span><span class="o">=</span><span class="n">show_ids</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tree</span>

    <span class="k">def</span> <span class="nf">create_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">:</span>

        <span class="k">return</span> <span class="n">create_lineage_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueLineage.inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueInfo</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueLineage.inputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The inputs that were used to create the value this refers to.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueLineage.output_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">output_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueLineage.output_name" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The result field name for the value this refers to.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueLineage.value_index" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_index</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueInfo</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueLineage.value_index" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Index of all values that are associated with this value lineage.</p>
    </div>

  </div>










  <div class="doc doc-object doc-method">



<h4 id="kiara.data.values.ValueLineage.create_renderable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">)</span></code>


<a href="#kiara.data.values.ValueLineage.create_renderable" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Create a renderable for this module configuration.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_renderable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderableType</span><span class="p">:</span>

    <span class="n">all_ids</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">find_all_ids_in_lineage</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
    <span class="n">id_color_map</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">v_id</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">all_ids</span><span class="p">):</span>
        <span class="n">id_color_map</span><span class="p">[</span><span class="n">v_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">COLOR_LIST</span><span class="p">[</span><span class="n">idx</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">COLOR_LIST</span><span class="p">)]</span>

    <span class="n">show_ids</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_ids&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="n">tree</span> <span class="o">=</span> <span class="n">fill_lineage_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">include_ids</span><span class="o">=</span><span class="n">show_ids</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tree</span>
</code></pre></div>
        </details>
    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.data.values.ValueSchema" class="doc doc-heading">
        <code>
ValueSchema            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>The schema of a value.</p>
<p>The schema contains the <a href="../../../../../data/types/__init__/#kiara.data.types.ValueType">ValueType</a> of a value, as well as an optional default that
will be used if no user input was given (yet) for a value.</p>
<p>For more complex container types like array, tables, unions etc, types can also be configured with values from the <code>type_config</code> field.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueSchema</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The schema of a value.</span>

<span class="sd">    The schema contains the [ValueType][kiara.data.values.ValueType] of a value, as well as an optional default that</span>
<span class="sd">    will be used if no user input was given (yet) for a value.</span>

<span class="sd">    For more complex container types like array, tables, unions etc, types can also be configured with values from the ``type_config`` field.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">use_enum_values</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># extra = Extra.forbid</span>

    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The type of the value.&quot;</span><span class="p">)</span>
    <span class="n">type_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Configuration for the type, in case it&#39;s complex.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">default</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A default value.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span>
    <span class="p">)</span>

    <span class="n">optional</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether this value is required (True), or whether &#39;None&#39; value is allowed (False).&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">is_constant</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the value is a constant.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
    <span class="c1"># required: typing.Any = Field(</span>
    <span class="c1">#     description=&quot;Whether this value is required to be set.&quot;, default=True</span>
    <span class="c1"># )</span>

    <span class="n">doc</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;-- n/a --&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A description for the value of this input field.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_required</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">optional</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">]:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">validate_types</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kiara</span><span class="o">.</span><span class="n">value_type_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid value type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&#39;, available types: </span><span class="si">{</span><span class="n">kiara</span><span class="o">.</span><span class="n">value_type_names</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">desc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The first line of the &#39;doc&#39; value.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="p">))</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueSchema.default" class="doc doc-heading">
<code class="highlight language-python"><span class="n">default</span><span class="p">:</span> <span class="n">Any</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.default" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A default value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueSchema.desc" class="doc doc-heading">
<code class="highlight language-python"><span class="n">desc</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.desc" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The first line of the 'doc' value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueSchema.doc" class="doc doc-heading">
<code class="highlight language-python"><span class="n">doc</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.doc" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A description for the value of this input field.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueSchema.is_constant" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_constant</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.is_constant" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Whether the value is a constant.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueSchema.optional" class="doc doc-heading">
<code class="highlight language-python"><span class="n">optional</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.optional" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Whether this value is required (True), or whether 'None' value is allowed (False).</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueSchema.type" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.type" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The type of the value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueSchema.type_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">type_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.type_config" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Configuration for the type, in case it's complex.</p>
    </div>

  </div>








  <div class="doc doc-object doc-method">



<h4 id="kiara.data.values.ValueSchema.__eq__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.__eq__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return self==value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.data.values.ValueSchema.__hash__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.ValueSchema.__hash__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return hash(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>








  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.data.values.ValueSlot" class="doc doc-heading">
        <code>
ValueSlot            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.data.values.ValueSlot" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueSlot</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_value</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ValueSlot&quot;</span><span class="p">:</span>

        <span class="n">vs</span> <span class="o">=</span> <span class="n">ValueSlot</span><span class="o">.</span><span class="n">from_value_schema</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">value_schema</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">value_schema</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">_kiara</span>
        <span class="p">)</span>
        <span class="n">vs</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">vs</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_value_schema</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ValueSlot&quot;</span><span class="p">:</span>

        <span class="n">vs</span> <span class="o">=</span> <span class="n">ValueSlot</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">value_schema</span><span class="o">=</span><span class="n">value_schema</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">vs</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
        <span class="n">_kiara</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;kiara&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No kiara context provided.&quot;</span><span class="p">)</span>
        <span class="n">_registry</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;registry&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_registry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_registry</span> <span class="o">=</span> <span class="n">_kiara</span><span class="o">.</span><span class="n">data_registry</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span> <span class="o">=</span> <span class="n">_kiara</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span> <span class="o">=</span> <span class="n">_registry</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>

    <span class="n">_kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>
    <span class="n">_registry</span><span class="p">:</span> <span class="s2">&quot;DataRegistry&quot;</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>
    <span class="n">_callbacks</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ValueSlotUpdateHandler&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span>
    <span class="p">)</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The id for this slot.&quot;</span><span class="p">)</span>
    <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The schema for the values of this slot.&quot;</span>
    <span class="p">)</span>
    <span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The values of this slot, with versions as key.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">tags</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The tags for this value slot (tag name as key, linked version as value.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">latest_version_nr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_latest_value</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>

        <span class="n">lv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">latest_version_nr</span>
        <span class="k">if</span> <span class="n">lv</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No value added to value slot yet.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">latest_version_nr</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">register_callbacks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">callbacks</span><span class="p">:</span> <span class="s2">&quot;ValueSlotUpdateHandler&quot;</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="n">callbacks</span><span class="p">:</span>
            <span class="n">cb_id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">cb_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callbacks</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Callback with id &#39;</span><span class="si">{</span><span class="n">cb_id</span><span class="si">}</span><span class="s2">&#39; already registered.&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cb</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">cb</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
                    <span class="n">cb_id</span> <span class="o">=</span> <span class="n">cb</span><span class="o">.</span><span class="n">id</span><span class="p">()</span>  <span class="c1"># type: ignore</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">cb_id</span> <span class="o">=</span> <span class="n">cb</span><span class="o">.</span><span class="n">id</span>  <span class="c1"># type: ignore</span>
            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cb</span><span class="p">,</span> <span class="s2">&quot;get_id&quot;</span><span class="p">):</span>
                <span class="n">cb_id</span> <span class="o">=</span> <span class="n">cb</span><span class="o">.</span><span class="n">get_id</span><span class="p">()</span>  <span class="c1"># type: ignore</span>

            <span class="k">if</span> <span class="n">cb_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">cb_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>

            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cb_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_callbacks</span><span class="p">[</span><span class="n">cb_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">cb</span>

    <span class="k">def</span> <span class="nf">add_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span>
        <span class="n">trigger_callbacks</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Add a value to this slot.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">latest_version_nr</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_latest_value</span><span class="p">()</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">latest_version_nr</span>

        <span class="c1"># TODO: check value data equality</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">is_constant</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                <span class="kn">import</span> <span class="nn">traceback</span>

                <span class="n">traceback</span><span class="o">.</span><span class="n">print_stack</span><span class="p">()</span>

            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t add value: value slot marked as &#39;constant&#39;.&quot;</span><span class="p">)</span>

        <span class="n">version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">latest_version_nr</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">assert</span> <span class="n">version</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">version</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="n">tags</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">version</span>

        <span class="k">if</span> <span class="n">trigger_callbacks</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callbacks</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">cb</span><span class="o">.</span><span class="n">values_updated</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">version</span>

    <span class="k">def</span> <span class="nf">is_latest_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">):</span>

        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_latest_value</span><span class="p">()</span><span class="o">.</span><span class="n">id</span>

    <span class="k">def</span> <span class="nf">find_linked_aliases</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">value_item</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="s2">&quot;ValueAlias&quot;</span><span class="p">]:</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_item</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="n">value_item</span> <span class="o">=</span> <span class="n">value_item</span><span class="o">.</span><span class="n">id</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_version</span><span class="p">,</span> <span class="n">_value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">_value</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">value_item</span><span class="p">:</span>
                <span class="n">va</span> <span class="o">=</span> <span class="n">ValueAlias</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">_version</span><span class="p">)</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">va</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">_version</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                    <span class="k">for</span> <span class="n">_tag</span><span class="p">,</span> <span class="n">_tag_version</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">_tag_version</span> <span class="o">==</span> <span class="n">_version</span><span class="p">:</span>
                            <span class="n">va</span> <span class="o">=</span> <span class="n">ValueAlias</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">_tag</span><span class="p">)</span>
                            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">va</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">id</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueSlot.id" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueSlot.id" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The id for this slot.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueSlot.tags" class="doc doc-heading">
<code class="highlight language-python"><span class="n">tags</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueSlot.tags" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The tags for this value slot (tag name as key, linked version as value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueSlot.value_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.data.values.ValueSlot.value_schema" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The schema for the values of this slot.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.data.values.ValueSlot.values" class="doc doc-heading">
<code class="highlight language-python"><span class="n">values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">Value</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.data.values.ValueSlot.values" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The values of this slot, with versions as key.</p>
    </div>

  </div>







  <div class="doc doc-object doc-method">



<h4 id="kiara.data.values.ValueSlot.__eq__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.ValueSlot.__eq__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return self==value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">id</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.data.values.ValueSlot.__hash__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.ValueSlot.__hash__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return hash(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h4 id="kiara.data.values.ValueSlot.add_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">trigger_callbacks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#kiara.data.values.ValueSlot.add_value" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Add a value to this slot.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_value</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span>
    <span class="n">trigger_callbacks</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">tags</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add a value to this slot.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">latest_version_nr</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_latest_value</span><span class="p">()</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">latest_version_nr</span>

    <span class="c1"># TODO: check value data equality</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">is_constant</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
            <span class="kn">import</span> <span class="nn">traceback</span>

            <span class="n">traceback</span><span class="o">.</span><span class="n">print_stack</span><span class="p">()</span>

        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t add value: value slot marked as &#39;constant&#39;.&quot;</span><span class="p">)</span>

    <span class="n">version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">latest_version_nr</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="n">version</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">version</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">if</span> <span class="n">tags</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">version</span>

    <span class="k">if</span> <span class="n">trigger_callbacks</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">cb</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callbacks</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">cb</span><span class="o">.</span><span class="n">values_updated</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">version</span>
</code></pre></div>
        </details>
    </div>

  </div>











  </div>

    </div>

  </div>










  <div class="doc doc-object doc-module">



<h3 id="kiara.data.values.value_set" class="doc doc-heading">
        <code>value_set</code>



<a href="#kiara.data.values.value_set" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="kiara.data.values.value_set.SlottedValueSet" class="doc doc-heading">
        <code>
SlottedValueSet            (<a title="kiara.data.values.value_set.ValueSet" href="../values/value_set/#kiara.data.values.value_set.ValueSet">ValueSet</a>)
        </code>



<a href="#kiara.data.values.value_set.SlottedValueSet" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/values/value_set.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SlottedValueSet</span><span class="p">(</span><span class="n">ValueSet</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_schemas</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">schemas</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;ValueSchema&quot;</span><span class="p">],</span>
        <span class="n">read_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">check_for_sameness</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">initial_values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">default_value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span> <span class="o">=</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">registry</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">DataRegistry</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SlottedValueSet&quot;</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara.kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">registry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">registry</span> <span class="o">=</span> <span class="n">kiara</span><span class="o">.</span><span class="n">data_registry</span>

        <span class="n">values</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">schema</span> <span class="ow">in</span> <span class="n">schemas</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">def_val</span> <span class="o">=</span> <span class="n">default_value</span>
            <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">default_value</span><span class="p">):</span>
                <span class="n">def_val</span> <span class="o">=</span> <span class="n">default_value</span><span class="p">()</span>

            <span class="n">_init_value</span> <span class="o">=</span> <span class="n">def_val</span>

            <span class="k">if</span> <span class="n">initial_values</span> <span class="ow">and</span> <span class="n">initial_values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">_init_value</span> <span class="o">=</span> <span class="n">initial_values</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_init_value</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
                <span class="n">value</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                    <span class="n">value_data</span><span class="o">=</span><span class="n">_init_value</span><span class="p">,</span> <span class="n">value_schema</span><span class="o">=</span><span class="n">schema</span>
                <span class="p">)</span>
                <span class="c1"># value: Value = Value(value_schema=schema, value_data=_init_value, registry=registry)  # type: ignore</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">_init_value</span>

            <span class="n">values</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">items</span><span class="o">=</span><span class="n">values</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">read_only</span><span class="o">=</span><span class="n">read_only</span><span class="p">,</span>
            <span class="n">check_for_sameness</span><span class="o">=</span><span class="n">check_for_sameness</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>
            <span class="n">registry</span><span class="o">=</span><span class="n">registry</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">items</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;ValueSlot&quot;</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">]],</span>
        <span class="n">read_only</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">check_for_sameness</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">registry</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">DataRegistry</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A `ValueSet` implementation that keeps a history of each fields value.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            items: the value slots</span>
<span class="sd">            read_only: whether it is allowed to set new values to fields in this set</span>
<span class="sd">            check_for_sameness: whether a check should be performed that checks for equality of the new and old values, if equal, skip the update</span>
<span class="sd">            title: An optional title for this value set</span>
<span class="sd">            kiara: the kiara context</span>
<span class="sd">            registry: the registry to use to register the values to</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">items</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Can&#39;t create ValueSet: no values provided&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_for_sameness</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">check_for_sameness</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">read_only</span><span class="o">=</span><span class="n">read_only</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">registry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">registry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_registry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="p">:</span> <span class="n">DataRegistry</span> <span class="o">=</span> <span class="n">registry</span>

        <span class="n">_value_slots</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">items</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t create value set, item &#39;</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&#39; does not have a value (yet).&quot;</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value name can&#39;t start with &#39;_&#39;: </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">INVALID_VALUE_NAMES</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid value name &#39;</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
                <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">register_alias</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
                <span class="n">slot</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type: &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

            <span class="n">_value_slots</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">slot</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span> <span class="o">=</span> <span class="n">_value_slots</span>

    <span class="k">def</span> <span class="nf">get_all_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_get_value_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Value&quot;</span><span class="p">:</span>

        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">slot</span><span class="o">.</span><span class="n">get_latest_value</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_set_values</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]:</span>

        <span class="c1"># we want to set all registry-type values seperately, in one go, because it&#39;s more efficient</span>
        <span class="n">registries</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
            <span class="n">DataRegistry</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Value&quot;</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">field_slot_map</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">value_or_data</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">value_slot</span><span class="p">:</span> <span class="n">ValueSlot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">metadata</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_for_sameness</span><span class="p">:</span>
                <span class="n">latest_val</span> <span class="o">=</span> <span class="n">value_slot</span><span class="o">.</span><span class="n">get_latest_value</span><span class="p">()</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_or_data</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">latest_val</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">value_or_data</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                        <span class="n">result</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">continue</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span>
                        <span class="n">latest_val</span><span class="o">.</span><span class="n">is_set</span>
                        <span class="ow">and</span> <span class="n">latest_val</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span> <span class="o">==</span> <span class="n">value_or_data</span>
                    <span class="p">):</span>
                        <span class="n">result</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">continue</span>

            <span class="n">registries</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">value_slot</span><span class="o">.</span><span class="n">_registry</span><span class="p">,</span> <span class="p">{})[</span><span class="n">value_slot</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_or_data</span>
            <span class="n">field_slot_map</span><span class="p">[</span><span class="n">value_slot</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_name</span>

        <span class="k">for</span> <span class="n">registry</span><span class="p">,</span> <span class="n">value_slots_details</span> <span class="ow">in</span> <span class="n">registries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">_r</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">update_value_slots</span><span class="p">(</span><span class="n">value_slots_details</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

            <span class="k">for</span> <span class="n">value_slot</span><span class="p">,</span> <span class="n">details</span> <span class="ow">in</span> <span class="n">_r</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">result</span><span class="p">[</span><span class="n">field_slot_map</span><span class="p">[</span><span class="n">value_slot</span><span class="p">]]</span> <span class="o">=</span> <span class="n">details</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.value_set.SlottedValueSet.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">,</span> <span class="n">read_only</span><span class="p">,</span> <span class="n">check_for_sameness</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">registry</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.data.values.value_set.SlottedValueSet.__init__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>A <code>ValueSet</code> implementation that keeps a history of each fields value.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>items</code></td>
        <td><code>Mapping[str, Union[ValueSlot, Value]]</code></td>
        <td><p>the value slots</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>read_only</code></td>
        <td><code>bool</code></td>
        <td><p>whether it is allowed to set new values to fields in this set</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>check_for_sameness</code></td>
        <td><code>bool</code></td>
        <td><p>whether a check should be performed that checks for equality of the new and old values, if equal, skip the update</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>title</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>An optional title for this value set</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>kiara</code></td>
        <td><code>Optional[Kiara]</code></td>
        <td><p>the kiara context</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>registry</code></td>
        <td><code>Optional[kiara.data.registry.DataRegistry]</code></td>
        <td><p>the registry to use to register the values to</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/data/values/value_set.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="s2">&quot;ValueSlot&quot;</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">]],</span>
    <span class="n">read_only</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">check_for_sameness</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">title</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">registry</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">DataRegistry</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A `ValueSet` implementation that keeps a history of each fields value.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        items: the value slots</span>
<span class="sd">        read_only: whether it is allowed to set new values to fields in this set</span>
<span class="sd">        check_for_sameness: whether a check should be performed that checks for equality of the new and old values, if equal, skip the update</span>
<span class="sd">        title: An optional title for this value set</span>
<span class="sd">        kiara: the kiara context</span>
<span class="sd">        registry: the registry to use to register the values to</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">items</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Can&#39;t create ValueSet: no values provided&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_check_for_sameness</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">check_for_sameness</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">read_only</span><span class="o">=</span><span class="n">read_only</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">registry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">registry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_registry</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="p">:</span> <span class="n">DataRegistry</span> <span class="o">=</span> <span class="n">registry</span>

    <span class="n">_value_slots</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">items</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t create value set, item &#39;</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&#39; does not have a value (yet).&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value name can&#39;t start with &#39;_&#39;: </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">INVALID_VALUE_NAMES</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid value name &#39;</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Value</span><span class="p">):</span>
            <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">register_alias</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">):</span>
            <span class="n">slot</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid type: &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

        <span class="n">_value_slots</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">slot</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_value_slots</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span> <span class="o">=</span> <span class="n">_value_slots</span>
</code></pre></div>
        </details>
    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.data.values.value_set.ValueSet" class="doc doc-heading">
        <code>
ValueSet            (<span title="collections.abc.MutableMapping">MutableMapping</span>, <span title="typing.Generic">Generic</span>)
        </code>



<a href="#kiara.data.values.value_set.ValueSet" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/data/values/value_set.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueSet</span><span class="p">(</span><span class="n">typing</span><span class="o">.</span><span class="n">MutableMapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">]):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">read_only</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="c1"># from kiara.data.values import ValueSchema</span>
        <span class="c1"># schema = ValueSchema(type=&quot;any&quot;, default=None, doc=&quot;-- n/a --&quot;)</span>
        <span class="c1"># self._schema = schema</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara.kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span> <span class="o">=</span> <span class="n">kiara</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_read_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">read_only</span>
        <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;-- n/a --&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">title</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_all_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">pass</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_get_value_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_set_values</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]:</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">get_value_obj</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">ensure_metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()):</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Field &#39;</span><span class="si">{</span><span class="n">field_name</span><span class="si">}</span><span class="s2">&#39; not available in value set. Available fields: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">obj</span><span class="p">:</span> <span class="n">Value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_value_obj</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">ensure_metadata</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ensure_metadata</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ensure_metadata</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">ensure_metadata</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ensure_metadata</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">):</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="o">*</span><span class="n">ensure_metadata</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">ensure_metadata</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; for &#39;ensure_metadata&#39; argument.&quot;</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="nf">set_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span><span class="p">})</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="ne">Exception</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>  <span class="c1"># type: ignore</span>

    <span class="k">def</span> <span class="nf">set_values</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Batch set several values.</span>

<span class="sd">        If metadata is provided, it is added to all values.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_read_only</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t set values: this value set is read-only.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">values</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{}</span>

        <span class="n">invalid</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">():</span>
                <span class="n">invalid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">invalid</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No field(s) with name(s) </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">invalid</span><span class="p">)</span><span class="si">}</span><span class="s2"> available, valid names: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">resolved_values</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">data</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;value:&quot;</span><span class="p">):</span>
                <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="n">resolved_values</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">resolved_values</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">value_set_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_values</span><span class="p">(</span>
                <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span><span class="p">,</span> <span class="o">**</span><span class="n">resolved_values</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">log_message</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                <span class="kn">import</span> <span class="nn">traceback</span>

                <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_set_result</span><span class="p">[</span><span class="n">field</span><span class="p">],</span> <span class="ne">Exception</span><span class="p">):</span>
                <span class="n">result</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_set_result</span><span class="p">[</span><span class="n">field</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">is_read_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_only</span>

    <span class="k">def</span> <span class="nf">items_are_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="k">return</span> <span class="n">check_valueset_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># for field_name in self.get_all_field_names():</span>
        <span class="c1">#     item = self.get_value_obj(field_name)</span>
        <span class="c1">#     if not item.item_is_valid():</span>
        <span class="c1">#         return False</span>
        <span class="c1"># return True</span>

    <span class="k">def</span> <span class="nf">check_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Check whether the value set is invalid, if it is, return a description of what&#39;s wrong.&quot;&quot;&quot;</span>

        <span class="n">invalid</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">is_required</span><span class="p">():</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;not set&quot;</span>
                    <span class="k">elif</span> <span class="n">item</span><span class="o">.</span><span class="n">is_none</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;no value&quot;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;n/a&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;n/a&quot;</span>
                <span class="n">invalid</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">msg</span>
        <span class="k">return</span> <span class="n">invalid</span>

    <span class="k">def</span> <span class="nf">get_all_value_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">fn</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span> <span class="k">for</span> <span class="n">fn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()}</span>

    <span class="k">def</span> <span class="nf">get_value_data_for_fields</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">field_names</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">raise_exception_when_unset</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return the data for a one or several fields of this ValueSet.</span>

<span class="sd">        If a value is unset, by default &#39;None&#39; is returned for it. Unless &#39;raise_exception_when_unset&#39; is set to &#39;True&#39;,</span>
<span class="sd">        in which case an Exception will be raised (obviously).</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">unset</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">raise_exception_when_unset</span><span class="p">:</span>
                    <span class="n">unset</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>
                <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>

        <span class="k">if</span> <span class="n">unset</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t get data for fields, one or several of the requested fields are not set yet: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">unset</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">get_value_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">raise_exception_when_unset</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_data_for_fields</span><span class="p">(</span>
            <span class="n">field_name</span><span class="p">,</span> <span class="n">raise_exception_when_unset</span><span class="o">=</span><span class="n">raise_exception_when_unset</span>
        <span class="p">)[</span><span class="n">field_name</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_all_value_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">raise_exception_when_unset</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_data_for_fields</span><span class="p">(</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">(),</span>
            <span class="n">raise_exception_when_unset</span><span class="o">=</span><span class="n">raise_exception_when_unset</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">save_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">aliases</span><span class="p">:</span>
            <span class="n">aliases</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">aliases</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">field_aliases</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">aliases</span><span class="p">:</span>
                <span class="n">field_aliases</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">aliases</span><span class="p">]</span>
            <span class="n">v</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">aliases</span><span class="o">=</span><span class="n">field_aliases</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Value&quot;</span><span class="p">:</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>

        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Removing items not supported: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterator</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">())</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()))</span>

    <span class="k">def</span> <span class="nf">to_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ensure_metadata</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineValuesInfo&quot;</span><span class="p">:</span>

        <span class="kn">from</span> <span class="nn">kiara.pipeline</span> <span class="kn">import</span> <span class="n">PipelineValueInfo</span><span class="p">,</span> <span class="n">PipelineValuesInfo</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">():</span>
            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">PipelineValueInfo</span><span class="o">.</span><span class="n">from_value_obj</span><span class="p">(</span>
                <span class="n">item</span><span class="p">,</span> <span class="n">ensure_metadata</span><span class="o">=</span><span class="n">ensure_metadata</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">PipelineValuesInfo</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_create_rich_table</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">show_headers</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">ensure_metadata</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">SIMPLE</span><span class="p">,</span> <span class="n">show_header</span><span class="o">=</span><span class="n">show_headers</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Field name&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;i&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Required&quot;</span><span class="p">)</span>
        <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&quot;Is set&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">():</span>
            <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">ensure_metadata</span><span class="o">=</span><span class="n">ensure_metadata</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span>
            <span class="n">desc</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">doc</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">is_required</span><span class="p">():</span>
                <span class="n">req</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">v</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span>
                    <span class="ow">and</span> <span class="n">v</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span> <span class="o">!=</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NO_VALUE</span>
                    <span class="ow">and</span> <span class="n">v</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">default</span> <span class="o">!=</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span>
                <span class="p">):</span>
                    <span class="n">req</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">req</span> <span class="o">=</span> <span class="s2">&quot;[red]yes[/red]&quot;</span>
            <span class="n">is_set</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span> <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;no&quot;</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">desc</span><span class="p">,</span> <span class="n">req</span><span class="p">,</span> <span class="n">is_set</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">table</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">title_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_title</span><span class="p">:</span>
            <span class="n">title_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; title=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_title</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(field_names=</span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}{</span><span class="n">title_str</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_title</span>
        <span class="k">if</span> <span class="n">title</span><span class="p">:</span>
            <span class="n">postfix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; [b]</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">[/b]&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">postfix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">yield</span> <span class="n">Panel</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_create_rich_table</span><span class="p">(</span><span class="n">show_headers</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="n">box</span><span class="o">=</span><span class="n">box</span><span class="o">.</span><span class="n">ROUNDED</span><span class="p">,</span>
            <span class="n">title_align</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Value-Set:</span><span class="si">{</span><span class="n">postfix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">


















  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.value_set.ValueSet.check_invalid" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.data.values.value_set.ValueSet.check_invalid" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Check whether the value set is invalid, if it is, return a description of what's wrong.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/value_set.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Check whether the value set is invalid, if it is, return a description of what&#39;s wrong.&quot;&quot;&quot;</span>

    <span class="n">invalid</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">is_required</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;not set&quot;</span>
                <span class="k">elif</span> <span class="n">item</span><span class="o">.</span><span class="n">is_none</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;no value&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;n/a&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;n/a&quot;</span>
            <span class="n">invalid</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">msg</span>
    <span class="k">return</span> <span class="n">invalid</span>
</code></pre></div>
        </details>
    </div>

  </div>







  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.value_set.ValueSet.get_value_data_for_fields" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_value_data_for_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">field_names</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">raise_exception_when_unset</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#kiara.data.values.value_set.ValueSet.get_value_data_for_fields" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Return the data for a one or several fields of this ValueSet.</p>
<p>If a value is unset, by default 'None' is returned for it. Unless 'raise_exception_when_unset' is set to 'True',
in which case an Exception will be raised (obviously).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/value_set.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_value_data_for_fields</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">field_names</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">raise_exception_when_unset</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Return the data for a one or several fields of this ValueSet.</span>

<span class="sd">    If a value is unset, by default &#39;None&#39; is returned for it. Unless &#39;raise_exception_when_unset&#39; is set to &#39;True&#39;,</span>
<span class="sd">    in which case an Exception will be raised (obviously).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">unset</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">:</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">is_set</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">raise_exception_when_unset</span><span class="p">:</span>
                <span class="n">unset</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">get_value_data</span><span class="p">()</span>
            <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">if</span> <span class="n">unset</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Can&#39;t get data for fields, one or several of the requested fields are not set yet: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">unset</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>








  <div class="doc doc-object doc-method">



<h5 id="kiara.data.values.value_set.ValueSet.set_values" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">values</span><span class="p">)</span></code>


<a href="#kiara.data.values.value_set.ValueSet.set_values" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Batch set several values.</p>
<p>If metadata is provided, it is added to all values.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/data/values/value_set.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_values</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MetadataModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">lineage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">ValueLineage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Batch set several values.</span>

<span class="sd">    If metadata is provided, it is added to all values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_read_only</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can&#39;t set values: this value set is read-only.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">values</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="n">invalid</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">():</span>
            <span class="n">invalid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">invalid</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No field(s) with name(s) </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">invalid</span><span class="p">)</span><span class="si">}</span><span class="s2"> available, valid names: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="n">resolved_values</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">data</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;value:&quot;</span><span class="p">):</span>
            <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="n">resolved_values</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">resolved_values</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">value_set_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_values</span><span class="p">(</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">lineage</span><span class="o">=</span><span class="n">lineage</span><span class="p">,</span> <span class="o">**</span><span class="n">resolved_values</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">log_message</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
            <span class="kn">import</span> <span class="nn">traceback</span>

            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">raise</span> <span class="n">e</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Value</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_set_result</span><span class="p">[</span><span class="n">field</span><span class="p">],</span> <span class="ne">Exception</span><span class="p">):</span>
            <span class="n">result</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_set_result</span><span class="p">[</span><span class="n">field</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>









  </div>

    </div>

  </div>




  </div>

    </div>

  </div>




  </div>

    </div>

  </div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../../config/" class="md-footer__link md-footer__link--prev" aria-label="Previous: config" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              config
            </div>
          </div>
        </a>
      
      
        
        <a href="../onboarding/__init__/" class="md-footer__link md-footer__link--next" aria-label="Next: onboarding" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              onboarding
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      DHARPA project
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.instant", "navigation.tracking"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../../assets/javascripts/workers/search.bd0b6b67.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.8aa65030.min.js"></script>
      
    
  </body>
</html>