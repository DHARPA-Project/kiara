
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the Kiara project">
      
      
        <meta name="author" content="Markus Binsteiner">
      
      
        <link rel="canonical" href="https://dharpa.org/kiara/latest/reference/kiara/pipeline/__init__/">
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.1">
    
    
      
        <title>pipeline - Kiara</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.e8d9bf0c.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kiara.pipeline" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Kiara" class="md-header__button md-logo" aria-label="Kiara" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kiara
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              pipeline
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/DHARPA-Project/kiara/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Kiara" class="md-nav__button md-logo" aria-label="Kiara" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Kiara
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/DHARPA-Project/kiara/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../install/" class="md-nav__link">
        Install
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../architecture/">Architecture</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Architecture" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Architecture
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/assumptions/" class="md-nav__link">
        Assumptions & considerations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/decisions/" class="md-nav__link">
        Decisions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/metadata/" class="md-nav__link">
        Metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../architecture/data/">Data</a>
          
            <label for="__nav_3_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Data" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/data/data_centric_approach/" class="md-nav__link">
        Data centric approach
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/data/data_formats/" class="md-nav__link">
        Data formats
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/data/dev/" class="md-nav__link">
        Dev
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/data/persistence/" class="md-nav__link">
        Data persistence
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/data/requirements/" class="md-nav__link">
        Requirements
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" type="checkbox" id="__nav_3_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../architecture/workflows/">Workflows</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Workflows" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Workflows
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5_1" type="checkbox" id="__nav_3_5_1" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../architecture/workflows/modularity/modularity/">Modularity</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Modularity" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_5_1">
          <span class="md-nav__icon md-icon"></span>
          Modularity
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../architecture/workflows/modularity/modularity_2/" class="md-nav__link">
        Modularity 2
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Value types
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Value types" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Value types
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../value_types/any/" class="md-nav__link">
        any
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../value_types/deserialize_config/" class="md-nav__link">
        deserialize_config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../value_types/load_config/" class="md-nav__link">
        load_config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../value_types/value_info/" class="md-nav__link">
        value_info
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../value_types/value_lineage/" class="md-nav__link">
        value_lineage
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Modules
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Modules" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Modules
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../modules/metadata/" class="md-nav__link">
        metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../modules/value/" class="md-nav__link">
        value
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Operation types
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Operation types" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Operation types
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/all/" class="md-nav__link">
        all
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/calculate_hash/" class="md-nav__link">
        calculate_hash
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/create/" class="md-nav__link">
        create
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/export/" class="md-nav__link">
        export
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/extract_metadata/" class="md-nav__link">
        extract_metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/import/" class="md-nav__link">
        import
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/pretty_print/" class="md-nav__link">
        pretty_print
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/sample/" class="md-nav__link">
        sample
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/serialize/" class="md-nav__link">
        serialize
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../operation_types/store_value/" class="md-nav__link">
        store_value
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          API docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          API docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1" type="checkbox" id="__nav_7_1" checked>
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../__init__/">kiara</a>
          
            <label for="__nav_7_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="kiara" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_1">
          <span class="md-nav__icon md-icon"></span>
          kiara
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config/" class="md-nav__link">
        config
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2" type="checkbox" id="__nav_7_1_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../data/__init__/">data</a>
          
            <label for="__nav_7_1_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="data" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_2">
          <span class="md-nav__icon md-icon"></span>
          data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2_1" type="checkbox" id="__nav_7_1_2_1" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../data/onboarding/__init__/">onboarding</a>
          
        </div>
      
      <nav class="md-nav" aria-label="onboarding" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_2_1">
          <span class="md-nav__icon md-icon"></span>
          onboarding
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/onboarding/batch/" class="md-nav__link">
        batch
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2_2" type="checkbox" id="__nav_7_1_2_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../data/registry/__init__/">registry</a>
          
        </div>
      
      <nav class="md-nav" aria-label="registry" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_2_2">
          <span class="md-nav__icon md-icon"></span>
          registry
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/registry/store/" class="md-nav__link">
        store
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2_3" type="checkbox" id="__nav_7_1_2_3" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../data/types/__init__/">types</a>
          
            <label for="__nav_7_1_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="types" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_2_3">
          <span class="md-nav__icon md-icon"></span>
          types
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/types/core/" class="md-nav__link">
        core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/types/type_mgmt/" class="md-nav__link">
        type_mgmt
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2_4" type="checkbox" id="__nav_7_1_2_4" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../data/values/__init__/">values</a>
          
        </div>
      
      <nav class="md-nav" aria-label="values" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_2_4">
          <span class="md-nav__icon md-icon"></span>
          values
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data/values/value_set/" class="md-nav__link">
        value_set
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../defaults/" class="md-nav__link">
        defaults
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_4" type="checkbox" id="__nav_7_1_4" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../doc/__init__/">doc</a>
          
            <label for="__nav_7_1_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="doc" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_4">
          <span class="md-nav__icon md-icon"></span>
          doc
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../doc/gen_info_pages/" class="md-nav__link">
        gen_info_pages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../doc/generate_api_doc/" class="md-nav__link">
        generate_api_doc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../doc/mkdocs_macros_cli/" class="md-nav__link">
        mkdocs_macros_cli
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../doc/mkdocs_macros_kiara/" class="md-nav__link">
        mkdocs_macros_kiara
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_4_5" type="checkbox" id="__nav_7_1_4_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../doc/mkdocstrings/__init__/">mkdocstrings</a>
          
            <label for="__nav_7_1_4_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="mkdocstrings" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_4_5">
          <span class="md-nav__icon md-icon"></span>
          mkdocstrings
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../doc/mkdocstrings/collector/" class="md-nav__link">
        collector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../doc/mkdocstrings/handler/" class="md-nav__link">
        handler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../doc/mkdocstrings/renderer/" class="md-nav__link">
        renderer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_5" type="checkbox" id="__nav_7_1_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../environment/__init__/">environment</a>
          
            <label for="__nav_7_1_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="environment" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_5">
          <span class="md-nav__icon md-icon"></span>
          environment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../environment/operating_system/" class="md-nav__link">
        operating_system
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../environment/python/" class="md-nav__link">
        python
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../events/" class="md-nav__link">
        events
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_7" type="checkbox" id="__nav_7_1_7" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../examples/__init__/">examples</a>
          
        </div>
      
      <nav class="md-nav" aria-label="examples" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_7">
          <span class="md-nav__icon md-icon"></span>
          examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/example_controller/" class="md-nav__link">
        example_controller
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../exceptions/" class="md-nav__link">
        exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_9" type="checkbox" id="__nav_7_1_9" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../info/__init__/">info</a>
          
            <label for="__nav_7_1_9">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="info" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_9">
          <span class="md-nav__icon md-icon"></span>
          info
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../info/kiara/" class="md-nav__link">
        kiara
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../info/metadata/" class="md-nav__link">
        metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../info/modules/" class="md-nav__link">
        modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../info/operations/" class="md-nav__link">
        operations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../info/pipelines/" class="md-nav__link">
        pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../info/types/" class="md-nav__link">
        types
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10" type="checkbox" id="__nav_7_1_10" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/__init__/">interfaces</a>
          
            <label for="__nav_7_1_10">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="interfaces" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_10">
          <span class="md-nav__icon md-icon"></span>
          interfaces
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1" type="checkbox" id="__nav_7_1_10_1" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/__init__/">cli</a>
          
            <label for="__nav_7_1_10_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="cli" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_10_1">
          <span class="md-nav__icon md-icon"></span>
          cli
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_1" type="checkbox" id="__nav_7_1_10_1_1" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/data/__init__/">data</a>
          
        </div>
      
      <nav class="md-nav" aria-label="data" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_1">
          <span class="md-nav__icon md-icon"></span>
          data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/data/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_2" type="checkbox" id="__nav_7_1_10_1_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/dev/__init__/">dev</a>
          
        </div>
      
      <nav class="md-nav" aria-label="dev" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_2">
          <span class="md-nav__icon md-icon"></span>
          dev
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/dev/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_3" type="checkbox" id="__nav_7_1_10_1_3" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/environment/__init__/">environment</a>
          
        </div>
      
      <nav class="md-nav" aria-label="environment" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_3">
          <span class="md-nav__icon md-icon"></span>
          environment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/environment/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/explain/" class="md-nav__link">
        explain
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_5" type="checkbox" id="__nav_7_1_10_1_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/info/__init__/">info</a>
          
        </div>
      
      <nav class="md-nav" aria-label="info" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_5">
          <span class="md-nav__icon md-icon"></span>
          info
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/info/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_6" type="checkbox" id="__nav_7_1_10_1_6" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/metadata/__init__/">metadata</a>
          
        </div>
      
      <nav class="md-nav" aria-label="metadata" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_6">
          <span class="md-nav__icon md-icon"></span>
          metadata
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/metadata/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_7" type="checkbox" id="__nav_7_1_10_1_7" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/module/__init__/">module</a>
          
        </div>
      
      <nav class="md-nav" aria-label="module" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_7">
          <span class="md-nav__icon md-icon"></span>
          module
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/module/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_8" type="checkbox" id="__nav_7_1_10_1_8" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/operation/__init__/">operation</a>
          
        </div>
      
      <nav class="md-nav" aria-label="operation" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_8">
          <span class="md-nav__icon md-icon"></span>
          operation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/operation/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_9" type="checkbox" id="__nav_7_1_10_1_9" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/pipeline/__init__/">pipeline</a>
          
        </div>
      
      <nav class="md-nav" aria-label="pipeline" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_9">
          <span class="md-nav__icon md-icon"></span>
          pipeline
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/pipeline/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/run/" class="md-nav__link">
        run
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_1_11" type="checkbox" id="__nav_7_1_10_1_11" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/cli/type/__init__/">type</a>
          
        </div>
      
      <nav class="md-nav" aria-label="type" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_1_10_1_11">
          <span class="md-nav__icon md-icon"></span>
          type
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/type/commands/" class="md-nav__link">
        commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/cli/utils/" class="md-nav__link">
        utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_10_2" type="checkbox" id="__nav_7_1_10_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../interfaces/python_api/__init__/">python_api</a>
          
        </div>
      
      <nav class="md-nav" aria-label="python_api" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_10_2">
          <span class="md-nav__icon md-icon"></span>
          python_api
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interfaces/python_api/controller/" class="md-nav__link">
        controller
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kiara/" class="md-nav__link">
        kiara
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_12" type="checkbox" id="__nav_7_1_12" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../metadata/__init__/">metadata</a>
          
            <label for="__nav_7_1_12">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="metadata" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_12">
          <span class="md-nav__icon md-icon"></span>
          metadata
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metadata/core_models/" class="md-nav__link">
        core_models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metadata/data/" class="md-nav__link">
        data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metadata/mgmt/" class="md-nav__link">
        mgmt
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metadata/module_models/" class="md-nav__link">
        module_models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metadata/operation_models/" class="md-nav__link">
        operation_models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../metadata/type_models/" class="md-nav__link">
        type_models
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../module/" class="md-nav__link">
        module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../module_config/" class="md-nav__link">
        module_config
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_15" type="checkbox" id="__nav_7_1_15" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../module_mgmt/__init__/">module_mgmt</a>
          
            <label for="__nav_7_1_15">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="module_mgmt" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_15">
          <span class="md-nav__icon md-icon"></span>
          module_mgmt
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../module_mgmt/merged/" class="md-nav__link">
        merged
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../module_mgmt/pipelines/" class="md-nav__link">
        pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../module_mgmt/python_classes/" class="md-nav__link">
        python_classes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_16" type="checkbox" id="__nav_7_1_16" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../modules/__init__/">modules</a>
          
            <label for="__nav_7_1_16">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="modules" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_16">
          <span class="md-nav__icon md-icon"></span>
          modules
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/metadata/" class="md-nav__link">
        metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/pipelines/__init__/" class="md-nav__link">
        pipelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/save_value/" class="md-nav__link">
        save_value
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/type_conversion/" class="md-nav__link">
        type_conversion
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_17" type="checkbox" id="__nav_7_1_17" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../operations/__init__/">operations</a>
          
            <label for="__nav_7_1_17">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="operations" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_17">
          <span class="md-nav__icon md-icon"></span>
          operations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/calculate_hash/" class="md-nav__link">
        calculate_hash
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/create_value/" class="md-nav__link">
        create_value
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/data_export/" class="md-nav__link">
        data_export
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/data_import/" class="md-nav__link">
        data_import
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/extract_metadata/" class="md-nav__link">
        extract_metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/merge_values/" class="md-nav__link">
        merge_values
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/pretty_print/" class="md-nav__link">
        pretty_print
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/sample/" class="md-nav__link">
        sample
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/serialize/" class="md-nav__link">
        serialize
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/store_value/" class="md-nav__link">
        store_value
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_18" type="checkbox" id="__nav_7_1_18" checked>
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index md-nav__link--active">
          <a href="./">pipeline</a>
          
            <label for="__nav_7_1_18">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="pipeline" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_18">
          <span class="md-nav__icon md-icon"></span>
          pipeline
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        config
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_18_2" type="checkbox" id="__nav_7_1_18_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../controller/__init__/">controller</a>
          
        </div>
      
      <nav class="md-nav" aria-label="controller" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_1_18_2">
          <span class="md-nav__icon md-icon"></span>
          controller
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../controller/batch/" class="md-nav__link">
        batch
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../listeners/" class="md-nav__link">
        listeners
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../module/" class="md-nav__link">
        module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline/" class="md-nav__link">
        pipeline
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../structure/" class="md-nav__link">
        structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../values/" class="md-nav__link">
        values
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_19" type="checkbox" id="__nav_7_1_19" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../processing/__init__/">processing</a>
          
            <label for="__nav_7_1_19">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="processing" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_19">
          <span class="md-nav__icon md-icon"></span>
          processing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../processing/parallel/" class="md-nav__link">
        parallel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../processing/processor/" class="md-nav__link">
        processor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../processing/synchronous/" class="md-nav__link">
        synchronous
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_20" type="checkbox" id="__nav_7_1_20" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../rendering/__init__/">rendering</a>
          
            <label for="__nav_7_1_20">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="rendering" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_20">
          <span class="md-nav__icon md-icon"></span>
          rendering
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rendering/jinja/" class="md-nav__link">
        jinja
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rendering/mgmt/" class="md-nav__link">
        mgmt
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sessions/__init__/" class="md-nav__link">
        sessions
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_22" type="checkbox" id="__nav_7_1_22" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../utils/__init__/">utils</a>
          
            <label for="__nav_7_1_22">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="utils" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_22">
          <span class="md-nav__icon md-icon"></span>
          utils
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/class_loading/" class="md-nav__link">
        class_loading
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/concurrency/" class="md-nav__link">
        concurrency
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/doc/" class="md-nav__link">
        doc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/global_metadata/" class="md-nav__link">
        global_metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/jupyter/" class="md-nav__link">
        jupyter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/modules/" class="md-nav__link">
        modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/output/" class="md-nav__link">
        output
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_23" type="checkbox" id="__nav_7_1_23" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../workflow/__init__/">workflow</a>
          
            <label for="__nav_7_1_23">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="workflow" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_23">
          <span class="md-nav__icon md-icon"></span>
          workflow
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../workflow/kiara_workflow/" class="md-nav__link">
        kiara_workflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../workflow/wrapped/" class="md-nav__link">
        wrapped
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2" type="checkbox" id="__nav_7_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2">
          mkdocstrings_handlers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="mkdocstrings_handlers" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          mkdocstrings_handlers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../mkdocstrings_handlers/kiara/__init__/" class="md-nav__link">
        kiara
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kiara.pipeline" class="md-nav__link">
    kiara.pipeline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.pipeline.PipelineValueInfo" class="md-nav__link">
    PipelineValueInfo
  </a>
  
    <nav class="md-nav" aria-label="PipelineValueInfo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.PipelineValueInfo.id" class="md-nav__link">
    id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.PipelineValueInfo.is_set" class="md-nav__link">
    is_set
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.PipelineValueInfo.is_valid" class="md-nav__link">
    is_valid
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.PipelineValueInfo.metadata" class="md-nav__link">
    metadata
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.PipelineValueInfo.status" class="md-nav__link">
    status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.PipelineValueInfo.value_schema" class="md-nav__link">
    value_schema
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.pipeline.PipelineValuesInfo" class="md-nav__link">
    PipelineValuesInfo
  </a>
  
    <nav class="md-nav" aria-label="PipelineValuesInfo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.PipelineValuesInfo.values" class="md-nav__link">
    values
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.pipeline.StepStatus" class="md-nav__link">
    StepStatus
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.pipeline.StepValueAddress" class="md-nav__link">
    StepValueAddress
  </a>
  
    <nav class="md-nav" aria-label="StepValueAddress">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.StepValueAddress.alias" class="md-nav__link">
    alias
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.StepValueAddress.step_id" class="md-nav__link">
    step_id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.StepValueAddress.sub_value" class="md-nav__link">
    sub_value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.StepValueAddress.value_name" class="md-nav__link">
    value_name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.StepValueAddress.__eq__" class="md-nav__link">
    __eq__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.StepValueAddress.__hash__" class="md-nav__link">
    __hash__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.StepValueAddress.__repr__" class="md-nav__link">
    __repr__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.StepValueAddress.__str__" class="md-nav__link">
    __str__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.pipeline.config" class="md-nav__link">
    config
  </a>
  
    <nav class="md-nav" aria-label="config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.config.PipelineConfig" class="md-nav__link">
    PipelineConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.config.PipelineStepConfig" class="md-nav__link">
    PipelineStepConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.config.StepDesc" class="md-nav__link">
    StepDesc
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.pipeline.controller" class="md-nav__link">
    controller
  </a>
  
    <nav class="md-nav" aria-label="controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.controller.PipelineController" class="md-nav__link">
    PipelineController
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.controller.batch" class="md-nav__link">
    batch
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.pipeline.listeners" class="md-nav__link">
    listeners
  </a>
  
    <nav class="md-nav" aria-label="listeners">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.listeners.PipelineListener" class="md-nav__link">
    PipelineListener
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.pipeline.module" class="md-nav__link">
    module
  </a>
  
    <nav class="md-nav" aria-label="module">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.module.PipelineModule" class="md-nav__link">
    PipelineModule
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.pipeline.pipeline" class="md-nav__link">
    pipeline
  </a>
  
    <nav class="md-nav" aria-label="pipeline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.pipeline.Pipeline" class="md-nav__link">
    Pipeline
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.pipeline.structure" class="md-nav__link">
    structure
  </a>
  
    <nav class="md-nav" aria-label="structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.structure.PipelineStep" class="md-nav__link">
    PipelineStep
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.structure.PipelineStructure" class="md-nav__link">
    PipelineStructure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kiara.pipeline.values" class="md-nav__link">
    values
  </a>
  
    <nav class="md-nav" aria-label="values">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.values.PipelineInputRef" class="md-nav__link">
    PipelineInputRef
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.values.PipelineOutputRef" class="md-nav__link">
    PipelineOutputRef
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.values.StepInputRef" class="md-nav__link">
    StepInputRef
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.values.StepOutputRef" class="md-nav__link">
    StepOutputRef
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kiara.pipeline.values.ValueRef" class="md-nav__link">
    ValueRef
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/DHARPA-Project/kiara/edit/master/docs/src/kiara/pipeline/__init__.py" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>



  <h1>pipeline</h1>

<div class="doc doc-object doc-module">

<a id="kiara.pipeline"></a>
    <div class="doc doc-contents first">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h2 id="kiara.pipeline.PipelineValueInfo" class="doc doc-heading">
        <code>
PipelineValueInfo            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValueInfo" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Convenience wrapper to make the [PipelineState][kiara.pipeline.pipeline.PipelineState] json/dict export prettier.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineValueInfo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convenience wrapper to make the [PipelineState][kiara.pipeline.pipeline.PipelineState] json/dict export prettier.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_value_obj</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Value</span><span class="p">,</span> <span class="n">ensure_metadata</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">ensure_metadata</span><span class="p">:</span>
            <span class="n">value</span><span class="o">.</span><span class="n">get_metadata</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">PipelineValueInfo</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">value_schema</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">value_schema</span><span class="p">,</span>
            <span class="n">is_valid</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">(),</span>
            <span class="n">is_set</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">is_set</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">item_status</span><span class="p">(),</span>
            <span class="c1"># value_metadata=value.value_metadata,</span>
            <span class="c1"># last_update=value.last_update,</span>
            <span class="c1"># value_hash=value.value_hash,</span>
            <span class="c1"># is_streaming=value.is_streaming,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">value</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>
        <span class="n">allow_mutation</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;A unique id for this value.&quot;</span><span class="p">)</span>
    <span class="n">is_valid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the value is set and valid.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
    <span class="n">status</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The value status string&quot;</span><span class="p">)</span>
    <span class="n">is_set</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the value is set.&quot;</span><span class="p">)</span>
    <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The schema of this value.&quot;</span><span class="p">)</span>
    <span class="c1"># is_constant: bool = Field(</span>
    <span class="c1">#     description=&quot;Whether this value is a constant.&quot;, default=False</span>
    <span class="c1"># )</span>
    <span class="c1"># value_metadata: ValueMetadata = Field(</span>
    <span class="c1">#     description=&quot;The metadata of the value itself (not the actual data).&quot;</span>
    <span class="c1"># )</span>
    <span class="c1"># last_update: datetime = Field(</span>
    <span class="c1">#     default=None, description=&quot;The time the last update to this value happened.&quot;</span>
    <span class="c1"># )</span>
    <span class="c1"># value_hash: typing.Union[ValueHashMarker, int] = Field(</span>
    <span class="c1">#     description=&quot;The hash of the current value.&quot;</span>
    <span class="c1"># )</span>
    <span class="c1"># is_streaming: bool = Field(</span>
    <span class="c1">#     default=False,</span>
    <span class="c1">#     description=&quot;Whether the value is currently streamed into this object.&quot;,</span>
    <span class="c1"># )</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Metadata relating to the actual data (size, no. of rows, etc. -- depending on data type).&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h3 id="kiara.pipeline.PipelineValueInfo.id" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValueInfo.id" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>A unique id for this value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="kiara.pipeline.PipelineValueInfo.is_set" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_set</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValueInfo.is_set" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Whether the value is set.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="kiara.pipeline.PipelineValueInfo.is_valid" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_valid</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValueInfo.is_valid" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Whether the value is set and valid.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="kiara.pipeline.PipelineValueInfo.metadata" class="doc doc-heading">
<code class="highlight language-python"><span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValueInfo.metadata" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Metadata relating to the actual data (size, no. of rows, etc. -- depending on data type).</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="kiara.pipeline.PipelineValueInfo.status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">status</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValueInfo.status" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>The value status string</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="kiara.pipeline.PipelineValueInfo.value_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValueInfo.value_schema" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>The schema of this value.</p>
    </div>

  </div>












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h2 id="kiara.pipeline.PipelineValuesInfo" class="doc doc-heading">
        <code>
PipelineValuesInfo            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValuesInfo" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Convenience wrapper to make the [PipelineState][kiara.pipeline.pipeline.PipelineState] json/dict export prettier.</p>
<p>This is basically just a simplified version of the [ValueSet][kiara.data.values.ValueSet] class that is using
pydantic, in order to make it easy to export to json.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineValuesInfo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convenience wrapper to make the [PipelineState][kiara.pipeline.pipeline.PipelineState] json/dict export prettier.</span>

<span class="sd">    This is basically just a simplified version of the [ValueSet][kiara.data.values.ValueSet] class that is using</span>
<span class="sd">    pydantic, in order to make it easy to export to json.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_value_set</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value_set</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">ensure_metadata</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>

        <span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineValueInfo</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">value_set</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">():</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">value_set</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">ensure_metadata</span><span class="o">=</span><span class="n">ensure_metadata</span><span class="p">)</span>
            <span class="n">values</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">PipelineValueInfo</span><span class="o">.</span><span class="n">from_value_obj</span><span class="p">(</span>
                <span class="n">v</span><span class="p">,</span> <span class="n">ensure_metadata</span><span class="o">=</span><span class="n">ensure_metadata</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">PipelineValuesInfo</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">)</span>

    <span class="n">values</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineValueInfo</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Field names are keys, and the data as values.&quot;</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">use_enum_values</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h3 id="kiara.pipeline.PipelineValuesInfo.values" class="doc doc-heading">
<code class="highlight language-python"><span class="n">values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">PipelineValueInfo</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.PipelineValuesInfo.values" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Field names are keys, and the data as values.</p>
    </div>

  </div>












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h2 id="kiara.pipeline.StepStatus" class="doc doc-heading">
        <code>
StepStatus            (<span title="enum.Enum">Enum</span>)
        </code>



<a href="#kiara.pipeline.StepStatus" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Enum to describe the state of a workflow.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StepStatus</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Enum to describe the state of a workflow.&quot;&quot;&quot;</span>

    <span class="n">STALE</span> <span class="o">=</span> <span class="s2">&quot;stale&quot;</span>
    <span class="n">INPUTS_READY</span> <span class="o">=</span> <span class="s2">&quot;inputs_ready&quot;</span>
    <span class="n">RESULTS_INCOMING</span> <span class="o">=</span> <span class="s2">&quot;processing&quot;</span>
    <span class="n">RESULTS_READY</span> <span class="o">=</span> <span class="s2">&quot;results_ready&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h2 id="kiara.pipeline.StepValueAddress" class="doc doc-heading">
        <code>
StepValueAddress            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Small model to describe the address of a value of a step, within a Pipeline/PipelineStructure.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StepValueAddress</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Small model to describe the address of a value of a step, within a Pipeline/PipelineStructure.&quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>

    <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The id of a step within a pipeline.&quot;</span><span class="p">)</span>
    <span class="n">value_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name of the value (output name or pipeline input name).&quot;</span>
    <span class="p">)</span>
    <span class="n">sub_value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A reference to a subitem of a value (e.g. column, list item)&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">alias</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An alias string for this address (in the form ``[step_id].[value_name]``).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">generate_step_alias</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StepValueAddress</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_value</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span>
            <span class="n">other</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span>
            <span class="n">other</span><span class="o">.</span><span class="n">value_name</span><span class="p">,</span>
            <span class="n">other</span><span class="o">.</span><span class="n">sub_value</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_value</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_value</span><span class="p">:</span>
            <span class="n">sub_value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; sub_value=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sub_value</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sub_value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;StepValueAddres(step_id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">, value_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="si">}{</span><span class="n">sub_value</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h3 id="kiara.pipeline.StepValueAddress.alias" class="doc doc-heading">
<code class="highlight language-python"><span class="n">alias</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress.alias" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>An alias string for this address (in the form <code>[step_id].[value_name]</code>).</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="kiara.pipeline.StepValueAddress.step_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress.step_id" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>The id of a step within a pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="kiara.pipeline.StepValueAddress.sub_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sub_value</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress.sub_value" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>A reference to a subitem of a value (e.g. column, list item)</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="kiara.pipeline.StepValueAddress.value_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_name</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress.value_name" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>The name of the value (output name or pipeline input name).</p>
    </div>

  </div>








  <div class="doc doc-object doc-method">



<h3 id="kiara.pipeline.StepValueAddress.__eq__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress.__eq__" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return self==value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">StepValueAddress</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_value</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span>
        <span class="n">other</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span>
        <span class="n">other</span><span class="o">.</span><span class="n">value_name</span><span class="p">,</span>
        <span class="n">other</span><span class="o">.</span><span class="n">sub_value</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="kiara.pipeline.StepValueAddress.__hash__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress.__hash__" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return hash(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_value</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h3 id="kiara.pipeline.StepValueAddress.__repr__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress.__repr__" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return repr(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_value</span><span class="p">:</span>
        <span class="n">sub_value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; sub_value=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sub_value</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sub_value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;StepValueAddres(step_id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">, value_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="si">}{</span><span class="n">sub_value</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="kiara.pipeline.StepValueAddress.__str__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.StepValueAddress.__str__" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return str(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h2 id="kiara.pipeline.config" class="doc doc-heading">
        <code>config</code>



<a href="#kiara.pipeline.config" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.config.PipelineConfig" class="doc doc-heading">
        <code>
PipelineConfig            (<a title="kiara.module_config.ModuleTypeConfigSchema" href="../../module_config/#kiara.module_config.ModuleTypeConfigSchema">ModuleTypeConfigSchema</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineConfig" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>A class to hold the configuration for a <a href="../module/#kiara.pipeline.module.PipelineModule">PipelineModule</a>.</p>
<p>If you want to control the pipeline input and output names, you need to have to provide a map that uses the
autogenerated field name ([step_id]__[field_name] -- 2 underscores!!) as key, and the desired field name
as value. The reason that schema for the autogenerated field names exist is that it's hard to ensure
the uniqueness of each field; some steps can have the same input field names, but will need different input
values. In some cases, some inputs of different steps need the same input. Those sorts of things.
So, to make sure that we always use the right values, I chose to implement a conservative default approach,
accepting that in some cases the user will be prompted for duplicate inputs for the same value.</p>
<p>To remedy that, the pipeline creator has the option to manually specify a mapping to rename some or all of
the input/output fields.</p>
<p>Further, because in a lot of cases there won't be any overlapping fields, the creator can specify <code>auto</code>,
in which case <em>Kiara</em> will automatically create a mapping that tries to map autogenerated field names
to the shortest possible names for each case.</p>

<p><strong>Examples:</strong></p>
    <p>Configuration for a pipeline module that functions as a <code>nand</code> logic gate (in Python):</p>
<div class="highlight"><pre><span></span><code><span class="n">and_step</span> <span class="o">=</span> <span class="n">PipelineStepConfig</span><span class="p">(</span><span class="n">module_type</span><span class="o">=</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="n">step_id</span><span class="o">=</span><span class="s2">&quot;and&quot;</span><span class="p">)</span>
<span class="n">not_step</span> <span class="o">=</span> <span class="n">PipelineStepConfig</span><span class="p">(</span><span class="n">module_type</span><span class="o">=</span><span class="s2">&quot;not&quot;</span><span class="p">,</span> <span class="n">step_id</span><span class="o">=</span><span class="s2">&quot;not&quot;</span><span class="p">,</span> <span class="n">input_links</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;and.y&quot;</span><span class="p">]}</span>
<span class="n">nand_p_conf</span> <span class="o">=</span> <span class="n">PipelineConfig</span><span class="p">(</span><span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Returns &#39;False&#39; if both inputs are &#39;True&#39;.&quot;</span><span class="p">,</span>
                    <span class="n">steps</span><span class="o">=</span><span class="p">[</span><span class="n">and_step</span><span class="p">,</span> <span class="n">not_step</span><span class="p">],</span>
                    <span class="n">input_aliases</span><span class="o">=</span><span class="p">{</span>
                        <span class="s2">&quot;and__a&quot;</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;and__b&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span>
                    <span class="p">},</span>
                    <span class="n">output_aliases</span><span class="o">=</span><span class="p">{</span>
                        <span class="s2">&quot;not__y&quot;</span><span class="p">:</span> <span class="s2">&quot;y&quot;</span>
                    <span class="p">}}</span>
</code></pre></div>
<p>Or, the same thing in json:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;module_type_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;nand&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;doc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Returns &#39;False&#39; if both inputs are &#39;True&#39;.&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;steps&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;and&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;step_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;and&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;not&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;step_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;not&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;input_links&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;and.y&quot;</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;input_aliases&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;and__a&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;and__b&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;output_aliases&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;not__y&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;y&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineConfig</span><span class="p">(</span><span class="n">ModuleTypeConfigSchema</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A class to hold the configuration for a [PipelineModule][kiara.pipeline.module.PipelineModule].</span>

<span class="sd">    If you want to control the pipeline input and output names, you need to have to provide a map that uses the</span>
<span class="sd">    autogenerated field name ([step_id]__[field_name] -- 2 underscores!!) as key, and the desired field name</span>
<span class="sd">    as value. The reason that schema for the autogenerated field names exist is that it&#39;s hard to ensure</span>
<span class="sd">    the uniqueness of each field; some steps can have the same input field names, but will need different input</span>
<span class="sd">    values. In some cases, some inputs of different steps need the same input. Those sorts of things.</span>
<span class="sd">    So, to make sure that we always use the right values, I chose to implement a conservative default approach,</span>
<span class="sd">    accepting that in some cases the user will be prompted for duplicate inputs for the same value.</span>

<span class="sd">    To remedy that, the pipeline creator has the option to manually specify a mapping to rename some or all of</span>
<span class="sd">    the input/output fields.</span>

<span class="sd">    Further, because in a lot of cases there won&#39;t be any overlapping fields, the creator can specify ``auto``,</span>
<span class="sd">    in which case *Kiara* will automatically create a mapping that tries to map autogenerated field names</span>
<span class="sd">    to the shortest possible names for each case.</span>

<span class="sd">    Examples:</span>

<span class="sd">        Configuration for a pipeline module that functions as a ``nand`` logic gate (in Python):</span>

<span class="sd">        ``` python</span>
<span class="sd">        and_step = PipelineStepConfig(module_type=&quot;and&quot;, step_id=&quot;and&quot;)</span>
<span class="sd">        not_step = PipelineStepConfig(module_type=&quot;not&quot;, step_id=&quot;not&quot;, input_links={&quot;a&quot;: [&quot;and.y&quot;]}</span>
<span class="sd">        nand_p_conf = PipelineConfig(doc=&quot;Returns &#39;False&#39; if both inputs are &#39;True&#39;.&quot;,</span>
<span class="sd">                            steps=[and_step, not_step],</span>
<span class="sd">                            input_aliases={</span>
<span class="sd">                                &quot;and__a&quot;: &quot;a&quot;,</span>
<span class="sd">                                &quot;and__b&quot;: &quot;b&quot;</span>
<span class="sd">                            },</span>
<span class="sd">                            output_aliases={</span>
<span class="sd">                                &quot;not__y&quot;: &quot;y&quot;</span>
<span class="sd">                            }}</span>
<span class="sd">        ```</span>

<span class="sd">        Or, the same thing in json:</span>

<span class="sd">        ``` json</span>
<span class="sd">        {</span>
<span class="sd">          &quot;module_type_name&quot;: &quot;nand&quot;,</span>
<span class="sd">          &quot;doc&quot;: &quot;Returns &#39;False&#39; if both inputs are &#39;True&#39;.&quot;,</span>
<span class="sd">          &quot;steps&quot;: [</span>
<span class="sd">            {</span>
<span class="sd">              &quot;module_type&quot;: &quot;and&quot;,</span>
<span class="sd">              &quot;step_id&quot;: &quot;and&quot;</span>
<span class="sd">            },</span>
<span class="sd">            {</span>
<span class="sd">              &quot;module_type&quot;: &quot;not&quot;,</span>
<span class="sd">              &quot;step_id&quot;: &quot;not&quot;,</span>
<span class="sd">              &quot;input_links&quot;: {</span>
<span class="sd">                &quot;a&quot;: &quot;and.y&quot;</span>
<span class="sd">              }</span>
<span class="sd">            }</span>
<span class="sd">          ],</span>
<span class="sd">          &quot;input_aliases&quot;: {</span>
<span class="sd">            &quot;and__a&quot;: &quot;a&quot;,</span>
<span class="sd">            &quot;and__b&quot;: &quot;b&quot;</span>
<span class="sd">          },</span>
<span class="sd">          &quot;output_aliases&quot;: {</span>
<span class="sd">            &quot;not__y&quot;: &quot;y&quot;</span>
<span class="sd">          }</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># @classmethod</span>
    <span class="c1"># def from_file(cls, path: typing.Union[str, Path]):</span>
    <span class="c1">#</span>
    <span class="c1">#     content = get_data_from_file(path)</span>
    <span class="c1">#     return PipelineConfig(**content)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_pipeline_config</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ModuleConfig</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineConfig&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Create a PipelineModule instance.</span>

<span class="sd">        The main &#39;config&#39; argument here can be either:</span>

<span class="sd">          - a string: in which case it needs to be (in that order):</span>
<span class="sd">            - a module id</span>
<span class="sd">            - an operation id</span>
<span class="sd">            - a path to a local file</span>
<span class="sd">          - a [ModuleConfig][kiara.module_config.ModuleConfig] object</span>
<span class="sd">          - a dict (to create a `ModuleInstsanceConfig` from</span>


<span class="sd">        Arguments:</span>
<span class="sd">            kiara: the kiara context</span>
<span class="sd">            config: the &#39;main&#39; config object</span>
<span class="sd">            module_config: in case the &#39;main&#39; config object was a module id, this argument is used to instantiate the module</span>
<span class="sd">            kiara: the kiara context (will use default context instance if not provided)</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara.kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="n">module_config_obj</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="o">.</span><span class="n">create_module_config</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">module_config_obj</span><span class="o">.</span><span class="n">module_type</span> <span class="o">==</span> <span class="s2">&quot;pipeline&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Not a valid pipeline configuration: </span><span class="si">{</span><span class="n">config</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># TODO: this is a bit round-about, to create a module config first, but it probably doesn&#39;t matter</span>
        <span class="n">pipeline_config_data</span> <span class="o">=</span> <span class="n">module_config_obj</span><span class="o">.</span><span class="n">module_config</span>

        <span class="n">module</span><span class="p">:</span> <span class="n">PipelineConfig</span> <span class="o">=</span> <span class="n">PipelineConfig</span><span class="p">(</span><span class="o">**</span><span class="n">pipeline_config_data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">module</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">allow</span>
        <span class="n">validate_assignment</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">steps</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">PipelineStepConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A list of steps/modules of this pipeline, and their connections.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">input_aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A map of input aliases, with the calculated (&lt;step_id&gt;__&lt;input_name&gt; -- double underscore!) name as key, and a string (the resulting workflow input alias) as value. Check the documentation for the config class for which marker strings can be used to automatically create this map if possible.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">output_aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A map of output aliases, with the calculated (&lt;step_id&gt;__&lt;output_name&gt; -- double underscore!) name as key, and a string (the resulting workflow output alias) as value.  Check the documentation for the config class for which marker strings can be used to automatically create this map if possible.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">documentation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;-- n/a --&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Documentation about what the pipeline does.&quot;</span>
    <span class="p">)</span>

    <span class="n">context</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Metadata for this workflow.&quot;</span>
    <span class="p">)</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;steps&quot;</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_validate_steps</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>

        <span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="n">PipelineStepConfig</span><span class="p">):</span>
                <span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
                <span class="n">steps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">PipelineStepConfig</span><span class="p">(</span><span class="o">**</span><span class="n">step</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">steps</span>

    <span class="k">def</span> <span class="nf">create_pipeline_structure</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineStructure&quot;</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">kiara</span> <span class="kn">import</span> <span class="n">Kiara</span><span class="p">,</span> <span class="n">PipelineStructure</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="n">ps</span> <span class="o">=</span> <span class="n">PipelineStructure</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">ps</span>

    <span class="k">def</span> <span class="nf">create_pipeline</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">controller</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;PipelineController&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="c1"># if parent_id is None:</span>
        <span class="c1">#     parent_id = DEFAULT_PIPELINE_PARENT_ID</span>
        <span class="n">structure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_pipeline_structure</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>

        <span class="kn">from</span> <span class="nn">kiara</span> <span class="kn">import</span> <span class="n">Pipeline</span>

        <span class="n">pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span>
            <span class="n">structure</span><span class="o">=</span><span class="n">structure</span><span class="p">,</span>
            <span class="n">controller</span><span class="o">=</span><span class="n">controller</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">pipeline</span>

    <span class="k">def</span> <span class="nf">create_pipeline_module</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">module_id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parent_id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineModule&quot;</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara.kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="kn">from</span> <span class="nn">kiara.pipeline.module</span> <span class="kn">import</span> <span class="n">PipelineModule</span>

        <span class="n">module</span> <span class="o">=</span> <span class="n">PipelineModule</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">module_id</span><span class="p">,</span>
            <span class="n">parent_id</span><span class="o">=</span><span class="n">parent_id</span><span class="p">,</span>
            <span class="n">module_config</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">module</span>

    <span class="c1"># def __rich_console__(</span>
    <span class="c1">#     self, console: Console, options: ConsoleOptions</span>
    <span class="c1"># ) -&gt; RenderResult:</span>
    <span class="c1">#</span>
    <span class="c1">#     table = Table(show_header=False, box=box.SIMPLE)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.config.PipelineConfig.context" class="doc doc-heading">
<code class="highlight language-python"><span class="n">context</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineConfig.context" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Metadata for this workflow.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.config.PipelineConfig.documentation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">documentation</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineConfig.documentation" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Documentation about what the pipeline does.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.config.PipelineConfig.input_aliases" class="doc doc-heading">
<code class="highlight language-python"><span class="n">input_aliases</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineConfig.input_aliases" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A map of input aliases, with the calculated (<step_id>__<input_name> -- double underscore!) name as key, and a string (the resulting workflow input alias) as value. Check the documentation for the config class for which marker strings can be used to automatically create this map if possible.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.config.PipelineConfig.output_aliases" class="doc doc-heading">
<code class="highlight language-python"><span class="n">output_aliases</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineConfig.output_aliases" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A map of output aliases, with the calculated (<step_id>__<output_name> -- double underscore!) name as key, and a string (the resulting workflow output alias) as value.  Check the documentation for the config class for which marker strings can be used to automatically create this map if possible.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.config.PipelineConfig.steps" class="doc doc-heading">
<code class="highlight language-python"><span class="n">steps</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">PipelineStepConfig</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineConfig.steps" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A list of steps/modules of this pipeline, and their connections.</p>
    </div>

  </div>











  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.config.PipelineConfig.create_pipeline_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_pipeline_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineConfig.create_pipeline_config" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Create a PipelineModule instance.</p>
<p>The main 'config' argument here can be either:</p>
<ul>
<li>a string: in which case it needs to be (in that order):<ul>
<li>a module id</li>
<li>an operation id</li>
<li>a path to a local file</li>
</ul>
</li>
<li>a <a href="../../module_config/#kiara.module_config.ModuleConfig">ModuleConfig</a> object</li>
<li>a dict (to create a <code>ModuleInstsanceConfig</code> from</li>
</ul>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>kiara</code></td>
        <td><code>Optional[Kiara]</code></td>
        <td><p>the kiara context</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>config</code></td>
        <td><code>Union[kiara.module_config.ModuleConfig, Mapping[str, Any], str]</code></td>
        <td><p>the 'main' config object</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>module_config</code></td>
        <td><code>Optional[Mapping[str, Any]]</code></td>
        <td><p>in case the 'main' config object was a module id, this argument is used to instantiate the module</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>kiara</code></td>
        <td><code>Optional[Kiara]</code></td>
        <td><p>the kiara context (will use default context instance if not provided)</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">create_pipeline_config</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ModuleConfig</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineConfig&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Create a PipelineModule instance.</span>

<span class="sd">    The main &#39;config&#39; argument here can be either:</span>

<span class="sd">      - a string: in which case it needs to be (in that order):</span>
<span class="sd">        - a module id</span>
<span class="sd">        - an operation id</span>
<span class="sd">        - a path to a local file</span>
<span class="sd">      - a [ModuleConfig][kiara.module_config.ModuleConfig] object</span>
<span class="sd">      - a dict (to create a `ModuleInstsanceConfig` from</span>


<span class="sd">    Arguments:</span>
<span class="sd">        kiara: the kiara context</span>
<span class="sd">        config: the &#39;main&#39; config object</span>
<span class="sd">        module_config: in case the &#39;main&#39; config object was a module id, this argument is used to instantiate the module</span>
<span class="sd">        kiara: the kiara context (will use default context instance if not provided)</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">kiara.kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

        <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

    <span class="n">module_config_obj</span> <span class="o">=</span> <span class="n">ModuleConfig</span><span class="o">.</span><span class="n">create_module_config</span><span class="p">(</span>
        <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">module_config_obj</span><span class="o">.</span><span class="n">module_type</span> <span class="o">==</span> <span class="s2">&quot;pipeline&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Not a valid pipeline configuration: </span><span class="si">{</span><span class="n">config</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># TODO: this is a bit round-about, to create a module config first, but it probably doesn&#39;t matter</span>
    <span class="n">pipeline_config_data</span> <span class="o">=</span> <span class="n">module_config_obj</span><span class="o">.</span><span class="n">module_config</span>

    <span class="n">module</span><span class="p">:</span> <span class="n">PipelineConfig</span> <span class="o">=</span> <span class="n">PipelineConfig</span><span class="p">(</span><span class="o">**</span><span class="n">pipeline_config_data</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">module</span>
</code></pre></div>
        </details>
    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.config.PipelineStepConfig" class="doc doc-heading">
        <code>
PipelineStepConfig            (<a title="kiara.module_config.ModuleConfig" href="../../module_config/#kiara.module_config.ModuleConfig">ModuleConfig</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineStepConfig" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>A class to hold the configuration of one module within a <a href="../module/#kiara.pipeline.module.PipelineModule">PipelineModule</a>.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineStepConfig</span><span class="p">(</span><span class="n">ModuleConfig</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A class to hold the configuration of one module within a [PipelineModule][kiara.pipeline.module.PipelineModule].&quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>
        <span class="n">validate_assignment</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The id of the step.&quot;</span><span class="p">)</span>
    <span class="n">input_links</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">StepValueAddress</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The map with the name of an input link as key, and the connected module output name(s) as value.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@root_validator</span><span class="p">(</span><span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">create_step_id</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>

        <span class="k">if</span> <span class="s2">&quot;module_type&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No &#39;module_type&#39; specified.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;step_id&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">values</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;step_id&quot;</span><span class="p">]:</span>
            <span class="n">values</span><span class="p">[</span><span class="s2">&quot;step_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">slugify</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;module_type&quot;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">values</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;step_id&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">ensure_valid_id</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>

        <span class="c1"># TODO: check with regex</span>
        <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">v</span> <span class="ow">or</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Step id can&#39;t contain special characters or whitespaces: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">v</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;module_config&quot;</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">ensure_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="n">v</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;input_links&quot;</span><span class="p">,</span> <span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">ensure_input_links_valid</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">input_name</span><span class="p">,</span> <span class="n">output</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">input_links</span> <span class="o">=</span> <span class="n">ensure_step_value_addresses</span><span class="p">(</span>
                <span class="n">default_field_name</span><span class="o">=</span><span class="n">input_name</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">output</span>
            <span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">input_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">input_links</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.config.PipelineStepConfig.input_links" class="doc doc-heading">
<code class="highlight language-python"><span class="n">input_links</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">StepValueAddress</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineStepConfig.input_links" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The map with the name of an input link as key, and the connected module output name(s) as value.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.config.PipelineStepConfig.step_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.config.PipelineStepConfig.step_id" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The id of the step.</p>
    </div>

  </div>















  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.config.StepDesc" class="doc doc-heading">
        <code>
StepDesc            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.config.StepDesc" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Details of a single <a href="../structure/#kiara.pipeline.structure.PipelineStep">PipelineStep</a> (which lives within a <a href="../pipeline/#kiara.pipeline.pipeline.Pipeline">Pipeline</a></p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/config.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StepDesc</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Details of a single [PipelineStep][kiara.pipeline.structure.PipelineStep] (which lives within a [Pipeline][kiara.pipeline.pipeline.Pipeline]&quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">allow_mutation</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>

    <span class="n">step</span><span class="p">:</span> <span class="n">PipelineStep</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Attributes of the step itself.&quot;</span><span class="p">)</span>
    <span class="n">processing_stage</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The processing stage of this step within a Pipeline.&quot;</span>
    <span class="p">)</span>
    <span class="n">input_connections</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;A map that explains what elements connect to this steps inputs. A connection could either be a Pipeline input (indicated by the ``__pipeline__`` token), or another steps output.</span>

<span class="s2">Example:</span>
<span class="s2">``` json</span>
<span class="s2">input_connections: {</span>
<span class="s2">    &quot;a&quot;: [&quot;__pipeline__.a&quot;],</span>
<span class="s2">    &quot;b&quot;: [&quot;step_one.a&quot;]</span>
<span class="s2">}</span>

<span class="s2">```</span>
<span class="s2">        &quot;&quot;&quot;</span>
    <span class="p">)</span>
    <span class="n">output_connections</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A map that explains what elemnts connect to this steps outputs. A connection could be either a Pipeline output, or another steps input.&quot;</span>
    <span class="p">)</span>
    <span class="n">required</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether this step is always required, or potentially could be skipped in case some inputs are not available.&quot;</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="k">yield</span> <span class="sa">f</span><span class="s2">&quot;[b]Step: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">[</span><span class="se">\b</span><span class="s2">]&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.config.StepDesc.input_connections" class="doc doc-heading">
<code class="highlight language-python"><span class="n">input_connections</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.config.StepDesc.input_connections" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A map that explains what elements connect to this steps inputs. A connection could either be a Pipeline input (indicated by the <code>__pipeline__</code> token), or another steps output.</p>

<p><strong>Examples:</strong></p>
    
      <div class="highlight"><pre><span></span><code><span class="err">i</span><span class="kc">n</span><span class="err">pu</span><span class="kc">t</span><span class="err">_co</span><span class="kc">nne</span><span class="err">c</span><span class="kc">t</span><span class="err">io</span><span class="kc">ns</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;__pipeline__.a&quot;</span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;b&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;step_one.a&quot;</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.config.StepDesc.output_connections" class="doc doc-heading">
<code class="highlight language-python"><span class="n">output_connections</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.config.StepDesc.output_connections" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A map that explains what elemnts connect to this steps outputs. A connection could be either a Pipeline output, or another steps input.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.config.StepDesc.processing_stage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">processing_stage</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.config.StepDesc.processing_stage" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The processing stage of this step within a Pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.config.StepDesc.required" class="doc doc-heading">
<code class="highlight language-python"><span class="n">required</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.config.StepDesc.required" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Whether this step is always required, or potentially could be skipped in case some inputs are not available.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.config.StepDesc.step" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step</span><span class="p">:</span> <span class="n">PipelineStep</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.config.StepDesc.step" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Attributes of the step itself.</p>
    </div>

  </div>












  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.pipeline.controller" class="doc doc-heading">
        <code>controller</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.controller" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.controller.PipelineController" class="doc doc-heading">
        <code>
PipelineController            (<a title="kiara.pipeline.listeners.PipelineListener" href="../listeners/#kiara.pipeline.listeners.PipelineListener">PipelineListener</a>)
        </code>



<a href="#kiara.pipeline.controller.PipelineController" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>An object that controls how a <a href="../pipeline/#kiara.pipeline.pipeline.Pipeline">Pipeline</a> should react to events related to it's inputs/outputs.</p>
<p>This is the base for the central controller class that needs to be implemented by a <em>Kiara</em> frontend. The default implementation
that is used if no <code>PipelineController</code> is provided in a <a href="../pipeline/#kiara.pipeline.pipeline.Pipeline">Pipeline</a> constructor
is the [BatchController][kiara.pipeline.controller.BatchController], which basically waits until all required inputs are
set, and then processes all pipeline steps in one go (in the right order).</p>
<p>The pipeline object to control can be set either in the constructor, or via the <code>set_pipeline</code> method. But only once,
every subsequent attempt to set a pipeline will raise an Exception.</p>
<p>If you want to implement your own controller, you have to override at least one of the (empty) event hook methods:</p>
<ul>
<li>[<code>pipeline_inputs_changed</code>][kiara.pipeline.controller.PipelineController.pipeline_inputs_changed]</li>
<li>[<code>pipeline_outputs_changed</code>][kiara.pipeline.controller.PipelineController.pipeline_outputs_changed]</li>
<li>[<code>step_inputs_changed</code>][kiara.pipeline.controller.PipelineController.step_inputs_changed]</li>
<li>[<code>step_outputs_changed</code>][kiara.pipeline.controller.PipelineController.step_outputs_changed]</li>
</ul>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pipeline</code></td>
        <td><code>Pipeline</code></td>
        <td><p>the pipeline object to control</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineController</span><span class="p">(</span><span class="n">PipelineListener</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An object that controls how a [Pipeline][kiara.pipeline.pipeline.Pipeline] should react to events related to it&#39;s inputs/outputs.</span>

<span class="sd">    This is the base for the central controller class that needs to be implemented by a *Kiara* frontend. The default implementation</span>
<span class="sd">    that is used if no ``PipelineController`` is provided in a [Pipeline][kiara.pipeline.pipeline.Pipeline] constructor</span>
<span class="sd">    is the [BatchController][kiara.pipeline.controller.BatchController], which basically waits until all required inputs are</span>
<span class="sd">    set, and then processes all pipeline steps in one go (in the right order).</span>

<span class="sd">    The pipeline object to control can be set either in the constructor, or via the ``set_pipeline`` method. But only once,</span>
<span class="sd">    every subsequent attempt to set a pipeline will raise an Exception.</span>

<span class="sd">    If you want to implement your own controller, you have to override at least one of the (empty) event hook methods:</span>

<span class="sd">      - [``pipeline_inputs_changed``][kiara.pipeline.controller.PipelineController.pipeline_inputs_changed]</span>
<span class="sd">      - [``pipeline_outputs_changed``][kiara.pipeline.controller.PipelineController.pipeline_outputs_changed]</span>
<span class="sd">      - [``step_inputs_changed``][kiara.pipeline.controller.PipelineController.step_inputs_changed]</span>
<span class="sd">      - [``step_outputs_changed``][kiara.pipeline.controller.PipelineController.step_outputs_changed]</span>

<span class="sd">    Arguments:</span>
<span class="sd">        pipeline (Pipeline): the pipeline object to control</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">pipeline</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Pipeline&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">processor</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ModuleProcessor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara.kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="n">Kiara</span> <span class="o">=</span> <span class="n">kiara</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Pipeline</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">processor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara.processing.synchronous</span> <span class="kn">import</span> <span class="n">SynchronousProcessor</span>

            <span class="n">processor</span> <span class="o">=</span> <span class="n">SynchronousProcessor</span><span class="p">(</span><span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="p">:</span> <span class="n">ModuleProcessor</span> <span class="o">=</span> <span class="n">processor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_job_ids</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="sd">&quot;&quot;&quot;A map of the last or current job ids per step_id.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">pipeline</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_pipeline</span><span class="p">(</span><span class="n">pipeline</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Pipeline&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the pipeline this controller, well, ...controls...&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline not set yet.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;StepStatus&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">status</span>

    <span class="k">def</span> <span class="nf">set_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipeline</span><span class="p">:</span> <span class="s2">&quot;Pipeline&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the pipeline object for this controller.</span>

<span class="sd">        Only one pipeline can be set, once.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            pipeline: the pipeline object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already set.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span> <span class="o">=</span> <span class="n">pipeline</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">processing_stages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Return the processing stage order of the pipeline.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a list of lists of step ids</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">processing_stages</span>

    <span class="k">def</span> <span class="nf">get_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineStep</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the step object for the provided id.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            step_id: the step id</span>
<span class="sd">        Returns:</span>
<span class="sd">            the step object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_step_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the inputs object for the pipeline.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_step_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the outputs object for the pipeline.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_step_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">input_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the (current) input value for a specified step and input field name.&quot;&quot;&quot;</span>

        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">input_name</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">item</span>

    <span class="k">def</span> <span class="nf">get_step_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">output_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the (current) output value for a specified step and output field name.&quot;&quot;&quot;</span>

        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">item</span>

    <span class="k">def</span> <span class="nf">get_current_pipeline_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineState&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return a description of the current pipeline state.</span>

<span class="sd">        This methods creates a new [PipelineState][kiara.pipeline.pipeline.PipelineState] object when called, containing</span>
<span class="sd">        the pipeline structure as well as metadata about pipeline as well as step inputs and outputs.</span>

<span class="sd">        Returns:</span>
<span class="sd">            an object outlining the current pipeline state</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the inputs object for this pipeline.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">_pipeline_inputs</span>

    <span class="nd">@pipeline_inputs</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">pipeline_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Set one, several or all inputs for this pipeline.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_pipeline_inputs</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the (current) pipeline outputs object for this pipeline.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">_pipeline_outputs</span>

    <span class="k">def</span> <span class="nf">wait_for_jobs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">job_ids</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sync_outputs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">,</span> <span class="n">sync_outputs</span><span class="o">=</span><span class="n">sync_outputs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">can_be_processed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Check whether the step with the provided id is ready to be processed.&quot;&quot;&quot;</span>

        <span class="n">result</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">step_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="o">=</span><span class="n">step_id</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">input_name</span> <span class="ow">in</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">():</span>

            <span class="n">value</span> <span class="o">=</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">input_name</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">():</span>
                <span class="n">result</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">break</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">check_inputs_status</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]]:</span>
        <span class="sd">&quot;&quot;&quot;Check the status of all stages/steps, and whether they are ready to be processed.</span>

<span class="sd">        The result dictionary uses stage numbers as keys, and a secondary dictionary as values which in turn uses</span>
<span class="sd">        the step_id as key, and a dict with details (keys: &#39;ready&#39;, &#39;invalid_inputs&#39;, &#39;required&#39;) as values.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">stage</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                        <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="s2">&quot;ready&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                            <span class="s2">&quot;invalid_inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
                                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">ii</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                            <span class="p">],</span>
                        <span class="p">}</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="s2">&quot;ready&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                            <span class="s2">&quot;invalid_inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
                                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">ii</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                            <span class="p">],</span>
                            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="p">}</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                        <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="s2">&quot;ready&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="s2">&quot;invalid_inputs&quot;</span><span class="p">:</span> <span class="p">[],</span>
                        <span class="p">}</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">can_be_skipped</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Check whether the processing of a step can be skipped.&quot;&quot;&quot;</span>

        <span class="n">result</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">required</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">invalid_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="n">invalid</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">step_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="o">=</span><span class="n">step_id</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">input_name</span> <span class="ow">in</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">():</span>

            <span class="n">value</span> <span class="o">=</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">input_name</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">():</span>
                <span class="n">invalid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">invalid</span>

    <span class="k">def</span> <span class="nf">process_step</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">raise_exception</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">wait</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Kick off processing for the step with the provided id.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            step_id: the id of the step that should be started</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">step_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

        <span class="c1"># if the inputs are not valid, ignore this step</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">check_invalid</span><span class="p">()</span>
            <span class="k">assert</span> <span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Can&#39;t execute step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;, invalid inputs: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="c1"># get the output &#39;holder&#39; objects, which we&#39;ll need to pass to the module</span>
        <span class="n">step_outputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
        <span class="c1"># get the module object that holds the code that will do the processing</span>
        <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

        <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">start</span><span class="p">(</span>
            <span class="n">pipeline_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">pipeline_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">title</span><span class="p">,</span>
            <span class="n">step_id</span><span class="o">=</span><span class="n">step_id</span><span class="p">,</span>
            <span class="n">module</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="p">,</span>
            <span class="n">inputs</span><span class="o">=</span><span class="n">step_inputs</span><span class="p">,</span>
            <span class="n">outputs</span><span class="o">=</span><span class="n">step_outputs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_job_ids</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">job_id</span>

        <span class="k">if</span> <span class="n">wait</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_jobs</span><span class="p">(</span><span class="n">job_id</span><span class="p">,</span> <span class="n">sync_outputs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">job_id</span>

    <span class="k">def</span> <span class="nf">get_job_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_or_job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Job</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Returns job details for a job id, or in case a step_id was provided, the last execution of this step.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">step_or_job_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">get_job_details</span><span class="p">(</span><span class="n">step_or_job_id</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">get_job_details</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_job_ids</span><span class="p">[</span><span class="n">step_or_job_id</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">step_is_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return whether the step with the provided id is ready to be processed.</span>

<span class="sd">        A ``True`` result means that all input fields are currently set with valid values.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            step_id: the id of the step to check</span>

<span class="sd">        Returns:</span>
<span class="sd">            whether the step is ready (``True``) or not (``False``)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">step_is_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return whether the step with the provided id has been processed successfully.</span>

<span class="sd">        A ``True`` result means that all output fields are currently set with valid values, and the inputs haven&#39;t changed</span>
<span class="sd">        since the last time processing was done.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            step_id: the id of the step to check</span>

<span class="sd">        Returns:</span>
<span class="sd">              whether the step result is valid (``True``) or not (``False``)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">pipeline_is_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return whether the pipeline is ready to be processed.</span>

<span class="sd">        A ``True`` result means that all pipeline inputs are set with valid values, and therefore every step within the</span>
<span class="sd">        pipeline can be processed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            whether the pipeline can be processed as a whole (``True``) or not (``False``)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">pipeline_is_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return whether the pipeline has been processed successfully.</span>

<span class="sd">        A ``True`` result means that every step of the pipeline has been processed successfully, and no pipeline input</span>
<span class="sd">        has changed since that happened.</span>

<span class="sd">        Returns:</span>
<span class="sd">            whether the pipeline was processed successfully (``True``) or not (``False``)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_pipeline_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set one, several or all inputs for this pipeline.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            **inputs: the input values to set</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_input_hook</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_inputs</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="o">**</span><span class="n">_inputs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_pipeline_input_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Hook before setting input.</span>

<span class="sd">        Can be implemented by child controller classes, to prevent, transform, validate or queue inputs.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Inputs for pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39; set: </span><span class="si">{</span><span class="n">inputs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">inputs</span>

    <span class="k">def</span> <span class="nf">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Execute the connected pipeline end-to-end.</span>

<span class="sd">        Controllers can elect to overwrite this method, but this is optional.</span>

<span class="sd">        Returns:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.controller.PipelineController.pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline</span><span class="p">:</span> <span class="n">Pipeline</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.controller.PipelineController.pipeline" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return the pipeline this controller, well, ...controls...</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.controller.PipelineController.pipeline_inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_inputs</span><span class="p">:</span> <span class="n">ValueSet</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-writable"><code>writable</code></small>
  </span>

<a href="#kiara.pipeline.controller.PipelineController.pipeline_inputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return the inputs object for this pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.controller.PipelineController.pipeline_outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_outputs</span><span class="p">:</span> <span class="n">ValueSet</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.controller.PipelineController.pipeline_outputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return the (current) pipeline outputs object for this pipeline.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.controller.PipelineController.processing_stages" class="doc doc-heading">
<code class="highlight language-python"><span class="n">processing_stages</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.controller.PipelineController.processing_stages" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return the processing stage order of the pipeline.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[List[str]]</code></td>
      <td><p>a list of lists of step ids</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>







  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.can_be_processed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">can_be_processed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.can_be_processed" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Check whether the step with the provided id is ready to be processed.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">can_be_processed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Check whether the step with the provided id is ready to be processed.&quot;&quot;&quot;</span>

    <span class="n">result</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">step_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="o">=</span><span class="n">step_id</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">input_name</span> <span class="ow">in</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">():</span>

        <span class="n">value</span> <span class="o">=</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">input_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="o">.</span><span class="n">item_is_valid</span><span class="p">():</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">break</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.can_be_skipped" class="doc doc-heading">
<code class="highlight language-python"><span class="n">can_be_skipped</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.can_be_skipped" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Check whether the processing of a step can be skipped.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">can_be_skipped</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Check whether the processing of a step can be skipped.&quot;&quot;&quot;</span>

    <span class="n">result</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">required</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.check_inputs_status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_inputs_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.check_inputs_status" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Check the status of all stages/steps, and whether they are ready to be processed.</p>
<p>The result dictionary uses stage numbers as keys, and a secondary dictionary as values which in turn uses
the step_id as key, and a dict with details (keys: 'ready', 'invalid_inputs', 'required') as values.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">check_inputs_status</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]]:</span>
    <span class="sd">&quot;&quot;&quot;Check the status of all stages/steps, and whether they are ready to be processed.</span>

<span class="sd">    The result dictionary uses stage numbers as keys, and a secondary dictionary as values which in turn uses</span>
<span class="sd">    the step_id as key, and a dict with details (keys: &#39;ready&#39;, &#39;invalid_inputs&#39;, &#39;required&#39;) as values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">stage</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;ready&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                        <span class="s2">&quot;invalid_inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">ii</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                        <span class="p">],</span>
                    <span class="p">}</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;ready&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                        <span class="s2">&quot;invalid_inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">ii</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                        <span class="p">],</span>
                        <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;ready&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s2">&quot;invalid_inputs&quot;</span><span class="p">:</span> <span class="p">[],</span>
                    <span class="p">}</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.get_current_pipeline_state" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_current_pipeline_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.get_current_pipeline_state" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return a description of the current pipeline state.</p>
<p>This methods creates a new [PipelineState][kiara.pipeline.pipeline.PipelineState] object when called, containing
the pipeline structure as well as metadata about pipeline as well as step inputs and outputs.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>PipelineState</code></td>
      <td><p>an object outlining the current pipeline state</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_current_pipeline_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineState&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return a description of the current pipeline state.</span>

<span class="sd">    This methods creates a new [PipelineState][kiara.pipeline.pipeline.PipelineState] object when called, containing</span>
<span class="sd">    the pipeline structure as well as metadata about pipeline as well as step inputs and outputs.</span>

<span class="sd">    Returns:</span>
<span class="sd">        an object outlining the current pipeline state</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.get_job_details" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_job_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_or_job_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.get_job_details" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Returns job details for a job id, or in case a step_id was provided, the last execution of this step.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_job_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_or_job_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">Job</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Returns job details for a job id, or in case a step_id was provided, the last execution of this step.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_job_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">step_or_job_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">get_job_details</span><span class="p">(</span><span class="n">step_or_job_id</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">get_job_details</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_job_ids</span><span class="p">[</span><span class="n">step_or_job_id</span><span class="p">])</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.get_step" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.get_step" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return the step object for the provided id.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>step_id</code></td>
        <td><code>str</code></td>
        <td><p>the step id</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>PipelineStep</code></td>
      <td><p>the step object</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineStep</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return the step object for the provided id.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        step_id: the step id</span>
<span class="sd">    Returns:</span>
<span class="sd">        the step object</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.get_step_input" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_step_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">input_name</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.get_step_input" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Get the (current) input value for a specified step and input field name.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_step_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">input_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Get the (current) input value for a specified step and input field name.&quot;&quot;&quot;</span>

    <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">input_name</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">item</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.get_step_inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_step_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.get_step_inputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return the inputs object for the pipeline.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_step_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return the inputs object for the pipeline.&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.get_step_output" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_step_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">output_name</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.get_step_output" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Get the (current) output value for a specified step and output field name.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_step_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">output_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Value</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Get the (current) output value for a specified step and output field name.&quot;&quot;&quot;</span>

    <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_value_obj</span><span class="p">(</span><span class="n">output_name</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">item</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.get_step_outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_step_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.get_step_outputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return the outputs object for the pipeline.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_step_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return the outputs object for the pipeline.&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.pipeline_is_finished" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_is_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.pipeline_is_finished" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return whether the pipeline has been processed successfully.</p>
<p>A <code>True</code> result means that every step of the pipeline has been processed successfully, and no pipeline input
has changed since that happened.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>whether the pipeline was processed successfully (<code>True</code>) or not (<code>False</code>)</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_is_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return whether the pipeline has been processed successfully.</span>

<span class="sd">    A ``True`` result means that every step of the pipeline has been processed successfully, and no pipeline input</span>
<span class="sd">    has changed since that happened.</span>

<span class="sd">    Returns:</span>
<span class="sd">        whether the pipeline was processed successfully (``True``) or not (``False``)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.pipeline_is_ready" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_is_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.pipeline_is_ready" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return whether the pipeline is ready to be processed.</p>
<p>A <code>True</code> result means that all pipeline inputs are set with valid values, and therefore every step within the
pipeline can be processed.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>whether the pipeline can be processed as a whole (<code>True</code>) or not (<code>False</code>)</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_is_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return whether the pipeline is ready to be processed.</span>

<span class="sd">    A ``True`` result means that all pipeline inputs are set with valid values, and therefore every step within the</span>
<span class="sd">    pipeline can be processed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        whether the pipeline can be processed as a whole (``True``) or not (``False``)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.process_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.process_pipeline" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Execute the connected pipeline end-to-end.</p>
<p>Controllers can elect to overwrite this method, but this is optional.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Execute the connected pipeline end-to-end.</span>

<span class="sd">    Controllers can elect to overwrite this method, but this is optional.</span>

<span class="sd">    Returns:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.process_step" class="doc doc-heading">
<code class="highlight language-python"><span class="n">process_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">raise_exception</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.process_step" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Kick off processing for the step with the provided id.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>step_id</code></td>
        <td><code>str</code></td>
        <td><p>the id of the step that should be started</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">process_step</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">raise_exception</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">wait</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Kick off processing for the step with the provided id.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        step_id: the id of the step that should be started</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">step_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

    <span class="c1"># if the inputs are not valid, ignore this step</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">check_invalid</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Can&#39;t execute step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;, invalid inputs: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="c1"># get the output &#39;holder&#39; objects, which we&#39;ll need to pass to the module</span>
    <span class="n">step_outputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
    <span class="c1"># get the module object that holds the code that will do the processing</span>
    <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

    <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">start</span><span class="p">(</span>
        <span class="n">pipeline_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">pipeline_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">title</span><span class="p">,</span>
        <span class="n">step_id</span><span class="o">=</span><span class="n">step_id</span><span class="p">,</span>
        <span class="n">module</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="p">,</span>
        <span class="n">inputs</span><span class="o">=</span><span class="n">step_inputs</span><span class="p">,</span>
        <span class="n">outputs</span><span class="o">=</span><span class="n">step_outputs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_job_ids</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">job_id</span>

    <span class="k">if</span> <span class="n">wait</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_jobs</span><span class="p">(</span><span class="n">job_id</span><span class="p">,</span> <span class="n">sync_outputs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">job_id</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.set_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipeline</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.set_pipeline" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set the pipeline object for this controller.</p>
<p>Only one pipeline can be set, once.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pipeline</code></td>
        <td><code>Pipeline</code></td>
        <td><p>the pipeline object</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipeline</span><span class="p">:</span> <span class="s2">&quot;Pipeline&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the pipeline object for this controller.</span>

<span class="sd">    Only one pipeline can be set, once.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        pipeline: the pipeline object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already set.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline</span> <span class="o">=</span> <span class="n">pipeline</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.set_pipeline_inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_pipeline_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">inputs</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.set_pipeline_inputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Set one, several or all inputs for this pipeline.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>**inputs</code></td>
        <td><code>Any</code></td>
        <td><p>the input values to set</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_pipeline_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set one, several or all inputs for this pipeline.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        **inputs: the input values to set</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_input_hook</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_inputs</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="o">**</span><span class="n">_inputs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.step_is_finished" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_is_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.step_is_finished" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return whether the step with the provided id has been processed successfully.</p>
<p>A <code>True</code> result means that all output fields are currently set with valid values, and the inputs haven't changed
since the last time processing was done.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>step_id</code></td>
        <td><code>str</code></td>
        <td><p>the id of the step to check</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>whether the step result is valid (<code>True</code>) or not (<code>False</code>)</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">step_is_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return whether the step with the provided id has been processed successfully.</span>

<span class="sd">    A ``True`` result means that all output fields are currently set with valid values, and the inputs haven&#39;t changed</span>
<span class="sd">    since the last time processing was done.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        step_id: the id of the step to check</span>

<span class="sd">    Returns:</span>
<span class="sd">          whether the step result is valid (``True``) or not (``False``)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_outputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.controller.PipelineController.step_is_ready" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_is_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.PipelineController.step_is_ready" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return whether the step with the provided id is ready to be processed.</p>
<p>A <code>True</code> result means that all input fields are currently set with valid values.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>step_id</code></td>
        <td><code>str</code></td>
        <td><p>the id of the step to check</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>whether the step is ready (<code>True</code>) or not (<code>False</code>)</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/__init__.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">step_is_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return whether the step with the provided id is ready to be processed.</span>

<span class="sd">    A ``True`` result means that all input fields are currently set with valid values.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        step_id: the id of the step to check</span>

<span class="sd">    Returns:</span>
<span class="sd">        whether the step is ready (``True``) or not (``False``)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>






  <div class="doc doc-object doc-module">



<h3 id="kiara.pipeline.controller.batch" class="doc doc-heading">
        <code>batch</code>



<a href="#kiara.pipeline.controller.batch" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="kiara.pipeline.controller.batch.BatchController" class="doc doc-heading">
        <code>
BatchController            (<a title="kiara.pipeline.controller.PipelineController" href="../controller/__init__/#kiara.pipeline.controller.PipelineController">PipelineController</a>)
        </code>



<a href="#kiara.pipeline.controller.batch.BatchController" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A <a href="../controller/__init__/#kiara.pipeline.controller.PipelineController">PipelineController</a> that executes all pipeline steps non-interactively.</p>
<p>This is the default implementation of a <code>PipelineController</code>, and probably the most simple implementation of one.
It waits until all inputs are set, after which it executes all pipeline steps in the required order.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pipeline</code></td>
        <td><code>Optional[Pipeline]</code></td>
        <td><p>the pipeline to control</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>auto_process</code></td>
        <td><code>bool</code></td>
        <td><p>whether to automatically start processing the pipeline as soon as the input set is valid</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">BatchController</span><span class="p">(</span><span class="n">PipelineController</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A [PipelineController][kiara.pipeline.controller.PipelineController] that executes all pipeline steps non-interactively.</span>

<span class="sd">    This is the default implementation of a ``PipelineController``, and probably the most simple implementation of one.</span>
<span class="sd">    It waits until all inputs are set, after which it executes all pipeline steps in the required order.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        pipeline: the pipeline to control</span>
<span class="sd">        auto_process: whether to automatically start processing the pipeline as soon as the input set is valid</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">pipeline</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Pipeline&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">auto_process</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">processor</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ModuleProcessor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_process</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">auto_process</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">pipeline</span><span class="o">=</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">processor</span><span class="o">=</span><span class="n">processor</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">auto_process</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_process</span>

    <span class="nd">@auto_process</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">auto_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_process</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_process</span> <span class="o">=</span> <span class="n">auto_process</span>

    <span class="k">def</span> <span class="nf">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already running.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">:</span>
                <span class="n">job_ids</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                            <span class="k">continue</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;Required pipeline step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; can&#39;t be processed, inputs not ready yet: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span>
                            <span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                        <span class="n">job_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="c1"># TODO: cancel running jobs?</span>
                        <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                            <span class="kn">import</span> <span class="nn">traceback</span>

                            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                        <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Processing of step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; from pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39; failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                        <span class="k">return</span> <span class="kc">False</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>
                <span class="c1"># for j_id in job_ids:</span>
                <span class="c1">#     job = self._processor.get_job_details(j_id)</span>
                <span class="c1">#     assert job is not None</span>
                <span class="c1">#     if job.error:</span>
                <span class="c1">#         print(job.error)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;StepInputEvent&quot;</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_ready</span><span class="p">():</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline not ready after input event: </span><span class="si">{</span><span class="n">event</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_process</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">process_pipeline</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;PipelineOutputEvent&quot;</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_finished</span><span class="p">():</span>
            <span class="c1"># TODO: check if something is running</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">











  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.batch.BatchController.pipeline_outputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.batch.BatchController.pipeline_outputs_changed" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several pipeline outputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>PipelineOutputEvent</code></td>
        <td><p>the pipeline output event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;PipelineOutputEvent&quot;</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_finished</span><span class="p">():</span>
        <span class="c1"># TODO: check if something is running</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.batch.BatchController.process_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.batch.BatchController.process_pipeline" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Execute the connected pipeline end-to-end.</p>
<p>Controllers can elect to overwrite this method, but this is optional.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already running.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">:</span>
            <span class="n">job_ids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                        <span class="k">continue</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Required pipeline step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; can&#39;t be processed, inputs not ready yet: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                    <span class="n">job_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="c1"># TODO: cancel running jobs?</span>
                    <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                        <span class="kn">import</span> <span class="nn">traceback</span>

                        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Processing of step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; from pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39; failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>
            <span class="c1"># for j_id in job_ids:</span>
            <span class="c1">#     job = self._processor.get_job_details(j_id)</span>
            <span class="c1">#     assert job is not None</span>
            <span class="c1">#     if job.error:</span>
            <span class="c1">#         print(job.error)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.batch.BatchController.step_inputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.batch.BatchController.step_inputs_changed" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several step inputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>StepInputEvent</code></td>
        <td><p>the step input event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;StepInputEvent&quot;</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_ready</span><span class="p">():</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline not ready after input event: </span><span class="si">{</span><span class="n">event</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_process</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">process_pipeline</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h4 id="kiara.pipeline.controller.batch.BatchControllerManual" class="doc doc-heading">
        <code>
BatchControllerManual            (<a title="kiara.pipeline.controller.PipelineController" href="../controller/__init__/#kiara.pipeline.controller.PipelineController">PipelineController</a>)
        </code>



<a href="#kiara.pipeline.controller.batch.BatchControllerManual" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A <a href="../controller/__init__/#kiara.pipeline.controller.PipelineController">PipelineController</a> that executes all pipeline steps non-interactively.</p>
<p>This is the default implementation of a <code>PipelineController</code>, and probably the most simple implementation of one.
It waits until all inputs are set, after which it executes all pipeline steps in the required order.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pipeline</code></td>
        <td><code>Optional[Pipeline]</code></td>
        <td><p>the pipeline to control</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>auto_process</code></td>
        <td></td>
        <td><p>whether to automatically start processing the pipeline as soon as the input set is valid</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">BatchControllerManual</span><span class="p">(</span><span class="n">PipelineController</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A [PipelineController][kiara.pipeline.controller.PipelineController] that executes all pipeline steps non-interactively.</span>

<span class="sd">    This is the default implementation of a ``PipelineController``, and probably the most simple implementation of one.</span>
<span class="sd">    It waits until all inputs are set, after which it executes all pipeline steps in the required order.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        pipeline: the pipeline to control</span>
<span class="sd">        auto_process: whether to automatically start processing the pipeline as soon as the input set is valid</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">pipeline</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Pipeline&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">processor</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ModuleProcessor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_finished_until</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">pipeline</span><span class="o">=</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">processor</span><span class="o">=</span><span class="n">processor</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">last_finished_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finished_until</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finished_until</span>

    <span class="k">def</span> <span class="nf">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already running.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">:</span>
                <span class="n">job_ids</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                            <span class="k">continue</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;Required pipeline step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; can&#39;t be processed, inputs not ready yet: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span>
                            <span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                        <span class="n">job_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="c1"># TODO: cancel running jobs?</span>
                        <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                            <span class="kn">import</span> <span class="nn">traceback</span>

                            <span class="n">traceback</span><span class="o">.</span><span class="n">print_stack</span><span class="p">()</span>
                        <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Processing of step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; from pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39; failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                        <span class="k">return</span> <span class="kc">False</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;StepInputEvent&quot;</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_ready</span><span class="p">():</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline not ready after input event: </span><span class="si">{</span><span class="n">event</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span>

    <span class="k">def</span> <span class="nf">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;PipelineInputEvent&quot;</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_finished_until</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># print(&quot;============================&quot;)</span>
        <span class="c1"># min_stage_to_clear = sys.maxsize</span>
        <span class="c1"># for inp in event.updated_pipeline_inputs:</span>
        <span class="c1">#     stage = self.pipeline.get_stage_for_pipeline_input(inp)</span>
        <span class="c1">#     if stage &lt; min_stage_to_clear:</span>
        <span class="c1">#         min_stage_to_clear = stage</span>
        <span class="c1">#</span>
        <span class="c1"># for stage, steps in self.pipeline.get_steps_by_stage().items():</span>
        <span class="c1">#     if stage &lt; min_stage_to_clear:</span>
        <span class="c1">#         continue</span>
        <span class="c1">#     for step_id, step in steps.items():</span>
        <span class="c1">#         step_inputs = self.get_step_inputs(step_id)</span>
        <span class="c1">#         empty = { k: None for k in step_inputs.keys() }</span>
        <span class="c1">#         step_inputs.set_values(**empty)</span>
        <span class="c1">#         step_outputs = self.get_step_outputs(step_id)</span>
        <span class="c1">#         empty = { k: None for k in step_outputs.keys() }</span>
        <span class="c1">#         step_outputs.set_values(**empty)</span>

    <span class="k">def</span> <span class="nf">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;PipelineOutputEvent&quot;</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_finished</span><span class="p">():</span>
            <span class="c1"># TODO: check if something is running</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">process_stage</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">stage_nr</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already running.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">stage</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">):</span>

                <span class="n">current_stage</span> <span class="o">=</span> <span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span>

                <span class="k">if</span> <span class="n">current_stage</span> <span class="o">&gt;</span> <span class="n">stage_nr</span><span class="p">:</span>
                    <span class="k">break</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finished_until</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">idx</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finished_until</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="n">job_ids</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                            <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">current_stage</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">continue</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">exc</span> <span class="o">=</span> <span class="ne">Exception</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;Required pipeline step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; can&#39;t be processed, inputs not ready yet: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span>
                            <span class="p">)</span>
                            <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">current_stage</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">exc</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                        <span class="n">job_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
                        <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">current_stage</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">job_id</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                        <span class="c1"># TODO: cancel running jobs?</span>
                        <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                            <span class="kn">import</span> <span class="nn">traceback</span>

                            <span class="n">traceback</span><span class="o">.</span><span class="n">print_stack</span><span class="p">()</span>
                        <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Processing of step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; from pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39; failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                        <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">current_stage</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>
                <span class="c1"># for job_id in job_ids:</span>
                <span class="c1">#     job = self.get_job_details(job_id)</span>
                <span class="c1">#     dbg(job.dict())</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_finished_until</span> <span class="o">=</span> <span class="n">idx</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;BATCH FINISHED&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">











  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.batch.BatchControllerManual.pipeline_inputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.batch.BatchControllerManual.pipeline_inputs_changed" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several pipeline inputs have changed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
</div>
<p>Whenever pipeline inputs change, the connected step inputs also change and an (extra) event will be fired for those. Which means
you can choose to only implement the <code>step_inputs_changed</code> method if you want to. This behaviour might change in the future.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>PipelineInputEvent</code></td>
        <td><p>the pipeline input event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;PipelineInputEvent&quot;</span><span class="p">):</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_finished_until</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># print(&quot;============================&quot;)</span>
    <span class="c1"># min_stage_to_clear = sys.maxsize</span>
    <span class="c1"># for inp in event.updated_pipeline_inputs:</span>
    <span class="c1">#     stage = self.pipeline.get_stage_for_pipeline_input(inp)</span>
    <span class="c1">#     if stage &lt; min_stage_to_clear:</span>
    <span class="c1">#         min_stage_to_clear = stage</span>
    <span class="c1">#</span>
    <span class="c1"># for stage, steps in self.pipeline.get_steps_by_stage().items():</span>
    <span class="c1">#     if stage &lt; min_stage_to_clear:</span>
    <span class="c1">#         continue</span>
    <span class="c1">#     for step_id, step in steps.items():</span>
    <span class="c1">#         step_inputs = self.get_step_inputs(step_id)</span>
    <span class="c1">#         empty = { k: None for k in step_inputs.keys() }</span>
    <span class="c1">#         step_inputs.set_values(**empty)</span>
    <span class="c1">#         step_outputs = self.get_step_outputs(step_id)</span>
    <span class="c1">#         empty = { k: None for k in step_outputs.keys() }</span>
    <span class="c1">#         step_outputs.set_values(**empty)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.batch.BatchControllerManual.pipeline_outputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.batch.BatchControllerManual.pipeline_outputs_changed" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several pipeline outputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>PipelineOutputEvent</code></td>
        <td><p>the pipeline output event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;PipelineOutputEvent&quot;</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_finished</span><span class="p">():</span>
        <span class="c1"># TODO: check if something is running</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.batch.BatchControllerManual.process_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.batch.BatchControllerManual.process_pipeline" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Execute the connected pipeline end-to-end.</p>
<p>Controllers can elect to overwrite this method, but this is optional.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">process_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Pipeline already running.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing_stages</span><span class="p">:</span>
            <span class="n">job_ids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_processed</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_skipped</span><span class="p">(</span><span class="n">step_id</span><span class="p">):</span>
                        <span class="k">continue</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Required pipeline step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; can&#39;t be processed, inputs not ready yet: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">invalid_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                    <span class="n">job_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job_id</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="c1"># TODO: cancel running jobs?</span>
                    <span class="k">if</span> <span class="n">is_debug</span><span class="p">():</span>
                        <span class="kn">import</span> <span class="nn">traceback</span>

                        <span class="n">traceback</span><span class="o">.</span><span class="n">print_stack</span><span class="p">()</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Processing of step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; from pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39; failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_processor</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="o">*</span><span class="n">job_ids</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="kiara.pipeline.controller.batch.BatchControllerManual.step_inputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.controller.batch.BatchControllerManual.step_inputs_changed" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several step inputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>StepInputEvent</code></td>
        <td><p>the step input event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/controller/batch.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="s2">&quot;StepInputEvent&quot;</span><span class="p">):</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Pipeline running, doing nothing.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_is_ready</span><span class="p">():</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipeline not ready after input event: </span><span class="si">{</span><span class="n">event</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.pipeline.listeners" class="doc doc-heading">
        <code>listeners</code>



<a href="#kiara.pipeline.listeners" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.listeners.PipelineListener" class="doc doc-heading">
        <code>
PipelineListener            (<span title="abc.ABC">ABC</span>)
        </code>



<a href="#kiara.pipeline.listeners.PipelineListener" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/listeners.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineListener</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">StepInputEvent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method to override if the implementing controller needs to react to events where one or several step inputs have changed.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            event: the step input event</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">step_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">StepOutputEvent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method to override if the implementing controller needs to react to events where one or several step outputs have changed.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            event: the step output event</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">PipelineInputEvent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method to override if the implementing controller needs to react to events where one or several pipeline inputs have changed.</span>

<span class="sd">        !!! note</span>
<span class="sd">        Whenever pipeline inputs change, the connected step inputs also change and an (extra) event will be fired for those. Which means</span>
<span class="sd">        you can choose to only implement the ``step_inputs_changed`` method if you want to. This behaviour might change in the future.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            event: the pipeline input event</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">PipelineOutputEvent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method to override if the implementing controller needs to react to events where one or several pipeline outputs have changed.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            event: the pipeline output event</span>
<span class="sd">        &quot;&quot;&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.listeners.PipelineListener.pipeline_inputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.listeners.PipelineListener.pipeline_inputs_changed" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several pipeline inputs have changed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
</div>
<p>Whenever pipeline inputs change, the connected step inputs also change and an (extra) event will be fired for those. Which means
you can choose to only implement the <code>step_inputs_changed</code> method if you want to. This behaviour might change in the future.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>PipelineInputEvent</code></td>
        <td><p>the pipeline input event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/listeners.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">PipelineInputEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to override if the implementing controller needs to react to events where one or several pipeline inputs have changed.</span>

<span class="sd">    !!! note</span>
<span class="sd">    Whenever pipeline inputs change, the connected step inputs also change and an (extra) event will be fired for those. Which means</span>
<span class="sd">    you can choose to only implement the ``step_inputs_changed`` method if you want to. This behaviour might change in the future.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        event: the pipeline input event</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.listeners.PipelineListener.pipeline_outputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.listeners.PipelineListener.pipeline_outputs_changed" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several pipeline outputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>PipelineOutputEvent</code></td>
        <td><p>the pipeline output event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/listeners.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pipeline_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">PipelineOutputEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to override if the implementing controller needs to react to events where one or several pipeline outputs have changed.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        event: the pipeline output event</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.listeners.PipelineListener.step_inputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.listeners.PipelineListener.step_inputs_changed" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several step inputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>StepInputEvent</code></td>
        <td><p>the step input event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/listeners.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">step_inputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">StepInputEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to override if the implementing controller needs to react to events where one or several step inputs have changed.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        event: the step input event</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.listeners.PipelineListener.step_outputs_changed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>


<a href="#kiara.pipeline.listeners.PipelineListener.step_outputs_changed" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Method to override if the implementing controller needs to react to events where one or several step outputs have changed.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>StepOutputEvent</code></td>
        <td><p>the step output event</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/listeners.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">step_outputs_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">StepOutputEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to override if the implementing controller needs to react to events where one or several step outputs have changed.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        event: the step output event</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.pipeline.module" class="doc doc-heading">
        <code>module</code>



<a href="#kiara.pipeline.module" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.module.PipelineModule" class="doc doc-heading">
        <code>
PipelineModule            (<a title="kiara.module.KiaraModule" href="../../module/#kiara.module.KiaraModule">KiaraModule</a>)
        </code>



<a href="#kiara.pipeline.module.PipelineModule" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>A <a href="../../module/#kiara.module.KiaraModule">KiaraModule</a> that contains a collection of interconnected other modules.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineModule</span><span class="p">(</span><span class="n">KiaraModule</span><span class="p">[</span><span class="n">PipelineConfig</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;A [KiaraModule][kiara.module.KiaraModule] that contains a collection of interconnected other modules.&quot;&quot;&quot;</span>

    <span class="n">_config_cls</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Type</span><span class="p">[</span><span class="n">PipelineConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">PipelineConfig</span>  <span class="c1"># type: ignore</span>
    <span class="n">_module_type_id</span> <span class="o">=</span> <span class="s2">&quot;pipeline&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">is_pipeline</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">parent_id</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
            <span class="kc">None</span><span class="p">,</span> <span class="n">PipelineConfig</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="c1"># controller: typing.Union[</span>
        <span class="c1">#     None, PipelineController, str, typing.Type[PipelineController]</span>
        <span class="c1"># ] = None,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="c1"># if controller is not None and not isinstance(controller, PipelineController):</span>
        <span class="c1">#     raise NotImplementedError()</span>
        <span class="c1"># if controller is None:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span>
            <span class="n">parent_id</span><span class="o">=</span><span class="n">parent_id</span><span class="p">,</span>
            <span class="n">module_config</span><span class="o">=</span><span class="n">module_config</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_structure</span><span class="p">:</span> <span class="n">PipelineStructure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_structure</span><span class="p">()</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">constants</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">constants</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_structure</span><span class="o">.</span><span class="n">constants</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">structure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineStructure</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;The ``PipelineStructure`` of this module.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_structure</span>

    <span class="k">def</span> <span class="nf">_create_structure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineStructure</span><span class="p">:</span>

        <span class="n">pipeline_structure</span> <span class="o">=</span> <span class="n">PipelineStructure</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pipeline_structure</span>

    <span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">pipeline_input_schema</span>

    <span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">pipeline_output_schema</span>

    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">,</span> <span class="n">outputs</span><span class="p">:</span> <span class="n">ValueSet</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="kn">from</span> <span class="nn">kiara</span> <span class="kn">import</span> <span class="n">Pipeline</span>

        <span class="c1"># controller = BatchController(auto_process=False, kiara=self._kiara)</span>

        <span class="n">pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">structure</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="p">)</span>
        <span class="n">pipeline</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">KiaraProcessingException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t start processing of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_module_type_id</span><span class="si">}</span><span class="s2"> pipeline: one or several inputs missing or invalid.&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">RESULTS_READY</span><span class="p">:</span>
            <span class="c1"># TODO: error details</span>
            <span class="k">raise</span> <span class="n">KiaraProcessingException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error when running pipeline of type &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_module_type_id</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="n">outputs</span><span class="o">.</span><span class="n">set_values</span><span class="p">(</span><span class="o">**</span><span class="n">pipeline</span><span class="o">.</span><span class="n">outputs</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.module.PipelineModule.structure" class="doc doc-heading">
<code class="highlight language-python"><span class="n">structure</span><span class="p">:</span> <span class="n">PipelineStructure</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.module.PipelineModule.structure" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The <code>PipelineStructure</code> of this module.</p>
    </div>

  </div>







  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.module.PipelineModule.create_input_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.module.PipelineModule.create_input_schema" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the input schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[input_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this input]",
          "optional*': [boolean whether this input is optional or required (defaults to 'False')]
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">pipeline_input_schema</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.module.PipelineModule.create_output_schema" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.module.PipelineModule.create_output_schema" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Abstract method to implement by child classes, returns a description of the output schema of this module.</p>
<p>If returning a dictionary of dictionaries, the format of the return value is as follows (items with '*' are optional):</p>
<p><code>{
      "[output_field_name]: {
          "type": "[value_type]",
          "doc*": "[a description of this output]"
      "[other_input_field_name]: {
          "type: ...
          ...
      }</code></p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">pipeline_output_schema</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.module.PipelineModule.is_pipeline" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_pipeline</span><span class="p">()</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#kiara.pipeline.module.PipelineModule.is_pipeline" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Check whether this module type is a pipeline, or not.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/module.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">is_pipeline</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.pipeline.pipeline" class="doc doc-heading">
        <code>pipeline</code>



<a href="#kiara.pipeline.pipeline" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.pipeline.Pipeline" class="doc doc-heading">
        <code>
Pipeline        </code>



<a href="#kiara.pipeline.pipeline.Pipeline" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>An instance of a <a href="../structure/#kiara.pipeline.structure.PipelineStructure">PipelineStructure</a> that holds state for all of the inputs/outputs of the steps within.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Pipeline</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An instance of a [PipelineStructure][kiara.pipeline.structure.PipelineStructure] that holds state for all of the inputs/outputs of the steps within.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">structure</span><span class="p">:</span> <span class="n">PipelineStructure</span><span class="p">,</span>
        <span class="c1"># constants: typing.Optional[typing.Mapping[str, typing.Any]] = None,</span>
        <span class="n">controller</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">PipelineController</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="p">:</span> <span class="n">PipelineStructure</span> <span class="o">=</span> <span class="n">structure</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_inputs</span><span class="p">:</span> <span class="n">SlottedValueSet</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_outputs</span><span class="p">:</span> <span class="n">SlottedValueSet</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_step_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSet</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_step_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSet</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">ValueRef</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status</span><span class="p">:</span> <span class="n">StepStatus</span> <span class="o">=</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">STALE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="o">.</span><span class="n">_kiara</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="p">:</span> <span class="n">DataRegistry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="o">.</span><span class="n">data_registry</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_init_values</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">controller</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">controller</span> <span class="o">=</span> <span class="n">BatchController</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">controller</span><span class="o">.</span><span class="n">set_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_controller</span><span class="p">:</span> <span class="n">PipelineController</span> <span class="o">=</span> <span class="n">controller</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_listeners</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">PipelineListener</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_status</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Pipeline</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_id</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_title</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">structure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineStructure</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">controller</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineController</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_controller</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No controller set (yet).&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_controller</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SlottedValueSet</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;All (pipeline) input values of this pipeline.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_inputs</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SlottedValueSet</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;All (pipeline) output values of this pipeline.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_outputs</span>

    <span class="c1"># def set_pipeline_inputs(self, **inputs: typing.Any):</span>
    <span class="c1">#     self._controller.set_pipeline_inputs(**inputs)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">step_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return all ids of the steps of this pipeline.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="o">.</span><span class="n">step_ids</span>

    <span class="k">def</span> <span class="nf">get_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineStep</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the object representing a step in this workflow, identified by the step id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_steps_by_stage</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Return a all pipeline steps, ordered by stage they belong to.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">step_ids</span><span class="p">:</span>
            <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
            <span class="n">stage</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">processing_stage</span>
            <span class="k">assert</span> <span class="n">stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">step</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span>

    <span class="k">def</span> <span class="nf">get_pipeline_inputs_by_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Return a list of pipeline input names, ordered by stage they are first required.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># type: ignore</span>
            <span class="n">refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span><span class="p">[</span><span class="n">v</span><span class="p">]</span>
            <span class="n">min_stage</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span>
            <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">refs</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">StepInputRef</span><span class="p">):</span>
                    <span class="k">continue</span>
                <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">ref</span><span class="o">.</span><span class="n">step_id</span><span class="p">)</span>
                <span class="n">stage</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">processing_stage</span>
                <span class="k">assert</span> <span class="n">stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">stage</span> <span class="o">&lt;</span> <span class="n">min_stage</span><span class="p">:</span>
                    <span class="n">min_stage</span> <span class="o">=</span> <span class="n">stage</span>  <span class="c1"># type: ignore</span>
                <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">min_stage</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span>

    <span class="k">def</span> <span class="nf">get_pipeline_outputs_by_stage</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Return a list of pipeline input names, ordered by the stage that needs to be executed before they are available.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># type: ignore</span>
            <span class="n">refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span><span class="p">[</span><span class="n">v</span><span class="p">]</span>
            <span class="n">min_stage</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span>
            <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">refs</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">StepOutputRef</span><span class="p">):</span>
                    <span class="k">continue</span>
                <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">ref</span><span class="o">.</span><span class="n">step_id</span><span class="p">)</span>
                <span class="n">stage</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">processing_stage</span>
                <span class="k">assert</span> <span class="n">stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">stage</span> <span class="o">&lt;</span> <span class="n">min_stage</span><span class="p">:</span>
                    <span class="n">min_stage</span> <span class="o">=</span> <span class="n">stage</span>  <span class="c1"># type: ignore</span>
                <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">min_stage</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span>

    <span class="k">def</span> <span class="nf">get_pipeline_inputs_for_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return a list of pipeline inputs that are required for a stage to be processed.</span>

<span class="sd">        The result of this method does not include inputs that were required earlier already.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pipeline_inputs_by_stage</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="p">[])</span>

    <span class="k">def</span> <span class="nf">get_stage_for_pipeline_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>

        <span class="k">for</span> <span class="n">stage</span><span class="p">,</span> <span class="n">input_names</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pipeline_inputs_by_stage</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">input_name</span> <span class="ow">in</span> <span class="n">input_names</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">stage</span>

        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No input name &#39;</span><span class="si">{</span><span class="n">input_name</span><span class="si">}</span><span class="s2">&#39;. Available inputs: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">stage_for_pipeline_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>

        <span class="k">for</span> <span class="n">stage</span><span class="p">,</span> <span class="n">output_names</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pipeline_outputs_by_stage</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">output_name</span> <span class="ow">in</span> <span class="n">output_names</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">stage</span>

        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No output name &#39;</span><span class="si">{</span><span class="n">output_name</span><span class="si">}</span><span class="s2">&#39;. Available outputs: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_pipeline_outputs_for_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return a list of pipeline outputs that are first available after the specified stage completed processing.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pipeline_outputs_by_stage</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="p">[])</span>

    <span class="k">def</span> <span class="nf">get_pipeline_inputs_for_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">value_slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span><span class="p">[</span><span class="n">value_slot</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">refs</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">PipelineInputRef</span><span class="p">):</span>
                    <span class="k">continue</span>
                <span class="k">for</span> <span class="n">ci</span> <span class="ow">in</span> <span class="n">ref</span><span class="o">.</span><span class="n">connected_inputs</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">ci</span><span class="o">.</span><span class="n">step_id</span> <span class="o">==</span> <span class="n">step_id</span> <span class="ow">and</span> <span class="n">ref</span><span class="o">.</span><span class="n">value_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ref</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">get_pipeline_outputs_for_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">value_slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span><span class="p">[</span><span class="n">value_slot</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">refs</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">PipelineOutputRef</span><span class="p">):</span>
                    <span class="k">continue</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">ref</span><span class="o">.</span><span class="n">connected_output</span><span class="o">.</span><span class="n">step_id</span> <span class="o">==</span> <span class="n">step_id</span>
                    <span class="ow">and</span> <span class="n">ref</span><span class="o">.</span><span class="n">value_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result</span>
                <span class="p">):</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ref</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">get_step_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return all inputs for a step id (incl. inputs that are not pipeline inputs but connected to other modules output).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_step_inputs</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_step_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return all outputs for a step id (incl. outputs that are not pipeline outputs).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_step_outputs</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">add_listener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listener</span><span class="p">:</span> <span class="n">PipelineListener</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Add a listener taht gets notified on any internal pipeline input/output events.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_listeners</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">listener</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StepStatus</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the current status of this pipeline.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span>

    <span class="k">def</span> <span class="nf">_update_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Make sure internal state variable is up to date.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_state</span> <span class="o">=</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">STALE</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>
            <span class="n">new_state</span> <span class="o">=</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">STALE</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>
            <span class="n">new_state</span> <span class="o">=</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">INPUTS_READY</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_state</span> <span class="o">=</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">RESULTS_READY</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">new_state</span>

    <span class="k">def</span> <span class="nf">_init_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize this object. This should only be called once.</span>

<span class="sd">        Basically, this goes through all the inputs and outputs of all steps, and &#39;allocates&#39; a PipelineValueInfo object</span>
<span class="sd">        for each of them. In case where output/input or pipeline-input/input points are connected, only one</span>
<span class="sd">        value item is allocated, since those refer to the same value.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">pipeline_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">pipeline_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">all_step_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">all_step_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSlot</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">value_refs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="n">ValueSlot</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">ValueRef</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># create the value objects that are associated with step outputs</span>
        <span class="c1"># all pipeline outputs are created here too, since the only place</span>
        <span class="c1"># those can be associated are step outputs</span>
        <span class="k">for</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">step_details</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="o">.</span><span class="n">steps_details</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">step_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepOutputRef</span><span class="p">]</span> <span class="o">=</span> <span class="n">step_details</span><span class="p">[</span><span class="s2">&quot;outputs&quot;</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">output_name</span><span class="p">,</span> <span class="n">output_point</span> <span class="ow">in</span> <span class="n">step_outputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                <span class="n">init_output_value_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                    <span class="n">value_schema</span><span class="o">=</span><span class="n">output_point</span><span class="o">.</span><span class="n">value_schema</span>
                <span class="p">)</span>
                <span class="n">output_value_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="o">.</span><span class="n">register_alias</span><span class="p">(</span>
                    <span class="n">value_or_schema</span><span class="o">=</span><span class="n">init_output_value_item</span><span class="p">,</span> <span class="n">callbacks</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span>
                <span class="p">)</span>
                <span class="n">value_refs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">output_value_slot</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">output_point</span><span class="p">)</span>

                <span class="n">all_step_outputs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">step_id</span><span class="p">,</span> <span class="p">{})[</span>
                    <span class="n">output_name</span>
                <span class="p">]</span> <span class="o">=</span> <span class="n">output_value_slot</span>

                <span class="c1"># not all step outputs necessarily need to be connected to a pipeline output</span>
                <span class="k">if</span> <span class="n">output_point</span><span class="o">.</span><span class="n">pipeline_output</span><span class="p">:</span>

                    <span class="n">pipeline_outputs</span><span class="p">[</span><span class="n">output_point</span><span class="o">.</span><span class="n">pipeline_output</span><span class="p">]</span> <span class="o">=</span> <span class="n">output_value_slot</span>
                    <span class="n">po</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="o">.</span><span class="n">pipeline_outputs</span><span class="p">[</span><span class="n">output_point</span><span class="o">.</span><span class="n">pipeline_output</span><span class="p">]</span>
                    <span class="n">value_refs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">output_value_slot</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">po</span><span class="p">)</span>

        <span class="c1"># create the value objects that are associated with step inputs</span>
        <span class="k">for</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">step_details</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="o">.</span><span class="n">steps_details</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="n">step_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepInputRef</span><span class="p">]</span> <span class="o">=</span> <span class="n">step_details</span><span class="p">[</span><span class="s2">&quot;inputs&quot;</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">input_name</span><span class="p">,</span> <span class="n">input_point</span> <span class="ow">in</span> <span class="n">step_inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                <span class="c1"># if this step input gets fed from a pipeline_input (meaning user input in most cases),</span>
                <span class="c1"># we need to create a DataValue for that pipeline input</span>
                <span class="c1"># vm = ValueMetadata(</span>
                <span class="c1">#     origin=f&quot;{self.id}.steps.{step_id}.inputs.{input_point.value_name}&quot;</span>
                <span class="c1"># )</span>
                <span class="k">if</span> <span class="n">input_point</span><span class="o">.</span><span class="n">connected_pipeline_input</span><span class="p">:</span>
                    <span class="n">connected_pipeline_input_name</span> <span class="o">=</span> <span class="n">input_point</span><span class="o">.</span><span class="n">connected_pipeline_input</span>
                    <span class="n">pipeline_input_field</span><span class="p">:</span> <span class="n">PipelineInputRef</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="o">.</span><span class="n">pipeline_inputs</span><span class="p">[</span><span class="n">connected_pipeline_input_name</span><span class="p">]</span>
                    <span class="p">)</span>
                    <span class="n">pipeline_input_slot</span><span class="p">:</span> <span class="n">ValueSlot</span> <span class="o">=</span> <span class="n">pipeline_inputs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                        <span class="n">connected_pipeline_input_name</span><span class="p">,</span> <span class="kc">None</span>
                    <span class="p">)</span>

                    <span class="k">if</span> <span class="n">pipeline_input_slot</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="c1"># if the pipeline input wasn&#39;t created by another step input before,</span>
                        <span class="c1"># we need to take care of it here</span>

                        <span class="k">if</span> <span class="n">pipeline_input_field</span><span class="o">.</span><span class="n">is_constant</span><span class="p">:</span>
                            <span class="n">init_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">constants</span><span class="p">[</span>
                                <span class="n">pipeline_input_field</span><span class="o">.</span><span class="n">value_name</span>
                            <span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">init_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">defaults</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                                <span class="n">pipeline_input_field</span><span class="o">.</span><span class="n">value_name</span><span class="p">,</span> <span class="n">SpecialValue</span><span class="o">.</span><span class="n">NOT_SET</span>
                            <span class="p">)</span>

                        <span class="n">init_pipeline_input_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="o">.</span><span class="n">register_data</span><span class="p">(</span>
                            <span class="n">value_data</span><span class="o">=</span><span class="n">init_value</span><span class="p">,</span>
                            <span class="n">value_schema</span><span class="o">=</span><span class="n">pipeline_input_field</span><span class="o">.</span><span class="n">value_schema</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="c1"># TODO: check whether it&#39;s a constant?</span>
                        <span class="n">pipeline_input_slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="o">.</span><span class="n">register_alias</span><span class="p">(</span>
                            <span class="n">value_or_schema</span><span class="o">=</span><span class="n">init_pipeline_input_value</span><span class="p">,</span> <span class="n">callbacks</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span>
                        <span class="p">)</span>
                        <span class="n">value_refs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">pipeline_input_slot</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="n">pipeline_input_field</span>
                        <span class="p">)</span>

                        <span class="n">pipeline_inputs</span><span class="p">[</span>
                            <span class="n">connected_pipeline_input_name</span>
                        <span class="p">]</span> <span class="o">=</span> <span class="n">pipeline_input_slot</span>

                    <span class="n">all_step_inputs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">step_id</span><span class="p">,</span> <span class="p">{})[</span>
                        <span class="n">input_name</span>
                    <span class="p">]</span> <span class="o">=</span> <span class="n">pipeline_input_slot</span>
                    <span class="n">value_refs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">pipeline_input_slot</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_point</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">input_point</span><span class="o">.</span><span class="n">connected_outputs</span><span class="p">:</span>

                    <span class="k">for</span> <span class="n">co</span> <span class="ow">in</span> <span class="n">input_point</span><span class="o">.</span><span class="n">connected_outputs</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">input_point</span><span class="o">.</span><span class="n">connected_outputs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">co</span><span class="o">.</span><span class="n">sub_value</span><span class="p">:</span>
                            <span class="c1"># this means the input is the same value as the connected output</span>
                            <span class="n">output_value</span><span class="p">:</span> <span class="n">ValueSlot</span> <span class="o">=</span> <span class="n">all_step_outputs</span><span class="p">[</span><span class="n">co</span><span class="o">.</span><span class="n">step_id</span><span class="p">][</span>
                                <span class="n">co</span><span class="o">.</span><span class="n">value_name</span>
                            <span class="p">]</span>
                            <span class="n">all_step_inputs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">input_point</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="p">{})[</span>
                                <span class="n">input_point</span><span class="o">.</span><span class="n">value_name</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">output_value</span>
                            <span class="n">value_refs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">output_value</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_point</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">input_point</span><span class="o">.</span><span class="n">connected_outputs</span><span class="p">)</span>
                            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
                            <span class="c1"># sub_value = co.sub_value</span>

                            <span class="c1"># linked_values = {}</span>
                            <span class="c1"># for co in input_point.connected_outputs:</span>
                            <span class="c1">#     output_value = all_step_outputs[co.step_id][co.value_name]</span>
                            <span class="c1">#     sub_value = co.sub_value</span>
                            <span class="c1">#     if len(input_point.connected_outputs) &gt; 1 and not sub_value:</span>
                            <span class="c1">#         raise NotImplementedError()</span>
                            <span class="c1">#         sub_value = {&quot;config&quot;: co.step_id}</span>
                            <span class="c1">#     if sub_value is not None:</span>
                            <span class="c1">#         raise NotImplementedError</span>
                            <span class="c1">#</span>
                            <span class="c1">#     linked_values[output_value.id] = sub_value</span>
                            <span class="c1">#</span>
                            <span class="c1"># step_input = self._data_registry.register_linked_value(</span>
                            <span class="c1">#     parent_id=self.id,</span>
                            <span class="c1">#     linked_values=linked_values,</span>
                            <span class="c1">#     value_schema=input_point.value_schema,</span>
                            <span class="c1">#     value_refs=input_point,</span>
                            <span class="c1"># )</span>
                            <span class="c1"># self._data_registry.register_callback(</span>
                            <span class="c1">#     self.values_updated, step_input</span>
                            <span class="c1"># )</span>
                            <span class="c1"># all_step_inputs.setdefault(input_point.step_id, {})[</span>
                            <span class="c1">#     input_point.value_name</span>
                            <span class="c1"># ] = step_input</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Invalid value point type for this location: </span><span class="si">{</span><span class="n">input_point</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">pipeline_inputs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t init pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39;: no pipeline inputs&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_inputs</span> <span class="o">=</span> <span class="n">SlottedValueSet</span><span class="p">(</span>
            <span class="n">items</span><span class="o">=</span><span class="n">pipeline_inputs</span><span class="p">,</span>
            <span class="n">read_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Inputs for pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span>
            <span class="n">registry</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">pipeline_outputs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t init pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39;: no pipeline outputs&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_outputs</span> <span class="o">=</span> <span class="n">SlottedValueSet</span><span class="p">(</span>
            <span class="n">items</span><span class="o">=</span><span class="n">pipeline_outputs</span><span class="p">,</span>
            <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Outputs for pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
            <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span>
            <span class="n">registry</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_step_inputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">inputs</span> <span class="ow">in</span> <span class="n">all_step_inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_step_inputs</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">SlottedValueSet</span><span class="p">(</span>
                <span class="n">items</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span>
                <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Inputs for step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; of pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span>
                <span class="n">registry</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_step_outputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">step_id</span><span class="p">,</span> <span class="n">outputs</span> <span class="ow">in</span> <span class="n">all_step_outputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_step_outputs</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">SlottedValueSet</span><span class="p">(</span>
                <span class="n">read_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">items</span><span class="o">=</span><span class="n">outputs</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Outputs for step &#39;</span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39; of pipeline &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
                <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">,</span>
                <span class="n">registry</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_registry</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span> <span class="o">=</span> <span class="n">value_refs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">values_updated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">items</span><span class="p">:</span> <span class="n">ValueSlot</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="n">updated_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">updated_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">updated_pipeline_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">updated_pipeline_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># print(&quot;===================================================&quot;)</span>
        <span class="c1"># for item in items:</span>
        <span class="c1">#     print(item)</span>
        <span class="c1"># print(&quot;===================================================&quot;)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_status</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># means init is not finished yet</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>

            <span class="c1"># TODO: multiple value fields, also check pipeline id</span>
            <span class="n">references</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">references</span>

            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">references</span><span class="p">:</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">StepInputRef</span><span class="p">):</span>
                    <span class="n">updated_inputs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">StepOutputRef</span><span class="p">):</span>
                    <span class="n">updated_outputs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">PipelineInputRef</span><span class="p">):</span>
                    <span class="n">updated_pipeline_inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">PipelineOutputRef</span><span class="p">):</span>
                    <span class="n">updated_pipeline_outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t update, invalid type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># print(&#39;========================================&#39;)</span>
        <span class="c1"># print(&#39;---&#39;)</span>
        <span class="c1"># print(&quot;Upaded pipeline input&quot;)</span>
        <span class="c1"># print(updated_pipeline_inputs)</span>
        <span class="c1"># print(&#39;---&#39;)</span>
        <span class="c1"># print(&quot;Upaded step inputs&quot;)</span>
        <span class="c1"># print(updated_inputs)</span>
        <span class="c1"># print(&#39;---&#39;)</span>
        <span class="c1"># print(&quot;Upaded step outputs&quot;)</span>
        <span class="c1"># print(updated_outputs)</span>
        <span class="c1"># print(&#39;---&#39;)</span>
        <span class="c1"># print(&quot;Upaded pipeline outputs&quot;)</span>
        <span class="c1"># print(updated_pipeline_outputs)</span>

        <span class="k">if</span> <span class="n">updated_pipeline_inputs</span><span class="p">:</span>
            <span class="n">event_pi</span> <span class="o">=</span> <span class="n">PipelineInputEvent</span><span class="p">(</span>
                <span class="n">pipeline_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">updated_pipeline_inputs</span><span class="o">=</span><span class="n">updated_pipeline_inputs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_controller</span><span class="o">.</span><span class="n">pipeline_inputs_changed</span><span class="p">(</span><span class="n">event_pi</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_notify_pipeline_listeners</span><span class="p">(</span><span class="n">event_pi</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">updated_outputs</span><span class="p">:</span>
            <span class="n">event_so</span> <span class="o">=</span> <span class="n">StepOutputEvent</span><span class="p">(</span>
                <span class="n">pipeline_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">updated_step_outputs</span><span class="o">=</span><span class="n">updated_outputs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_controller</span><span class="o">.</span><span class="n">step_outputs_changed</span><span class="p">(</span><span class="n">event_so</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_notify_pipeline_listeners</span><span class="p">(</span><span class="n">event_so</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">updated_inputs</span><span class="p">:</span>
            <span class="n">event_si</span> <span class="o">=</span> <span class="n">StepInputEvent</span><span class="p">(</span>
                <span class="n">pipeline_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">updated_step_inputs</span><span class="o">=</span><span class="n">updated_inputs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_controller</span><span class="o">.</span><span class="n">step_inputs_changed</span><span class="p">(</span><span class="n">event_si</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_notify_pipeline_listeners</span><span class="p">(</span><span class="n">event_si</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">updated_pipeline_outputs</span><span class="p">:</span>
            <span class="n">event_po</span> <span class="o">=</span> <span class="n">PipelineOutputEvent</span><span class="p">(</span>
                <span class="n">pipeline_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">updated_pipeline_outputs</span><span class="o">=</span><span class="n">updated_pipeline_outputs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_controller</span><span class="o">.</span><span class="n">pipeline_outputs_changed</span><span class="p">(</span><span class="n">event_po</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_notify_pipeline_listeners</span><span class="p">(</span><span class="n">event_po</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_notify_pipeline_listeners</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">StepEvent</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">listener</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listeners</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;step_input&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                <span class="n">listener</span><span class="o">.</span><span class="n">step_inputs_changed</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;step_output&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                <span class="n">listener</span><span class="o">.</span><span class="n">step_outputs_changed</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;pipeline_input&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                <span class="n">listener</span><span class="o">.</span><span class="n">pipeline_inputs_changed</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;pipeline_output&quot;</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
                <span class="n">listener</span><span class="o">.</span><span class="n">pipeline_outputs_changed</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported type: </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="k">def</span> <span class="nf">get_current_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineState&quot;</span><span class="p">:</span>

        <span class="n">step_inputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">step_states</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_step_inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">step_inputs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">PipelineValuesInfo</span><span class="o">.</span><span class="n">from_value_set</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>
                <span class="n">step_states</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">INPUTS_READY</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">step_states</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">STALE</span>

        <span class="n">step_outputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_step_outputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">step_outputs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">PipelineValuesInfo</span><span class="o">.</span><span class="n">from_value_set</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">items_are_valid</span><span class="p">():</span>
                <span class="n">step_states</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">StepStatus</span><span class="o">.</span><span class="n">RESULTS_READY</span>

        <span class="kn">from</span> <span class="nn">kiara.info.pipelines</span> <span class="kn">import</span> <span class="n">PipelineState</span>

        <span class="n">state</span> <span class="o">=</span> <span class="n">PipelineState</span><span class="p">(</span>
            <span class="n">structure</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">to_details</span><span class="p">(),</span>
            <span class="n">pipeline_inputs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_inputs</span><span class="o">.</span><span class="n">to_details</span><span class="p">(),</span>
            <span class="n">pipeline_outputs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pipeline_outputs</span><span class="o">.</span><span class="n">to_details</span><span class="p">(),</span>
            <span class="n">step_states</span><span class="o">=</span><span class="n">step_states</span><span class="p">,</span>
            <span class="n">step_inputs</span><span class="o">=</span><span class="n">step_inputs</span><span class="p">,</span>
            <span class="n">step_outputs</span><span class="o">=</span><span class="n">step_outputs</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">state</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">








  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.pipeline.Pipeline.inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">inputs</span><span class="p">:</span> <span class="n">SlottedValueSet</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.pipeline.Pipeline.inputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>All (pipeline) input values of this pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.pipeline.Pipeline.outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">outputs</span><span class="p">:</span> <span class="n">SlottedValueSet</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.pipeline.Pipeline.outputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>All (pipeline) output values of this pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.pipeline.Pipeline.status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">status</span><span class="p">:</span> <span class="n">StepStatus</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.pipeline.Pipeline.status" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return the current status of this pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.pipeline.Pipeline.step_ids" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_ids</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#kiara.pipeline.pipeline.Pipeline.step_ids" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return all ids of the steps of this pipeline.</p>
    </div>

  </div>












  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.pipeline.Pipeline.add_listener" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_listener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listener</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.add_listener" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Add a listener taht gets notified on any internal pipeline input/output events.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_listener</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listener</span><span class="p">:</span> <span class="n">PipelineListener</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add a listener taht gets notified on any internal pipeline input/output events.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_listeners</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">listener</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.pipeline.Pipeline.get_pipeline_inputs_by_stage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_pipeline_inputs_by_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.get_pipeline_inputs_by_stage" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return a list of pipeline input names, ordered by stage they are first required.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_pipeline_inputs_by_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a list of pipeline input names, ordered by stage they are first required.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># type: ignore</span>
        <span class="n">refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span><span class="p">[</span><span class="n">v</span><span class="p">]</span>
        <span class="n">min_stage</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span>
        <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">refs</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">StepInputRef</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">ref</span><span class="o">.</span><span class="n">step_id</span><span class="p">)</span>
            <span class="n">stage</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">processing_stage</span>
            <span class="k">assert</span> <span class="n">stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">stage</span> <span class="o">&lt;</span> <span class="n">min_stage</span><span class="p">:</span>
                <span class="n">min_stage</span> <span class="o">=</span> <span class="n">stage</span>  <span class="c1"># type: ignore</span>
            <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">min_stage</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inputs_by_stage</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.pipeline.Pipeline.get_pipeline_inputs_for_stage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_pipeline_inputs_for_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.get_pipeline_inputs_for_stage" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return a list of pipeline inputs that are required for a stage to be processed.</p>
<p>The result of this method does not include inputs that were required earlier already.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_pipeline_inputs_for_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Return a list of pipeline inputs that are required for a stage to be processed.</span>

<span class="sd">    The result of this method does not include inputs that were required earlier already.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pipeline_inputs_by_stage</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="p">[])</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.pipeline.Pipeline.get_pipeline_outputs_by_stage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_pipeline_outputs_by_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.get_pipeline_outputs_by_stage" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return a list of pipeline input names, ordered by the stage that needs to be executed before they are available.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_pipeline_outputs_by_stage</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a list of pipeline input names, ordered by the stage that needs to be executed before they are available.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">_value_slots</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># type: ignore</span>
        <span class="n">refs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_refs</span><span class="p">[</span><span class="n">v</span><span class="p">]</span>
        <span class="n">min_stage</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span>
        <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">refs</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">StepOutputRef</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">ref</span><span class="o">.</span><span class="n">step_id</span><span class="p">)</span>
            <span class="n">stage</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">processing_stage</span>
            <span class="k">assert</span> <span class="n">stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">stage</span> <span class="o">&lt;</span> <span class="n">min_stage</span><span class="p">:</span>
                <span class="n">min_stage</span> <span class="o">=</span> <span class="n">stage</span>  <span class="c1"># type: ignore</span>
            <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">min_stage</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_outputs_by_stage</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.pipeline.Pipeline.get_pipeline_outputs_for_stage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_pipeline_outputs_for_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.get_pipeline_outputs_for_stage" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return a list of pipeline outputs that are first available after the specified stage completed processing.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_pipeline_outputs_for_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Return a list of pipeline outputs that are first available after the specified stage completed processing.&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pipeline_outputs_by_stage</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="p">[])</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.pipeline.Pipeline.get_step" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.get_step" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return the object representing a step in this workflow, identified by the step id.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineStep</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return the object representing a step in this workflow, identified by the step id.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.pipeline.Pipeline.get_step_inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_step_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.get_step_inputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return all inputs for a step id (incl. inputs that are not pipeline inputs but connected to other modules output).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_step_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return all inputs for a step id (incl. inputs that are not pipeline inputs but connected to other modules output).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_step_inputs</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.pipeline.Pipeline.get_step_outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_step_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.get_step_outputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return all outputs for a step id (incl. outputs that are not pipeline outputs).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_step_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ValueSet</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Return all outputs for a step id (incl. outputs that are not pipeline outputs).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_step_outputs</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.pipeline.Pipeline.get_steps_by_stage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_steps_by_stage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#kiara.pipeline.pipeline.Pipeline.get_steps_by_stage" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return a all pipeline steps, ordered by stage they belong to.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/pipeline.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_steps_by_stage</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a all pipeline steps, ordered by stage they belong to.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">step_ids</span><span class="p">:</span>
        <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
        <span class="n">stage</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">processing_stage</span>
        <span class="k">assert</span> <span class="n">stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="p">{})[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">step</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_by_stage</span>
</code></pre></div>
        </details>
    </div>

  </div>







  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="kiara.pipeline.structure" class="doc doc-heading">
        <code>structure</code>



<a href="#kiara.pipeline.structure" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.structure.PipelineStep" class="doc doc-heading">
        <code>
PipelineStep            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>A step within a pipeline-structure, includes information about it's connection(s) and other metadata.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/structure.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineStep</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A step within a pipeline-structure, includes information about it&#39;s connection(s) and other metadata.&quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">validate_assignment</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_steps</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">steps</span><span class="p">:</span> <span class="s2">&quot;PipelineStepConfig&quot;</span><span class="p">,</span> <span class="n">kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="s2">&quot;PipelineStep&quot;</span><span class="p">]:</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">PipelineStep</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara.module</span> <span class="kn">import</span> <span class="n">Kiara</span>

            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">steps</span><span class="p">:</span>

            <span class="n">_s</span> <span class="o">=</span> <span class="n">PipelineStep</span><span class="p">(</span>
                <span class="n">step_id</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span>
                <span class="n">module_type</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">module_type</span><span class="p">,</span>
                <span class="n">module_config</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">module_config</span><span class="p">),</span>
                <span class="n">input_links</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">input_links</span><span class="p">),</span>
                <span class="n">_kiara</span><span class="o">=</span><span class="n">kiara</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
            <span class="p">)</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_s</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="n">_module</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;step_id&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_validate_step_id</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Step ids can&#39;t contain &#39;.&#39; characters.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">v</span>

    <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The module type.&quot;</span><span class="p">)</span>
    <span class="n">module_config</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The module config.&quot;</span><span class="p">,</span> <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span>
    <span class="p">)</span>
    <span class="n">required</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether this step is required within the workflow.</span><span class="se">\n\n</span><span class="s2">In some cases, when none of the pipeline outputs have a required input that connects to a step, then it is not necessary for this step to have been executed, even if it is placed before a step in the execution hierarchy. This also means that the pipeline inputs that are connected to this step might not be required.&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">processing_stage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The stage number this step is executed within the pipeline.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">input_links</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">StepValueAddress</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The links that connect to inputs of the module.&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">_kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>  <span class="c1"># type: ignore</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
        <span class="n">kiara</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;_kiara&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">kiara</span> <span class="kn">import</span> <span class="n">Kiara</span>

            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="s2">&quot;Kiara&quot;</span> <span class="o">=</span> <span class="n">kiara</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">kiara</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">module</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KiaraModule&quot;</span><span class="p">:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">module_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kiara</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">profiles</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                    <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_config</span>
                <span class="p">):</span>
                    <span class="n">op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kiara</span><span class="o">.</span><span class="n">operation_mgmt</span><span class="o">.</span><span class="n">profiles</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_module</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">module</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_module</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kiara</span><span class="o">.</span><span class="n">create_module</span><span class="p">(</span>
                        <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span>
                        <span class="n">module_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="p">,</span>
                        <span class="n">module_config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">module_config</span><span class="p">,</span>
                    <span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t assemble pipeline step &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_id</span>

        <span class="c1"># # TODO: also check whether _kiara obj is equal?</span>
        <span class="c1"># eq = (self.step_id, self.parent_id, self.module, self.processing_stage,) == (</span>
        <span class="c1">#     other.step_id,</span>
        <span class="c1">#     other.parent_id,</span>
        <span class="c1">#     other.module,</span>
        <span class="c1">#     other.processing_stage,</span>
        <span class="c1"># )</span>
        <span class="c1">#</span>
        <span class="c1"># if not eq:</span>
        <span class="c1">#     return False</span>
        <span class="c1">#</span>
        <span class="c1"># hs = DeepHash(self.input_links)</span>
        <span class="c1"># ho = DeepHash(other.input_links)</span>
        <span class="c1">#</span>
        <span class="c1"># return hs[self.input_links] == ho[other.input_links]</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

        <span class="c1"># # TODO: also include _kiara obj?</span>
        <span class="c1"># # TODO: figure out whether that can be made to work without deephash</span>
        <span class="c1"># hs = DeepHash(self.input_links)</span>
        <span class="c1"># return hash(</span>
        <span class="c1">#     (</span>
        <span class="c1">#         self.step_id,</span>
        <span class="c1">#         self.parent_id,</span>
        <span class="c1">#         self.module,</span>
        <span class="c1">#         self.processing_stage,</span>
        <span class="c1">#         hs[self.input_links],</span>
        <span class="c1">#     )</span>
        <span class="c1"># )</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(step_id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2"> module_type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="si">}</span><span class="s2"> processing_stage=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">processing_stage</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;step: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2"> (module: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.structure.PipelineStep.input_links" class="doc doc-heading">
<code class="highlight language-python"><span class="n">input_links</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">StepValueAddress</span><span class="p">]]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.input_links" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The links that connect to inputs of the module.</p>
    </div>

  </div>





  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.structure.PipelineStep.module_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">module_config</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.module_config" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The module config.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.structure.PipelineStep.module_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">module_type</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.module_type" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The module type.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.structure.PipelineStep.processing_stage" class="doc doc-heading">
<code class="highlight language-python"><span class="n">processing_stage</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.processing_stage" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The stage number this step is executed within the pipeline.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.structure.PipelineStep.required" class="doc doc-heading">
<code class="highlight language-python"><span class="n">required</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.required" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Whether this step is required within the workflow.</p>
<p>In some cases, when none of the pipeline outputs have a required input that connects to a step, then it is not necessary for this step to have been executed, even if it is placed before a step in the execution hierarchy. This also means that the pipeline inputs that are connected to this step might not be required.</p>
    </div>

  </div>









  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.structure.PipelineStep.__eq__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.__eq__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return self==value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/structure.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_id</span>

    <span class="c1"># # TODO: also check whether _kiara obj is equal?</span>
    <span class="c1"># eq = (self.step_id, self.parent_id, self.module, self.processing_stage,) == (</span>
    <span class="c1">#     other.step_id,</span>
    <span class="c1">#     other.parent_id,</span>
    <span class="c1">#     other.module,</span>
    <span class="c1">#     other.processing_stage,</span>
    <span class="c1"># )</span>
    <span class="c1">#</span>
    <span class="c1"># if not eq:</span>
    <span class="c1">#     return False</span>
    <span class="c1">#</span>
    <span class="c1"># hs = DeepHash(self.input_links)</span>
    <span class="c1"># ho = DeepHash(other.input_links)</span>
    <span class="c1">#</span>
    <span class="c1"># return hs[self.input_links] == ho[other.input_links]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.structure.PipelineStep.__hash__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.__hash__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return hash(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/structure.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

    <span class="c1"># # TODO: also include _kiara obj?</span>
    <span class="c1"># # TODO: figure out whether that can be made to work without deephash</span>
    <span class="c1"># hs = DeepHash(self.input_links)</span>
    <span class="c1"># return hash(</span>
    <span class="c1">#     (</span>
    <span class="c1">#         self.step_id,</span>
    <span class="c1">#         self.parent_id,</span>
    <span class="c1">#         self.module,</span>
    <span class="c1">#         self.processing_stage,</span>
    <span class="c1">#         hs[self.input_links],</span>
    <span class="c1">#     )</span>
    <span class="c1"># )</span>
</code></pre></div>
        </details>
    </div>

  </div>





  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.structure.PipelineStep.__repr__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.__repr__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return repr(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/structure.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(step_id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2"> module_type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="si">}</span><span class="s2"> processing_stage=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">processing_stage</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.structure.PipelineStep.__str__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.structure.PipelineStep.__str__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return str(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/structure.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;step: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2"> (module: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">module_type</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.structure.PipelineStructure" class="doc doc-heading">
        <code>
PipelineStructure        </code>



<a href="#kiara.pipeline.structure.PipelineStructure" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>An object that holds one or several steps, and describes the connections between them.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/structure.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineStructure</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An object that holds one or several steps, and describes the connections between them.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="s2">&quot;PipelineConfig&quot;</span><span class="p">,</span>
        <span class="n">kiara</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;Kiara&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_structure_config</span><span class="p">:</span> <span class="s2">&quot;PipelineConfig&quot;</span> <span class="o">=</span> <span class="n">config</span>

        <span class="n">steps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure_config</span><span class="o">.</span><span class="n">steps</span>
        <span class="n">input_aliases</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure_config</span><span class="o">.</span><span class="n">input_aliases</span>
        <span class="n">output_aliases</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure_config</span><span class="o">.</span><span class="n">output_aliases</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">steps</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No steps provided.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">kiara</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kiara</span> <span class="o">=</span> <span class="n">Kiara</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span><span class="p">:</span> <span class="n">Kiara</span> <span class="o">=</span> <span class="n">kiara</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_steps</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">PipelineStep</span><span class="p">]</span> <span class="o">=</span> <span class="n">PipelineStep</span><span class="o">.</span><span class="n">create_steps</span><span class="p">(</span>
            <span class="o">*</span><span class="n">steps</span><span class="p">,</span> <span class="n">kiara</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_kiara</span>
        <span class="p">)</span>
        <span class="c1"># self._pipeline_id: str = parent_id</span>

        <span class="k">if</span> <span class="n">input_aliases</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">input_aliases</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">input_aliases</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">input_aliases</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ALLOWED_INPUT_ALIAS_MARKERS</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t create pipeline, invalid value &#39;</span><span class="si">{</span><span class="n">input_aliases</span><span class="si">}</span><span class="s2">&#39; for &#39;input_aliases&#39;. Either specify a dict, or use one of: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ALLOWED_INPUT_ALIAS_MARKERS</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="n">input_aliases</span> <span class="o">=</span> <span class="n">calculate_shortest_field_aliases</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_steps</span><span class="p">,</span> <span class="n">input_aliases</span><span class="p">,</span> <span class="s2">&quot;inputs&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">output_aliases</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">output_aliases</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ALLOWED_INPUT_ALIAS_MARKERS</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t create pipeline, invalid value &#39;</span><span class="si">{</span><span class="n">output_aliases</span><span class="si">}</span><span class="s2">&#39; for &#39;output_aliases&#39;. Either specify a dict, or use one of: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ALLOWED_INPUT_ALIAS_MARKERS</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="n">output_aliases</span> <span class="o">=</span> <span class="n">calculate_shortest_field_aliases</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_steps</span><span class="p">,</span> <span class="n">output_aliases</span><span class="p">,</span> <span class="s2">&quot;outputs&quot;</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_input_aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">input_aliases</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="k">if</span> <span class="n">output_aliases</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">output_aliases</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_output_aliases</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">output_aliases</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="c1"># this is hardcoded for now</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_all_workflow_outputs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_constants</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_execution_graph</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph_simple</span><span class="p">:</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_processing_stages</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_steps_details</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="sd">&quot;&quot;&quot;Holds details about the (current) processing steps contained in this workflow.&quot;&quot;&quot;</span>

    <span class="c1"># @property</span>
    <span class="c1"># def pipeline_id(self) -&gt; str:</span>
    <span class="c1">#     return self._pipeline_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">structure_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineConfig&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structure_config</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">steps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">PipelineStep</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">modules</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="s2">&quot;KiaraModule&quot;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">module</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">steps</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">steps_details</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_details</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_details</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">step_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_details</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_details</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">constants</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constants</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constants</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span>

    <span class="k">def</span> <span class="nf">get_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PipelineStep</span><span class="p">:</span>

        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steps_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">step_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">d</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No module with id: </span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;step&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_step_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepInputRef</span><span class="p">]:</span>

        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steps_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">step_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">d</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No module with id: </span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;inputs&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_step_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepOutputRef</span><span class="p">]:</span>

        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steps_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">step_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">d</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No module with id: </span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;outputs&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_step_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]:</span>

        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steps_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">step_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">d</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No module with id: </span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">d</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">execution_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execution_graph</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execution_graph</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data_flow_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data_flow_graph_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph_simple</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph_simple</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">processing_stages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_details</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processing_stages</span>

    <span class="nd">@lru_cache</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_get_node_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps_details</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_process_steps</span><span class="p">()</span>

        <span class="k">return</span> <span class="p">[</span>
            <span class="n">node</span>
            <span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">attr</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">node_type</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">steps_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepInputRef</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">node</span><span class="o">.</span><span class="n">alias</span><span class="p">:</span> <span class="n">node</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_of_type</span><span class="p">(</span><span class="n">node_type</span><span class="o">=</span><span class="n">StepInputRef</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">steps_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepOutputRef</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">node</span><span class="o">.</span><span class="n">alias</span><span class="p">:</span> <span class="n">node</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_of_type</span><span class="p">(</span><span class="n">node_type</span><span class="o">=</span><span class="n">StepOutputRef</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineInputRef</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">node</span><span class="o">.</span><span class="n">value_name</span><span class="p">:</span> <span class="n">node</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_of_type</span><span class="p">(</span><span class="n">node_type</span><span class="o">=</span><span class="n">PipelineInputRef</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineOutputRef</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">node</span><span class="o">.</span><span class="n">value_name</span><span class="p">:</span> <span class="n">node</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_of_type</span><span class="p">(</span><span class="n">node_type</span><span class="o">=</span><span class="n">PipelineOutputRef</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline_input_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="n">input_name</span><span class="p">:</span> <span class="n">w_in</span><span class="o">.</span><span class="n">value_schema</span>
            <span class="k">for</span> <span class="n">input_name</span><span class="p">,</span> <span class="n">w_in</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_inputs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pipeline_output_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueSchema</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">output_name</span><span class="p">:</span> <span class="n">w_out</span><span class="o">.</span><span class="n">value_schema</span>
            <span class="k">for</span> <span class="n">output_name</span><span class="p">,</span> <span class="n">w_out</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_outputs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">_process_steps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The core method of this class, it connects all the processing modules, their inputs and outputs.&quot;&quot;&quot;</span>

        <span class="n">steps_details</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">execution_graph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
        <span class="n">execution_graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">&quot;__root__&quot;</span><span class="p">)</span>
        <span class="n">data_flow_graph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
        <span class="n">data_flow_graph_simple</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
        <span class="n">processing_stages</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">constants</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">structure_defaults</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># temp variable, to hold all outputs</span>
        <span class="n">outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StepOutputRef</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># process all pipeline and step outputs first</span>
        <span class="n">_temp_steps_map</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">pipeline_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineOutputRef</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps</span><span class="p">:</span>

            <span class="n">_temp_steps_map</span><span class="p">[</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">step</span>

            <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">step_id</span> <span class="ow">in</span> <span class="n">steps_details</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t process steps: duplicate step_id &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                <span class="p">)</span>

            <span class="n">steps_details</span><span class="p">[</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="n">step</span><span class="p">,</span>
                <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="p">}</span>

            <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;step&quot;</span><span class="p">)</span>

            <span class="c1"># go through all the module outputs, create points for them and connect them to pipeline outputs</span>
            <span class="k">for</span> <span class="n">output_name</span><span class="p">,</span> <span class="n">schema</span> <span class="ow">in</span> <span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">output_schemas</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                <span class="n">step_output</span> <span class="o">=</span> <span class="n">StepOutputRef</span><span class="p">(</span>
                    <span class="n">value_name</span><span class="o">=</span><span class="n">output_name</span><span class="p">,</span>
                    <span class="n">value_schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span>
                    <span class="n">step_id</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="n">steps_details</span><span class="p">[</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">][</span><span class="s2">&quot;outputs&quot;</span><span class="p">][</span><span class="n">output_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">step_output</span>
                <span class="n">step_alias</span> <span class="o">=</span> <span class="n">generate_step_alias</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="n">output_name</span><span class="p">)</span>
                <span class="n">outputs</span><span class="p">[</span><span class="n">step_alias</span><span class="p">]</span> <span class="o">=</span> <span class="n">step_output</span>

                <span class="n">step_output_name</span> <span class="o">=</span> <span class="n">generate_pipeline_endpoint_name</span><span class="p">(</span>
                    <span class="n">step_id</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="n">output_name</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_aliases</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">step_output_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_aliases</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">step_output_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_aliases</span><span class="p">[</span><span class="n">step_output_name</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_all_workflow_outputs</span><span class="p">:</span>
                            <span class="c1"># this output is not interesting for the workflow</span>
                            <span class="n">step_output_name</span> <span class="o">=</span> <span class="kc">None</span>

                <span class="k">if</span> <span class="n">step_output_name</span><span class="p">:</span>
                    <span class="n">step_output_address</span> <span class="o">=</span> <span class="n">StepValueAddress</span><span class="p">(</span>
                        <span class="n">step_id</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="n">output_name</span>
                    <span class="p">)</span>
                    <span class="n">pipeline_output</span> <span class="o">=</span> <span class="n">PipelineOutputRef</span><span class="p">(</span>
                        <span class="n">value_name</span><span class="o">=</span><span class="n">step_output_name</span><span class="p">,</span>
                        <span class="n">connected_output</span><span class="o">=</span><span class="n">step_output_address</span><span class="p">,</span>
                        <span class="n">value_schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">pipeline_outputs</span><span class="p">[</span><span class="n">step_output_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">pipeline_output</span>
                    <span class="n">step_output</span><span class="o">.</span><span class="n">pipeline_output</span> <span class="o">=</span> <span class="n">pipeline_output</span><span class="o">.</span><span class="n">value_name</span>

                    <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span>
                        <span class="n">pipeline_output</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">PipelineOutputRef</span><span class="o">.</span><span class="vm">__name__</span>
                    <span class="p">)</span>
                    <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">step_output</span><span class="p">,</span> <span class="n">pipeline_output</span><span class="p">)</span>

                    <span class="n">data_flow_graph_simple</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span>
                        <span class="n">pipeline_output</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">PipelineOutputRef</span><span class="o">.</span><span class="vm">__name__</span>
                    <span class="p">)</span>
                    <span class="n">data_flow_graph_simple</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="n">pipeline_output</span><span class="p">)</span>

                <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">step_output</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">StepOutputRef</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
                <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="n">step_output</span><span class="p">)</span>

        <span class="c1"># now process inputs, and connect them to the appropriate output/pipeline-input points</span>
        <span class="n">existing_pipeline_input_points</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PipelineInputRef</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps</span><span class="p">:</span>

            <span class="n">other_step_dependency</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="c1"># go through all the inputs of a module, create input points and connect them to either</span>
            <span class="c1"># other module outputs, or pipeline inputs (which need to be created)</span>

            <span class="n">module_constants</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span>
                <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span>
            <span class="p">]</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;constants&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">input_name</span><span class="p">,</span> <span class="n">schema</span> <span class="ow">in</span> <span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">input_schemas</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                <span class="n">matching_input_links</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">StepValueAddress</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">is_constant</span> <span class="o">=</span> <span class="n">input_name</span> <span class="ow">in</span> <span class="n">module_constants</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

                <span class="k">for</span> <span class="n">value_name</span><span class="p">,</span> <span class="n">input_links</span> <span class="ow">in</span> <span class="n">step</span><span class="o">.</span><span class="n">input_links</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">value_name</span> <span class="o">==</span> <span class="n">input_name</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">input_link</span> <span class="ow">in</span> <span class="n">input_links</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">input_link</span> <span class="ow">in</span> <span class="n">matching_input_links</span><span class="p">:</span>
                                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicate input link: </span><span class="si">{</span><span class="n">input_link</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                            <span class="n">matching_input_links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_link</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">matching_input_links</span><span class="p">:</span>
                    <span class="c1"># this means we connect to other steps output</span>

                    <span class="n">connected_output_points</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">StepOutputRef</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">connected_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">StepValueAddress</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

                    <span class="k">for</span> <span class="n">input_link</span> <span class="ow">in</span> <span class="n">matching_input_links</span><span class="p">:</span>
                        <span class="n">output_id</span> <span class="o">=</span> <span class="n">generate_step_alias</span><span class="p">(</span>
                            <span class="n">input_link</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="n">input_link</span><span class="o">.</span><span class="n">value_name</span>
                        <span class="p">)</span>

                        <span class="k">if</span> <span class="n">output_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">outputs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;Can&#39;t connect input &#39;</span><span class="si">{</span><span class="n">input_name</span><span class="si">}</span><span class="s2">&#39; for step &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;: no output &#39;</span><span class="si">{</span><span class="n">output_id</span><span class="si">}</span><span class="s2">&#39; available. Available output names: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">outputs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
                            <span class="p">)</span>
                        <span class="n">connected_output_points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">outputs</span><span class="p">[</span><span class="n">output_id</span><span class="p">])</span>
                        <span class="n">connected_outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_link</span><span class="p">)</span>

                        <span class="n">other_step_dependency</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">input_link</span><span class="o">.</span><span class="n">step_id</span><span class="p">)</span>

                    <span class="n">step_input_point</span> <span class="o">=</span> <span class="n">StepInputRef</span><span class="p">(</span>
                        <span class="n">step_id</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span>
                        <span class="n">value_name</span><span class="o">=</span><span class="n">input_name</span><span class="p">,</span>
                        <span class="n">value_schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span>
                        <span class="n">is_constant</span><span class="o">=</span><span class="n">is_constant</span><span class="p">,</span>
                        <span class="n">connected_pipeline_input</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">connected_outputs</span><span class="o">=</span><span class="n">connected_outputs</span><span class="p">,</span>
                    <span class="p">)</span>

                    <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">connected_output_points</span><span class="p">:</span>
                        <span class="n">op</span><span class="o">.</span><span class="n">connected_inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">step_input_point</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
                        <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">step_input_point</span><span class="p">)</span>
                        <span class="n">data_flow_graph_simple</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span>
                            <span class="n">_temp_steps_map</span><span class="p">[</span><span class="n">op</span><span class="o">.</span><span class="n">step_id</span><span class="p">],</span> <span class="n">step_input_point</span>
                        <span class="p">)</span>  <span class="c1"># TODO: name edge</span>
                        <span class="n">data_flow_graph_simple</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span>
                            <span class="n">step_input_point</span><span class="p">,</span> <span class="n">step</span>
                        <span class="p">)</span>  <span class="c1"># TODO: name edge</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># this means we connect to pipeline input</span>
                    <span class="n">pipeline_input_name</span> <span class="o">=</span> <span class="n">generate_pipeline_endpoint_name</span><span class="p">(</span>
                        <span class="n">step_id</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="n">input_name</span>
                    <span class="p">)</span>
                    <span class="c1"># check whether this input has an alias associated with it</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_aliases</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">pipeline_input_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_aliases</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="c1"># this means we use the pipeline alias</span>
                            <span class="n">pipeline_input_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_aliases</span><span class="p">[</span>
                                <span class="n">pipeline_input_name</span>
                            <span class="p">]</span>

                    <span class="k">if</span> <span class="n">pipeline_input_name</span> <span class="ow">in</span> <span class="n">existing_pipeline_input_points</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="c1"># we already created a pipeline input with this name</span>
                        <span class="c1"># TODO: check whether schema fits</span>
                        <span class="n">connected_pipeline_input</span> <span class="o">=</span> <span class="n">existing_pipeline_input_points</span><span class="p">[</span>
                            <span class="n">pipeline_input_name</span>
                        <span class="p">]</span>
                        <span class="k">assert</span> <span class="n">connected_pipeline_input</span><span class="o">.</span><span class="n">is_constant</span> <span class="o">==</span> <span class="n">is_constant</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># we need to create the pipeline input</span>
                        <span class="n">connected_pipeline_input</span> <span class="o">=</span> <span class="n">PipelineInputRef</span><span class="p">(</span>
                            <span class="n">value_name</span><span class="o">=</span><span class="n">pipeline_input_name</span><span class="p">,</span>
                            <span class="n">value_schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span>
                            <span class="n">is_constant</span><span class="o">=</span><span class="n">is_constant</span><span class="p">,</span>
                        <span class="p">)</span>

                        <span class="n">existing_pipeline_input_points</span><span class="p">[</span>
                            <span class="n">pipeline_input_name</span>
                        <span class="p">]</span> <span class="o">=</span> <span class="n">connected_pipeline_input</span>

                        <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span>
                            <span class="n">connected_pipeline_input</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">PipelineInputRef</span><span class="o">.</span><span class="vm">__name__</span>
                        <span class="p">)</span>
                        <span class="n">data_flow_graph_simple</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span>
                            <span class="n">connected_pipeline_input</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">PipelineInputRef</span><span class="o">.</span><span class="vm">__name__</span>
                        <span class="p">)</span>
                        <span class="k">if</span> <span class="n">is_constant</span><span class="p">:</span>
                            <span class="n">constants</span><span class="p">[</span>
                                <span class="n">pipeline_input_name</span>
                            <span class="p">]</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;constants&quot;</span><span class="p">)[</span><span class="n">input_name</span><span class="p">]</span>

                        <span class="n">default_val</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">get_config_value</span><span class="p">(</span><span class="s2">&quot;defaults&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                            <span class="n">input_name</span><span class="p">,</span> <span class="kc">None</span>
                        <span class="p">)</span>
                        <span class="k">if</span> <span class="n">is_constant</span> <span class="ow">and</span> <span class="n">default_val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;Module config invalid for step &#39;</span><span class="si">{</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;: both default value and constant provided for input &#39;</span><span class="si">{</span><span class="n">input_name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
                            <span class="p">)</span>
                        <span class="k">elif</span> <span class="n">default_val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">structure_defaults</span><span class="p">[</span><span class="n">pipeline_input_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">default_val</span>

                    <span class="n">step_input_point</span> <span class="o">=</span> <span class="n">StepInputRef</span><span class="p">(</span>
                        <span class="n">step_id</span><span class="o">=</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span>
                        <span class="n">value_name</span><span class="o">=</span><span class="n">input_name</span><span class="p">,</span>
                        <span class="n">value_schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span>
                        <span class="n">connected_pipeline_input</span><span class="o">=</span><span class="n">connected_pipeline_input</span><span class="o">.</span><span class="n">value_name</span><span class="p">,</span>
                        <span class="n">connected_outputs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">connected_pipeline_input</span><span class="o">.</span><span class="n">connected_inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">step_input_point</span><span class="o">.</span><span class="n">address</span>
                    <span class="p">)</span>
                    <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">connected_pipeline_input</span><span class="p">,</span> <span class="n">step_input_point</span><span class="p">)</span>
                    <span class="n">data_flow_graph_simple</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">connected_pipeline_input</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>

                <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">step_input_point</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">StepInputRef</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

                <span class="n">steps_details</span><span class="p">[</span><span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">][</span><span class="s2">&quot;inputs&quot;</span><span class="p">][</span><span class="n">input_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">step_input_point</span>

                <span class="n">data_flow_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">step_input_point</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">other_step_dependency</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">module_id</span> <span class="ow">in</span> <span class="n">other_step_dependency</span><span class="p">:</span>
                    <span class="n">execution_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">module_id</span><span class="p">,</span> <span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">execution_graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">&quot;__root__&quot;</span><span class="p">,</span> <span class="n">step</span><span class="o">.</span><span class="n">step_id</span><span class="p">)</span>

        <span class="c1"># calculate execution order</span>
        <span class="n">path_lengths</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_steps</span><span class="p">:</span>

            <span class="n">step_id</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">step_id</span>

            <span class="n">paths</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">all_simple_paths</span><span class="p">(</span><span class="n">execution_graph</span><span class="p">,</span> <span class="s2">&quot;__root__&quot;</span><span class="p">,</span> <span class="n">step_id</span><span class="p">))</span>
            <span class="n">max_steps</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">paths</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="n">path_lengths</span><span class="p">[</span><span class="n">step_id</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">max_steps</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>

        <span class="n">max_length</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">path_lengths</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">stage</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">m</span> <span class="k">for</span> <span class="n">m</span><span class="p">,</span> <span class="n">length</span> <span class="ow">in</span> <span class="n">path_lengths</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">length</span> <span class="o">==</span> <span class="n">i</span>
            <span class="p">]</span>
            <span class="n">processing_stages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stage</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">_step_id</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">:</span>
                <span class="n">steps_details</span><span class="p">[</span><span class="n">_step_id</span><span class="p">][</span><span class="s2">&quot;processing_stage&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
                <span class="n">steps_details</span><span class="p">[</span><span class="n">_step_id</span><span class="p">][</span><span class="s2">&quot;step&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">processing_stage</span> <span class="o">=</span> <span class="n">i</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_constants</span> <span class="o">=</span> <span class="n">constants</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_defaults</span> <span class="o">=</span> <span class="n">structure_defaults</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_steps_details</span> <span class="o">=</span> <span class="n">steps_details</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execution_graph</span> <span class="o">=</span> <span class="n">execution_graph</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph</span> <span class="o">=</span> <span class="n">data_flow_graph</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph_simple</span> <span class="o">=</span> <span class="n">data_flow_graph_simple</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_processing_stages</span> <span class="o">=</span> <span class="n">processing_stages</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_of_type</span><span class="o">.</span><span class="n">cache_clear</span><span class="p">()</span>

        <span class="c1"># calculating which steps are always required to execute to compute one of the required pipeline outputs.</span>
        <span class="c1"># this is done because in some cases it&#39;s possible that some steps can be skipped to execute if they</span>
        <span class="c1"># don&#39;t have a valid input set, because the inputs downstream they are connecting to are &#39;non-required&#39;</span>
        <span class="c1"># optional_steps = []</span>

        <span class="n">last_stage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processing_stages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">step_nodes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">PipelineStep</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">node</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph_simple</span><span class="o">.</span><span class="n">nodes</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">PipelineStep</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="n">all_required_inputs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">last_stage</span><span class="p">:</span>

            <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
            <span class="n">step_nodes</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">s_inp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_inputs</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">s_inp</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">is_required</span><span class="p">():</span>
                    <span class="k">continue</span>
                <span class="n">all_required_inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s_inp</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">pipeline_input</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_inputs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>

            <span class="k">for</span> <span class="n">last_step_input</span> <span class="ow">in</span> <span class="n">all_required_inputs</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">path</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_data_flow_graph_simple</span><span class="p">,</span> <span class="n">pipeline_input</span><span class="p">,</span> <span class="n">last_step_input</span>
                    <span class="p">)</span>
                    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">step_nodes</span><span class="p">:</span>
                            <span class="n">step_nodes</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
                <span class="k">except</span> <span class="p">(</span><span class="n">NetworkXNoPath</span><span class="p">,</span> <span class="n">NodeNotFound</span><span class="p">):</span>
                    <span class="k">pass</span>
                    <span class="c1"># print(&quot;NO PATH&quot;)</span>
                    <span class="c1"># print(f&quot;{pipeline_input} -&gt; {last_step_input}&quot;)</span>

        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">step_nodes</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">required</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">for</span> <span class="n">input_name</span><span class="p">,</span> <span class="n">inp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">steps</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">ci</span> <span class="ow">in</span> <span class="n">inp</span><span class="o">.</span><span class="n">connected_inputs</span><span class="p">:</span>
                <span class="n">steps</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ci</span><span class="o">.</span><span class="n">step_id</span><span class="p">)</span>

            <span class="n">optional</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="n">step_id</span> <span class="ow">in</span> <span class="n">steps</span><span class="p">:</span>
                <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step</span><span class="p">(</span><span class="n">step_id</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">required</span><span class="p">:</span>
                    <span class="n">optional</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="n">optional</span><span class="p">:</span>
                <span class="n">inp</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">optional</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">extend</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">other</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
            <span class="s2">&quot;Pipeline&quot;</span><span class="p">,</span>
            <span class="s2">&quot;PipelineStructure&quot;</span><span class="p">,</span>
            <span class="s2">&quot;PipelineConfig&quot;</span><span class="p">,</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">],</span>
        <span class="p">],</span>
        <span class="n">input_links</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span>
            <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n">StepValueAddress</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineStructure&quot;</span><span class="p">:</span>

        <span class="k">return</span> <span class="n">extend_pipeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_details</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PipelineStructureDesc&quot;</span><span class="p">:</span>

        <span class="kn">from</span> <span class="nn">kiara.info.pipelines</span> <span class="kn">import</span> <span class="n">PipelineStructureDesc</span>

        <span class="k">return</span> <span class="n">PipelineStructureDesc</span><span class="o">.</span><span class="n">create_pipeline_structure_desc</span><span class="p">(</span><span class="n">pipeline</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__rich_console__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">console</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">ConsoleOptions</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderResult</span><span class="p">:</span>

        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_details</span><span class="p">()</span>
        <span class="k">yield</span> <span class="n">d</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">




































  </div>

    </div>

  </div>









  </div>

    </div>

  </div>




  <div class="doc doc-object doc-module">



<h2 id="kiara.pipeline.values" class="doc doc-heading">
        <code>values</code>



<a href="#kiara.pipeline.values" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.values.PipelineInputRef" class="doc doc-heading">
        <code>
PipelineInputRef            (<a title="kiara.pipeline.values.ValueRef" href="../values/#kiara.pipeline.values.ValueRef">ValueRef</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.values.PipelineInputRef" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>An input to a pipeline.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineInputRef</span><span class="p">(</span><span class="n">ValueRef</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An input to a pipeline.&quot;&quot;&quot;</span>

    <span class="n">connected_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">StepValueAddress</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The step inputs that are connected to this pipeline input&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">is_constant</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="s2">&quot;Whether this input is a constant and can&#39;t be changed by the user.&quot;</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">generate_step_alias</span><span class="p">(</span><span class="n">PIPELINE_PARENT_MARKER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.values.PipelineInputRef.connected_inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">connected_inputs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">StepValueAddress</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.values.PipelineInputRef.connected_inputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The step inputs that are connected to this pipeline input</p>
    </div>

  </div>












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.values.PipelineOutputRef" class="doc doc-heading">
        <code>
PipelineOutputRef            (<a title="kiara.pipeline.values.ValueRef" href="../values/#kiara.pipeline.values.ValueRef">ValueRef</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.values.PipelineOutputRef" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>An output to a pipeline.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PipelineOutputRef</span><span class="p">(</span><span class="n">ValueRef</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An output to a pipeline.&quot;&quot;&quot;</span>

    <span class="n">connected_output</span><span class="p">:</span> <span class="n">StepValueAddress</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Connected step outputs.&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">generate_step_alias</span><span class="p">(</span><span class="n">PIPELINE_PARENT_MARKER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.values.PipelineOutputRef.connected_output" class="doc doc-heading">
<code class="highlight language-python"><span class="n">connected_output</span><span class="p">:</span> <span class="n">StepValueAddress</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.values.PipelineOutputRef.connected_output" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Connected step outputs.</p>
    </div>

  </div>











  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.values.StepInputRef" class="doc doc-heading">
        <code>
StepInputRef            (<a title="kiara.pipeline.values.ValueRef" href="../values/#kiara.pipeline.values.ValueRef">ValueRef</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.values.StepInputRef" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>An input to a step.</p>
<p>This object can either have a 'connected_outputs' set, or a 'connected_pipeline_input', not both.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StepInputRef</span><span class="p">(</span><span class="n">ValueRef</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An input to a step.</span>

<span class="sd">    This object can either have a &#39;connected_outputs&#39; set, or a &#39;connected_pipeline_input&#39;, not both.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The step id.&quot;</span><span class="p">)</span>
    <span class="n">connected_outputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">StepValueAddress</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A potential connected list of one or several module outputs.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">connected_pipeline_input</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A potential pipeline input.&quot;</span>
    <span class="p">)</span>
    <span class="n">is_constant</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="s2">&quot;Whether this input is a constant and can&#39;t be changed by the user.&quot;</span>
    <span class="p">)</span>

    <span class="nd">@root_validator</span><span class="p">(</span><span class="n">pre</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">ensure_single_connected_item</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;connected_outputs&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&quot;connected_pipeline_input&quot;</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Multiple connected items, only one allowed.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">values</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">generate_step_alias</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StepValueAddress</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">StepValueAddress</span><span class="p">(</span><span class="n">step_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">camel_case_to_snake_case</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">5</span><span class="p">],</span> <span class="n">repl</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">








  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.values.StepInputRef.connected_outputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">connected_outputs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">StepValueAddress</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.values.StepInputRef.connected_outputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A potential connected list of one or several module outputs.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.values.StepInputRef.connected_pipeline_input" class="doc doc-heading">
<code class="highlight language-python"><span class="n">connected_pipeline_input</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.values.StepInputRef.connected_pipeline_input" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>A potential pipeline input.</p>
    </div>

  </div>




  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.values.StepInputRef.step_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.values.StepInputRef.step_id" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The step id.</p>
    </div>

  </div>













  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.values.StepOutputRef" class="doc doc-heading">
        <code>
StepOutputRef            (<a title="kiara.pipeline.values.ValueRef" href="../values/#kiara.pipeline.values.ValueRef">ValueRef</a>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.values.StepOutputRef" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>An output to a step.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">StepOutputRef</span><span class="p">(</span><span class="n">ValueRef</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An output to a step.&quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">allow_mutation</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The step id.&quot;</span><span class="p">)</span>
    <span class="n">pipeline_output</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The connected pipeline output.&quot;</span>
    <span class="p">)</span>
    <span class="n">connected_inputs</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">StepValueAddress</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The step inputs that are connected to this step output&quot;</span><span class="p">,</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">alias</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">generate_step_alias</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">address</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StepValueAddress</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">StepValueAddress</span><span class="p">(</span><span class="n">step_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">camel_case_to_snake_case</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">5</span><span class="p">],</span> <span class="n">repl</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">








  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.values.StepOutputRef.connected_inputs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">connected_inputs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">kiara</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">StepValueAddress</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.values.StepOutputRef.connected_inputs" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The step inputs that are connected to this step output</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.values.StepOutputRef.pipeline_output" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_output</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#kiara.pipeline.values.StepOutputRef.pipeline_output" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The connected pipeline output.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h4 id="kiara.pipeline.values.StepOutputRef.step_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#kiara.pipeline.values.StepOutputRef.step_id" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>The step id.</p>
    </div>

  </div>













  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="kiara.pipeline.values.ValueRef" class="doc doc-heading">
        <code>
ValueRef            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#kiara.pipeline.values.ValueRef" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>An object that holds information about the location of a value within a pipeline (or other structure).</p>
<p>Basically, a <code>ValueRef</code> helps the containing object where in its structure the value belongs (for example so
it can update dependent other values). A <code>ValueRef</code> object (obviously) does not contain the value itself.</p>
<p>There are four different ValueRef type that are relevant for pipelines:</p>
<ul>
<li><a href="../values/#kiara.pipeline.values.StepInputRef">kiara.pipeline.values.StepInputRef</a>: an input to a step</li>
<li><a href="../values/#kiara.pipeline.values.StepOutputRef">kiara.pipeline.values.StepOutputRef</a>: an output of a step</li>
<li><a href="../values/#kiara.pipeline.values.PipelineInputRef">kiara.pipeline.values.PipelineInputRef</a>: an input to a pipeline</li>
<li><a href="../values/#kiara.pipeline.values.PipelineOutputRef">kiara.pipeline.values.PipelineOutputRef</a>: an output for a pipeline</li>
</ul>
<p>Several <code>ValueRef</code> objects can target the same value, for example a step output and a connected step input would
reference the same <code>Value</code> (in most cases)..</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ValueRef</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An object that holds information about the location of a value within a pipeline (or other structure).</span>

<span class="sd">    Basically, a `ValueRef` helps the containing object where in its structure the value belongs (for example so</span>
<span class="sd">    it can update dependent other values). A `ValueRef` object (obviously) does not contain the value itself.</span>

<span class="sd">    There are four different ValueRef type that are relevant for pipelines:</span>

<span class="sd">    - [kiara.pipeline.values.StepInputRef][]: an input to a step</span>
<span class="sd">    - [kiara.pipeline.values.StepOutputRef][]: an output of a step</span>
<span class="sd">    - [kiara.pipeline.values.PipelineInputRef][]: an input to a pipeline</span>
<span class="sd">    - [kiara.pipeline.values.PipelineOutputRef][]: an output for a pipeline</span>

<span class="sd">    Several `ValueRef` objects can target the same value, for example a step output and a connected step input would</span>
<span class="sd">    reference the same `Value` (in most cases)..</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">allow_mutation</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="n">Extra</span><span class="o">.</span><span class="n">forbid</span>

    <span class="n">_id</span><span class="p">:</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">)</span>
    <span class="n">value_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">value_schema</span><span class="p">:</span> <span class="n">ValueSchema</span>
    <span class="c1"># pipeline_id: str</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_id</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">step_id</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;step_id&quot;</span><span class="p">):</span>
            <span class="n">step_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; step_id=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(value_name=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">camel_case_to_snake_case</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">5</span><span class="p">],</span> <span class="n">repl</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">













  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.values.ValueRef.__eq__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.values.ValueRef.__eq__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return self==value.</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_id</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.values.ValueRef.__hash__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.values.ValueRef.__hash__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return hash(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.values.ValueRef.__repr__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.values.ValueRef.__repr__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return repr(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">step_id</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;step_id&quot;</span><span class="p">):</span>
        <span class="n">step_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; step_id=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_id</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(value_name=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">step_id</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="kiara.pipeline.values.ValueRef.__str__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#kiara.pipeline.values.ValueRef.__str__" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Return str(self).</p>

        <details class="quote">
          <summary>Source code in <code>kiara/pipeline/values.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">camel_case_to_snake_case</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">5</span><span class="p">],</span> <span class="n">repl</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value_schema</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../../operations/store_value/" class="md-footer__link md-footer__link--prev" aria-label="Previous: store_value" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              store_value
            </div>
          </div>
        </a>
      
      
        
        <a href="../config/" class="md-footer__link md-footer__link--next" aria-label="Next: config" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              config
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      DHARPA project
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.instant", "navigation.tracking"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../../assets/javascripts/workers/search.bd0b6b67.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.8aa65030.min.js"></script>
      
    
  </body>
</html>